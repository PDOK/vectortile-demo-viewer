(self.webpackChunkview_component=self.webpackChunkview_component||[]).push([[179],{646:(Ke,_n,oi)=>{"use strict";let Jt=null,rt=1;function Ht(n){const t=Jt;return Jt=n,t}function ie(n){if((!pe(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==rt)){if(!n.producerMustRecompute(n)&&!Xt(n))return n.dirty=!1,void(n.lastCleanEpoch=rt);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=rt}}function Xt(n){ue(n);for(let t=0;t<n.producerNode.length;t++){const e=n.producerNode[t],i=n.producerLastReadVersion[t];if(i!==e.version||(ie(e),i!==e.version))return!0}return!1}function At(n,t){if(s=n,s.liveConsumerNode??=[],s.liveConsumerIndexOfThis??=[],ue(n),1===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)At(n.producerNode[i],n.producerIndexOfThis[i]);var s;const e=n.liveConsumerNode.length-1;if(n.liveConsumerNode[t]=n.liveConsumerNode[e],n.liveConsumerIndexOfThis[t]=n.liveConsumerIndexOfThis[e],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,t<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[t],s=n.liveConsumerNode[t];ue(s),s.producerIndexOfThis[i]=t}}function pe(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function ue(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let Xe=null;function vt(n){return"function"==typeof n}function Ve(n){const t=n(e=>{Error.call(e),e.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Nt=Ve(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((e,i)=>`${i+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Re(n,t){if(n){const e=n.indexOf(t);0<=e&&n.splice(e,1)}}class Fe{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const r of e)r.remove(this);else e.remove(this);const{initialTeardown:i}=this;if(vt(i))try{i()}catch(r){t=r instanceof Nt?r.errors:[r]}const{_finalizers:s}=this;if(s){this._finalizers=null;for(const r of s)try{it(r)}catch(o){t=t??[],o instanceof Nt?t=[...t,...o.errors]:t.push(o)}}if(t)throw new Nt(t)}}add(t){var e;if(t&&t!==this)if(this.closed)it(t);else{if(t instanceof Fe){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&Re(e,t)}remove(t){const{_finalizers:e}=this;e&&Re(e,t),t instanceof Fe&&t._removeParent(this)}}Fe.EMPTY=(()=>{const n=new Fe;return n.closed=!0,n})();const O=Fe.EMPTY;function W(n){return n instanceof Fe||n&&"closed"in n&&vt(n.remove)&&vt(n.add)&&vt(n.unsubscribe)}function it(n){vt(n)?n():n.unsubscribe()}const dt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},yt={setTimeout(n,t,...e){const{delegate:i}=yt;return i?.setTimeout?i.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){const{delegate:t}=yt;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function b(n){yt.setTimeout(()=>{const{onUnhandledError:t}=dt;if(!t)throw n;t(n)})}function k(){}const Z=ft("C",void 0,void 0);function ft(n,t,e){return{kind:n,value:t,error:e}}let ht=null;function Vt(n){if(dt.useDeprecatedSynchronousErrorHandling){const t=!ht;if(t&&(ht={errorThrown:!1,error:null}),n(),t){const{errorThrown:e,error:i}=ht;if(ht=null,e)throw i}}else n()}class kt extends Fe{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,W(t)&&t.add(this)):this.destination=Ye}static create(t,e,i){return new ai(t,e,i)}next(t){this.isStopped?Me(ft("N",t,void 0),this):this._next(t)}error(t){this.isStopped?Me(ft("E",void 0,t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Me(Z,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const tt=Function.prototype.bind;function Dt(n,t){return tt.call(n,t)}class Pt{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(i){Ce(i)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(i){Ce(i)}else Ce(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Ce(e)}}}class ai extends kt{constructor(t,e,i){let s;if(super(),vt(t)||!t)s={next:t??void 0,error:e??void 0,complete:i??void 0};else{let r;this&&dt.useDeprecatedNextContext?(r=Object.create(t),r.unsubscribe=()=>this.unsubscribe(),s={next:t.next&&Dt(t.next,r),error:t.error&&Dt(t.error,r),complete:t.complete&&Dt(t.complete,r)}):s=t}this.destination=new Pt(s)}}function Ce(n){var e;dt.useDeprecatedSynchronousErrorHandling?(e=n,dt.useDeprecatedSynchronousErrorHandling&&ht&&(ht.errorThrown=!0,ht.error=e)):b(n)}function Me(n,t){const{onStoppedNotification:e}=dt;e&&yt.setTimeout(()=>e(n,t))}const Ye={closed:!0,next:k,error:function(t){throw t},complete:k},Rr="function"==typeof Symbol&&Symbol.observable||"@@observable";function Vn(n){return n}let ki=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){const i=new n;return i.source=this,i.operator=e,i}subscribe(e,i,s){const r=(a=e)&&a instanceof kt||(h=a)&&vt(h.next)&&vt(h.error)&&vt(h.complete)&&W(a)?e:new ai(e,i,s);var a,h;return Vt(()=>{const{operator:o,source:a}=this;r.add(o?o.call(r,a):a?this._subscribe(r):this._trySubscribe(r))}),r}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return new(i=tn(i))((s,r)=>{const o=new ai({next:a=>{try{e(a)}catch(l){r(l),o.unsubscribe()}},error:r,complete:s});this.subscribe(o)})}_subscribe(e){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(e)}[Rr](){return this}pipe(...e){return(0===(s=e).length?Vn:1===s.length?s[0]:function(r){return s.reduce((o,a)=>a(o),r)})(this);var s}toPromise(e){return new(e=tn(e))((i,s)=>{let r;this.subscribe(o=>r=o,o=>s(o),()=>i(r))})}}return n.create=t=>new n(t),n})();function tn(n){var t;return null!==(t=n??dt.Promise)&&void 0!==t?t:Promise}const hh=Ve(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Hs=(()=>{class n extends ki{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const i=new Ra(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new hh}next(e){Vt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(e)}})}error(e){Vt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){Vt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:i,isStopped:s,observers:r}=this;return i||s?O:(this.currentObservers=null,r.push(e),new Fe(()=>{this.currentObservers=null,Re(r,e)}))}_checkFinalizedStatuses(e){const{hasError:i,thrownError:s,isStopped:r}=this;i?e.error(s):r&&e.complete()}asObservable(){const e=new ki;return e.source=this,e}}return n.create=(t,e)=>new Ra(t,e),n})();class Ra extends Hs{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===i||i.call(e,t)}error(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===i||i.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,i;return null!==(i=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==i?i:O}}function en(n){return t=>{if(i=t,vt(i?.lift))return t.lift(function(e){try{return n(e,this)}catch(i){this.error(i)}});var i;throw new TypeError("Unable to lift unknown Observable type")}}function ln(n,t,e,i,s){return new uh(n,t,e,i,s)}class uh extends kt{constructor(t,e,i,s,r,o){super(t),this.onFinalize=r,this.shouldUnsubscribe=o,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=s?function(a){try{s(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function Rn(n,t){return en((e,i)=>{let s=0;e.subscribe(ln(i,r=>{i.next(n.call(t,r,s++))}))})}function Us(n){return this instanceof Us?(this.v=n,this):new Us(n)}"function"==typeof SuppressedError&&SuppressedError;const Fa=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function uo(n){return vt(n?.then)}function Fr(n){return vt(n[Rr])}function bs(n){return Symbol.asyncIterator&&vt(n?.[Symbol.asyncIterator])}function I(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const j="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function X(n){return vt(n?.[j])}function U(n){return function(e,i,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=function*(){const t=n.getReader();try{for(;;){const{value:e,done:i}=yield Us(t.read());if(i)return yield Us(void 0);yield yield Us(e)}}finally{t.releaseLock()}}.apply(e,i||[]),a=[];return r={},l("next"),l("throw"),l("return"),r[Symbol.asyncIterator]=function(){return this},r;function l(p){o[p]&&(r[p]=function(f){return new Promise(function(g,m){a.push([p,f,g,m])>1||h(p,f)})})}function h(p,f){try{(m=o[p](f)).value instanceof Us?Promise.resolve(m.value.v).then(u,c):d(a[0][2],m)}catch(g){d(a[0][3],g)}var m}function u(p){h("next",p)}function c(p){h("throw",p)}function d(p,f){p(f),a.shift(),a.length&&h(a[0][0],a[0][1])}}(this,arguments)}function Q(n){return vt(n?.getReader)}function J(n){if(n instanceof ki)return n;if(null!=n){if(Fr(n))return e=n,new ki(i=>{const s=e[Rr]();if(vt(s.subscribe))return s.subscribe(i);throw new TypeError("Provided object does not correctly implement Symbol.observable")});if(Fa(n))return function(e){return new ki(i=>{for(let s=0;s<e.length&&!i.closed;s++)i.next(e[s]);i.complete()})}(n);if(uo(n))return function(e){return new ki(i=>{e.then(s=>{i.closed||(i.next(s),i.complete())},s=>i.error(s)).then(null,b)})}(n);if(bs(n))return gt(n);if(X(n))return function(e){return new ki(i=>{for(const s of e)if(i.next(s),i.closed)return;i.complete()})}(n);if(Q(n))return function(e){return gt(U(e))}(n)}var e;throw I(n)}function gt(n){return new ki(t=>{(function(i,s){var r,o,a,l,u,d,p;return u=this,p=function*(){try{for(r=function ch(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function(r){var o="function"==typeof Symbol&&Symbol.iterator,a=o&&r[o],l=0;if(a)return a.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&l>=r.length&&(r=void 0),{value:r&&r[l++],done:!r}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(r){return new Promise(function(o,a){var h,u,c;h=o,u=a,c=(r=n[s](r)).done,Promise.resolve(r.value).then(function(p){h({value:p,done:c})},u)})}}}(i);!(o=yield r.next()).done;)if(s.next(o.value),s.closed)return}catch(h){a={error:h}}finally{try{o&&!o.done&&(l=r.return)&&(yield l.call(r))}finally{if(a)throw a.error}}s.complete()},new((d=void 0)||(d=Promise))(function(f,g){function m(v){try{_(p.next(v))}catch(x){g(x)}}function y(v){try{_(p.throw(v))}catch(x){g(x)}}function _(v){var w;v.done?f(v.value):(w=v.value,w instanceof d?w:new d(function(C){C(w)})).then(m,y)}_((p=p.apply(u,[])).next())})})(n,t).catch(e=>t.error(e))})}function _t(n,t,e,i=0,s=!1){const r=t.schedule(function(){e(),s?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(r),!s)return r}function wt(n,t,e=1/0){return vt(t)?wt((i,s)=>Rn((r,o)=>t(i,r,s,o))(J(n(i,s))),e):("number"==typeof t&&(e=t),en((i,s)=>function(o,a,l,h,u,c,d,p){const f=[];let g=0,m=0,y=!1;const _=()=>{y&&!f.length&&!g&&a.complete()},x=w=>{g++;let C=!1;J(l(w,m++)).subscribe(ln(a,M=>{a.next(M)},()=>{C=!0},void 0,()=>{if(C)try{for(g--;f.length&&g<h;){const M=f.shift();x(M)}_()}catch(M){a.error(M)}}))};return o.subscribe(ln(a,w=>g<h?x(w):f.push(w),()=>{y=!0,_()})),()=>{}}(i,s,n,e)))}const zt=new ki(n=>n.complete());function Ot(n){return n&&vt(n.schedule)}function ae(n){return n[n.length-1]}function Bt(n){return Ot(ae(n))?n.pop():void 0}function le(n,t=0){return en((e,i)=>{e.subscribe(ln(i,s=>_t(i,n,()=>i.next(s),t),()=>_t(i,n,()=>i.complete(),t),s=>_t(i,n,()=>i.error(s),t)))})}function Te(n,t=0){return en((e,i)=>{i.add(n.schedule(()=>e.subscribe(i),t))})}function fe(n,t){if(!n)throw new Error("Iterable cannot be null");return new ki(e=>{_t(e,t,()=>{const i=n[Symbol.asyncIterator]();_t(e,t,()=>{i.next().then(s=>{s.done?e.complete():e.next(s.value)})},0,!0)})})}function Je(n,t){return t?function(i,s){if(null!=i){if(Fr(i))return a=s,J(i).pipe(Te(a),le(a));if(Fa(i))return function(o,a){return new ki(l=>{let h=0;return a.schedule(function(){h===o.length?l.complete():(l.next(o[h++]),l.closed||this.schedule())})})}(i,s);if(uo(i))return function(o,a){return J(o).pipe(Te(a),le(a))}(i,s);if(bs(i))return fe(i,s);if(X(i))return function(o,a){return new ki(l=>{let h;return _t(l,a,()=>{h=o[j](),_t(l,a,()=>{let u,c;try{({value:u,done:c}=h.next())}catch(d){return void l.error(d)}c?l.complete():l.next(u)},0,!0)}),()=>vt(h?.return)&&h.return()})}(i,s);if(Q(i))return function(o,a){return fe(U(o),a)}(i,s)}var a;throw I(i)}(n,t):J(n)}function bi(...n){const t=Bt(n),e="number"==typeof ae(r=n)?r.pop():1/0,i=n;var r;return i.length?1===i.length?J(i[0]):function(r=1/0){return wt(Vn,r)}(e)(Je(i,t)):zt}class ne extends Hs{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}function bt(...n){return Je(n,Bt(n))}function Ci(n={}){const{connector:t=(()=>new Hs),resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:s=!0}=n;return r=>{let o,a,l,h=0,u=!1,c=!1;const d=()=>{a?.unsubscribe(),a=void 0},p=()=>{d(),o=l=void 0,u=c=!1},f=()=>{const g=o;p(),g?.unsubscribe()};return en((g,m)=>{h++,!c&&!u&&d();const y=l=l??t();m.add(()=>{h--,0===h&&!c&&!u&&(a=Oe(f,s))}),y.subscribe(m),!o&&h>0&&(o=new ai({next:_=>y.next(_),error:_=>{c=!0,d(),a=Oe(p,e,_),y.error(_)},complete:()=>{u=!0,d(),a=Oe(p,i),y.complete()}}),J(g).subscribe(o))})(r)}}function Oe(n,t,...e){if(!0===t)return void n();if(!1===t)return;const i=new ai({next:()=>{i.unsubscribe(),n()}});return J(t(...e)).subscribe(i)}function Be(n,t){return en((e,i)=>{let s=null,r=0,o=!1;const a=()=>o&&!s&&i.complete();e.subscribe(ln(i,l=>{s?.unsubscribe();let h=0;const u=r++;J(n(l,u)).subscribe(s=ln(i,c=>i.next(t?t(l,c,u,h++):c),()=>{s=null,a()}))},()=>{o=!0,a()}))})}function Ie(n,t){return n===t}function Y(n){for(let t in n)if(n[t]===Y)return t;throw Error("Could not find renamed property on target object.")}function Rt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Rt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const t=n.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function xt(n,t){return null==n||""===n?null===t?"":t:null==t||""===t?n:n+" "+t}const Di=Y({__forward_ref__:Y});function Ni(n){return n.__forward_ref__=Ni,n.toString=function(){return Rt(this())},n}function li(n){return"function"==typeof(e=n)&&e.hasOwnProperty(Di)&&e.__forward_ref__===Ni?n():n;var e}function mi(n){return n&&!!n.\u0275providers}class Gt extends Error{constructor(t,e){var r;super((r=e,`NG0${Math.abs(t)}${r?": "+r:""}`)),this.code=t}}const ni=Y({\u0275cmp:Y}),vn=Y({\u0275dir:Y}),Fn=Y({\u0275pipe:Y}),hi=Y({\u0275mod:Y}),It=Y({\u0275fac:Y}),St=Y({__NG_ELEMENT_ID__:Y}),E=Y({__NG_ENV_ID__:Y});function R(n){return"string"==typeof n?n:null==n?"":String(n)}function q(n,t){throw new Gt(-201,!1)}function B(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function pt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Lt(n){return Ct(n,ge)||Ct(n,si)}function Ct(n,t){return n.hasOwnProperty(t)?n[t]:null}function Ft(n){return n&&(n.hasOwnProperty(Ze)||n.hasOwnProperty(ns))?n[Ze]:null}const ge=Y({\u0275prov:Y}),Ze=Y({\u0275inj:Y}),si=Y({ngInjectableDef:Y}),ns=Y({ngInjectorDef:Y});var n,Wt=((n=Wt||{})[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n);let Oa;function Yi(n){const t=Oa;return Oa=n,t}function Aa(n,t,e){const i=Lt(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:e&Wt.Optional?null:void 0!==t?t:void q(Rt(n))}const Ii=globalThis;class Qt{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=B({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Xs={},co="__NG_DI_FLAG__",Or="ngTempTokenPath",Ar=/\n/gm,Bn="__source";let hn;function Pi(n){const t=hn;return hn=n,t}function Wc(n,t=Wt.Default){if(void 0===hn)throw new Gt(-203,!1);return null===hn?Aa(n,void 0,t):hn.get(n,t&Wt.Optional?null:void 0,t)}function Tt(n,t=Wt.Default){return(Oa||Wc)(li(n),t)}function Ri(n,t=Wt.Default){return Tt(n,dh(t))}function dh(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Hc(n){const t=[];for(let e=0;e<n.length;e++){const i=li(n[e]);if(Array.isArray(i)){if(0===i.length)throw new Gt(900,!1);let s,r=Wt.Default;for(let o=0;o<i.length;o++){const a=i[o],l=Kw(a);"number"==typeof l?-1===l?s=a.token:r|=l:s=a}t.push(Tt(s,r))}else t.push(Tt(i))}return t}function _m(n,t){return n[co]=t,n.prototype[co]=t,n}function Kw(n){return n[co]}function ph(n){return{toString:n}.toString()}var vm=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(vm||{}),Cs=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Cs||{});const La={},Zn=[];function xm(n,t,e){let i=n.length;for(;;){const s=n.indexOf(t,e);if(-1===s)return s;if(0===s||n.charCodeAt(s-1)<=32){const r=t.length;if(s+r===i||n.charCodeAt(s+r)<=32)return s}e=s+1}}function Uc(n,t,e){let i=0;for(;i<e.length;){const s=e[i];if("number"==typeof s){if(0!==s)break;i++;const r=e[i++],o=e[i++],a=e[i++];n.setAttribute(t,o,a,r)}else{const r=s,o=e[++i];Qw(r)?n.setProperty(t,r,o):n.setAttribute(t,r,o),i++}}return i}function Jw(n){return 3===n||4===n||6===n}function Qw(n){return 64===n.charCodeAt(0)}function Xc(n,t){if(null!==t&&0!==t.length)if(null===n||0===n.length)n=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){const s=t[i];"number"==typeof s?e=s:0===e||tb(n,e,s,null,-1===e||2===e?t[++i]:null)}}return n}function tb(n,t,e,i,s){let r=0,o=n.length;if(-1===t)o=-1;else for(;r<n.length;){const a=n[r++];if("number"==typeof a){if(a===t){o=-1;break}if(a>t){o=r-1;break}}}for(;r<n.length;){const a=n[r];if("number"==typeof a)break;if(a===e){if(null===i)return void(null!==s&&(n[r+1]=s));if(i===n[r+1])return void(n[r+2]=s)}r++,null!==i&&r++,null!==s&&r++}-1!==o&&(n.splice(o,0,t),r=o+1),n.splice(r++,0,e),null!==i&&n.splice(r++,0,i),null!==s&&n.splice(r++,0,s)}const wm="ng-template";function eb(n,t,e){let i=0,s=!0;for(;i<n.length;){let r=n[i++];if("string"==typeof r&&s){const o=n[i++];if(e&&"class"===r&&-1!==xm(o.toLowerCase(),t,0))return!0}else{if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===t)return!0;return!1}"number"==typeof r&&(s=!1)}}return!1}function bm(n){return 4===n.type&&n.value!==wm}function ib(n,t,e){return t===(4!==n.type||e?n.value:wm)}function nb(n,t,e){let i=4;const s=n.attrs||[],r=function(l){for(let h=0;h<l.length;h++)if(Jw(l[h]))return h;return l.length}(s);let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!ib(n,l,e)||""===l&&1===t.length){if(Wn(i))return!1;o=!0}}else{const h=8&i?l:t[++a];if(8&i&&null!==n.attrs){if(!eb(n.attrs,h,e)){if(Wn(i))return!1;o=!0}continue}const u=sb(8&i?"class":l,s,bm(n),e);if(-1===u){if(Wn(i))return!1;o=!0;continue}if(""!==h){let c;c=u>r?"":s[u+1].toLowerCase();const d=8&i?c:null;if(d&&-1!==xm(d,h,0)||2&i&&h!==c){if(Wn(i))return!1;o=!0}}}}else{if(!o&&!Wn(i)&&!Wn(l))return!1;if(o&&Wn(l))continue;o=!1,i=l|1&i}}return Wn(i)||o}function Wn(n){return 0==(1&n)}function sb(n,t,e,i){if(null===t)return-1;let s=0;if(i||!e){let r=!1;for(;s<t.length;){const o=t[s];if(o===n)return s;if(3===o||6===o)r=!0;else{if(1===o||2===o){let a=t[++s];for(;"string"==typeof a;)a=t[++s];continue}if(4===o)break;if(0===o){s+=4;continue}}s+=r?1:2}return-1}return function(o,a){let l=o.indexOf(4);if(l>-1)for(l++;l<o.length;){const h=o[l];if("number"==typeof h)return-1;if(h===a)return l;l++}return-1}(t,n)}function rb(n,t,e=!1){for(let i=0;i<t.length;i++)if(nb(n,t[i],e))return!0;return!1}function Cm(n,t){return n?":not("+t.trim()+")":t}function ob(n){let t=n[0],e=1,i=2,s="",r=!1;for(;e<n.length;){let o=n[e];if("string"==typeof o)if(2&i){const a=n[++e];s+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?s+="."+o:4&i&&(s+=" "+o);else""!==s&&!Wn(o)&&(t+=Cm(r,s),s=""),i=o,r=r||!Wn(i);e++}return""!==s&&(t+=Cm(r,s)),t}function Da(n){return ph(()=>{const t=km(n),e={...t,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===vm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Cs.Emulated,styles:n.styles||Zn,_:null,schemas:n.schemas||null,tView:null,id:""};Im(e);const i=n.dependencies;return e.directiveDefs=Pm(i,!1),e.pipeDefs=Pm(i,!0),e.id=function(r){let o=0;const a=[r.selectors,r.ngContentSelectors,r.hostVars,r.hostAttrs,r.consts,r.vars,r.decls,r.encapsulation,r.standalone,r.signals,r.exportAs,JSON.stringify(r.inputs),JSON.stringify(r.outputs),Object.getOwnPropertyNames(r.type.prototype),!!r.contentQueries,!!r.viewQuery].join("|");for(const l of a)o=Math.imul(31,o)+l.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(e),e})}function ab(n){return fo(n)||Em(n)}function lb(n){return null!==n}function po(n){return ph(()=>({type:n.type,bootstrap:n.bootstrap||Zn,declarations:n.declarations||Zn,imports:n.imports||Zn,exports:n.exports||Zn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Mm(n,t){if(null==n)return La;const e={};for(const i in n)if(n.hasOwnProperty(i)){let s=n[i],r=s;Array.isArray(s)&&(r=s[1],s=s[0]),e[s]=i,t&&(t[s]=r)}return e}function Sm(n){return ph(()=>{const t=km(n);return Im(t),t})}function fo(n){return n[ni]||null}function Em(n){return n[vn]||null}function Tm(n){return n[Fn]||null}function km(n){const t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:n.inputs||La,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Zn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Mm(n.inputs,t),outputs:Mm(n.outputs),debugInfo:null}}function Im(n){n.features?.forEach(t=>t(n))}function Pm(n,t){if(!n)return null;const e=t?Tm:ab;return()=>("function"==typeof n?n():n).map(i=>e(i)).filter(lb)}const Ms=0,_e=1,Yt=2,Zi=3,Hn=4,Un=5,fh=6,Rm=7,ss=8,go=9,Na=10,nn=11,za=12,Fm=13,mo=14,rs=15,gh=16,yo=17,ja=18,mh=19,Om=20,Ga=21,Yc=22,Lr=23,Ys=25,Am=1,Dr=7,yh=9,On=10;var _o=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n[n.HasChildViewsToRefresh=4]="HasChildViewsToRefresh",n}(_o||{});function Nr(n){return Array.isArray(n)&&"object"==typeof n[Am]}function Xn(n){return Array.isArray(n)&&!0===n[Am]}function Lm(n){return 0!=(4&n.flags)}function _h(n){return n.componentOffset>-1}function Dm(n){return 1==(1&n.flags)}function qa(n){return!!n.template}function ub(n){return 0!=(512&n[Yt])}function Va(n,t){return n.hasOwnProperty(It)?n[It]:null}class Nm{constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function vh(){return zm}function zm(n){return n.type.prototype.ngOnChanges&&(n.setInput=db),cb}function cb(){const n=Gm(this),t=n?.current;if(t){const e=n.previous;if(e===La)n.previous=t;else for(let i in t)e[i]=t[i];n.current=null,this.ngOnChanges(t)}}function db(n,t,e,i){const s=this.declaredInputs[e],r=Gm(n)||(n[jm]={previous:La,current:null}),o=r.current||(r.current={}),a=r.previous,l=a[s];o[s]=new Nm(l&&l.currentValue,t,a===La),n[i]=t}vh.ngInherit=!0;const jm="__ngSimpleChanges__";function Gm(n){return n[jm]||null}const $s=function(n,t,e){};function Ss(n){for(;Array.isArray(n);)n=n[Ms];return n}function qm(n,t){return Ss(t[n])}function os(n,t){return Ss(t[n.index])}function Vm(n,t){return n.data[t]}function vo(n,t){const e=t[n];return Nr(e)?e:e[Ms]}function $c(n){return 128==(128&n[Yt])}function xh(n,t){return null==t?null:n[t]}function Bm(n){n[yo]=0}function pb(n){1024&n[Yt]||(n[Yt]|=1024,$c(n)&&wh(n))}function Zm(n){return 9216&n[Yt]||n[Lr]?.dirty}function Wm(n){Zm(n)&&wh(n)}function wh(n){let t=n[Zi];for(;null!==t&&!(Xn(t)&&t[Yt]&_o.HasChildViewsToRefresh||Nr(t)&&8192&t[Yt]);){if(Xn(t))t[Yt]|=_o.HasChildViewsToRefresh;else if(t[Yt]|=8192,!$c(t))break;t=t[Zi]}}const Se={lFrame:Qm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Hm(){return Se.bindingsEnabled}function $i(){return Se.lFrame.lView}function zr(){return Se.lFrame.tView}function Es(){let n=Um();for(;null!==n&&64===n.type;)n=n.parent;return n}function Um(){return Se.lFrame.currentTNode}function Ba(n,t){const e=Se.lFrame;e.currentTNode=n,e.isParent=t}function Xm(){return Se.lFrame.isParent}function Ym(){return Se.lFrame.bindingIndex++}function fb(n,t){const e=Se.lFrame;e.bindingIndex=e.bindingRootIndex=n,Kc(t)}function Kc(n){Se.lFrame.currentDirectiveIndex=n}function $m(n){Se.lFrame.currentQueryIndex=n}function gb(n){const t=n[_e];return 2===t.type?t.declTNode:1===t.type?n[Un]:null}function Km(n,t,e){if(e&Wt.SkipSelf){let s=t,r=n;for(;s=s.parent,!(null!==s||e&Wt.Host||(s=gb(r),null===s||(r=r[mo],10&s.type))););if(null===s)return!1;t=s,n=r}const i=Se.lFrame=Jm();return i.currentTNode=t,i.lView=n,!0}function Jc(n){const t=Jm(),e=n[_e];Se.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function Jm(){const n=Se.lFrame,t=null===n?null:n.child;return null===t?Qm(n):t}function Qm(n){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=t),t}function t0(){const n=Se.lFrame;return Se.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const e0=t0;function Qc(){const n=t0();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function xo(){return Se.lFrame.selectedIndex}function jr(n){Se.lFrame.selectedIndex=n}let i0=!0;function td(){return i0}function ed(n){i0=n}function id(n,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){const s=n.data[e].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:o,ngAfterViewInit:a,ngAfterViewChecked:l,ngOnDestroy:h}=s;r&&(n.contentHooks??=[]).push(-e,r),o&&((n.contentHooks??=[]).push(e,o),(n.contentCheckHooks??=[]).push(e,o)),a&&(n.viewHooks??=[]).push(-e,a),l&&((n.viewHooks??=[]).push(e,l),(n.viewCheckHooks??=[]).push(e,l)),null!=h&&(n.destroyHooks??=[]).push(e,h)}}function bh(n,t,e){n0(n,t,3,e)}function Ch(n,t,e,i){(3&n[Yt])===e&&n0(n,t,e,i)}function nd(n,t){let e=n[Yt];(3&e)===t&&(e&=16383,e+=1,n[Yt]=e)}function n0(n,t,e,i){const s=i??-1,r=t.length-1;let o=0;for(let a=void 0!==i?65535&n[yo]:0;a<r;a++)if("number"==typeof t[a+1]){if(o=t[a],null!=i&&o>=i)break}else t[a]<0&&(n[yo]+=65536),(o<s||-1==s)&&(mb(n,e,t,a),n[yo]=(4294901760&n[yo])+a+2),a++}function s0(n,t){$s(4,n,t);const e=Ht(null);try{t.call(n)}finally{Ht(e),$s(5,n,t)}}function mb(n,t,e,i){const s=e[i]<0,r=e[i+1],o=n[s?-e[i]:e[i]];s?n[Yt]>>14<n[yo]>>16&&(3&n[Yt])===t&&(n[Yt]+=16384,s0(o,r)):s0(o,r)}const wo=-1;class sd{constructor(t,e,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}function r0(n){return n!==wo}function Mh(n){return 32767&n}function Sh(n,t){let e=n>>16,i=t;for(;e>0;)i=i[mo],e--;return i}let rd=!0;function o0(n){const t=rd;return rd=n,t}const a0=255,l0=5;let yb=0;const as={};function h0(n,t){const e=u0(n,t);if(-1!==e)return e;const i=t[_e];i.firstCreatePass&&(n.injectorIndex=t.length,od(i.data,n),od(t,null),od(i.blueprint,null));const s=ad(n,t),r=n.injectorIndex;if(r0(s)){const o=Mh(s),a=Sh(s,t),l=a[_e].data;for(let h=0;h<8;h++)t[r+h]=a[o+h]|l[o+h]}return t[r+8]=s,r}function od(n,t){n.push(0,0,0,0,0,0,0,0,t)}function u0(n,t){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===t[n.injectorIndex+8]?-1:n.injectorIndex}function ad(n,t){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let e=0,i=null,s=t;for(;null!==s;){if(i=y0(s),null===i)return wo;if(e++,s=s[mo],-1!==i.injectorIndex)return i.injectorIndex|e<<16}return wo}function _b(n,t,e){!function(s,r,o){let a;"string"==typeof o?a=o.charCodeAt(0)||0:o.hasOwnProperty(St)&&(a=o[St]),null==a&&(a=o[St]=yb++);const l=a&a0;r.data[s+(l>>l0)]|=1<<l}(n,t,e)}function c0(n,t,e){if(e&Wt.Optional||void 0!==n)return n;q()}function d0(n,t,e,i){if(e&Wt.Optional&&void 0===i&&(i=null),!(e&(Wt.Self|Wt.Host))){const s=n[go],r=Yi(void 0);try{return s?s.get(t,i,e&Wt.Optional):Aa(t,i,e&Wt.Optional)}finally{Yi(r)}}return c0(i,0,e)}function p0(n,t,e,i=Wt.Default,s){if(null!==n){if(2048&t[Yt]&&!(i&Wt.Self)){const o=function(l,h,u,c,d){let p=l,f=h;for(;null!==p&&null!==f&&2048&f[Yt]&&!(512&f[Yt]);){const g=f0(p,f,u,c|Wt.Self,as);if(g!==as)return g;let m=p.parent;if(!m){const y=f[Om];if(y){const _=y.get(u,as,c);if(_!==as)return _}m=y0(f),f=f[mo]}p=m}return d}(n,t,e,i,as);if(o!==as)return o}const r=f0(n,t,e,i,as);if(r!==as)return r}return d0(t,e,i,s)}function f0(n,t,e,i,s){const r=function(a){if("string"==typeof a)return a.charCodeAt(0)||0;const l=a.hasOwnProperty(St)?a[St]:void 0;return"number"==typeof l?l>=0?l&a0:xb:l}(e);if("function"==typeof r){if(!Km(t,n,i))return i&Wt.Host?c0(s,0,i):d0(t,e,i,s);try{let o;if(o=r(i),null!=o||i&Wt.Optional)return o;q()}finally{e0()}}else if("number"==typeof r){let o=null,a=u0(n,t),l=wo,h=i&Wt.Host?t[rs][Un]:null;for((-1===a||i&Wt.SkipSelf)&&(l=-1===a?ad(n,t):t[a+8],l!==wo&&m0(i,!1)?(o=t[_e],a=Mh(l),t=Sh(l,t)):a=-1);-1!==a;){const u=t[_e];if(g0(r,a,u.data)){const c=vb(a,t,e,o,i,h);if(c!==as)return c}l=t[a+8],l!==wo&&m0(i,t[_e].data[a+8]===h)&&g0(r,a,t)?(o=u,a=Mh(l),t=Sh(l,t)):a=-1}}return s}function vb(n,t,e,i,s,r){const o=t[_e],a=o.data[n+8],l=function(u,c,d,p,f){const g=u.providerIndexes,m=c.data,y=1048575&g,_=u.directiveStart,v=g>>20,x=f?y+v:u.directiveEnd;for(let w=p?y:y+v;w<x;w++){const C=m[w];if(w<_&&d===C||w>=_&&C.type===d)return w}if(f){const w=m[_];if(w&&qa(w)&&w.type===d)return _}return null}(a,o,e,null==i?_h(a)&&rd:i!=o&&0!=(3&a.type),s&Wt.Host&&r===a);return null!==l?Za(t,o,l,a):as}function Za(n,t,e,i){let s=n[e];const r=t.data;if(s instanceof sd){const o=s;o.resolving&&function(u,c){throw new Gt(-200,`Circular dependency in DI detected for ${u}`)}("function"==typeof(u=r[e])?u.name||u.toString():"object"==typeof u&&null!=u&&"function"==typeof u.type?u.type.name||u.type.toString():R(u));const a=o0(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Yi(o.injectImpl):null;Km(n,i,Wt.Default);try{s=n[e]=o.factory(void 0,r,n,i),t.firstCreatePass&&e>=i.directiveStart&&function(u,c,d){const{ngOnChanges:p,ngOnInit:f,ngDoCheck:g}=c.type.prototype;if(p){const m=zm(c);(d.preOrderHooks??=[]).push(u,m),(d.preOrderCheckHooks??=[]).push(u,m)}f&&(d.preOrderHooks??=[]).push(0-u,f),g&&((d.preOrderHooks??=[]).push(u,g),(d.preOrderCheckHooks??=[]).push(u,g))}(e,r[e],t)}finally{null!==l&&Yi(l),o0(a),o.resolving=!1,e0()}}var u;return s}function g0(n,t,e){return!!(e[t+(n>>l0)]&1<<n)}function m0(n,t){return!(n&Wt.Self||n&Wt.Host&&t)}class Wa{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return p0(this._tNode,this._lView,t,dh(i),e)}}function xb(){return new Wa(Es(),$i())}function y0(n){const t=n[_e],e=t.type;return 2===e?t.declTNode:1===e?n[Un]:null}const Eh="__parameters__";function _0(n,t,e){return ph(()=>{const i=(o=t,function(...a){if(o){const l=o(...a);for(const h in l)this[h]=l[h]}});var o;function s(...r){if(this instanceof s)return i.apply(this,r),this;const o=new s(...r);return a.annotation=o,a;function a(l,h,u){const c=l.hasOwnProperty(Eh)?l[Eh]:Object.defineProperty(l,Eh,{value:[]})[Eh];for(;c.length<=u;)c.push(null);return(c[u]=c[u]||[]).push(o),l}}return e&&(s.prototype=Object.create(e.prototype)),s.prototype.ngMetadataName=n,s.annotationCls=s,s})}function ld(n,t){n.forEach(e=>Array.isArray(e)?ld(e,t):t(e))}function v0(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function Th(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function wb(n,t,e){let i=Ha(n,t);return i>=0?n[1|i]=e:(i=~i,function(r,o,a,l){let h=r.length;if(h==o)r.push(a,l);else if(1===h)r.push(l,r[0]),r[0]=a;else{for(h--,r.push(r[h-1],r[h]);h>o;)r[h]=r[h-2],h--;r[o]=a,r[o+1]=l}}(n,i,t,e)),i}function hd(n,t){const e=Ha(n,t);if(e>=0)return n[1|e]}function Ha(n,t){return function(i,s,r){let o=0,a=i.length>>1;for(;a!==o;){const l=o+(a-o>>1),h=i[l<<1];if(s===h)return l<<1;h>s?a=l:o=l+1}return~(a<<1)}(n,t)}const bb=_m(_0("Optional"),8),Cb=_m(_0("SkipSelf"),4),ud=new Qt("ENVIRONMENT_INITIALIZER"),x0=new Qt("INJECTOR",-1),w0=new Qt("INJECTOR_DEF_TYPES");class b0{get(t,e=Xs){if(e===Xs){const i=new Error(`NullInjectorError: No provider for ${Rt(t)}!`);throw i.name="NullInjectorError",i}return e}}function Mb(...n){return{\u0275providers:C0(0,n),\u0275fromNgModule:!0}}function C0(n,...t){const e=[],i=new Set;let s;const r=o=>{e.push(o)};return ld(t,o=>{const a=o;cd(a,r,[],i)&&(s||=[],s.push(a))}),void 0!==s&&M0(s,r),e}function M0(n,t){for(let e=0;e<n.length;e++){const{ngModule:i,providers:s}=n[e];dd(s,r=>{t(r,i)})}}function cd(n,t,e,i){if(!(n=li(n)))return!1;let s=null,r=Ft(n);const o=!r&&fo(n);if(r||o){if(o&&!o.standalone)return!1;s=n}else{const l=n.ngModule;if(r=Ft(l),!r)return!1;s=l}const a=i.has(s);if(o){if(a)return!1;if(i.add(s),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const h of l)cd(h,t,e,i)}}else{if(!r)return!1;{if(null!=r.imports&&!a){let h;i.add(s);try{ld(r.imports,u=>{cd(u,t,e,i)&&(h||=[],h.push(u))})}finally{}void 0!==h&&M0(h,t)}if(!a){const h=Va(s)||(()=>new s);t({provide:s,useFactory:h,deps:Zn},s),t({provide:w0,useValue:s,multi:!0},s),t({provide:ud,useValue:()=>Tt(s),multi:!0},s)}const l=r.providers;if(null!=l&&!a){const h=n;dd(l,u=>{t(u,h)})}}}return s!==n&&void 0!==n.providers}function dd(n,t){for(let e of n)mi(e)&&(e=e.\u0275providers),Array.isArray(e)?dd(e,t):t(e)}const Sb=Y({provide:String,useValue:Y});function S0(n){return null!==n&&"object"==typeof n&&Sb in n}function pd(n){return"function"==typeof n}const fd=new Qt("Set Injector scope."),kh={},Eb={};let gd;function md(){return void 0===gd&&(gd=new b0),gd}class Gr{}class yd extends Gr{get destroyed(){return this._destroyed}constructor(t,e,i,s){super(),this.parent=e,this.source=i,this.scopes=s,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,vd(t,o=>this.processProvider(o)),this.records.set(x0,bo(void 0,this)),s.has("environment")&&this.records.set(Gr,bo(void 0,this));const r=this.records.get(fd);null!=r&&"string"==typeof r.value&&this.scopes.add(r.value),this.injectorDefTypes=new Set(this.get(w0,Zn,Wt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const e of t)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const e=Pi(this),i=Yi(void 0);try{return t()}finally{Pi(e),Yi(i)}}get(t,e=Xs,i=Wt.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(E))return t[E](this);i=dh(i);const s=Pi(this),r=Yi(void 0);try{if(!(i&Wt.SkipSelf)){let o=this.records.get(t);if(void 0===o){const a=("function"==typeof(h=t)||"object"==typeof h&&h instanceof Qt)&&Lt(t);o=a&&this.injectableDefInScope(a)?bo(_d(t),kh):null,this.records.set(t,o)}if(null!=o)return this.hydrate(t,o)}return(i&Wt.Self?md():this.parent).get(t,e=i&Wt.Optional&&e===Xs?null:e)}catch(o){if("NullInjectorError"===o.name){if((o[Or]=o[Or]||[]).unshift(Rt(t)),s)throw o;return function(l,h,u,c){const d=l[Or];throw h[Bn]&&d.unshift(h[Bn]),l.message=function(f,g,m,y=null){f=f&&"\n"===f.charAt(0)&&"\u0275"==f.charAt(1)?f.slice(2):f;let _=Rt(g);if(Array.isArray(g))_=g.map(Rt).join(" -> ");else if("object"==typeof g){let v=[];for(let x in g)if(g.hasOwnProperty(x)){let w=g[x];v.push(x+":"+("string"==typeof w?JSON.stringify(w):Rt(w)))}_=`{${v.join(", ")}}`}return`${m}${y?"("+y+")":""}[${_}]: ${f.replace(Ar,"\n  ")}`}("\n"+l.message,d,"R3InjectorError",c),l.ngTokenPath=d,l[Or]=null,l}(o,t,0,this.source)}throw o}finally{Yi(r),Pi(s)}var h}resolveInjectorInitializers(){const t=Pi(this),e=Yi(void 0);try{const i=this.get(ud,Zn,Wt.Self);for(const s of i)s()}finally{Pi(t),Yi(e)}}toString(){const t=[],e=this.records;for(const i of e.keys())t.push(Rt(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Gt(205,!1)}processProvider(t){let e=pd(t=li(t))?t:li(t&&t.provide);const i=S0(r=t)?bo(void 0,r.useValue):bo(function(a,l,h){let u;if(pd(a)){const c=li(a);return Va(c)||_d(c)}if(S0(a))u=()=>li(a.useValue);else if((d=a)&&d.useFactory)u=()=>a.useFactory(...Hc(a.deps||[]));else if(function(d){return!(!d||!d.useExisting)}(a))u=()=>Tt(li(a.useExisting));else{const c=li(a&&(a.useClass||a.provide));if(!a.deps)return Va(c)||_d(c);u=()=>new c(...Hc(a.deps))}var d;return u}(r),kh);var r;if(pd(t)||!0!==t.multi)this.records.get(e);else{let s=this.records.get(e);s||(s=bo(void 0,kh,!0),s.factory=()=>Hc(s.multi),this.records.set(e,s)),e=t,s.multi.push(t)}this.records.set(e,i)}hydrate(t,e){return e.value===kh&&(e.value=Eb,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(s=e.value)&&"object"==typeof s&&"function"==typeof s.ngOnDestroy&&this._ngOnDestroyHooks.add(e.value),e.value;var s}injectableDefInScope(t){if(!t.providedIn)return!1;const e=li(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){const e=this._onDestroyHooks.indexOf(t);-1!==e&&this._onDestroyHooks.splice(e,1)}}function _d(n){const t=Lt(n),e=null!==t?t.factory:Va(n);if(null!==e)return e;if(n instanceof Qt)throw new Gt(204,!1);if(n instanceof Function)return function(s){const r=s.length;if(r>0)throw function(l,h){const u=[];for(let c=0;c<l;c++)u.push("?")}(r),new Gt(204,!1);const o=(l=s)&&(l[ge]||l[si])||null;var l;return null!==o?()=>o.factory(s):()=>new s}(n);throw new Gt(204,!1)}function bo(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function vd(n,t){for(const e of n)Array.isArray(e)?vd(e,t):e&&mi(e)?vd(e.\u0275providers,t):t(e)}function E0(n,t=null,e=null,i){const s=T0(n,t,e,i);return s.resolveInjectorInitializers(),s}function T0(n,t=null,e=null,i,s=new Set){const r=[e||Zn,Mb(n)];return i=i||("object"==typeof n?void 0:Rt(n)),new yd(r,t||md(),i||null,s)}let xd,Ua=(()=>{class n{static#t=this.THROW_IF_NOT_FOUND=Xs;static#e=this.NULL=new b0;static create(e,i){if(Array.isArray(e))return E0({name:""},i,e,"");{const s=e.name??"";return E0({name:s},e.parent,e.providers,s)}}static#i=this.\u0275prov=B({token:n,providedIn:"any",factory:()=>Tt(x0)});static#n=this.__NG_ELEMENT_ID__=-1}return n})();const wd=new Qt("AppId",{providedIn:"root",factory:()=>Tb}),Tb="ng",k0=new Qt("Platform Initializer"),Co=new Qt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),I0=new Qt("CSP nonce",{providedIn:"root",factory:()=>function(){if(void 0!==xd)return xd;if(typeof document<"u")return document;throw new Gt(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function P0(n){return 128==(128&n.flags)}var qr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(qr||{});const R0=new Map;let kb=0;const F0="__ngContext__";function Vr(n,t){var i;Nr(t)?(n[F0]=t[mh],R0.set((i=t)[mh],i)):n[F0]=t}let Ib;function bd(n,t){return Ib(n,t)}function Cd(n){const t=n[Zi];return Xn(t)?t[Zi]:t}function O0(n){return L0(n[za])}function A0(n){return L0(n[Hn])}function L0(n){for(;null!==n&&!Xn(n);)n=n[Hn];return n}function Mo(n,t,e,i,s){if(null!=i){let r,o=!1;Xn(i)?r=i:Nr(i)&&(o=!0,i=i[Ms]);const a=Ss(i);0===n&&null!==e?null==s?j0(t,e,a):Ih(t,e,a,s||null,!0):1===n&&null!==e?Ih(t,e,a,s||null,!0):2===n?function(h,u,c){const d=Ed(h,u);d&&h.removeChild(d,u,c)}(t,a,o):3===n&&t.destroyNode(a),null!=r&&function(h,u,c,d,p){const f=c[Dr];f!==Ss(c)&&Mo(u,h,d,f,p);for(let g=On;g<c.length;g++){const m=c[g];Xa(m[_e],m,h,u,d,f)}}(t,n,r,e,s)}}function D0(n,t,e){return n.createElement(t,e)}function N0(n,t){const e=n[yh],i=e.indexOf(t);e.splice(i,1)}function Md(n,t){if(n.length<=On)return;const e=On+t,i=n[e];if(i){const s=i[gh];null!==s&&s!==n&&N0(s,i),t>0&&(n[e-1][Hn]=i[Hn]);const r=Th(n,On+t);Xa(i[_e],h=i,h[nn],2,null,null),h[Ms]=null,h[Un]=null;const o=r[ja];null!==o&&o.detachView(r[_e]),i[Zi]=null,i[Hn]=null,i[Yt]&=-129}var h;return i}function z0(n,t){if(!(256&t[Yt])){const e=t[nn];e.destroyNode&&Xa(n,t,e,3,null,null),function(s){let r=s[za];if(!r)return Sd(s[_e],s);for(;r;){let o=null;if(Nr(r))o=r[za];else{const a=r[On];a&&(o=a)}if(!o){for(;r&&!r[Hn]&&r!==s;)Nr(r)&&Sd(r[_e],r),r=r[Zi];null===r&&(r=s),Nr(r)&&Sd(r[_e],r),o=r&&r[Hn]}r=o}}(t)}}function Sd(n,t){if(!(256&t[Yt])){t[Yt]&=-129,t[Yt]|=256,t[Lr]&&function(s){if(ue(s),pe(s))for(let r=0;r<s.producerNode.length;r++)At(s.producerNode[r],s.producerIndexOfThis[r]);s.producerNode.length=s.producerLastReadVersion.length=s.producerIndexOfThis.length=0,s.liveConsumerNode&&(s.liveConsumerNode.length=s.liveConsumerIndexOfThis.length=0)}(t[Lr]),function(s,r){let o;if(null!=s&&null!=(o=s.destroyHooks))for(let a=0;a<o.length;a+=2){const l=r[o[a]];if(!(l instanceof sd)){const h=o[a+1];if(Array.isArray(h))for(let u=0;u<h.length;u+=2){const c=l[h[u]],d=h[u+1];$s(4,c,d);try{d.call(c)}finally{$s(5,c,d)}}else{$s(4,l,h);try{h.call(l)}finally{$s(5,l,h)}}}}}(n,t),function(s,r){const o=s.cleanup,a=r[Rm];if(null!==o)for(let h=0;h<o.length-1;h+=2)if("string"==typeof o[h]){const u=o[h+3];u>=0?a[u]():a[-u].unsubscribe(),h+=2}else o[h].call(a[o[h+1]]);null!==a&&(r[Rm]=null);const l=r[Ga];if(null!==l){r[Ga]=null;for(let h=0;h<l.length;h++)(0,l[h])()}}(n,t),1===t[_e].type&&t[nn].destroy();const e=t[gh];if(null!==e&&Xn(t[Zi])){e!==t[Zi]&&N0(e,t);const i=t[ja];null!==i&&i.detachView(n)}R0.delete(t[mh])}}function Ih(n,t,e,i,s){n.insertBefore(t,e,i,s)}function j0(n,t,e){n.appendChild(t,e)}function G0(n,t,e,i,s){null!==i?Ih(n,t,e,i,s):j0(n,t,e)}function Ed(n,t){return n.parentNode(t)}let q0,Rb=function(t,e,i){return 40&t.type?os(t,i):null};function Td(n,t,e,i){const s=function Pb(n,t,e){return function(s,r,o){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return o[Ms];{const{componentOffset:l}=a;if(l>-1){const{encapsulation:h}=s.data[a.directiveStart+l];if(h===Cs.None||h===Cs.Emulated)return null}return os(a,o)}}(n,t.parent,e)}(n,i,t),r=t[nn],o=Rb(i.parent||t[Un],i,t);if(null!=s)if(Array.isArray(e))for(let a=0;a<e.length;a++)G0(r,s,e[a],o,!1);else G0(r,s,e,o,!1);void 0!==q0&&q0(r,i,t,e,s)}function Ph(n,t){if(null!==t){const e=t.type;if(3&e)return os(t,n);if(4&e)return kd(-1,n[t.index]);if(8&e){const i=t.child;if(null!==i)return Ph(n,i);{const s=n[t.index];return Xn(s)?kd(-1,s):Ss(s)}}if(32&e)return bd(t,n)()||Ss(n[t.index]);{const i=V0(n,t);return null!==i?Array.isArray(i)?i[0]:Ph(Cd(n[rs]),i):Ph(n,t.next)}}return null}function V0(n,t){return null!==t?n[rs][Un].projection[t.projection]:null}function kd(n,t){const e=On+n+1;if(e<t.length){const i=t[e],s=i[_e].firstChild;if(null!==s)return Ph(i,s)}return t[Dr]}function Id(n,t,e,i,s,r,o){for(;null!=e;){const a=i[e.index],l=e.type;if(o&&0===t&&(a&&Vr(Ss(a),i),e.flags|=2),32!=(32&e.flags))if(8&l)Id(n,t,e.child,i,s,r,!1),Mo(t,n,s,a,r);else if(32&l){const h=bd(e,i);let u;for(;u=h();)Mo(t,n,s,u,r);Mo(t,n,s,a,r)}else 16&l?Fb(n,t,i,e,s,r):Mo(t,n,s,a,r);e=o?e.projectionNext:e.next}}function Xa(n,t,e,i,s,r){Id(e,i,n.firstChild,t,s,r,!1)}function Fb(n,t,e,i,s,r){const o=e[rs],a=o[Un].projection[i.projection];if(Array.isArray(a))for(let l=0;l<a.length;l++)Mo(t,n,s,a[l],r);else{let l=a;const h=o[Zi];P0(i)&&(l.flags|=128),Id(n,t,l,h,s,r,!0)}}function B0(n,t,e){""===e?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function Z0(n,t,e){const{mergedAttrs:i,classes:s,styles:r}=e;null!==i&&Uc(n,t,i),null!==s&&B0(n,t,s),null!==r&&n.setAttribute(t,"style",r)}class Ob{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}let Ab=(n,t,e)=>null;function Pd(n,t,e=!1){return Ab(n,t,e)}class Lb{}class W0{}class Db{resolveComponentFactory(t){throw function(i){const s=Error(`No component factory found for ${Rt(i)}.`);return s.ngComponent=i,s}(t)}}let So=(()=>{class n{static#t=this.NULL=new Db}return n})();function Nb(){return Rh(Es(),$i())}function Rh(n,t){return new Ya(os(n,t))}let Ya=(()=>{class n{constructor(e){this.nativeElement=e}static#t=this.__NG_ELEMENT_ID__=Nb}return n})();class H0{}let zb=(()=>{class n{static#t=this.\u0275prov=B({token:n,providedIn:"root",factory:()=>null})}return n})();const Gb=new class jb{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}("17.0.6"),Rd={};function U0(n){return!(null===(e=n)||"function"!=typeof e&&"object"!=typeof e)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n);var e}class qb{constructor(){}supports(t){return U0(t)}create(t){return new Bb(t)}}const Vb=(n,t)=>t;class Bb{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Vb}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,i=this._removalsHead,s=0,r=null;for(;e||i;){const o=!i||e&&e.currentIndex<Y0(i,s,r)?e:i,a=Y0(o,s,r),l=o.currentIndex;if(o===i)s--,i=i._nextRemoved;else if(e=e._next,null==o.previousIndex)s++;else{r||(r=[]);const h=a-s,u=l-s;if(h!=u){for(let c=0;c<h;c++){const d=c<r.length?r[c]:r[c]=0,p=d+c;u<=p&&p<h&&(r[c]=d+1)}r[o.previousIndex]=u-h}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!U0(t))throw new Gt(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,i,s,r=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)i=t[a],s=this._trackByFn(a,i),null!==r&&Object.is(r.trackById,s)?(o&&(r=this._verifyReinsertion(r,i,s,a)),Object.is(r.item,i)||this._addIdentityChange(r,i)):(r=this._mismatch(r,i,s,a),o=!0),r=r._next}else e=0,function(l,h){if(Array.isArray(l))for(let u=0;u<l.length;u++)h(l[u]);else{const u=l[Symbol.iterator]();let c;for(;!(c=u.next()).done;)h(c.value)}}(t,a=>{s=this._trackByFn(e,a),null!==r&&Object.is(r.trackById,s)?(o&&(r=this._verifyReinsertion(r,a,s,e)),Object.is(r.item,a)||this._addIdentityChange(r,a)):(r=this._mismatch(r,a,s,e),o=!0),r=r._next,e++}),this.length=e;return this._truncate(r),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,i,s){let r;return null===t?r=this._itTail:(r=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,r,s)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(i,s))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,r,s)):t=this._addAfter(new Zb(e,i),r,s),t}_verifyReinsertion(t,e,i,s){let r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==r?t=this._reinsertAfter(r,t._prev,s):t.currentIndex!=s&&(t.currentIndex=s,this._addToMoves(t,s)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const s=t._prevRemoved,r=t._nextRemoved;return null===s?this._removalsHead=r:s._nextRemoved=r,null===r?this._removalsTail=s:r._prevRemoved=s,this._insertAfter(t,e,i),this._addToMoves(t,i),t}_moveAfter(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t}_addAfter(t,e,i){return this._insertAfter(t,e,i),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,i){const s=null===e?this._itHead:e._next;return t._next=s,t._prev=e,null===s?this._itTail=t:s._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new X0),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,i=t._next;return null===e?this._itHead=i:e._next=i,null===i?this._itTail=e:i._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new X0),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Zb{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Wb{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===e||e<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){const e=t._prevDup,i=t._nextDup;return null===e?this._head=i:e._nextDup=i,null===i?this._tail=e:i._prevDup=e,null===this._head}}class X0{constructor(){this.map=new Map}put(t){const e=t.trackById;let i=this.map.get(e);i||(i=new Wb,this.map.set(e,i)),i.add(t)}get(t,e){const i=this.map.get(t);return i?i.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Y0(n,t,e){const i=n.previousIndex;if(null===i)return i;let s=0;return e&&i<e.length&&(s=e[i]),i+t+s}function $0(){return new K0([new qb])}let K0=(()=>{class n{static#t=this.\u0275prov=B({token:n,providedIn:"root",factory:$0});constructor(e){this.factories=e}static create(e,i){if(null!=i){const s=i.factories.slice();e=e.concat(s)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||$0()),deps:[[n,new Cb,new bb]]}}find(e){const i=this.factories.find(s=>s.supports(e));if(null!=i)return i;throw new Gt(901,!1)}}return n})();function Fh(n,t,e,i,s=!1){for(;null!==e;){const r=t[e.index];null!==r&&i.push(Ss(r)),Xn(r)&&Hb(r,i);const o=e.type;if(8&o)Fh(n,t,e.child,i);else if(32&o){const a=bd(e,t);let l;for(;l=a();)i.push(l)}else if(16&o){const a=V0(t,e);if(Array.isArray(a))i.push(...a);else{const l=Cd(t[rs]);Fh(l[_e],l,a,i,!0)}}e=s?e.projectionNext:e.next}return i}function Hb(n,t){for(let e=On;e<n.length;e++){const i=n[e],s=i[_e].firstChild;null!==s&&Fh(i[_e],i,s,t)}n[Dr]!==n[Ms]&&t.push(n[Dr])}let J0=[];const Ub={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{wh(n.lView)},consumerOnSignalRead(){this.lView[Lr]=this}};function Fd(n){return n.ngOriginalError}class Eo{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&Fd(t);for(;e&&Fd(e);)e=Fd(e);return e||null}}const Xb=new Qt("",{providedIn:"root",factory:()=>!1}),To={};function Ks(n){Q0(zr(),$i(),xo()+n,!1)}function Q0(n,t,e,i){if(!i)if(3==(3&t[Yt])){const s=n.preOrderCheckHooks;null!==s&&bh(t,s,e)}else{const s=n.preOrderHooks;null!==s&&Ch(t,s,0,e)}jr(e)}function Mi(n,t=Wt.Default){const e=$i();return null===e?Tt(n,t):p0(Es(),e,li(n),t)}function Oh(n,t,e,i,s,r,o,a,l,h,u){const c=t.blueprint.slice();return c[Ms]=s,c[Yt]=140|i,(null!==h||n&&2048&n[Yt])&&(c[Yt]|=2048),Bm(c),c[Zi]=c[mo]=n,c[ss]=e,c[Na]=o||n&&n[Na],c[nn]=a||n&&n[nn],c[go]=l||n&&n[go]||null,c[Un]=r,c[mh]=kb++,c[fh]=u,c[Om]=h,c[rs]=2==t.type?n[rs]:c,c}function Ah(n,t,e,i,s){let r=n.data[t];if(null===r)r=function(a,l,h,u,c){const d=Um(),p=Xm(),f=a.data[l]=function(m,y,_,v,x,w){let M=0;return null!==Se.skipHydrationRootTNode&&(M|=128),{type:_,index:v,insertBeforeIndex:null,injectorIndex:y?y.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:M,providerIndexes:0,value:x,attrs:w,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:y,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,p?d:d&&d.parent,h,l,u,c);return null===a.firstChild&&(a.firstChild=f),null!==d&&(p?null==d.child&&null!==f.parent&&(d.child=f):null===d.next&&(d.next=f,f.prev=d)),f}(n,t,e,i,s),Se.lFrame.inI18n&&(r.flags|=32);else if(64&r.type){r.type=e,r.value=i,r.attrs=s;const o=function(){const l=Se.lFrame,h=l.currentTNode;return l.isParent?h:h.parent}();r.injectorIndex=null===o?-1:o.injectorIndex}return Ba(r,!0),r}function ty(n,t,e,i){if(0===e)return-1;const s=t.length;for(let r=0;r<e;r++)t.push(i),n.blueprint.push(i),n.data.push(null);return s}function ey(n,t,e,i,s){const r=xo(),o=2&i;try{jr(-1),o&&t.length>Ys&&Q0(n,t,Ys,!1),$s(o?2:0,s),e(i,s)}finally{jr(r),$s(o?3:1,s)}}function iy(n,t,e){if(Lm(t)){const i=Ht(null);try{const s=t.directiveEnd;for(let r=t.directiveStart;r<s;r++){const o=n.data[r];o.contentQueries&&o.contentQueries(1,e[r],r)}}finally{Ht(i)}}}function ny(n,t,e){Hm()&&(function(s,r,o,a){const l=o.directiveStart,h=o.directiveEnd;_h(o)&&function(d,p,f){const g=os(p,d),m=ry(f);let y=16;f.signals?y=4096:f.onPush&&(y=64);const _=Lh(d,Oh(d,m,null,y,g,p,null,d[Na].rendererFactory.createRenderer(g,f),null,null,null));d[p.index]=_}(r,o,s.data[l+o.componentOffset]),s.firstCreatePass||h0(o,r),Vr(a,r);const u=o.initialInputs;for(let c=l;c<h;c++){const d=s.data[c],p=Za(r,s,c,o);Vr(p,r),null!==u&&Qb(0,c-l,p,d,0,u),qa(d)&&(vo(o.index,r)[ss]=Za(r,s,c,o))}}(n,t,e,os(e,t)),64==(64&e.flags)&&uy(n,t,e))}function sy(n,t,e=os){const i=t.localNames;if(null!==i){let s=t.index+1;for(let r=0;r<i.length;r+=2){const o=i[r+1],a=-1===o?e(t,n):n[o];n[s++]=a}}}function ry(n){const t=n.tView;return null===t||t.incompleteFirstPass?n.tView=Od(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function Od(n,t,e,i,s,r,o,a,l,h,u){const c=Ys+i,d=c+s,p=function(m,y){const _=[];for(let v=0;v<y;v++)_.push(v<m?null:To);return _}(c,d),f="function"==typeof h?h():h;return p[_e]={type:n,blueprint:p,template:e,queries:null,viewQuery:a,declTNode:t,data:p.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof r?r():r,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1,ssrId:u}}function oy(n,t,e,i){for(let s in n)if(n.hasOwnProperty(s)){e=null===e?{}:e;const r=n[s];null===i?ay(e,t,s,r):i.hasOwnProperty(s)&&ay(e,t,i[s],r)}return e}function ay(n,t,e,i){n.hasOwnProperty(e)?n[e].push(t,i):n[e]=[t,i]}function ly(n,t,e,i){if(Hm()){const s=null===i?null:{"":-1},r=function(h,u){const c=h.directiveRegistry;let d=null,p=null;if(c)for(let f=0;f<c.length;f++){const g=c[f];if(rb(u,g.selectors,!1))if(d||(d=[]),qa(g))if(null!==g.findHostDirectiveDefs){const m=[];p=p||new Map,g.findHostDirectiveDefs(g,m,p),d.unshift(...m,g),Ad(h,u,m.length)}else d.unshift(g),Ad(h,u,0);else p=p||new Map,g.findHostDirectiveDefs?.(g,d,p),d.push(g)}return null===d?null:[d,p]}(n,e);let o,a;null===r?o=a=null:[o,a]=r,null!==o&&hy(n,t,e,o,s,a),s&&function(h,u,c){if(u){const d=h.localNames=[];for(let p=0;p<u.length;p+=2){const f=c[u[p+1]];if(null==f)throw new Gt(-301,!1);d.push(u[p],f)}}}(e,i,s)}e.mergedAttrs=Xc(e.mergedAttrs,e.attrs)}function hy(n,t,e,i,s,r){for(let h=0;h<i.length;h++)_b(h0(e,t),n,i[h].type);var u,c,d;c=n.data.length,d=i.length,(u=e).flags|=1,u.directiveStart=c,u.directiveEnd=c+d,u.providerIndexes=c;for(let h=0;h<i.length;h++){const u=i[h];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=ty(n,t,i.length,null);for(let h=0;h<i.length;h++){const u=i[h];e.mergedAttrs=Xc(e.mergedAttrs,u.hostAttrs),Jb(n,e,t,l,u),Kb(l,u,s),null!==u.contentQueries&&(e.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(e.flags|=64);const c=u.type.prototype;!o&&(c.ngOnChanges||c.ngOnInit||c.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),o=!0),!a&&(c.ngOnChanges||c.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),a=!0),l++}!function(u,c,d){const p=c.directiveEnd,f=u.data,g=c.attrs,m=[];let y=null,_=null;for(let v=c.directiveStart;v<p;v++){const x=f[v],w=d?d.get(x):null,C=w?w.outputs:null;y=oy(x.inputs,v,y,w?w.inputs:null),_=oy(x.outputs,v,_,C);const M=null===y||null===g||bm(c)?null:t2(y,v,g);m.push(M)}null!==y&&(y.hasOwnProperty("class")&&(c.flags|=8),y.hasOwnProperty("style")&&(c.flags|=16)),c.initialInputs=m,c.inputs=y,c.outputs=_}(n,e,r)}function uy(n,t,e){const i=e.directiveStart,s=e.directiveEnd,r=e.index,o=Se.lFrame.currentDirectiveIndex;try{jr(r);for(let a=i;a<s;a++){const l=n.data[a],h=t[a];Kc(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&$b(l,h)}}finally{jr(-1),Kc(o)}}function $b(n,t){null!==n.hostBindings&&n.hostBindings(1,t)}function Ad(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function Kb(n,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=n;qa(t)&&(e[""]=n)}}function Jb(n,t,e,i,s){n.data[i]=s;const r=s.factory||(s.factory=Va(s.type)),o=new sd(r,qa(s),Mi);n.blueprint[i]=o,e[i]=o,function(l,h,u,c,d){const p=d.hostBindings;if(p){let f=l.hostBindingOpCodes;null===f&&(f=l.hostBindingOpCodes=[]);const g=~h.index;(function(y){let _=y.length;for(;_>0;){const v=y[--_];if("number"==typeof v&&v<0)return v}return 0})(f)!=g&&f.push(g),f.push(u,c,p)}}(n,t,i,ty(n,e,s.hostVars,To),s)}function Qb(n,t,e,i,s,r){const o=r[t];if(null!==o)for(let a=0;a<o.length;)cy(i,e,o[a++],o[a++],o[a++])}function cy(n,t,e,i,s){const r=Ht(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(i)&&(s=o[i].call(t,s)),null!==n.setInput?n.setInput(t,s,e,i):t[i]=s}finally{Ht(r)}}function t2(n,t,e){let i=null,s=0;for(;s<e.length;){const r=e[s];if(0!==r)if(5!==r){if("number"==typeof r)break;if(n.hasOwnProperty(r)){null===i&&(i=[]);const o=n[r];for(let a=0;a<o.length;a+=2)if(o[a]===t){i.push(r,o[a+1],e[s+1]);break}}s+=2}else s+=2;else s+=4}return i}function dy(n,t,e,i){return[n,!0,0,t,null,i,null,e,null,null]}function py(n,t){const e=n.contentQueries;if(null!==e){const i=Ht(null);try{for(let s=0;s<e.length;s+=2){const r=e[s+1];if(-1!==r){const o=n.data[r];$m(e[s]),o.contentQueries(2,t[r],r)}}}finally{Ht(i)}}}function Lh(n,t){return n[za]?n[Fm][Hn]=t:n[za]=t,n[Fm]=t,t}function Ld(n,t,e){$m(0);const i=Ht(null);try{t(n,e)}finally{Ht(i)}}function Dd(n,t,e,i,s){for(let r=0;r<e.length;){const o=e[r++],a=e[r++];cy(n.data[o],t[o],i,a,s)}}function fy(n,t,e,i){const s=t[Yt];if(256==(256&s))return;t[Na].inlineEffectRunner?.flush(),Jc(t);let r=null,o=null;var l;2!==n.type&&(o=(l=t)[Lr]??function(u){const c=J0.pop()??Object.create(Ub);return c.lView=u,c}(l),r=function(l){return l&&(l.nextProducerIndex=0),Ht(l)}(o));try{Bm(t),Se.lFrame.bindingIndex=n.bindingStartIndex,null!==e&&ey(n,t,e,2,i);const a=3==(3&s);if(a){const u=n.preOrderCheckHooks;null!==u&&bh(t,u,null)}else{const u=n.preOrderHooks;null!==u&&Ch(t,u,0,null),nd(t,0)}if(function(c){for(let d=O0(c);null!==d;d=A0(d)){if(!(d[Yt]&_o.HasTransplantedViews))continue;const p=d[yh];for(let f=0;f<p.length;f++)pb(p[f])}}(t),gy(t,0),null!==n.contentQueries&&py(n,t),a){const u=n.contentCheckHooks;null!==u&&bh(t,u)}else{const u=n.contentHooks;null!==u&&Ch(t,u,1),nd(t,1)}!function(c,d){const p=c.hostBindingOpCodes;if(null!==p)try{for(let f=0;f<p.length;f++){const g=p[f];if(g<0)jr(~g);else{const m=g,y=p[++f],_=p[++f];fb(y,m),_(2,d[m])}}}finally{jr(-1)}}(n,t);const l=n.components;null!==l&&_y(t,l,0);const h=n.viewQuery;if(null!==h&&Ld(2,h,i),a){const u=n.viewCheckHooks;null!==u&&bh(t,u)}else{const u=n.viewHooks;null!==u&&Ch(t,u,2),nd(t,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),t[Yc]){for(const u of t[Yc])u();t[Yc]=null}t[Yt]&=-73}catch(a){throw wh(t),a}finally{null!==o&&(function(l,h){if(Ht(h),l&&void 0!==l.producerNode&&void 0!==l.producerIndexOfThis&&void 0!==l.producerLastReadVersion){if(pe(l))for(let u=l.nextProducerIndex;u<l.producerNode.length;u++)At(l.producerNode[u],l.producerIndexOfThis[u]);for(;l.producerNode.length>l.nextProducerIndex;)l.producerNode.pop(),l.producerLastReadVersion.pop(),l.producerIndexOfThis.pop()}}(o,r),function(l){l.lView[Lr]!==l&&(l.lView=null,J0.push(l))}(o)),Qc()}}function gy(n,t){for(let e=O0(n);null!==e;e=A0(e)){e[Yt]&=~_o.HasChildViewsToRefresh;for(let i=On;i<e.length;i++)my(e[i],t)}}function i2(n,t,e){my(vo(t,n),e)}function my(n,t){$c(n)&&yy(n,t)}function yy(n,t){const e=n[_e],i=n[Yt],s=n[Lr];let r=!!(0===t&&16&i);if(r||=!!(64&i&&0===t),r||=!!(1024&i),r||=!(!s?.dirty||!Xt(s)),s&&(s.dirty=!1),n[Yt]&=-9217,r)fy(e,n,e.template,n[ss]);else if(8192&i){gy(n,1);const o=e.components;null!==o&&_y(n,o,1)}}function _y(n,t,e){for(let i=0;i<t.length;i++)i2(n,t[i],e)}function vy(n){for(;n;){n[Yt]|=64;const t=Cd(n);if(ub(n)&&!t)return n;n=t}return null}class $a{get rootNodes(){const t=this._lView,e=t[_e];return Fh(e,t,e.firstChild,[])}constructor(t,e,i=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ss]}set context(t){this._lView[ss]=t}get destroyed(){return 256==(256&this._lView[Yt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[Zi];if(Xn(t)){const e=t[8],i=e?e.indexOf(this):-1;i>-1&&(Md(t,i),Th(e,i))}this._attachedToViewContainer=!1}z0(this._lView[_e],this._lView)}onDestroy(t){!function(i,s){if(256==(256&i[Yt]))throw new Gt(911,!1);null===i[Ga]&&(i[Ga]=[]),i[Ga].push(s)}(this._lView,t)}markForCheck(){vy(this._cdRefInjectingView||this._lView)}detach(){this._lView[Yt]&=-129}reattach(){Wm(this._lView),this._lView[Yt]|=128}detectChanges(){!function e2(n,t=!0){const e=n[Na],i=e.rendererFactory,s=e.afterRenderEventManager;i.begin?.(),s?.begin();try{const r=n[_e];fy(r,n,r.template,n[ss]),function(a){let l=0;for(;Zm(a);){if(100===l)throw new Gt(103,!1);l++,yy(a,1)}}(n)}catch(r){throw t&&function(a,l){const h=a[go],u=h?h.get(Eo,null):null;u&&u.handleError(l)}(n,r),r}finally{i.end?.(),e.inlineEffectRunner?.flush(),s?.end()}}(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Gt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){var i;this._appRef=null,Xa(this._lView[_e],i=this._lView,i[nn],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Gt(902,!1);this._appRef=t}}let xy=(()=>{class n{static#t=this.__NG_ELEMENT_ID__=n2}return n})();function n2(n){return function(e,i,s){if(_h(e)&&!s){const r=vo(e.index,i);return new $a(r,r)}return 47&e.type?new $a(i[rs],i):null}(Es(),$i(),16==(16&n))}const wy=new Set;function Nd(n){return t=>{setTimeout(n,void 0,t)}}const xn=class extends Hs{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,i){let s=t,r=e||(()=>null),o=i;if(t&&"object"==typeof t){const l=t;s=l.next?.bind(l),r=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(r=Nd(r),s&&(s=Nd(s)),o&&(o=Nd(o)));const a=super.subscribe({next:s,error:r,complete:o});return t instanceof Fe&&t.add(a),a}};function by(...n){}class zi{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new xn(!1),this.onMicrotaskEmpty=new xn(!1),this.onStable=new xn(!1),this.onError=new xn(!1),typeof Zone>"u")throw new Gt(908,!1);Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&e,s.shouldCoalesceRunChangeDetection=i,s.lastRequestAnimationFrameId=-1,s.nativeRequestAnimationFrame=function(){const o="function"==typeof Ii.requestAnimationFrame;let a=Ii[o?"requestAnimationFrame":"setTimeout"],l=Ii[o?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&a&&l){const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h);const u=l[Zone.__symbol__("OriginalDelegate")];u&&(l=u)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function(o){const a=()=>{var h;(h=o).isCheckStableRunning||-1!==h.lastRequestAnimationFrameId||(h.lastRequestAnimationFrameId=h.nativeRequestAnimationFrame.call(Ii,()=>{h.fakeTopEventTask||(h.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{h.lastRequestAnimationFrameId=-1,jd(h),h.isCheckStableRunning=!0,zd(h),h.isCheckStableRunning=!1},void 0,()=>{},()=>{})),h.fakeTopEventTask.invoke()}),jd(h))};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,h,u,c,d,p)=>{if(g=p,Array.isArray(g)&&1===g.length&&!0===g[0].data?.__ignore_ng_zone__)return l.invokeTask(u,c,d,p);var g;try{return Cy(o),l.invokeTask(u,c,d,p)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===c.type||o.shouldCoalesceRunChangeDetection)&&a(),My(o)}},onInvoke:(l,h,u,c,d,p,f)=>{try{return Cy(o),l.invoke(u,c,d,p,f)}finally{o.shouldCoalesceRunChangeDetection&&a(),My(o)}},onHasTask:(l,h,u,c)=>{l.hasTask(u,c),h===u&&("microTask"==c.change?(o._hasPendingMicrotasks=c.microTask,jd(o),zd(o)):"macroTask"==c.change&&(o.hasPendingMacrotasks=c.macroTask))},onHandleError:(l,h,u,c)=>(l.handleError(u,c),o.runOutsideAngular(()=>o.onError.emit(c)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!zi.isInAngularZone())throw new Gt(909,!1)}static assertNotInAngularZone(){if(zi.isInAngularZone())throw new Gt(909,!1)}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,s){const r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+s,t,s2,by,by);try{return r.runTask(o,e,i)}finally{r.cancelTask(o)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}}const s2={};function zd(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function jd(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Cy(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function My(n){n._nesting--,zd(n)}class r2{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new xn,this.onMicrotaskEmpty=new xn,this.onStable=new xn,this.onError=new xn}run(t,e,i){return t.apply(e,i)}runGuarded(t,e,i){return t.apply(e,i)}runOutsideAngular(t){return t()}runTask(t,e,i,s){return t.apply(e,i)}}const Sy=new Qt("",{providedIn:"root",factory:Ey});function Ey(){const n=Ri(zi);let t=!0;return bi(new ki(e=>{t=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{e.next(t),e.complete()})}),new ki(e=>{let i;n.runOutsideAngular(()=>{i=n.onStable.subscribe(()=>{zi.assertNotInAngularZone(),queueMicrotask(()=>{!t&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(t=!0,e.next(!0))})})});const s=n.onUnstable.subscribe(()=>{zi.assertInAngularZone(),t&&(t=!1,n.runOutsideAngular(()=>{e.next(!1)}))});return()=>{i.unsubscribe(),s.unsubscribe()}}).pipe(Ci()))}let o2=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null,this.internalCallbacks=[]}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){if(this.renderDepth--,0===this.renderDepth){for(const e of this.internalCallbacks)e();this.internalCallbacks.length=0,this.handler?.execute()}}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#t=this.\u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}return n})();function a2(n,t){const e=vo(t,n),i=e[_e];!function(o,a){for(let l=a.length;l<o.blueprint.length;l++)a.push(o.blueprint[l])}(i,e);const s=e[Ms];null!==s&&null===e[fh]&&(e[fh]=Pd(s,e[go])),Gd(i,e,e[ss])}function Gd(n,t,e){Jc(t);try{const i=n.viewQuery;null!==i&&Ld(1,i,e);const s=n.template;null!==s&&ey(n,t,s,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&py(n,t),n.staticViewQueries&&Ld(2,n.viewQuery,e);const r=n.components;null!==r&&function(a,l){for(let h=0;h<l.length;h++)a2(a,l[h])}(t,r)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{t[Yt]&=-5,Qc()}}function qd(n,t,e){let i=e?n.styles:null,s=e?n.classes:null,r=0;if(null!==t)for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?r=a:1==r?s=xt(s,a):2==r&&(i=xt(i,a+": "+t[++o]+";"))}e?n.styles=i:n.stylesWithoutHost=i,e?n.classes=s:n.classesWithoutHost=s}class Ty extends So{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=fo(t);return new Iy(e,this.ngModule)}}function ky(n){const t=[];for(let e in n)n.hasOwnProperty(e)&&t.push({propName:n[e],templateName:e});return t}class l2{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,i){i=dh(i);const s=this.injector.get(t,Rd,i);return s!==Rd||e===Rd?s:this.parentInjector.get(t,e,i)}}class Iy extends W0{get inputs(){const t=this.componentDef,e=t.inputTransforms,i=ky(t.inputs);if(null!==e)for(const s of i)e.hasOwnProperty(s.propName)&&(s.transform=e[s.propName]);return i}get outputs(){return ky(this.componentDef.outputs)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(ob).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,i,s){let r=(s=s||this.ngModule)instanceof Gr?s:s?.injector;r&&null!==this.componentDef.getStandaloneInjector&&(r=this.componentDef.getStandaloneInjector(r)||r);const o=r?new l2(t,r):t,a=o.get(H0,null);if(null===a)throw new Gt(407,!1);const l={rendererFactory:a,sanitizer:o.get(zb,null),inlineEffectRunner:null,afterRenderEventManager:o.get(o2,null)},h=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=i?function(v,x,w,C){const M=C.get(Xb,!1)||w===Cs.ShadowDom;return v.selectRootElement(x,M)}(h,i,this.componentDef.encapsulation,o):D0(h,u,function(v){const x=v.toLowerCase();return"svg"===x?"svg":"math"===x?"math":null}(u)),d=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let p=null;null!==c&&(p=Pd(c,o,!0));const f=Od(0,null,null,1,0,null,null,null,null,null,null),g=Oh(null,f,null,d,null,null,l,h,o,null,p);let m,y;Jc(g);try{const _=this.componentDef;let v,x=null;_.findHostDirectiveDefs?(v=[],x=new Map,_.findHostDirectiveDefs(_,v,x),v.push(_)):v=[_];const C=function(S,F,P,A,T,$,L){const D=T[_e];!function(N,G,Et,mt){for(const Ut of N)G.mergedAttrs=Xc(G.mergedAttrs,Ut.hostAttrs);null!==G.mergedAttrs&&(qd(G,G.mergedAttrs,!0),null!==Et&&Z0(mt,Et,G))}(A,S,F,L);let V=null;null!==F&&(V=Pd(F,T[go]));const z=$.rendererFactory.createRenderer(F,P);let K=16;P.signals?K=4096:P.onPush&&(K=64);const lt=Oh(T,ry(P),null,K,T[S.index],S,$,z,null,null,V);return D.firstCreatePass&&Ad(D,S,A.length-1),Lh(T,lt),T[S.index]=lt}(function(S,F){const P=S[_e],A=Ys;return S[A]=F,Ah(P,A,2,"#host",null)}(g,c),c,_,v,g,l,h);y=Vm(f,Ys),c&&function(S,F,P,A){if(A)Uc(S,P,["ng-version",Gb.full]);else{const{attrs:T,classes:$}=function(D){const V=[],z=[];let K=1,lt=2;for(;K<D.length;){let ut=D[K];if("string"==typeof ut)2===lt?""!==ut&&V.push(ut,D[++K]):8===lt&&z.push(ut);else{if(!Wn(lt))break;lt=ut}K++}return{attrs:V,classes:z}}(F.selectors[0]);T&&Uc(S,P,T),$&&$.length>0&&B0(S,P,$.join(" "))}}(h,_,c,i),void 0!==e&&function(S,F,P){const A=S.projection=[];for(let T=0;T<F.length;T++){const $=P[T];A.push(null!=$?Array.from($):null)}}(y,this.ngContentSelectors,e),m=function(S,F,P,A,T,$){const L=Es(),D=T[_e],V=os(L,T);hy(D,T,L,P,null,A);for(let K=0;K<P.length;K++)Vr(Za(T,D,L.directiveStart+K,L),T);uy(D,T,L),V&&Vr(V,T);const z=Za(T,D,L.directiveStart+L.componentOffset,L);if(S[ss]=T[ss]=z,null!==$)for(const K of $)K(z,F);return iy(D,L,S),z}(C,_,v,x,g,[u2]),Gd(f,g,null)}finally{Qc()}return new h2(this.componentType,m,Rh(y,g),g,y)}}class h2 extends Lb{constructor(t,e,i,s,r){super(),this.location=i,this._rootLView=s,this._tNode=r,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new $a(s,void 0,!1),this.componentType=t}setInput(t,e){const i=this._tNode.inputs;let s;if(null!==i&&(s=i[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;const r=this._rootLView;Dd(r[_e],r,s,t,e),this.previousInputValues.set(t,e),vy(vo(this._tNode.index,r))}}get injector(){return new Wa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function u2(){const n=Es();id($i()[_e],n)}function Vd(n,t,e){return!Object.is(n[t],e)&&(n[t]=e,!0)}function Dh(n,t){return n<<17|t<<2}function Br(n){return n>>17&32767}function Bd(n){return 2|n}function ko(n){return(131068&n)>>2}function Zd(n,t){return-131069&n|t<<2}function Wd(n){return 1|n}function Py(n,t,e,i,s){const r=n[e+1],o=null===t;let a=i?Br(r):ko(r),l=!1;for(;0!==a&&(!1===l||o);){const h=n[a+1];c2(n[a],t)&&(l=!0,n[a+1]=i?Wd(h):Bd(h)),a=i?Br(h):ko(h)}l&&(n[e+1]=i?Bd(r):Wd(r))}function c2(n,t){return null===n||null==t||(Array.isArray(n)?n[1]:n)===t||!(!Array.isArray(n)||"string"!=typeof t)&&Ha(n,t)>=0}function Js(n,t,e){const i=$i();return Vd(i,Ym(),t)&&function(r,o,a,l,h,u,c,d){const p=os(o,a);let f,g=o.inputs;var y;null!=g&&(f=g[l])?(Dd(r,a,f,l,h),_h(o)&&function(y,_){const v=vo(_,y);16&v[Yt]||(v[Yt]|=64)}(a,o.index)):3&o.type&&(l="class"===(y=l)?"className":"for"===y?"htmlFor":"formaction"===y?"formAction":"innerHtml"===y?"innerHTML":"readonly"===y?"readOnly":"tabindex"===y?"tabIndex":y,h=null!=c?c(h,o.value||"",l):h,u.setProperty(p,l,h))}(zr(),function(){const r=Se.lFrame;return Vm(r.tView,r.selectedIndex)}(),i,n,t,i[nn],e),Js}function Ry(n,t,e,i,s){const r=s?"class":"style";Dd(n,e,t.inputs[r],r,i)}function Nh(n,t,e){return function(s,r,o,a){const l=$i(),h=zr(),u=function(d){const p=Se.lFrame,f=p.bindingIndex;return p.bindingIndex=p.bindingIndex+2,f}();var d,p,g;h.firstUpdatePass&&function(d,p,f,g){const m=d.data;if(null===m[f+1]){const y=m[xo()],_=f>=d.expandoStartIndex;0!=(16&y.flags)&&null===p&&!_&&(p=!1),p=function(x,w,C,M){const S=function(A){const T=Se.lFrame.currentDirectiveIndex;return-1===T?null:A[T]}(x);let F=w.residualStyles;if(null===S)0===w.styleBindings&&(C=Ka(C=Hd(null,x,w,C,M),w.attrs,M),F=null);else{const P=w.directiveStylingLast;if(-1===P||x[P]!==S)if(C=Hd(S,x,w,C,M),null===F){let A=function($,L,D){const V=L.styleBindings;if(0!==ko(V))return $[Br(V)]}(x,w);void 0!==A&&Array.isArray(A)&&(A=Hd(null,x,w,A[1],M),A=Ka(A,w.attrs,M),V=A,x[Br(w.styleBindings)]=V)}else F=function(T,$,L){let D;const V=$.directiveEnd;for(let z=1+$.directiveStylingLast;z<V;z++)D=Ka(D,T[z].hostAttrs,!1);return Ka(D,$.attrs,!1)}(x,w)}var V;return void 0!==F&&(w.residualStyles=F),C}(m,y,p,!1),function(x,w,C,M,S,F){let P=w.styleBindings,A=Br(P),T=ko(P);x[M]=C;let $,L=!1;if(Array.isArray(C)?($=C[1],(null===$||Ha(C,$)>0)&&(L=!0)):$=C,S)if(0!==T){const D=Br(x[A+1]);x[M+1]=Dh(D,A),0!==D&&(x[D+1]=Zd(x[D+1],M)),x[A+1]=131071&x[A+1]|M<<17}else x[M+1]=Dh(A,0),0!==A&&(x[A+1]=Zd(x[A+1],M)),A=M;else x[M+1]=Dh(T,0),0===A?A=M:x[T+1]=Zd(x[T+1],M),T=M;L&&(x[M+1]=Bd(x[M+1])),Py(x,$,M,!0),Py(x,$,M,!1),function(V,z,K,lt,ut){const N=V.residualStyles;null!=N&&"string"==typeof z&&Ha(N,z)>=0&&(K[lt+1]=Wd(K[lt+1]))}(w,$,x,M),P=Dh(A,T),w.styleBindings=P}(m,y,p,f,_)}}(h,s,u),r!==To&&Vd(l,u,r)&&function(d,p,f,g,m,y,_,v){if(!(3&p.type))return;const x=d.data,w=x[v+1];zh(1==(1&w)?Fy(x,p,f,m,ko(w),false):void 0)||(zh(y)||2==(2&w)&&(y=Fy(x,null,f,m,v,false)),function(S,F,P,A,T){{let $=-1===A.indexOf("-")?void 0:qr.DashCase;null==T?S.removeStyle(P,A,$):("string"==typeof T&&T.endsWith("!important")&&(T=T.slice(0,-10),$|=qr.Important),S.setStyle(P,A,T,$))}}(g,0,qm(xo(),f),m,y))}(h,h.data[xo()],l,l[nn],s,l[u+1]=(p=o,null==(d=r)||""===d||("string"==typeof p?d+=p:"object"==typeof d&&(d=Rt((g=d)instanceof Ob?g.changingThisBreaksApplicationSecurity:g))),d),0,u)}(n,t,e),Nh}function Hd(n,t,e,i,s){let r=null;const o=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<o&&(r=t[a],i=Ka(i,r.hostAttrs,s),r!==n);)a++;return null!==n&&(e.directiveStylingLast=a),i}function Ka(n,t,e){const i=e?1:2;let s=-1;if(null!==t)for(let r=0;r<t.length;r++){const o=t[r];"number"==typeof o?s=o:s===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),wb(n,o,!!e||t[++r]))}return void 0===n?null:n}function Fy(n,t,e,i,s,r){const o=null===t;let a;for(;s>0;){const l=n[s],h=Array.isArray(l),u=h?l[1]:l,c=null===u;let d=e[s+1];d===To&&(d=c?Zn:void 0);let p=c?hd(d,i):u===i?d:void 0;if(h&&!zh(p)&&(p=hd(l,i)),zh(p)&&(a=p,o))return a;const f=n[s+1];s=o?Br(f):ko(f)}if(null!==t){let l=r?t.residualClasses:t.residualStyles;null!=l&&(a=hd(l,i))}return a}function zh(n){return void 0!==n}function Oy(n,t){return!t||null===t.firstChild||P0(n)}let Ud=(()=>{class n{static#t=this.__NG_ELEMENT_ID__=p2}return n})();function p2(){return function(t,e){let i;const s=e[t.index];return Xn(s)?i=s:(i=dy(s,e,null,t),e[t.index]=i,Lh(e,i)),g2(i,e,t,s),new Ay(i,t,e)}(Es(),$i())}const f2=Ud,Ay=class extends f2{constructor(n,t,e){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=e}get element(){return Rh(this._hostTNode,this._hostLView)}get injector(){return new Wa(this._hostTNode,this._hostLView)}get parentInjector(){const n=ad(this._hostTNode,this._hostLView);if(r0(n)){const t=Sh(n,this._hostLView),e=Mh(n);return new Wa(t[_e].data[e+8],t)}return new Wa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const t=Ly(this._lContainer);return null!==t&&t[n]||null}get length(){return this._lContainer.length-On}createEmbeddedView(n,t,e){let i,s;"number"==typeof e?i=e:null!=e&&(i=e.index,s=e.injector);const r=n.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(r,i,Oy(this._hostTNode,null)),r}createComponent(n,t,e,i,s){const r=n&&!("function"==typeof n);let o;if(r)o=t;else{const u=t||{};o=u.index,e=u.injector,i=u.projectableNodes,s=u.environmentInjector||u.ngModuleRef}const a=r?n:new Iy(fo(n)),l=e||this.parentInjector;if(!s&&null==a.ngModule){const u=(r?l:this.parentInjector).get(Gr,null);u&&(s=u)}fo(a.componentType??{});const h=a.create(l,i,null,s);return this.insertImpl(h.hostView,o,Oy(this._hostTNode,null)),h}insert(n,t){return this.insertImpl(n,t,!0)}insertImpl(n,t,e){const i=n._lView;if(Xn(i[Zi])){const o=this.indexOf(n);if(-1!==o)this.detach(o);else{const a=i[Zi],l=new Ay(a,a[Un],a[Zi]);l.detach(l.indexOf(n))}}const s=this._adjustIndex(t),r=this._lContainer;return function d2(n,t,e,i=!0){const s=t[_e];if(function(a,l,h,u){const c=On+u,d=h.length;u>0&&(h[c-1][Hn]=l),u<d-On?(l[Hn]=h[c],v0(h,On+u,l)):(h.push(l),l[Hn]=null),l[Zi]=h;const p=l[gh];null!==p&&h!==p&&function(m,y){const _=m[yh];y[rs]!==y[Zi][Zi][rs]&&(m[Yt]|=_o.HasTransplantedViews),null===_?m[yh]=[y]:_.push(y)}(p,l);const f=l[ja];null!==f&&f.insertView(a),Wm(l),l[Yt]|=128}(s,t,n,e),i){const o=kd(e,n),a=t[nn],l=Ed(a,n[Dr]);null!==l&&(u=s,c=n[Un],d=a,g=o,(p=t)[Ms]=f=l,p[Un]=c,Xa(u,p,d,1,f,g))}var u,c,d,p,f,g;const r=t[fh];null!==r&&null!==r.firstChild&&(r.firstChild=null)}(r,i,s,e),n.attachToViewContainerRef(),v0(Xd(r),s,n),n}move(n,t){return this.insert(n,t)}indexOf(n){const t=Ly(this._lContainer);return null!==t?t.indexOf(n):-1}remove(n){const t=this._adjustIndex(n,-1),e=Md(this._lContainer,t);e&&(Th(Xd(this._lContainer),t),z0(e[_e],e))}detach(n){const t=this._adjustIndex(n,-1),e=Md(this._lContainer,t);return e&&null!=Th(Xd(this._lContainer),t)?new $a(e):null}_adjustIndex(n,t=0){return n??this.length+t}};function Ly(n){return n[8]}function Xd(n){return n[8]||(n[8]=[])}let g2=function(t,e,i,s){if(t[Dr])return;let r;r=8&i.type?Ss(s):function(a,l){const h=a[nn],u=h.createComment(""),c=os(l,a);return Ih(h,Ed(h,c),u,h.nextSibling(c),!1),u}(e,i),t[Dr]=r},m2=(n,t,e)=>!1;function Io(n,t,e,i,s,r,o,a){const l=$i(),h=zr(),u=n+Ys,c=h.firstCreatePass?function(g,m,y,_,v,x,w,C,M){const S=m.consts,F=Ah(m,g,4,w||null,xh(S,C));ly(m,y,F,xh(S,M)),id(m,F);const P=F.tView=Od(2,F,_,v,x,m.directiveRegistry,m.pipeRegistry,null,m.schemas,S,null);return null!==m.queries&&(m.queries.template(m,F),P.queries=m.queries.embeddedTView(F)),F}(u,h,l,t,e,i,s,r,o):h.data[u];Ba(c,!1);const d=y2(h,l,c,n);td()&&Td(h,l,d,c),Vr(d,l);const p=dy(d,l,d,c);return l[u]=p,Lh(l,p),m2(p,c,l),Dm(c)&&ny(h,l,c),null!=o&&sy(l,c,a),Io}let y2=function(t,e,i,s){return ed(!0),e[nn].createComment("")};function un(n,t,e,i){const s=$i(),r=zr(),o=Ys+n,a=s[nn],l=r.firstCreatePass?function(d,p,f,g,m,y){const _=p.consts,v=Ah(p,d,2,g,xh(_,m));return ly(p,f,v,xh(_,y)),null!==v.attrs&&qd(v,v.attrs,!1),null!==v.mergedAttrs&&qd(v,v.mergedAttrs,!0),null!==p.queries&&p.queries.elementStart(p,v),v}(o,r,s,t,e,i):r.data[o],h=_2(r,s,l,a,t,n);s[o]=h;const u=Dm(l);return Ba(l,!0),Z0(a,h,l),32!=(32&l.flags)&&td()&&Td(r,s,h,l),0===Se.lFrame.elementDepthCount&&Vr(h,s),Se.lFrame.elementDepthCount++,u&&(ny(r,s,l),iy(r,l,s)),null!==i&&sy(s,l),un}function wn(){let n=Es();Xm()?Se.lFrame.isParent=!1:(n=n.parent,Ba(n,!1));const t=n;Se.skipHydrationRootTNode===t&&(Se.skipHydrationRootTNode=null),Se.lFrame.elementDepthCount--;const e=zr();return e.firstCreatePass&&(id(e,n),Lm(n)&&e.queries.elementEnd(n)),null!=t.classesWithoutHost&&function(s){return 0!=(8&s.flags)}(t)&&Ry(e,t,$i(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(s){return 0!=(16&s.flags)}(t)&&Ry(e,t,$i(),t.stylesWithoutHost,!1),wn}function Po(n,t,e,i){return un(n,t,e,i),wn(),Po}let _2=(n,t,e,i,s,r)=>(ed(!0),D0(i,s,Se.lFrame.currentNamespace));const Zr=void 0;var v2=["en",[["a","p"],["AM","PM"],Zr],[["AM","PM"],Zr,Zr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Zr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Zr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Zr,"{1} 'at' {0}",Zr],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const e=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===i?1:5}];let Yd={};function Yn(n){const t=n.toLowerCase().replace(/_/g,"-");let e=Dy(t);if(e)return e;const i=t.split("-")[0];if(e=Dy(i),e)return e;if("en"===i)return v2;throw new Gt(701,!1)}function Dy(n){return n in Yd||(Yd[n]=Ii.ng&&Ii.ng.common&&Ii.ng.common.locales&&Ii.ng.common.locales[n]),Yd[n]}var Fi=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Fi||{});const jh="en-US";let x2=jh;function Ny(n){return!!n&&"function"==typeof n.then}function w2(n){return!!n&&"function"==typeof n.subscribe}function Gh(n=1){return(Se.lFrame.contextLView=function(s,r){for(;s>0;)r=r[mo],s--;return r}(n,Se.lFrame.contextLView))[ss]}function Ro(n,t=""){const e=$i(),i=zr(),s=n+Ys,r=i.firstCreatePass?Ah(i,s,1,t,null):i.data[s],o=b2(i,e,r,t,n);e[s]=o,td()&&Td(i,e,o,r),Ba(r,!1)}let b2=(n,t,e,i,s)=>(ed(!0),t[nn].createText(i));function qh(n){return zy("",n,""),qh}function zy(n,t,e){const i=$i(),s=(a=n,l=t,h=e,Vd(i,Ym(),l)?a+R(l)+h:To);var a,l,h;return s!==To&&function(o,a,l){const h=qm(a,o);o[nn].setValue(h,l)}(i,xo(),s),zy}class Ja{}class C2{}class jy extends Ja{constructor(t,e,i){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ty(this);const s=function(o,a){return o[hi]||null}(t);var o;this._bootstrapComponents=(o=s.bootstrap)instanceof Function?o():o,this._r3Injector=T0(t,e,[{provide:Ja,useValue:this},{provide:So,useValue:this.componentFactoryResolver},...i],Rt(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class M2 extends C2{constructor(t){super(),this.moduleType=t}create(t){return new jy(this.moduleType,t,[])}}class S2 extends Ja{constructor(t){super(),this.componentFactoryResolver=new Ty(this),this.instance=null;const e=new yd([...t.providers,{provide:Ja,useValue:this},{provide:So,useValue:this.componentFactoryResolver}],t.parent||md(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}let E2=(()=>{class n{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){const i=C0(0,e.type),s=i.length>0?function(o,a,l=null){return new S2({providers:o,parent:a,debugName:l,runEnvironmentInitializers:!0}).injector}([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,s)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}static#t=this.\u0275prov=B({token:n,providedIn:"environment",factory:()=>new n(Tt(Gr))})}return n})();function Qa(n){var e;wy.has(e="NgStandalone")||(wy.add(e),performance?.mark?.("mark_use_counter",{detail:{feature:e}})),n.getStandaloneInjector=t=>t.get(E2).getOrCreateStandaloneInjector(n)}let $d=(()=>{class n{static#t=this.__NG_ELEMENT_ID__=I2}return n})();const T2=$d,k2=class extends T2{constructor(n,t,e){super(),this._declarationLView=n,this._declarationTContainer=t,this.elementRef=e}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,t){return this.createEmbeddedViewImpl(n,t)}createEmbeddedViewImpl(n,t,e){const i=function(r,o,a,l){const h=o.tView,u=Oh(r,h,a,4096&r[Yt]?4096:16,null,o,null,null,null,l?.injector??null,l?.dehydratedView??null);u[gh]=r[o.index];const c=r[ja];return null!==c&&(u[ja]=c.createEmbeddedView(h)),Gd(h,u,a),u}(this._declarationLView,this._declarationTContainer,n,{injector:t,dehydratedView:e});return new $a(i)}};function I2(){return t=Es(),e=$i(),4&t.type?new k2(e,t,Rh(t,e)):null;var t,e}const P2=new Qt("Application Initializer");let Gy=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i}),this.appInits=Ri(P2,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const e=[];for(const s of this.appInits){const r=s();if(Ny(r))e.push(r);else if(w2(r)){const o=new Promise((a,l)=>{r.subscribe({complete:a,error:l})});e.push(o)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(s=>{this.reject(s)}),0===e.length&&i(),this.initialized=!0}static#t=this.\u0275fac=function(e){return new(e||n)};static#e=this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Kd=new Qt("LocaleId",{providedIn:"root",factory:()=>Ri(Kd,Wt.Optional|Wt.SkipSelf)||typeof $localize<"u"&&$localize.locale||jh});let Jd=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ne(!1)}add(){this.hasPendingTasks.next(!0);const e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#t=this.\u0275fac=function(e){return new(e||n)};static#e=this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const qy=new Qt(""),Vh=new Qt("");let Qd,tp=(()=>{class n{constructor(e,i,s){this._ngZone=e,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Qd||(Qd=s,s.addToWindow(i)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{zi.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(e)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,s){let r=-1;i&&i>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==r),e(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:s})}whenStable(e,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,i,s){return[]}static#t=this.\u0275fac=function(e){return new(e||n)(Tt(zi),Tt(ep),Tt(Vh))};static#e=this.\u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),ep=(()=>{class n{constructor(){this._applications=new Map}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return Qd?.findTestabilityInTree(this,e,i)??null}static#t=this.\u0275fac=function(e){return new(e||n)};static#e=this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),tl=null;const Vy=new Qt("AllowMultipleToken"),By=new Qt("PlatformDestroyListeners"),R2=new Qt("appBootstrapListener");function Zy(n,t,e=[]){const i=`Platform: ${t}`,s=new Qt(i);return(r=[])=>{let o=Wy();if(!o||o.injector.get(Vy,!1)){const a=[...e,...r,{provide:s,useValue:!0}];n?n(a):function(h){if(tl&&!tl.get(Vy,!1))throw new Gt(400,!1);var d;Xe=()=>{throw new Gt(600,!1)},tl=h,h.get(Hy),d=h,d.get(k0,null)?.forEach(p=>p())}(function(h=[],u){return Ua.create({name:u,providers:[{provide:fd,useValue:"platform"},{provide:By,useValue:new Set([()=>tl=null])},...h]})}(a,i))}return function(l){const h=Wy();if(!h)throw new Gt(401,!1);return h}()}}function Wy(){return tl?.get(Hy)??null}let Hy=(()=>{class n{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,i){const s=function(o="zone.js",a){return"noop"===o?new r2:"zone.js"===o?new zi(a):o}(i?.ngZone,(o={eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing},{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:o?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:o?.runCoalescing??!1}));var o;return s.run(()=>{const r=new jy(e.moduleType,this.injector,[{provide:zi,useFactory:()=>s},{provide:ud,multi:!0,useFactory:()=>{const h=Ri(O2,{optional:!0});return()=>h.initialize()}},{provide:Xy,useFactory:F2},{provide:Sy,useFactory:Ey}]),o=r.injector.get(Eo,null);return s.runOutsideAngular(()=>{const a=s.onError.subscribe({next:l=>{o.handleError(l)}});r.onDestroy(()=>{Zh(this._modules,r),a.unsubscribe()})}),function(l,h,u){try{const c=u();return Ny(c)?c.catch(d=>{throw h.runOutsideAngular(()=>l.handleError(d)),d}):c}catch(c){throw h.runOutsideAngular(()=>l.handleError(c)),c}}(o,s,()=>{const a=r.injector.get(Gy);return a.runInitializers(),a.donePromise.then(()=>{return function H(n,t){null==n&&function(i,s,r,o){throw new Error(`ASSERTION ERROR: ${i} [Expected=> null != ${s} <=Actual]`)}(t,n)}(h=r.injector.get(Kd,jh)||jh,"Expected localeId to be defined"),"string"==typeof h&&(x2=h.toLowerCase().replace(/_/g,"-")),this._moduleDoBootstrap(r),r;var h})})})}bootstrapModule(e,i=[]){const s=Uy({},i);return function(o,a,l){const h=new M2(l);return Promise.resolve(h)}(0,0,e).then(r=>this.bootstrapModuleFactory(r,s))}_moduleDoBootstrap(e){const i=e.injector.get(Bh);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(s=>i.bootstrap(s));else{if(!e.instance.ngDoBootstrap)throw new Gt(-403,!1);e.instance.ngDoBootstrap(i)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Gt(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const e=this._injector.get(By,null);e&&(e.forEach(i=>i()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#t=this.\u0275fac=function(e){return new(e||n)(Tt(Ua))};static#e=this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function Uy(n,t){return Array.isArray(t)?t.reduce(Uy,n):{...n,...t}}let Bh=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ri(Xy),this.zoneIsStable=Ri(Sy),this.componentTypes=[],this.components=[],this.isStable=Ri(Jd).hasPendingTasks.pipe(Be(e=>e?bt(!1):this.zoneIsStable),function(i,s=Vn){return i=i??Ie,en((r,o)=>{let a,l=!0;r.subscribe(ln(o,h=>{const u=s(h);(l||!i(a,u))&&(l=!1,a=u,o.next(h))}))})}(),Ci()),this._injector=Ri(Gr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,i){const s=e instanceof W0;if(!this._injector.get(Gy).done)throw!s&&(fo(c=e)||Em(c)||Tm(c)),new Gt(405,!1);var c;let r;r=s?e:this._injector.get(So).resolveComponentFactory(e),this.componentTypes.push(r.componentType);const o=r.isBoundToModule?void 0:this._injector.get(Ja),a=r.create(Ua.NULL,[],i||r.selector,o),l=a.location.nativeElement,h=a.injector.get(qy,null);return h?.registerApplication(l),a.onDestroy(()=>{this.detachView(a.hostView),Zh(this.components,a),h?.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Gt(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this.internalErrorHandler(e)}finally{this._runningTick=!1}}attachView(e){const i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){const i=e;Zh(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const i=this._injector.get(R2,[]);[...this._bootstrapListeners,...i].forEach(s=>s(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Zh(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new Gt(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#t=this.\u0275fac=function(e){return new(e||n)};static#e=this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zh(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const Xy=new Qt("",{providedIn:"root",factory:()=>Ri(Eo).handleError.bind(void 0)});function F2(){const n=Ri(zi),t=Ri(Eo);return e=>n.runOutsideAngular(()=>t.handleError(e))}let O2=(()=>{class n{constructor(){this.zone=Ri(zi),this.applicationRef=Ri(Bh)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#t=this.\u0275fac=function(e){return new(e||n)};static#e=this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const A2=Zy(null,"core",[]);let L2=(()=>{class n{constructor(e){}static#t=this.\u0275fac=function(e){return new(e||n)(Tt(Bh))};static#e=this.\u0275mod=po({type:n});static#i=this.\u0275inj=pt({})}return n})(),ip=null;function np(){return ip}class D2{}const Qs=new Qt("DocumentToken");var sn=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(sn||{}),Qe=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Qe||{}),bn=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(bn||{}),Ts=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(Ts||{});function Wh(n,t){return An(Yn(n)[Fi.DateFormat],t)}function Hh(n,t){return An(Yn(n)[Fi.TimeFormat],t)}function Uh(n,t){return An(Yn(n)[Fi.DateTimeFormat],t)}function Xh(n,t){const e=Yn(n),i=e[Fi.NumberSymbols][t];if(typeof i>"u"){if(t===Ts.CurrencyDecimal)return e[Fi.NumberSymbols][Ts.Decimal];if(t===Ts.CurrencyGroup)return e[Fi.NumberSymbols][Ts.Group]}return i}function Yy(n){if(!n[Fi.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Fi.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function An(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function sp(n){const[t,e]=n.split(":");return{hours:+t,minutes:+e}}const N2=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,el={},z2=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var ks=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(ks||{}),Ae=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Ae||{}),Le=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Le||{});function j2(n,t,e,i){let s=function(u){if(Jy(u))return u;if("number"==typeof u&&!isNaN(u))return new Date(u);if("string"==typeof u){if(u=u.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(u)){const[f,g=1,m=1]=u.split("-").map(y=>+y);return Yh(f,g-1,m)}const d=parseFloat(u);if(!isNaN(u-d))return new Date(d);let p;if(p=u.match(N2))return function(g){const m=new Date(0);let y=0,_=0;const v=g[8]?m.setUTCFullYear:m.setFullYear,x=g[8]?m.setUTCHours:m.setHours;g[9]&&(y=Number(g[9]+g[10]),_=Number(g[9]+g[11])),v.call(m,Number(g[1]),Number(g[2])-1,Number(g[3]));const w=Number(g[4]||0)-y,C=Number(g[5]||0)-_,M=Number(g[6]||0),S=Math.floor(1e3*parseFloat("0."+(g[7]||0)));return x.call(m,w,C,M,S),m}(p)}const c=new Date(u);if(!Jy(c))throw new Error(`Unable to convert "${u}" into a date`);return c}(n);t=Is(e,t)||t;let r,o=[];for(;t;){if(r=z2.exec(t),!r){o.push(t);break}{o=o.concat(r.slice(1));const h=o.pop();if(!h)break;t=h}}let a=s.getTimezoneOffset();i&&(a=Ky(i,a),s=function(u,c,d){const f=u.getTimezoneOffset();return m=u,y=-1*(Ky(c,f)-f),(m=new Date(m.getTime())).setMinutes(m.getMinutes()+y),m;var m,y}(s,i));let l="";return o.forEach(h=>{const u=function(d){if(op[d])return op[d];let p;switch(d){case"G":case"GG":case"GGG":p=ri(Le.Eras,Qe.Abbreviated);break;case"GGGG":p=ri(Le.Eras,Qe.Wide);break;case"GGGGG":p=ri(Le.Eras,Qe.Narrow);break;case"y":p=Oi(Ae.FullYear,1,0,!1,!0);break;case"yy":p=Oi(Ae.FullYear,2,0,!0,!0);break;case"yyy":p=Oi(Ae.FullYear,3,0,!1,!0);break;case"yyyy":p=Oi(Ae.FullYear,4,0,!1,!0);break;case"Y":p=Qh(1);break;case"YY":p=Qh(2,!0);break;case"YYY":p=Qh(3);break;case"YYYY":p=Qh(4);break;case"M":case"L":p=Oi(Ae.Month,1,1);break;case"MM":case"LL":p=Oi(Ae.Month,2,1);break;case"MMM":p=ri(Le.Months,Qe.Abbreviated);break;case"MMMM":p=ri(Le.Months,Qe.Wide);break;case"MMMMM":p=ri(Le.Months,Qe.Narrow);break;case"LLL":p=ri(Le.Months,Qe.Abbreviated,sn.Standalone);break;case"LLLL":p=ri(Le.Months,Qe.Wide,sn.Standalone);break;case"LLLLL":p=ri(Le.Months,Qe.Narrow,sn.Standalone);break;case"w":p=rp(1);break;case"ww":p=rp(2);break;case"W":p=rp(1,!0);break;case"d":p=Oi(Ae.Date,1);break;case"dd":p=Oi(Ae.Date,2);break;case"c":case"cc":p=Oi(Ae.Day,1);break;case"ccc":p=ri(Le.Days,Qe.Abbreviated,sn.Standalone);break;case"cccc":p=ri(Le.Days,Qe.Wide,sn.Standalone);break;case"ccccc":p=ri(Le.Days,Qe.Narrow,sn.Standalone);break;case"cccccc":p=ri(Le.Days,Qe.Short,sn.Standalone);break;case"E":case"EE":case"EEE":p=ri(Le.Days,Qe.Abbreviated);break;case"EEEE":p=ri(Le.Days,Qe.Wide);break;case"EEEEE":p=ri(Le.Days,Qe.Narrow);break;case"EEEEEE":p=ri(Le.Days,Qe.Short);break;case"a":case"aa":case"aaa":p=ri(Le.DayPeriods,Qe.Abbreviated);break;case"aaaa":p=ri(Le.DayPeriods,Qe.Wide);break;case"aaaaa":p=ri(Le.DayPeriods,Qe.Narrow);break;case"b":case"bb":case"bbb":p=ri(Le.DayPeriods,Qe.Abbreviated,sn.Standalone,!0);break;case"bbbb":p=ri(Le.DayPeriods,Qe.Wide,sn.Standalone,!0);break;case"bbbbb":p=ri(Le.DayPeriods,Qe.Narrow,sn.Standalone,!0);break;case"B":case"BB":case"BBB":p=ri(Le.DayPeriods,Qe.Abbreviated,sn.Format,!0);break;case"BBBB":p=ri(Le.DayPeriods,Qe.Wide,sn.Format,!0);break;case"BBBBB":p=ri(Le.DayPeriods,Qe.Narrow,sn.Format,!0);break;case"h":p=Oi(Ae.Hours,1,-12);break;case"hh":p=Oi(Ae.Hours,2,-12);break;case"H":p=Oi(Ae.Hours,1);break;case"HH":p=Oi(Ae.Hours,2);break;case"m":p=Oi(Ae.Minutes,1);break;case"mm":p=Oi(Ae.Minutes,2);break;case"s":p=Oi(Ae.Seconds,1);break;case"ss":p=Oi(Ae.Seconds,2);break;case"S":p=Oi(Ae.FractionalSeconds,1);break;case"SS":p=Oi(Ae.FractionalSeconds,2);break;case"SSS":p=Oi(Ae.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":p=Kh(ks.Short);break;case"ZZZZZ":p=Kh(ks.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":p=Kh(ks.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":p=Kh(ks.Long);break;default:return null}return op[d]=p,p}(h);l+=u?u(s,e,a):"''"===h?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Yh(n,t,e){const i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function Is(n,t){const e=Yn(n)[Fi.LocaleId];if(el[e]=el[e]||{},el[e][t])return el[e][t];let i="";switch(t){case"shortDate":i=Wh(n,bn.Short);break;case"mediumDate":i=Wh(n,bn.Medium);break;case"longDate":i=Wh(n,bn.Long);break;case"fullDate":i=Wh(n,bn.Full);break;case"shortTime":i=Hh(n,bn.Short);break;case"mediumTime":i=Hh(n,bn.Medium);break;case"longTime":i=Hh(n,bn.Long);break;case"fullTime":i=Hh(n,bn.Full);break;case"short":const s=Is(n,"shortTime"),r=Is(n,"shortDate");i=$h(Uh(n,bn.Short),[s,r]);break;case"medium":const o=Is(n,"mediumTime"),a=Is(n,"mediumDate");i=$h(Uh(n,bn.Medium),[o,a]);break;case"long":const l=Is(n,"longTime"),h=Is(n,"longDate");i=$h(Uh(n,bn.Long),[l,h]);break;case"full":const u=Is(n,"fullTime"),c=Is(n,"fullDate");i=$h(Uh(n,bn.Full),[u,c])}return i&&(el[e][t]=i),i}function $h(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return null!=t&&i in t?t[i]:e})),n}function $n(n,t,e="-",i,s){let r="";(n<0||s&&n<=0)&&(s?n=1-n:(n=-n,r=e));let o=String(n);for(;o.length<t;)o="0"+o;return i&&(o=o.slice(o.length-t)),r+o}function Oi(n,t,e=0,i=!1,s=!1){return function(r,o){let a=function(u,c){switch(u){case Ae.FullYear:return c.getFullYear();case Ae.Month:return c.getMonth();case Ae.Date:return c.getDate();case Ae.Hours:return c.getHours();case Ae.Minutes:return c.getMinutes();case Ae.Seconds:return c.getSeconds();case Ae.FractionalSeconds:return c.getMilliseconds();case Ae.Day:return c.getDay();default:throw new Error(`Unknown DateType value "${u}".`)}}(n,r);if((e>0||a>-e)&&(a+=e),n===Ae.Hours)0===a&&-12===e&&(a=12);else if(n===Ae.FractionalSeconds)return c=t,$n(a,3).substring(0,c);var c;const l=Xh(o,Ts.MinusSign);return $n(a,t,l,i,s)}}function ri(n,t,e=sn.Format,i=!1){return function(s,r){return function(a,l,h,u,c,d){switch(h){case Le.Months:return function(m,y,_){const v=Yn(m),x=An([v[Fi.MonthsFormat],v[Fi.MonthsStandalone]],y);return An(x,_)}(l,c,u)[a.getMonth()];case Le.Days:return function(m,y,_){const v=Yn(m),x=An([v[Fi.DaysFormat],v[Fi.DaysStandalone]],y);return An(x,_)}(l,c,u)[a.getDay()];case Le.DayPeriods:const p=a.getHours(),f=a.getMinutes();if(d){const g=function(v){const x=Yn(v);return Yy(x),(x[Fi.ExtraData][2]||[]).map(w=>"string"==typeof w?sp(w):[sp(w[0]),sp(w[1])])}(l),m=function(v,x,w){const C=Yn(v);Yy(C);const M=An([C[Fi.ExtraData][0],C[Fi.ExtraData][1]],x)||[];return An(M,w)||[]}(l,c,u),y=g.findIndex(_=>{if(Array.isArray(_)){const[v,x]=_,w=p>=v.hours&&f>=v.minutes,C=p<x.hours||p===x.hours&&f<x.minutes;if(v.hours<x.hours){if(w&&C)return!0}else if(w||C)return!0}else if(_.hours===p&&_.minutes===f)return!0;return!1});if(-1!==y)return m[y]}return function(m,y,_){const v=Yn(m),x=An([v[Fi.DayPeriodsFormat],v[Fi.DayPeriodsStandalone]],y);return An(x,_)}(l,c,u)[p<12?0:1];case Le.Eras:return(m=l,y=u,An(Yn(m)[Fi.Eras],y))[a.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${h}`)}var m,y}(s,r,n,t,e,i)}}function Kh(n){return function(t,e,i){const s=-1*i,r=Xh(e,Ts.MinusSign),o=s>0?Math.floor(s/60):Math.ceil(s/60);switch(n){case ks.Short:return(s>=0?"+":"")+$n(o,2,r)+$n(Math.abs(s%60),2,r);case ks.ShortGMT:return"GMT"+(s>=0?"+":"")+$n(o,1,r);case ks.Long:return"GMT"+(s>=0?"+":"")+$n(o,2,r)+":"+$n(Math.abs(s%60),2,r);case ks.Extended:return 0===i?"Z":(s>=0?"+":"")+$n(o,2,r)+":"+$n(Math.abs(s%60),2,r);default:throw new Error(`Unknown zone width "${n}"`)}}}const G2=0,Jh=4;function $y(n){return Yh(n.getFullYear(),n.getMonth(),n.getDate()+(Jh-n.getDay()))}function rp(n,t=!1){return function(e,i){let s;if(t){const r=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,o=e.getDate();s=1+Math.floor((o+r)/7)}else{const r=$y(e),o=function(h){const u=Yh(h,G2,1).getDay();return Yh(h,0,1+(u<=Jh?Jh:Jh+7)-u)}(r.getFullYear()),a=r.getTime()-o.getTime();s=1+Math.round(a/6048e5)}return $n(s,n,Xh(i,Ts.MinusSign))}}function Qh(n,t=!1){return function(e,i){return $n($y(e).getFullYear(),n,Xh(i,Ts.MinusSign),t)}}const op={};function Ky(n,t){n=n.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function Jy(n){return n instanceof Date&&!isNaN(n.valueOf())}function Qy(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[s,r]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(s.trim()===t)return decodeURIComponent(r)}return null}class q2{constructor(t,e,i,s){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let t_=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,s){this._viewContainer=e,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((s,r,o)=>{if(null==s.previousIndex)i.createEmbeddedView(this._template,new q2(s.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===r?void 0:r);else if(null!==r){const a=i.get(r);i.move(a,o),e_(a,s)}});for(let s=0,r=i.length;s<r;s++){const o=i.get(s).context;o.index=s,o.count=r,o.ngForOf=this._ngForOf}e.forEachIdentityChange(s=>{e_(i.get(s.currentIndex),s)})}static ngTemplateContextGuard(e,i){return!0}static#t=this.\u0275fac=function(e){return new(e||n)(Mi(Ud),Mi($d),Mi(K0))};static#e=this.\u0275dir=Sm({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function e_(n,t){n.context.$implicit=t.item}let ap=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new V2,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){i_("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){i_("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}static#t=this.\u0275fac=function(e){return new(e||n)(Mi(Ud),Mi($d))};static#e=this.\u0275dir=Sm({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class V2{constructor(){this.$implicit=null,this.ngIf=null}}function i_(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Rt(t)}'.`)}const B2=new Qt("DATE_PIPE_DEFAULT_TIMEZONE"),Z2=new Qt("DATE_PIPE_DEFAULT_OPTIONS");let W2=(()=>{class n{constructor(e,i,s){this.locale=e,this.defaultTimezone=i,this.defaultOptions=s}transform(e,i,s,r){if(null==e||""===e||e!=e)return null;try{return j2(e,i??this.defaultOptions?.dateFormat??"mediumDate",r||this.locale,s??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch{throw new Gt(2100,!1)}}static#t=this.\u0275fac=function(e){return new(e||n)(Mi(Kd,16),Mi(B2,24),Mi(Z2,24))};static#e=this.\u0275pipe=function hb(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}({name:"date",type:n,pure:!0,standalone:!0})}return n})(),il=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#e=this.\u0275mod=po({type:n});static#i=this.\u0275inj=pt({})}return n})();const n_="browser";function s_(n){return"server"===n}class r_{}class H2 extends D2{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class lp extends H2{static makeCurrent(){var e;e=new lp,ip||(ip=e)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(nl=nl||document.querySelector("base"),nl?nl.getAttribute("href"):null);return null==e?null:new URL(e,"http://a").pathname}resetBaseElement(){nl=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Qy(document.cookie,t)}}let nl=null,U2=(()=>{class n{build(){return new XMLHttpRequest}static#t=this.\u0275fac=function(e){return new(e||n)};static#e=this.\u0275prov=B({token:n,factory:n.\u0275fac})}return n})();const hp=new Qt("EventManagerPlugins");let o_=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(s=>{s.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,s){return this._findPluginFor(i).addEventListener(e,i,s)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(s=>s.supports(e)),!i)throw new Gt(5101,!1);return this._eventNameToPlugin.set(e,i),i}static#t=this.\u0275fac=function(e){return new(e||n)(Tt(hp),Tt(zi))};static#e=this.\u0275prov=B({token:n,factory:n.\u0275fac})}return n})();class a_{constructor(t){this._doc=t}}const up="ng-app-id";let l_=(()=>{class n{constructor(e,i,s,r={}){this.doc=e,this.appId=i,this.nonce=s,this.platformId=r,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=s_(r),this.resetHostNodes()}addStyles(e){for(const i of e)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(e){for(const i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(const i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){const i=this.styleRef;i.get(e)?.elements?.forEach(s=>s.remove()),i.delete(e)}collectServerRenderedStyles(){const e=this.doc.head?.querySelectorAll(`style[${up}="${this.appId}"]`);if(e?.length){const i=new Map;return e.forEach(s=>{null!=s.textContent&&i.set(s.textContent,s)}),i}return null}changeUsageCount(e,i){const s=this.styleRef;if(s.has(e)){const r=s.get(e);return r.usage+=i,r.usage}return s.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){const s=this.styleNodesInDOM,r=s?.get(i);if(r?.parentNode===e)return s.delete(i),r.removeAttribute(up),r;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(up,this.appId),e.appendChild(o),o}}addStyleToHost(e,i){const s=this.getStyleElement(e,i),r=this.styleRef,o=r.get(i)?.elements;o?o.push(s):r.set(i,{elements:[s],usage:1})}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}static#t=this.\u0275fac=function(e){return new(e||n)(Tt(Qs),Tt(wd),Tt(I0,8),Tt(Co))};static#e=this.\u0275prov=B({token:n,factory:n.\u0275fac})}return n})();const cp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},dp=/%COMP%/g,X2=new Qt("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!0});function h_(n,t){return t.map(e=>e.replace(dp,n))}let u_=(()=>{class n{constructor(e,i,s,r,o,a,l,h=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=r,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=s_(a),this.defaultRenderer=new pp(e,o,l,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Cs.ShadowDom&&(i={...i,encapsulation:Cs.Emulated});const s=this.getOrCreateRenderer(e,i);return s instanceof d_?s.applyToHost(e):s instanceof fp&&s.applyStyles(),s}getOrCreateRenderer(e,i){const s=this.rendererByCompId;let r=s.get(i.id);if(!r){const o=this.doc,a=this.ngZone,l=this.eventManager,h=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,c=this.platformIsServer;switch(i.encapsulation){case Cs.Emulated:r=new d_(l,h,i,this.appId,u,o,a,c);break;case Cs.ShadowDom:return new Y2(l,h,e,i,o,a,this.nonce,c);default:r=new fp(l,h,i,u,o,a,c)}s.set(i.id,r)}return r}ngOnDestroy(){this.rendererByCompId.clear()}static#t=this.\u0275fac=function(e){return new(e||n)(Tt(o_),Tt(l_),Tt(wd),Tt(X2),Tt(Qs),Tt(Co),Tt(zi),Tt(I0))};static#e=this.\u0275prov=B({token:n,factory:n.\u0275fac})}return n})();class pp{constructor(t,e,i,s){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=s,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(cp[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(c_(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(c_(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?this.doc.querySelector(t):t;if(!i)throw new Gt(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,s){if(s){e=s+":"+e;const r=cp[s];r?t.setAttributeNS(r,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const s=cp[i];s?t.removeAttributeNS(s,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,s){s&(qr.DashCase|qr.Important)?t.style.setProperty(e,i,s&qr.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&qr.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){null!=t&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i){if("string"==typeof t&&!(t=np().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if("__ngUnwrap__"===e)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))&&e.preventDefault()}}}function c_(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Y2 extends pp{constructor(t,e,i,s,r,o,a,l){super(t,r,o,l),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const h=h_(s.id,s.styles);for(const u of h){const c=document.createElement("style");a&&c.setAttribute("nonce",a),c.textContent=u,this.shadowRoot.appendChild(c)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class fp extends pp{constructor(t,e,i,s,r,o,a,l){super(t,r,o,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=s,this.styles=l?h_(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class d_ extends fp{constructor(t,e,i,s,r,o,a,l){const h=s+"-"+i.id;super(t,e,i,r,o,a,l,h),this.contentAttr="_ngcontent-%COMP%".replace(dp,h),this.hostAttr="_nghost-%COMP%".replace(dp,h)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}let $2=(()=>{class n extends a_{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,s){return e.addEventListener(i,s,!1),()=>this.removeEventListener(e,i,s)}removeEventListener(e,i,s){return e.removeEventListener(i,s)}static#t=this.\u0275fac=function(e){return new(e||n)(Tt(Qs))};static#e=this.\u0275prov=B({token:n,factory:n.\u0275fac})}return n})();const p_=["alt","control","meta","shift"],K2={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},J2={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Q2=(()=>{class n extends a_{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,s){const r=n.parseEventName(i),o=n.eventCallback(r.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>np().onAndCancel(e,r.domEventName,o))}static parseEventName(e){const i=e.toLowerCase().split("."),s=i.shift();if(0===i.length||"keydown"!==s&&"keyup"!==s)return null;const r=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),p_.forEach(h=>{const u=i.indexOf(h);u>-1&&(i.splice(u,1),o+=h+".")}),o+=r,0!=i.length||0===r.length)return null;const l={};return l.domEventName=s,l.fullKey=o,l}static matchEventFullKeyCode(e,i){let s=K2[e.key]||e.key,r="";return i.indexOf("code.")>-1&&(s=e.code,r="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),p_.forEach(o=>{o!==s&&(0,J2[o])(e)&&(r+=o+".")}),r+=s,r===i)}static eventCallback(e,i,s){return r=>{n.matchEventFullKeyCode(r,e)&&s.runGuarded(()=>i(r))}}static _normalizeKey(e){return"esc"===e?"escape":e}static#t=this.\u0275fac=function(e){return new(e||n)(Tt(Qs))};static#e=this.\u0275prov=B({token:n,factory:n.\u0275fac})}return n})();const tC=Zy(A2,"browser",[{provide:Co,useValue:n_},{provide:k0,useValue:function(){lp.makeCurrent()},multi:!0},{provide:Qs,useFactory:function(){return e=document,xd=e,document;var e},deps:[]}]),eC=new Qt(""),iC=[{provide:Vh,useClass:class{addToWindow(t){Ii.getAngularTestability=(e,i=!0)=>{const s=t.findTestabilityInTree(e,i);if(null==s)throw new Gt(5103,!1);return s},Ii.getAllAngularTestabilities=()=>t.getAllTestabilities(),Ii.getAllAngularRootElements=()=>t.getAllRootElements(),Ii.frameworkStabilizers||(Ii.frameworkStabilizers=[]),Ii.frameworkStabilizers.push(e=>{const i=Ii.getAllAngularTestabilities();let s=i.length,r=!1;const o=function(a){r=r||a,s--,0==s&&e(r)};i.forEach(a=>{a.whenStable(o)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?np().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:qy,useClass:tp,deps:[zi,ep,Vh]},{provide:tp,useClass:tp,deps:[zi,ep,Vh]}],nC=[{provide:fd,useValue:"root"},{provide:Eo,useFactory:function(){return new Eo},deps:[]},{provide:hp,useClass:$2,multi:!0,deps:[Qs,zi,Co]},{provide:hp,useClass:Q2,multi:!0,deps:[Qs]},u_,l_,o_,{provide:H0,useExisting:u_},{provide:r_,useClass:U2,deps:[]},[]];let sC=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:wd,useValue:e.appId}]}}static#t=this.\u0275fac=function(e){return new(e||n)(Tt(eC,12))};static#e=this.\u0275mod=po({type:n});static#i=this.\u0275inj=pt({providers:[...nC,...iC],imports:[il,L2]})}return n})();function gp(n){return null!=n&&"false"!=`${n}`}const ls=class{constructor(t){this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},mp=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};function tr(n,t){return n>t?1:n<t?-1:0}function yp(n,t,e){if(n[0]<=t)return 0;const i=n.length;if(t<=n[i-1])return i-1;if("function"==typeof e){for(let s=1;s<i;++s){const r=n[s];if(r===t)return s;if(r<t)return e(t,n[s-1],r)>0?s-1:s}return i-1}if(e>0){for(let s=1;s<i;++s)if(n[s]<t)return s-1;return i-1}if(e<0){for(let s=1;s<i;++s)if(n[s]<=t)return s;return i-1}for(let s=1;s<i;++s){if(n[s]==t)return s;if(n[s]<t)return n[s-1]-t<t-n[s]?s-1:s}return i-1}function rC(n,t,e){for(;t<e;){const i=n[t];n[t]=n[e],n[e]=i,++t,--e}}function hs(n,t){const e=Array.isArray(t)?t:[t],i=e.length;for(let s=0;s<i;s++)n[n.length]=e[s]}function er(n,t){const e=n.length;if(e!==t.length)return!1;for(let i=0;i<e;i++)if(n[i]!==t[i])return!1;return!0}function Fo(){return!0}function Oo(){return!1}function Ao(){}function tu(n){return function(){let e;try{e=n()}catch(i){return Promise.reject(i)}return e instanceof Promise?e:Promise.resolve(e)}()}function sl(n){for(const t in n)delete n[t]}function Wr(n){let t;for(t in n)return!1;return!t}const eu=class extends mp{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const i=this.listeners_||(this.listeners_={}),s=i[t]||(i[t]=[]);s.includes(e)||s.push(e)}dispatchEvent(t){const e="string"==typeof t,i=e?t:t.type,s=this.listeners_&&this.listeners_[i];if(!s)return;const r=e?new ls(t):t;r.target||(r.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});let l;i in o||(o[i]=0,a[i]=0),++o[i];for(let h=0,u=s.length;h<u;++h)if(l="handleEvent"in s[h]?s[h].handleEvent(r):s[h].call(this,r),!1===l||r.propagationStopped){l=!1;break}if(0==--o[i]){let h=a[i];for(delete a[i];h--;)this.removeEventListener(i,Ao);delete o[i]}return l}disposeInternal(){this.listeners_&&sl(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(t,e){const i=this.listeners_&&this.listeners_[t];if(i){const s=i.indexOf(e);-1!==s&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[s]=Ao,++this.pendingRemovals_[t]):(i.splice(s,1),0===i.length&&delete this.listeners_[t]))}}};function ve(n,t,e,i,s){if(i&&i!==n&&(e=e.bind(i)),s){const o=e;e=function(){n.removeEventListener(t,e),o.apply(this,arguments)}}const r={target:n,type:t,listener:e};return n.addEventListener(t,e),r}function iu(n,t,e,i){return ve(n,t,e,i,!0)}function ti(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),sl(n))}const f_=class extends eu{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent("change")}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const i=t.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=ve(this,t[r],e);return s}return ve(this,t,e)}onceInternal(t,e){let i;if(Array.isArray(t)){const s=t.length;i=new Array(s);for(let r=0;r<s;++r)i[r]=iu(this,t[r],e)}else i=iu(this,t,e);return e.ol_key=i,i}unInternal(t,e){const i=e.ol_key;if(i)!function(r){if(Array.isArray(r))for(let o=0,a=r.length;o<a;++o)ti(r[o]);else ti(r)}(i);else if(Array.isArray(t))for(let s=0,r=t.length;s<r;++s)this.removeEventListener(t[s],e);else this.removeEventListener(t,e)}};function Zt(){throw new Error("Unimplemented abstract method.")}let oC=0;function $t(n){return n.ol_uid||(n.ol_uid=String(++oC))}class g_ extends ls{constructor(t,e,i){super(t),this.key=e,this.oldValue=i}}const Kn=class extends f_{constructor(t){super(),$t(this),this.values_=null,void 0!==t&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,e){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new g_(i,t,e)),i="propertychange",this.hasListener(i)&&this.dispatchEvent(new g_(i,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,i){const s=this.values_||(this.values_={});if(i)s[t]=e;else{const r=s[t];s[t]=e,r!==e&&this.notify(t,r)}}setProperties(t,e){for(const i in t)this.set(i,t[i],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const i=this.values_[t];delete this.values_[t],Wr(this.values_)&&(this.values_=null),e||this.notify(t,i)}}};class nu extends ls{constructor(t,e,i){super(t),this.element=e,this.index=i}}const us=class extends Kn{constructor(t,e){if(super(),this.unique_=!!(e=e||{}).unique,this.array_=t||[],this.unique_)for(let i=0,s=this.array_.length;i<s;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,i=t.length;e<i;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let i=0,s=e.length;i<s;++i)t(e[i],i,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get("length")}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new nu("add",e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let i=0,s=e.length;i<s;++i)if(e[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new nu("remove",e,t)),e}setAt(t,e){if(t>=this.getLength())return void this.insertAt(t,e);if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const i=this.array_[t];this.array_[t]=e,this.dispatchEvent(new nu("remove",i,t)),this.dispatchEvent(new nu("add",e,t))}updateLength_(){this.set("length",this.array_.length)}assertUnique_(t,e){for(let i=0,s=this.array_.length;i<s;++i)if(this.array_[i]===t&&i!==e)throw new Error("Duplicate item added to a unique collection")}},ir=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",aC=ir.includes("firefox"),lC=(ir.includes("safari")&&!ir.includes("chrom")&&(ir.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ir)),ir.includes("webkit")&&!ir.includes("edge")),m_=ir.includes("macintosh"),y_=typeof devicePixelRatio<"u"?devicePixelRatio:1,_p=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,__=typeof Image<"u"&&Image.prototype.decode,v_=function(){let n=!1;try{const t=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return n}();function xe(n,t){if(!n)throw new Error(t)}const x_=new Array(6);function w_(n){return su(n,1,0,0,1,0,0)}function vp(n,t){const e=n[0],i=n[1],s=n[2],r=n[3],o=n[4],a=n[5],l=t[0],h=t[1],u=t[2],c=t[3],d=t[4],p=t[5];return n[0]=e*l+s*h,n[1]=i*l+r*h,n[2]=e*u+s*c,n[3]=i*u+r*c,n[4]=e*d+s*p+o,n[5]=i*d+r*p+a,n}function su(n,t,e,i,s,r,o){return n[0]=t,n[1]=e,n[2]=i,n[3]=s,n[4]=r,n[5]=o,n}function ji(n,t){const e=t[0],i=t[1];return t[0]=n[0]*e+n[2]*i+n[4],t[1]=n[1]*e+n[3]*i+n[5],t}function xp(n,t,e){return vp(n,su(x_,t,0,0,e,0,0))}function Ps(n,t,e,i,s,r,o,a){const l=Math.sin(r),h=Math.cos(r);return n[0]=i*h,n[1]=s*l,n[2]=-i*l,n[3]=s*h,n[4]=o*i*h-a*i*l+t,n[5]=o*s*l+a*s*h+e,n}function wp(n,t){const e=(u=t)[0]*u[3]-u[1]*u[2];var u;xe(0!==e,"Transformation matrix cannot be inverted");const i=t[0],s=t[1],r=t[2],o=t[3],a=t[4],l=t[5];return n[0]=o/e,n[1]=-s/e,n[2]=-r/e,n[3]=i/e,n[4]=(r*l-o*a)/e,n[5]=-(i*l-s*a)/e,n}let b_;function C_(n){const t="matrix("+n.join(", ")+")";if(_p)return t;const e=b_||(b_=document.createElement("div"));return e.style.transform=t,e.style.transform}const Vi={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function rl(n){const t=[1/0,1/0,-1/0,-1/0];for(let e=0,i=n.length;e<i;++e)ol(t,n[e]);return t}function nr(n,t,e){return e?(e[0]=n[0]-t,e[1]=n[1]-t,e[2]=n[2]+t,e[3]=n[3]+t,e):[n[0]-t,n[1]-t,n[2]+t,n[3]+t]}function M_(n,t){return t?(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t):n.slice()}function Hr(n,t,e){let i,s;return i=t<n[0]?n[0]-t:n[2]<t?t-n[2]:0,s=e<n[1]?n[1]-e:n[3]<e?e-n[3]:0,i*i+s*s}function ru(n,t){return bp(n,t[0],t[1])}function sr(n,t){return n[0]<=t[0]&&t[2]<=n[2]&&n[1]<=t[1]&&t[3]<=n[3]}function bp(n,t,e){return n[0]<=t&&t<=n[2]&&n[1]<=e&&e<=n[3]}function Cp(n,t){const e=t[0],i=t[1];let s=Vi.UNKNOWN;return e<n[0]?s|=Vi.LEFT:e>n[2]&&(s|=Vi.RIGHT),i<n[1]?s|=Vi.BELOW:i>n[3]&&(s|=Vi.ABOVE),s===Vi.UNKNOWN&&(s=Vi.INTERSECTING),s}function cs(n,t,e,i,s){return s?(s[0]=n,s[1]=t,s[2]=e,s[3]=i,s):[n,t,e,i]}function Lo(n){return cs(1/0,1/0,-1/0,-1/0,n)}function S_(n,t){const e=n[0],i=n[1];return cs(e,i,e,i,t)}function Mp(n,t,e,i,s){return T_(Lo(s),n,t,e,i)}function Do(n,t){return n[0]==t[0]&&n[2]==t[2]&&n[1]==t[1]&&n[3]==t[3]}function E_(n,t){return t[0]<n[0]&&(n[0]=t[0]),t[2]>n[2]&&(n[2]=t[2]),t[1]<n[1]&&(n[1]=t[1]),t[3]>n[3]&&(n[3]=t[3]),n}function ol(n,t){t[0]<n[0]&&(n[0]=t[0]),t[0]>n[2]&&(n[2]=t[0]),t[1]<n[1]&&(n[1]=t[1]),t[1]>n[3]&&(n[3]=t[1])}function T_(n,t,e,i,s){for(;e<i;e+=s)hC(n,t[e],t[e+1]);return n}function hC(n,t,e){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}function Sp(n,t){let e;return e=t(No(n)),!!(e||(e=t(al(n)),e)||(e=t(ll(n)),e)||(e=t(Dn(n)),e))&&e}function Ep(n){let t=0;return hl(n)||(t=We(n)*Ln(n)),t}function No(n){return[n[0],n[1]]}function al(n){return[n[2],n[1]]}function Jn(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function uC(n,t){let e;if("bottom-left"===t)e=No(n);else if("bottom-right"===t)e=al(n);else if("top-left"===t)e=Dn(n);else{if("top-right"!==t)throw new Error("Invalid corner");e=ll(n)}return e}function Tp(n,t,e,i,s){const[r,o,a,l,h,u,c,d]=kp(n,t,e,i);return cs(Math.min(r,a,h,c),Math.min(o,l,u,d),Math.max(r,a,h,c),Math.max(o,l,u,d),s)}function kp(n,t,e,i){const s=t*i[0]/2,r=t*i[1]/2,o=Math.cos(e),a=Math.sin(e),l=s*o,h=s*a,u=r*o,c=r*a,d=n[0],p=n[1];return[d-l+c,p-h-u,d-l-c,p-h+u,d+l-c,p+h+u,d+l+c,p+h-u,d-l+c,p-h-u]}function Ln(n){return n[3]-n[1]}function Ur(n,t,e){const i=e||[1/0,1/0,-1/0,-1/0];return yi(n,t)?(i[0]=n[0]>t[0]?n[0]:t[0],i[1]=n[1]>t[1]?n[1]:t[1],i[2]=n[2]<t[2]?n[2]:t[2],i[3]=n[3]<t[3]?n[3]:t[3]):Lo(i),i}function Dn(n){return[n[0],n[3]]}function ll(n){return[n[2],n[3]]}function We(n){return n[2]-n[0]}function yi(n,t){return n[0]<=t[2]&&n[2]>=t[0]&&n[1]<=t[3]&&n[3]>=t[1]}function hl(n){return n[2]<n[0]||n[3]<n[1]}function k_(n,t,e,i){if(hl(n))return Lo(e);let s=[];if(i>1){const a=n[2]-n[0],l=n[3]-n[1];for(let h=0;h<i;++h)s.push(n[0]+a*h/i,n[1],n[2],n[1]+l*h/i,n[2]-a*h/i,n[3],n[0],n[3]-l*h/i)}else s=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]];t(s,s,2);const r=[],o=[];for(let a=0,l=s.length;a<l;a+=2)r.push(s[a]),o.push(s[a+1]);return l=r,h=o,u=e,cs(Math.min.apply(null,l),Math.min.apply(null,h),Math.max.apply(null,l),Math.max.apply(null,h),u);var l,h,u}function I_(n,t){const e=t.getExtent(),i=Jn(n);if(t.canWrapX()&&(i[0]<e[0]||i[0]>=e[2])){const s=We(e),r=Math.floor((i[0]-e[0])/s)*s;n[0]-=r,n[2]-=r}return n}function di(n,t,e){return Math.min(Math.max(n,t),e)}function cC(n,t,e,i,s,r){const o=s-e,a=r-i;if(0!==o||0!==a){const l=((n-e)*o+(t-i)*a)/(o*o+a*a);l>1?(e=s,i=r):l>0&&(e+=o*l,i+=a*l)}return Rs(n,t,e,i)}function Rs(n,t,e,i){const s=e-n,r=i-t;return s*s+r*r}function ou(n){return n*Math.PI/180}function zo(n,t){const e=n%t;return e*t<0?e+t:e}function Cn(n,t,e){return n+e*(t-n)}function au(n,t){const e=Math.pow(10,t);return Math.round(n*e)/e}function lu(n,t){return Math.floor(au(n,t))}function hu(n,t){return Math.ceil(au(n,t))}const dC=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,pC=/^([a-z]*)$|^hsla?\(.*\)$/i;function P_(n){return"string"==typeof n?n:F_(n)}const fC=function(){const n={};let t=0;return function(e){let i;if(n.hasOwnProperty(e))i=n[e];else{if(t>=1024){let s=0;for(const r in n)3&s++||(delete n[r],--t)}i=function(r){let o,a,l,h,u;if(pC.exec(r)&&(r=function(d){const p=document.createElement("div");if(p.style.color=d,""!==p.style.color){document.body.appendChild(p);const f=getComputedStyle(p).color;return document.body.removeChild(p),f}return""}(r)),dC.exec(r)){const c=r.length-1;let d;d=c<=4?1:2;const p=4===c||8===c;o=parseInt(r.substr(1+0*d,d),16),a=parseInt(r.substr(1+1*d,d),16),l=parseInt(r.substr(1+2*d,d),16),h=p?parseInt(r.substr(1+3*d,d),16):255,1==d&&(o=(o<<4)+o,a=(a<<4)+a,l=(l<<4)+l,p&&(h=(h<<4)+h)),u=[o,a,l,h/255]}else if(r.startsWith("rgba("))u=r.slice(5,-1).split(",").map(Number),R_(u);else{if(!r.startsWith("rgb("))throw new Error("Invalid color");u=r.slice(4,-1).split(",").map(Number),u.push(1),R_(u)}return u}(e),n[e]=i,++t}return i}}();function uu(n){return Array.isArray(n)?n:fC(n)}function R_(n){return n[0]=di(n[0]+.5|0,0,255),n[1]=di(n[1]+.5|0,0,255),n[2]=di(n[2]+.5|0,0,255),n[3]=di(n[3],0,1),n}function F_(n){let t=n[0];t!=(0|t)&&(t=t+.5|0);let e=n[1];e!=(0|e)&&(e=e+.5|0);let i=n[2];return i!=(0|i)&&(i=i+.5|0),"rgba("+t+","+e+","+i+","+(void 0===n[3]?1:Math.round(100*n[3])/100)+")"}function O_(n,t,e){return t+":"+n+":"+(e?P_(e):"null")}const cu=new class{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_)!(3&t++)&&!this.cache_[e].hasListener()&&(delete this.cache_[e],--this.cacheSize_)}}get(t,e,i){const s=O_(t,e,i);return s in this.cache_?this.cache_[s]:null}set(t,e,i,s){const r=O_(t,e,i);this.cache_[r]=s,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}},A_=class extends Kn{constructor(t){super(),this.background_=t.background;const e=Object.assign({},t);"object"==typeof t.properties&&(delete e.properties,Object.assign(e,t.properties)),e.opacity=void 0!==t.opacity?t.opacity:1,xe("number"==typeof e.opacity,"Layer opacity must be a number"),e.visible=void 0===t.visible||t.visible,e.zIndex=t.zIndex,e.maxResolution=void 0!==t.maxResolution?t.maxResolution:1/0,e.minResolution=void 0!==t.minResolution?t.minResolution:0,e.minZoom=void 0!==t.minZoom?t.minZoom:-1/0,e.maxZoom=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},i=this.getZIndex();return e.opacity=di(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==i||e.managed?i:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return Zt()}getLayerStatesArray(t){return Zt()}getExtent(){return this.get("extent")}getMaxResolution(){return this.get("maxResolution")}getMinResolution(){return this.get("minResolution")}getMinZoom(){return this.get("minZoom")}getMaxZoom(){return this.get("maxZoom")}getOpacity(){return this.get("opacity")}getSourceState(){return Zt()}getVisible(){return this.get("visible")}getZIndex(){return this.get("zIndex")}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set("extent",t)}setMaxResolution(t){this.set("maxResolution",t)}setMinResolution(t){this.set("minResolution",t)}setMaxZoom(t){this.set("maxZoom",t)}setMinZoom(t){this.set("minZoom",t)}setOpacity(t){xe("number"==typeof t,"Layer opacity must be a number"),this.set("opacity",t)}setVisible(t){this.set("visible",t)}setZIndex(t){this.set("zIndex",t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}},Qn={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},L_=42,Ip=256,rr={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937},Fs=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||rr[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}},ul=6378137,jo=Math.PI*ul,gC=[-jo,-jo,jo,jo],mC=[-180,-85,180,85],du=ul*Math.log(Math.tan(Math.PI/2));class Go extends Fs{constructor(t){super({code:t,units:"m",extent:gC,global:!0,worldExtent:mC,getPointResolution:function(e,i){return e/Math.cosh(i[1]/ul)}})}}const D_=[new Go("EPSG:3857"),new Go("EPSG:102100"),new Go("EPSG:102113"),new Go("EPSG:900913"),new Go("http://www.opengis.net/def/crs/EPSG/0/3857"),new Go("http://www.opengis.net/gml/srs/epsg.xml#3857")];const N_=[-180,-90,180,90],vC=6378137*Math.PI/180;class Xr extends Fs{constructor(t,e){super({code:t,units:"degrees",extent:N_,axisOrientation:e,global:!0,metersPerUnit:vC,worldExtent:N_})}}const z_=[new Xr("CRS:84"),new Xr("EPSG:4326","neu"),new Xr("urn:ogc:def:crs:OGC:1.3:CRS84"),new Xr("urn:ogc:def:crs:OGC:2:84"),new Xr("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Xr("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Xr("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Pp={},qo={};function Vo(n,t,e){const i=n.getCode(),s=t.getCode();i in qo||(qo[i]={}),qo[i][s]=e}function j_(n,t){let e;return n in qo&&t in qo[n]&&(e=qo[n][t]),e}function pu(n,t){let e=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=t[i]){e=!1;break}return e}function Rp(n,t){const e=Math.cos(t),i=Math.sin(t),s=n[1]*e+n[0]*i;return n[0]=n[0]*e-n[1]*i,n[1]=s,n}function G_(n,t){const e=n[0]-t[0],i=n[1]-t[1];return e*e+i*i}function q_(n,t){return Math.sqrt(G_(n,t))}function Fp(n,t){if(t.canWrapX()){const e=We(t.getExtent()),i=V_(n,t,e);i&&(n[0]-=i*e)}return n}function V_(n,t,e){const i=t.getExtent();let s=0;return t.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(e=e||We(i),s=Math.floor((n[0]-i[0])/e)),s}const xC=6371008.8;function B_(n,t,e){e=e||xC;const i=ou(n[1]),s=ou(t[1]),r=(s-i)/2,o=ou(t[0]-n[0])/2,a=Math.sin(r)*Math.sin(r)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(s);return 2*e*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}const Z_={info:1,warn:2,error:3,none:4};let wC=Z_.info;function W_(...n){wC>Z_.warn||console.warn(...n)}let Op=!0;function H_(n){Op=!(void 0===n||n)}function Ap(n,t){if(void 0!==t)for(let e=0,i=n.length;e<i;++e)t[e]=n[e];else t=n.slice();return t}function U_(n,t){if(void 0!==t&&n!==t){for(let e=0,i=n.length;e<i;++e)t[e]=n[e];n=t}return n}function X_(n){var e;e=n.getCode(),Pp[e]=n,Vo(n,n,Ap)}function Ee(n){return"string"==typeof n?Pp[e=n]||Pp[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:n||null;var e}function Y_(n,t,e,i){let s;const r=(n=Ee(n)).getPointResolutionFunc();if(r){if(s=r(t,e),i&&i!==n.getUnits()){const o=n.getMetersPerUnit();o&&(s=s*o/rr[i])}}else{const o=n.getUnits();if("degrees"==o&&!i||"degrees"==i)s=t;else{const a=cl(n,Ee("EPSG:4326"));if(a===U_&&"degrees"!==o)s=t*n.getMetersPerUnit();else{let h=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];h=a(h,h,2),s=(B_(h.slice(0,2),h.slice(2,4))+B_(h.slice(4,6),h.slice(6,8)))/2}const l=i?rr[i]:n.getMetersPerUnit();void 0!==l&&(s/=l)}}return s}function Lp(n){n.forEach(X_),n.forEach(function(t){n.forEach(function(e){t!==e&&Vo(t,e,Ap)})})}function Dp(n,t){return n?"string"==typeof n?Ee(n):n:Ee(t)}function $_(n){return function(t,e,i){const s=t.length;i=void 0!==i?i:2,e=void 0!==e?e:new Array(s);for(let r=0;r<s;r+=i){const o=n(t.slice(r,r+i)),a=o.length;for(let l=0,h=i;l<h;++l)e[r+l]=l>=a?t[r+l]:o[l]}return e}}function bC(n,t,e,i){const s=Ee(n),r=Ee(t);Vo(s,r,$_(e)),Vo(r,s,$_(i))}function K_(n,t){return H_(),fu(n,"EPSG:4326",void 0!==t?t:"EPSG:3857")}function or(n,t){if(n===t)return!0;const e=n.getUnits()===t.getUnits();return(n.getCode()===t.getCode()||cl(n,t)===Ap)&&e}function cl(n,t){let e=j_(n.getCode(),t.getCode());return e||(e=U_),e}function dl(n,t){return cl(Ee(n),Ee(t))}function fu(n,t,e){return dl(t,e)(n,void 0,n.length)}function J_(n,t,e,i){return k_(n,dl(t,e),void 0,i)}let Nn=null;function pl(){return Nn}function Np(n,t){return Nn?fu(n,t,Nn):n}function zn(n,t){return Nn?fu(n,Nn,t):(Op&&!pu(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(Op=!1,W_("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n)}function zp(n,t){return Nn?J_(n,t,Nn):n}function Yr(n,t){return Nn?J_(n,Nn,t):n}function CC(n,t){if(!Nn)return n;const e=Ee(t).getUnits(),i=Nn.getUnits();return e&&i?n*rr[e]/rr[i]:n}function Q_(n,t,e){return function(i){let s,r;if(n.canWrapX()){const o=n.getExtent(),a=We(o);r=V_(i=i.slice(0),n,a),r&&(i[0]=i[0]-r*a),i[0]=di(i[0],o[0],o[2]),i[1]=di(i[1],o[1],o[3]),s=e(i)}else s=e(i);return r&&t.canWrapX()&&(s[0]+=r*We(t.getExtent())),s}}function t1(n,t,e){return function(i,s,r,o,a){if(!i)return;if(!s&&!t)return i;const l=t?0:r[0]*s,h=t?0:r[1]*s,u=a?a[0]:0,c=a?a[1]:0;let d=n[0]+l/2+u,p=n[2]-l/2+u,f=n[1]+h/2+c,g=n[3]-h/2+c;d>p&&(d=(p+d)/2,p=d),f>g&&(f=(g+f)/2,g=f);let m=di(i[0],d,p),y=di(i[1],f,g);if(o&&e&&s){const _=30*s;m+=-_*Math.log(1+Math.max(0,d-i[0])/_)+_*Math.log(1+Math.max(0,i[0]-p)/_),y+=-_*Math.log(1+Math.max(0,f-i[1])/_)+_*Math.log(1+Math.max(0,i[1]-g)/_)}return[m,y]}}function MC(n){return n}function jp(n,t,e,i){const s=We(t)/e[0],r=Ln(t)/e[1];return i?Math.min(n,Math.max(s,r)):Math.min(n,Math.min(s,r))}function Gp(n,t,e){let i=Math.min(n,t);return i*=Math.log(1+50*Math.max(0,n/t-1))/50+1,e&&(i=Math.max(i,e),i/=Math.log(1+50*Math.max(0,e/n-1))/50+1),di(i,e/2,2*t)}function e1(n,t,e,i,s){return e=void 0===e||e,function(r,o,a,l){if(void 0!==r){const h=i?jp(n,i,a,s):n;return e&&l?Gp(r,h,t):di(r,t,h)}}}function qp(n){if(void 0!==n)return 0}function i1(n){if(void 0!==n)return n}function n1(n){return Math.pow(n,3)}function Bo(n){return 1-n1(1-n)}function SC(n){return 3*n*n-2*n*n*n}function EC(n){return n}function ar(n,t,e,i,s,r){r=r||[];let o=0;for(let a=t;a<e;a+=i){const l=n[a],h=n[a+1];r[o++]=s[0]*l+s[2]*h+s[4],r[o++]=s[1]*l+s[3]*h+s[5]}return r&&r.length!=o&&(r.length=o),r}function Vp(n,t,e,i,s,r,o){o=o||[];const a=Math.cos(s),l=Math.sin(s),h=r[0],u=r[1];let c=0;for(let d=t;d<e;d+=i){const p=n[d]-h,f=n[d+1]-u;o[c++]=h+p*a-f*l,o[c++]=u+p*l+f*a;for(let g=d+2;g<d+i;++g)o[c++]=n[g]}return o&&o.length!=c&&(o.length=c),o}var i,s,r;Lp(D_),Lp(z_),i=D_,s=function yC(n,t,e){const i=n.length;e=e>1?e:2,void 0===t&&(t=e>2?n.slice():new Array(i));for(let s=0;s<i;s+=e){t[s]=jo*n[s]/180;let r=ul*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));r>du?r=du:r<-du&&(r=-du),t[s+1]=r}return t},r=function _C(n,t,e){const i=n.length;e=e>1?e:2,void 0===t&&(t=e>2?n.slice():new Array(i));for(let s=0;s<i;s+=e)t[s]=180*n[s]/jo,t[s+1]=360*Math.atan(Math.exp(n[s+1]/ul))/Math.PI-90;return t},z_.forEach(function(o){i.forEach(function(a){Vo(o,a,s),Vo(a,o,r)})});const s1=[1,0,0,1,0,0],r1=class extends Kn{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=function(e){let i,s,r,o=!1;return function(){const a=Array.prototype.slice.call(arguments);return(!o||this!==r||!er(a,s))&&(o=!0,r=this,s=a,i=e.apply(this,arguments)),i}}(function(t,e,i){if(!i)return this.getSimplifiedGeometry(e);const s=this.clone();return s.applyTransform(i),s.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return Zt()}closestPointXY(t,e,i,s){return Zt()}containsXY(t,e){const i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e}getClosestPoint(t,e){return this.closestPointXY(t[0],t[1],e=e||[NaN,NaN],1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return Zt()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&Lo(e),this.extentRevision_=this.getRevision()}return function(i,s){return s?(s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],s):i}(this.extent_,t)}rotate(t,e){Zt()}scale(t,e,i){Zt()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return Zt()}getType(){return Zt()}applyTransform(t){Zt()}intersectsExtent(t){return Zt()}translate(t,e){Zt()}transform(t,e){const i=Ee(t),s="tile-pixels"==i.getUnits()?function(r,o,a){const l=i.getExtent(),h=i.getWorldExtent(),u=Ln(h)/Ln(l);return Ps(s1,h[0],h[3],u,-u,0,0,0),ar(r,0,r.length,a,s1,o),dl(i,e)(r,o,a)}:dl(i,e);return this.applyTransform(s),this}};function gu(n){let t;return"XY"==n?t=2:"XYZ"==n||"XYM"==n?t=3:"XYZM"==n&&(t=4),t}const lr=class extends r1{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return Mp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return Zt()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=gu(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){Zt()}setLayout(t,e,i){let s;if(t)s=gu(t);else{for(let r=0;r<i;++r){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}s=e.length,t=function(o){let a;return 2==o?a="XY":3==o?a="XYZ":4==o&&(a="XYZM"),a}(s)}this.layout=t,this.stride=s}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const i=this.getFlatCoordinates();if(i){const s=this.getStride();Vp(i,0,i.length,s,t,e,i),this.changed()}}scale(t,e,i){void 0===e&&(e=t),i||(i=Jn(this.getExtent()));const s=this.getFlatCoordinates();if(s){const r=this.getStride();(function(a,l,h,u,c,d,p,f){f=f||[];const g=p[0],m=p[1];let y=0;for(let _=0;_<h;_+=u){const v=a[_+1]-m;f[y++]=g+c*(a[_]-g),f[y++]=m+d*v;for(let x=_+2;x<_+u;++x)f[y++]=a[x]}f&&f.length!=y&&(f.length=y)})(s,0,s.length,r,t,e,i,s),this.changed()}}translate(t,e){const i=this.getFlatCoordinates();if(i){const s=this.getStride();(function(o,a,l,h,u,c,d){d=d||[];let p=0;for(let f=0;f<l;f+=h){d[p++]=o[f]+u,d[p++]=o[f+1]+c;for(let g=f+2;g<f+h;++g)d[p++]=o[g]}d&&d.length!=p&&(d.length=p)})(i,0,i.length,s,t,e,i),this.changed()}}};function o1(n,t,e,i,s,r,o){const a=n[t],l=n[t+1],h=n[e]-a,u=n[e+1]-l;let c;if(0===h&&0===u)c=t;else{const d=((s-a)*h+(r-l)*u)/(h*h+u*u);if(d>1)c=e;else{if(d>0){for(let p=0;p<i;++p)o[p]=Cn(n[t+p],n[e+p],d);return void(o.length=i)}c=t}}for(let d=0;d<i;++d)o[d]=n[c+d];o.length=i}function Bp(n,t,e,i,s){let r=n[t],o=n[t+1];for(t+=i;t<e;t+=i){const a=n[t],l=n[t+1],h=Rs(r,o,a,l);h>s&&(s=h),r=a,o=l}return s}function Zp(n,t,e,i,s){for(let r=0,o=e.length;r<o;++r){const a=e[r];s=Bp(n,t,a,i,s),t=a}return s}function Wp(n,t,e,i,s,r,o,a,l,h,u){if(t==e)return h;let c,d;if(0===s){if(d=Rs(o,a,n[t],n[t+1]),d<h){for(c=0;c<i;++c)l[c]=n[t+c];return l.length=i,d}return h}u=u||[NaN,NaN];let p=t+i;for(;p<e;)if(o1(n,p-i,p,i,o,a,u),d=Rs(o,a,u[0],u[1]),d<h){for(h=d,c=0;c<i;++c)l[c]=u[c];l.length=i,p+=i}else p+=i*Math.max((Math.sqrt(d)-Math.sqrt(h))/s|0,1);if(r&&(o1(n,e-i,t,i,o,a,u),d=Rs(o,a,u[0],u[1]),d<h)){for(h=d,c=0;c<i;++c)l[c]=u[c];l.length=i}return h}function Hp(n,t,e,i,s,r,o,a,l,h,u){u=u||[NaN,NaN];for(let c=0,d=e.length;c<d;++c){const p=e[c];h=Wp(n,t,p,i,s,r,o,a,l,h,u),t=p}return h}function a1(n,t,e,i){for(let s=0,r=e.length;s<r;++s)n[t++]=e[s];return t}function mu(n,t,e,i){for(let s=0,r=e.length;s<r;++s){const o=e[s];for(let a=0;a<i;++a)n[t++]=o[a]}return t}function Up(n,t,e,i,s){s=s||[];let r=0;for(let o=0,a=e.length;o<a;++o){const l=mu(n,t,e[o],i);s[r++]=l,t=l}return s.length=r,s}function Xp(n,t,e,i,s,r,o){const a=(e-t)/i;if(a<3){for(;t<e;t+=i)r[o++]=n[t],r[o++]=n[t+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const h=[t,e-i];let u=0;for(;h.length>0;){const c=h.pop(),d=h.pop();let p=0;const f=n[d],g=n[d+1],m=n[c],y=n[c+1];for(let _=d+i;_<c;_+=i){const v=cC(n[_],n[_+1],f,g,m,y);v>p&&(u=_,p=v)}p>s&&(l[(u-t)/i]=1,d+i<u&&h.push(d,u),u+i<c&&h.push(u,c))}for(let c=0;c<a;++c)l[c]&&(r[o++]=n[t+c*i],r[o++]=n[t+c*i+1]);return o}function $r(n,t){return t*Math.round(n/t)}function TC(n,t,e,i,s,r,o){if(t==e)return o;let a,l,h=$r(n[t],s),u=$r(n[t+1],s);t+=i,r[o++]=h,r[o++]=u;do{if(a=$r(n[t],s),l=$r(n[t+1],s),(t+=i)==e)return r[o++]=a,r[o++]=l,o}while(a==h&&l==u);for(;t<e;){const c=$r(n[t],s),d=$r(n[t+1],s);if(t+=i,c==a&&d==l)continue;const p=a-h,f=l-u,g=c-h,m=d-u;p*m==f*g&&(p<0&&g<p||p==g||p>0&&g>p)&&(f<0&&m<f||f==m||f>0&&m>f)?(a=c,l=d):(r[o++]=a,r[o++]=l,h=a,u=l,a=c,l=d)}return r[o++]=a,r[o++]=l,o}function l1(n,t,e,i,s,r,o,a){for(let l=0,h=e.length;l<h;++l){const u=e[l];o=TC(n,t,u,i,s,r,o),a.push(o),t=u}return o}function hr(n,t,e,i,s){s=void 0!==s?s:[];let r=0;for(let o=t;o<e;o+=i)s[r++]=n.slice(o,o+i);return s.length=r,s}function fl(n,t,e,i,s){s=void 0!==s?s:[];let r=0;for(let o=0,a=e.length;o<a;++o){const l=e[o];s[r++]=hr(n,t,l,i,s[r]),t=l}return s.length=r,s}function Yp(n,t,e,i,s){s=void 0!==s?s:[];let r=0;for(let o=0,a=e.length;o<a;++o){const l=e[o];s[r++]=1===l.length&&l[0]===t?[]:fl(n,t,l,i,s[r]),t=l[l.length-1]}return s.length=r,s}function h1(n,t,e,i){let s=0,r=n[e-i],o=n[e-i+1];for(;t<e;t+=i){const a=n[t],l=n[t+1];s+=o*a-r*l,r=a,o=l}return s/2}function u1(n,t,e,i){let s=0;for(let r=0,o=e.length;r<o;++r){const a=e[r];s+=h1(n,t,a,i),t=a}return s}class yu extends lr{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new yu(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,i,s){return s<Hr(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Bp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Wp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,s))}getArea(){return h1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return hr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=Xp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new yu(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=mu(this.flatCoordinates,0,t,this.stride),this.changed()}}const c1=yu;class $p extends lr{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new $p(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,s){const r=this.flatCoordinates,o=Rs(t,e,r[0],r[1]);if(o<s){const a=this.stride;for(let l=0;l<a;++l)i[l]=r[l];return i.length=a,o}return s}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return S_(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return bp(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=a1(this.flatCoordinates,0,t),this.changed()}}const Os=$p;function kC(n,t,e,i,s){return!Sp(s,function(r){return!Kr(n,t,e,i,r[0],r[1])})}function Kr(n,t,e,i,s,r){let o=0,a=n[e-i],l=n[e-i+1];for(;t<e;t+=i){const h=n[t],u=n[t+1];l<=r?u>r&&(h-a)*(r-l)-(s-a)*(u-l)>0&&o++:u<=r&&(h-a)*(r-l)-(s-a)*(u-l)<0&&o--,a=h,l=u}return 0!==o}function Kp(n,t,e,i,s,r){if(0===e.length||!Kr(n,t,e[0],i,s,r))return!1;for(let o=1,a=e.length;o<a;++o)if(Kr(n,e[o-1],e[o],i,s,r))return!1;return!0}function Jp(n,t,e,i,s,r,o){let a,l,h,u,c,d,p;const f=s[r+1],g=[];for(let _=0,v=e.length;_<v;++_){const x=e[_];for(u=n[x-i],d=n[x-i+1],a=t;a<x;a+=i)c=n[a],p=n[a+1],(f<=d&&p<=f||d<=f&&f<=p)&&(h=(f-d)/(p-d)*(c-u)+u,g.push(h)),u=c,d=p}let m=NaN,y=-1/0;for(g.sort(tr),u=g[0],a=1,l=g.length;a<l;++a){c=g[a];const _=Math.abs(c-u);_>y&&(h=(u+c)/2,Kp(n,t,e,i,h,f)&&(m=h,y=_)),u=c}return isNaN(m)&&(m=s[r]),o?(o.push(m,f,y),o):[m,f,y]}function d1(n,t,e,i,s){let r=[];for(let o=0,a=e.length;o<a;++o){const l=e[o];r=Jp(n,t,l,i,s,2*o,r),t=l[l.length-1]}return r}function p1(n,t,e,i,s){let r;for(t+=i;t<e;t+=i)if(r=s(n.slice(t-i,t),n.slice(t,t+i)),r)return r;return!1}function _u(n,t,e,i,s){const r=T_([1/0,1/0,-1/0,-1/0],n,t,e,i);return!!yi(s,r)&&(!!(sr(s,r)||r[0]>=s[0]&&r[2]<=s[2]||r[1]>=s[1]&&r[3]<=s[3])||p1(n,t,e,i,function(o,a){return function(h,u,c){let d=!1;const p=Cp(h,u),f=Cp(h,c);if(p===Vi.INTERSECTING||f===Vi.INTERSECTING)d=!0;else{const g=h[0],m=h[1],y=h[2],_=h[3],v=c[0],x=c[1],w=(x-u[1])/(v-u[0]);let C,M;f&Vi.ABOVE&&!(p&Vi.ABOVE)&&(C=v-(x-_)/w,d=C>=g&&C<=y),!d&&f&Vi.RIGHT&&!(p&Vi.RIGHT)&&(M=x-(v-y)*w,d=M>=m&&M<=_),!d&&f&Vi.BELOW&&!(p&Vi.BELOW)&&(C=v-(x-m)/w,d=C>=g&&C<=y),!d&&f&Vi.LEFT&&!(p&Vi.LEFT)&&(M=x-(v-g)*w,d=M>=m&&M<=_)}return d}(s,o,a)}))}function f1(n,t,e,i,s){return!!(_u(n,t,e,i,s)||Kr(n,t,e,i,s[0],s[1])||Kr(n,t,e,i,s[0],s[3])||Kr(n,t,e,i,s[2],s[1])||Kr(n,t,e,i,s[2],s[3]))}function g1(n,t,e,i,s){if(!f1(n,t,e[0],i,s))return!1;if(1===e.length)return!0;for(let r=1,o=e.length;r<o;++r)if(kC(n,e[r-1],e[r],i,s)&&!_u(n,e[r-1],e[r],i,s))return!1;return!0}function IC(n,t,e,i){for(;t<e-i;){for(let s=0;s<i;++s){const r=n[t+s];n[t+s]=n[e-i+s],n[e-i+s]=r}t+=i,e-=i}}function Qp(n,t,e,i){let s=0,r=n[e-i],o=n[e-i+1];for(;t<e;t+=i){const a=n[t],l=n[t+1];s+=(a-r)*(l+o),r=a,o=l}return 0===s?void 0:s>0}function m1(n,t,e,i,s){s=void 0!==s&&s;for(let r=0,o=e.length;r<o;++r){const a=e[r],l=Qp(n,t,a,i);if(0===r){if(s&&l||!s&&!l)return!1}else if(s&&!l||!s&&l)return!1;t=a}return!0}function tf(n,t,e,i,s){s=void 0!==s&&s;for(let r=0,o=e.length;r<o;++r){const a=e[r],l=Qp(n,t,a,i);(0===r?s&&l||!s&&!l:s&&!l||!s&&l)&&IC(n,t,a,i),t=a}return t}function y1(n,t,e,i,s){for(let r=0,o=e.length;r<o;++r)t=tf(n,t,e[r],i,s);return t}class gl extends lr{constructor(t,e,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&i?(this.setFlatCoordinates(e,t),this.ends_=i):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?hs(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new gl(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,s){return s<Hr(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Zp(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Hp(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,s))}containsXY(t,e){return Kp(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return u1(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),tf(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,fl(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Jn(this.getExtent());this.flatInteriorPoint_=Jp(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Os(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new c1(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,i=this.ends_,s=[];let r=0;for(let o=0,a=i.length;o<a;++o){const l=i[o],h=new c1(e.slice(r,l),t);s.push(h),r=l}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;m1(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=tf(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=l1(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new gl(e,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return g1(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Up(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}const ur=gl;function vu(n){if(hl(n))throw new Error("Cannot create polygon from empty extent");const t=n[0],e=n[1],i=n[2],s=n[3],r=[t,e,t,s,i,s,i,e,t,e];return new gl(r,"XY",[r.length])}function xu(n,t){setTimeout(function(){n(t)},0)}function ef(n,t,e,i,s){const r=Math.cos(-s);let o=Math.sin(-s),a=n[0]*r-n[1]*o,l=n[1]*r+n[0]*o;return a+=(t[0]/2-e[0])*i,l+=(e[1]-t[1]/2)*i,o=-o,[a*r-l*o,l*r+a*o]}const Mn=class extends Kn{constructor(t){super(),t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.projection_=Dp(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.nextCenter_=null,this.cancelAnchor_=void 0,t.projection&&H_(),t.center&&(t.center=zn(t.center,this.projection_)),t.extent&&(t.extent=Yr(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const a in Qn)delete e[a];this.setProperties(e,!0);const i=function(l){let h,u,c,d=void 0!==l.minZoom?l.minZoom:0,p=void 0!==l.maxZoom?l.maxZoom:28;const f=void 0!==l.zoomFactor?l.zoomFactor:2,g=void 0!==l.multiWorld&&l.multiWorld,m=void 0===l.smoothResolutionConstraint||l.smoothResolutionConstraint,y=void 0!==l.showFullExtent&&l.showFullExtent,_=Dp(l.projection,"EPSG:3857"),v=_.getExtent();let x=l.constrainOnlyCenter,w=l.extent;if(!g&&!w&&_.isGlobal()&&(x=!1,w=v),void 0!==l.resolutions){const C=l.resolutions;u=C[d],c=void 0!==C[p]?C[p]:C[C.length-1],h=l.constrainResolution?(S=C,P=!x&&w,A=y,F=void 0===(F=m)||F,function(T,$,L,D){if(void 0!==T){const V=S[0],z=S[S.length-1],K=P?jp(V,P,L,A):V;if(D)return F?Gp(T,K,z):di(T,z,K);const lt=Math.min(K,T),ut=Math.floor(yp(S,lt,$));return S[ut]>K&&ut<S.length-1?S[ut+1]:S[ut]}}):e1(u,c,m,!x&&w,y)}else{const C=(v?Math.max(We(v),Ln(v)):360*rr.degrees/_.getMetersPerUnit())/Ip/Math.pow(2,0),M=C/Math.pow(2,28);u=l.maxResolution,void 0!==u?d=0:u=C/Math.pow(f,d),c=l.minResolution,void 0===c&&(c=void 0!==l.maxZoom?void 0!==l.maxResolution?u/Math.pow(f,p):C/Math.pow(f,p):M),p=d+Math.floor(Math.log(u/c)/Math.log(f)),c=u/Math.pow(f,p-d),h=l.constrainResolution?function(F,P,A,T,$,L){return T=void 0===T||T,A=void 0!==A?A:0,function(D,V,z,K){if(void 0!==D){const lt=$?jp(P,$,z,L):P;if(K)return T?Gp(D,lt,A):di(D,A,lt);const ut=1e-9,N=Math.ceil(Math.log(P/lt)/Math.log(F)-ut),G=-V*(.5-ut)+.5,Et=Math.min(lt,D),mt=Math.floor(Math.log(P/Et)/Math.log(F)+G),Ut=Math.max(N,mt);return di(P/Math.pow(F,Ut),A,lt)}}}(f,u,c,m,!x&&w,y):e1(u,c,m,!x&&w,y)}var S,F,P,A;return{constraint:h,maxResolution:u,minResolution:c,minZoom:d,zoomFactor:f}}(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const s=function(l){if(void 0!==l.extent)return t1(l.extent,l.constrainOnlyCenter,void 0===l.smoothExtentConstraint||l.smoothExtentConstraint);const h=Dp(l.projection,"EPSG:3857");if(!0!==l.multiWorld&&h.isGlobal()){const u=h.getExtent().slice();return u[0]=-1/0,u[2]=1/0,t1(u,!1,!1)}return MC}(t),r=i.constraint,o=function(l){if(void 0===l.enableRotation||l.enableRotation){const h=l.constrainRotation;return void 0===h||!0===h?(c=c||ou(5),function(d,p){return p?d:void 0!==d?Math.abs(d)<=c?0:d:void 0}):!1===h?i1:"number"==typeof h?function(c){const d=2*Math.PI/c;return function(p,f){return f?p:void 0!==p?p=Math.floor(p/d+.5)*d:void 0}}(h):i1}var c;return qp}(t);this.constraints_={center:s,resolution:r,rotation:o},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const i=this.getCenterInternal();if(i){const s=t||[0,0,0,0];e=e||[0,0,0,0];const r=this.getResolution();this.setCenterInternal([i[0]+r/2*(s[3]-e[3]+e[1]-s[1]),i[1]-r/2*(s[0]-e[0]+e[2]-s[2])])}}getUpdatedOptions_(t){const e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let i=0;i<e.length;++i){let s=arguments[i];s.center&&(s=Object.assign({},s),s.center=zn(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=zn(s.anchor,this.getProjection())),e[i]=s}this.animateInternal.apply(this,e)}animateInternal(t){let e,i=arguments.length;i>1&&"function"==typeof arguments[i-1]&&(e=arguments[i-1],--i);let s=0;for(;s<i&&!this.isDef();++s){const c=arguments[s];c.center&&this.setCenterInternal(c.center),void 0!==c.zoom?this.setZoom(c.zoom):c.resolution&&this.setResolution(c.resolution),void 0!==c.rotation&&this.setRotation(c.rotation)}if(s===i)return void(e&&xu(e,!0));let r=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const h=[];for(;s<i;++s){const c=arguments[s],d={start:r,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||SC,callback:e};if(c.center&&(d.sourceCenter=o,d.targetCenter=c.center.slice(),o=d.targetCenter),void 0!==c.zoom?(d.sourceResolution=a,d.targetResolution=this.getResolutionForZoom(c.zoom),a=d.targetResolution):c.resolution&&(d.sourceResolution=a,d.targetResolution=c.resolution,a=d.targetResolution),void 0!==c.rotation){d.sourceRotation=l;const p=zo(c.rotation-l+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=l+p,l=d.targetRotation}(u=d).sourceCenter&&u.targetCenter&&!pu(u.sourceCenter,u.targetCenter)||u.sourceResolution!==u.targetResolution||u.sourceRotation!==u.targetRotation?r+=d.duration:d.complete=!0,h.push(d)}var u;this.animations_.push(h),this.setHint(0,1),this.updateAnimations_()}getAnimating(){return this.hints_[0]>0}getInteracting(){return this.hints_[1]>0}cancelAnimations(){let t;this.setHint(0,-this.hints_[0]);for(let e=0,i=this.animations_.length;e<i;++e){const s=this.animations_[e];if(s[0].callback&&xu(s[0].callback,!1),!t)for(let r=0,o=s.length;r<o;++r){const a=s[r];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let i=this.animations_.length-1;i>=0;--i){const s=this.animations_[i];let r=!0;for(let o=0,a=s.length;o<a;++o){const l=s[o];if(l.complete)continue;let h=l.duration>0?(t-l.start)/l.duration:1;h>=1?(l.complete=!0,h=1):r=!1;const u=l.easing(h);if(l.sourceCenter){const c=l.sourceCenter[0],d=l.sourceCenter[1],p=l.targetCenter[0],f=l.targetCenter[1];this.nextCenter_=l.targetCenter,this.targetCenter_=[c+u*(p-c),d+u*(f-d)]}if(l.sourceResolution&&l.targetResolution){const c=1===u?l.targetResolution:l.sourceResolution+u*(l.targetResolution-l.sourceResolution);if(l.anchor){const d=this.getViewportSize_(this.getRotation()),p=this.constraints_.resolution(c,0,d,!0);this.targetCenter_=this.calculateCenterZoom(p,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=c,this.applyTargetState_(!0)}if(void 0!==l.sourceRotation&&void 0!==l.targetRotation){const c=1===u?zo(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+u*(l.targetRotation-l.sourceRotation);if(l.anchor){const d=this.constraints_.rotation(c,!0);this.targetCenter_=this.calculateCenterRotate(d,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=c}if(this.applyTargetState_(!0),e=!0,!l.complete)break}if(r){this.animations_[i]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=s[0].callback;o&&xu(o,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let i;const s=this.getCenterInternal();return void 0!==s&&(i=[s[0]-e[0],s[1]-e[1]],Rp(i,t-this.getRotation()),(o=i)[0]+=+(a=e)[0],o[1]+=+a[1]),i;var o,a}calculateCenterZoom(t,e){let i;const s=this.getCenterInternal(),r=this.getResolution();return void 0!==s&&void 0!==r&&(i=[e[0]-t*(e[0]-s[0])/r,e[1]-t*(e[1]-s[1])/r]),i}getViewportSize_(t){const e=this.viewportSize_;if(t){const i=e[0],s=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(s*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(s*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&Np(t,this.getProjection())}getCenterInternal(){return this.get(Qn.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){return zp(this.calculateExtentInternal(t),this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();xe(e,"The view center is not defined");const i=this.getResolution();xe(void 0!==i,"The view resolution is not defined");const s=this.getRotation();return xe(void 0!==s,"The view rotation is not defined"),Tp(e,i,s,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(Qn.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(Yr(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const i=We(t)/e[0],s=Ln(t)/e[1];return Math.max(i,s)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),i=Math.log(e/this.minResolution_)/Math.log(t);return function(s){return e/Math.pow(t,s*i)}}getRotation(){return this.get(Qn.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),s=Math.log(i/this.minResolution_)/e;return function(r){return Math.log(i/r)/e/s}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const i=this.padding_;return i&&(e=[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),i=this.getRotation();let s=this.getCenterInternal();const r=this.padding_;if(r){const o=this.getViewportSizeMinusPadding_();s=ef(s,this.getViewportSize_(),[o[0]/2+r[3],o[1]/2+r[0]],e,i)}return{center:s.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,i,s=this.minZoom_||0;if(this.resolutions_){const r=yp(this.resolutions_,t,1);s=r,e=this.resolutions_[r],i=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,i=this.zoomFactor_;return s+Math.log(e/t)/Math.log(i)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=di(Math.floor(t),0,this.resolutions_.length-2);return this.resolutions_[e]/Math.pow(this.resolutions_[e]/this.resolutions_[e+1],di(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let i;if(xe(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,"Invalid extent or geometry provided as `geometry`"),Array.isArray(t))xe(!hl(t),"Cannot fit empty extent provided as `geometry`"),i=vu(Yr(t,this.getProjection()));else if("Circle"===t.getType()){const s=Yr(t.getExtent(),this.getProjection());i=vu(s),i.rotate(this.getRotation(),Jn(s))}else{const s=pl();i=s?t.clone().transform(s,this.getProjection()):t}this.fitInternal(i,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),i=Math.cos(e),s=Math.sin(-e),r=t.getFlatCoordinates(),o=t.getStride();let a=1/0,l=1/0,h=-1/0,u=-1/0;for(let c=0,d=r.length;c<d;c+=o){const p=r[c]*i-r[c+1]*s,f=r[c]*s+r[c+1]*i;a=Math.min(a,p),l=Math.min(l,f),h=Math.max(h,p),u=Math.max(u,f)}return[a,l,h,u]}fitInternal(t,e){let i=(e=e||{}).size;i||(i=this.getViewportSizeMinusPadding_());const s=void 0!==e.padding?e.padding:[0,0,0,0],r=void 0!==e.nearest&&e.nearest;let o;o=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;const a=this.rotatedExtentForGeometry(t);let l=this.getResolutionForExtentInternal(a,[i[0]-s[1]-s[3],i[1]-s[0]-s[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,r?0:1);const h=this.getRotation(),u=Math.sin(h),c=Math.cos(h),d=Jn(a);d[0]+=(s[1]-s[3])/2*l,d[1]+=(s[0]-s[2])/2*l;const p=this.getConstrainedCenter([d[0]*c-d[1]*u,d[1]*c+d[0]*u],l),f=e.callback?e.callback:Ao;void 0!==e.duration?this.animateInternal({resolution:l,center:p,duration:e.duration,easing:e.easing},f):(this.targetResolution_=l,this.targetCenter_=p,this.applyTargetState_(!1,!0),xu(f,!0))}centerOn(t,e,i){this.centerOnInternal(zn(t,this.getProjection()),e,i)}centerOnInternal(t,e,i){this.setCenterInternal(ef(t,e,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,i,s){let r;const o=this.padding_;if(o&&t){const a=this.getViewportSizeMinusPadding_(-i),l=ef(t,s,[a[0]/2+o[3],a[1]/2+o[0]],e,i);r=[t[0]-l[0],t[1]-l[1]]}return r}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(t){const e=Np(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&zn(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const i=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,s,i);e&&(this.targetCenter_=this.calculateCenterZoom(r,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=zn(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const i=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(s,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&zn(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const i=this.getAnimating()||this.getInteracting()||e,s=this.constraints_.rotation(this.targetRotation_,i),r=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,0,r,i),a=this.constraints_.center(this.targetCenter_,o,r,i,this.calculateCenterShift(this.targetCenter_,o,s,r));this.get(Qn.ROTATION)!==s&&this.set(Qn.ROTATION,s),this.get(Qn.RESOLUTION)!==o&&(this.set(Qn.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Qn.CENTER)||!pu(this.get(Qn.CENTER),a))&&this.set(Qn.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,i){t=void 0!==t?t:200;const s=e||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,s,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,r,o));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=l,void this.applyTargetState_();i=i||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==r||!this.getCenterInternal()||!pu(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:l,resolution:a,duration:t,easing:Bo,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(1,1)}endInteraction(t,e,i){i=i&&zn(i,this.getProjection()),this.endInteractionInternal(t,e,i)}endInteractionInternal(t,e,i){this.getInteracting()&&(this.setHint(1,-1),this.resolveConstraints(t,e,i))}getConstrainedCenter(t,e){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)}getConstrainedZoom(t,e){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))}getConstrainedResolution(t,e){e=e||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,i)}};function nf(n,t){if(!n.visible)return!1;const e=t.resolution;if(e<n.minResolution||e>=n.maxResolution)return!1;const i=t.zoom;return i>n.minZoom&&i<=n.maxZoom}const wu=class extends A_{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener("source",this.handleSourcePropertyChange_),this.setSource(t.source?t.source:null)}getLayersArray(t){return(t=t||[]).push(this),t}getLayerStatesArray(t){return(t=t||[]).push(this.getLayerState()),t}getSource(){return this.get("source")||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!this.sourceReady_&&"ready"===this.getSource().getState()&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(ti(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=ve(t,"change",this.handleSourceChange_,this),"ready"===t.getState()&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}isVisible(t){let e;const i=this.getMapInternal();let s;!t&&i&&(t=i.getView()),e=t instanceof Mn?{viewState:t.getState(),extent:t.calculateExtent()}:t,!e.layerStatesArray&&i&&(e.layerStatesArray=i.getLayerGroup().getLayerStatesArray()),s=e.layerStatesArray?e.layerStatesArray.find(o=>o.layer===this):this.getLayerState();const r=this.getExtent();return nf(s,e.viewState)&&(!r||yi(r,e.extent))}getAttributions(t){if(!this.isVisible(t))return[];let e;const i=this.getSource();if(i&&(e=i.getAttributions()),!e)return[];let s=e(t instanceof Mn?t.getViewStateAndExtent():t);return Array.isArray(s)||(s=[s]),s}render(t,e){const i=this.getRenderer();return i.prepareFrame(t)?(this.rendered=!0,i.renderFrame(t,e)):null}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set("map",t)}getMapInternal(){return this.get("map")}setMap(t){this.mapPrecomposeKey_&&(ti(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(ti(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=ve(t,"precompose",function(e){const i=e.frameState.layerStatesArray,s=this.getLayerState(!1);xe(!i.some(function(r){return r.layer===s.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),i.push(s)},this),this.mapRenderKey_=ve(this,"change",t.render,t),this.changed())}setSource(t){this.set("source",t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};function PC(n,t){cu.expire()}const RC=class extends mp{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){Zt()}calculateMatrices2D(t){const e=t.viewState,i=t.coordinateToPixelTransform,s=t.pixelToCoordinateTransform;Ps(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),wp(s,i)}forEachFeatureAtCoordinate(t,e,i,s,r,o,a,l){let h;const u=e.viewState;function c(x,w,C,M){return r.call(o,w,x?C:null,M)}const d=u.projection,p=Fp(t.slice(),d),f=[[0,0]];if(d.canWrapX()&&s){const x=We(d.getExtent());f.push([-x,0],[x,0])}const g=e.layerStatesArray,m=g.length,y=[],_=[];for(let x=0;x<f.length;x++)for(let w=m-1;w>=0;--w){const C=g[w],M=C.layer;if(M.hasRenderer()&&nf(C,u)&&a.call(l,M)){const S=M.getRenderer(),F=M.getSource();if(S&&F){const P=F.getWrapX()?p:t,A=c.bind(null,C.managed);_[0]=P[0]+f[x][0],_[1]=P[1]+f[x][1],h=S.forEachFeatureAtCoordinate(_,e,i,A,y)}if(h)return h}}if(0===y.length)return;const v=1/y.length;return y.forEach((x,w)=>x.distanceSq+=w*v),y.sort((x,w)=>x.distanceSq-w.distanceSq),y.some(x=>h=x.callback(x.feature,x.layer,x.geometry)),h}hasFeatureAtCoordinate(t,e,i,s,r,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,i,s,Fo,this,r,o)}getMap(){return this.map_}renderFrame(t){Zt()}flushDeclutterItems(t){}scheduleExpireIconCache(t){cu.canExpireCache()&&t.postRenderFunctions.push(PC)}},_1=class extends ls{constructor(t,e,i,s){super(t),this.inversePixelTransform=e,this.frameState=i,this.context=s}},bu="ol-hidden",ml="ol-unselectable",v1="ol-unsupported",Cu="ol-control",x1="ol-collapsed",FC=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),w1=["style","variant","weight","size","lineHeight","family"],b1=function(n){const t=n.match(FC);if(!t)return null;const e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,s=w1.length;i<s;++i){const r=t[i+1];void 0!==r&&(e[w1[i]]=r)}return e.families=e.family.split(/,\s?/),e};function Wi(n,t,e,i){let s;return s=e&&e.length?e.shift():_p?new OffscreenCanvas(n||300,t||300):document.createElement("canvas"),n&&(s.width=n),t&&(s.height=t),s.getContext("2d",i)}function yl(n){const t=n.canvas;t.width=1,t.height=1,n.clearRect(0,0,1,1)}function OC(n){let t=n.offsetWidth;const e=getComputedStyle(n);return t+=parseInt(e.marginLeft,10)+parseInt(e.marginRight,10),t}function AC(n){let t=n.offsetHeight;const e=getComputedStyle(n);return t+=parseInt(e.marginTop,10)+parseInt(e.marginBottom,10),t}function Mu(n,t){const e=t.parentNode;e&&e.replaceChild(n,t)}function Su(n){return n&&n.parentNode?n.parentNode.removeChild(n):null}function C1(n){for(;n.lastChild;)n.removeChild(n.lastChild)}const M1="10px sans-serif",cn="#000",Zo="round",As=[],Wo="round",_l="#000",vl="center",Eu="middle",Jr=[0,0,0,0],ds=new Kn;let sf,Ho=null;const rf={},S1=function(){const n="32px ",t=["monospace","serif"],e=t.length,i="wmytzilWMYTZIL@#/&?$%10\uf013";let s,r;function o(l,h,u){let c=!0;for(let d=0;d<e;++d){const p=t[d];if(r=Tu(l+" "+h+" "+n+p,i),u!=p){const f=Tu(l+" "+h+" "+n+u+","+p,i);c=c&&f!=r}}return!!c}function a(){let l=!0;const h=ds.getKeys();for(let u=0,c=h.length;u<c;++u){const d=h[u];ds.get(d)<100&&(o.apply(this,d.split("\n"))?(sl(rf),Ho=null,sf=void 0,ds.set(d,100)):(ds.set(d,ds.get(d)+1,!0),l=!1))}l&&(clearInterval(s),s=void 0)}return function(l){const h=b1(l);if(!h)return;const u=h.families;for(let c=0,d=u.length;c<d;++c){const p=u[c],f=h.style+"\n"+h.weight+"\n"+p;void 0===ds.get(f)&&(ds.set(f,100,!0),o(h.style,h.weight,p)||(ds.set(f,0,!0),void 0===s&&(s=setInterval(a,32))))}}}(),LC=function(){let n;return function(t){let e=rf[t];if(null==e){if(_p){const i=b1(t),s=E1(t,"\u017dg");e=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=t,document.body.appendChild(n),e=n.offsetHeight,document.body.removeChild(n);rf[t]=e}return e}}();function E1(n,t){return Ho||(Ho=Wi(1,1)),n!=sf&&(Ho.font=n,sf=Ho.font),Ho.measureText(t)}function Tu(n,t){return E1(n,t).width}function T1(n,t,e){if(t in e)return e[t];const i=t.split("\n").reduce((s,r)=>Math.max(s,Tu(n,r)),0);return e[t]=i,i}const DC=class extends RC{constructor(t){super(t),this.fontChangeListenerKey_=ve(ds,"propertychange",t.redrawText.bind(t)),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=ml+" ol-layers";const i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(t,e){const i=this.getMap();if(i.hasListener(t)){const s=new _1(t,void 0,e);i.dispatchEvent(s)}}disposeInternal(){ti(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(t),this.dispatchRenderEvent("precompose",t);const e=t.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),i=t.viewState;this.children_.length=0;const s=this.declutterLayers_;s.length=0;let r=null;for(let o=0,a=e.length;o<a;++o){const l=e[o];t.layerIndex=o;const h=l.layer,u=h.getSourceState();if(!nf(l,i)||"ready"!=u&&"undefined"!=u){h.unrender();continue}const c=h.render(t,r);c&&(c!==r&&(this.children_.push(c),r=c),"getDeclutter"in h&&s.push(h))}this.flushDeclutterItems(t),function(a,l){const h=a.childNodes;for(let u=0;;++u){const c=h[u],d=l[u];if(!c&&!d)break;if(c!==d){if(!c){a.appendChild(d);continue}if(!d){a.removeChild(c),--u;continue}a.insertBefore(d,c)}}}(this.element_,this.children_),this.dispatchRenderEvent("postcompose",t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}flushDeclutterItems(t){const e=this.declutterLayers_;for(let i=e.length-1;i>=0;--i)e[i].renderDeclutter(t);e.length=0}};class cr extends ls{constructor(t,e){super(t),this.layer=e}}class of extends A_{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let i=t.layers;super(e),this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener("layers",this.handleLayersChanged_),i?Array.isArray(i)?i=new us(i.slice(),{unique:!0}):xe("function"==typeof i.getArray,"Expected `layers` to be an array or a `Collection`"):i=new us(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(ti),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(ve(t,"add",this.handleLayersAdd_,this),ve(t,"remove",this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(ti);sl(this.listenerKeys_);const e=t.getArray();for(let i=0,s=e.length;i<s;i++){const r=e[i];this.registerLayerListeners_(r),this.dispatchEvent(new cr("addlayer",r))}this.changed()}registerLayerListeners_(t){const e=[ve(t,"propertychange",this.handleLayerChange_,this),ve(t,"change",this.handleLayerChange_,this)];t instanceof of&&e.push(ve(t,"addlayer",this.handleLayerGroupAdd_,this),ve(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[$t(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new cr("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new cr("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new cr("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,i=$t(e);this.listenerKeys_[i].forEach(ti),delete this.listenerKeys_[i],this.dispatchEvent(new cr("removelayer",e)),this.changed()}getLayers(){return this.get("layers")}setLayers(t){const e=this.getLayers();if(e){const i=e.getArray();for(let s=0,r=i.length;s<r;++s)this.dispatchEvent(new cr("removelayer",i[s]))}this.set("layers",t)}getLayersArray(t){return t=void 0!==t?t:[],this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}getLayerStatesArray(t){const e=void 0!==t?t:[],i=e.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(e)});const s=this.getLayerState();let r=s.zIndex;!t&&void 0===s.zIndex&&(r=0);for(let o=i,a=e.length;o<a;o++){const l=e[o];l.opacity*=s.opacity,l.visible=l.visible&&s.visible,l.maxResolution=Math.min(l.maxResolution,s.maxResolution),l.minResolution=Math.max(l.minResolution,s.minResolution),l.minZoom=Math.max(l.minZoom,s.minZoom),l.maxZoom=Math.min(l.maxZoom,s.maxZoom),void 0!==s.extent&&(l.extent=void 0!==l.extent?Ur(l.extent,s.extent):s.extent),void 0===l.zIndex&&(l.zIndex=r)}return e}getSourceState(){return"ready"}}const xl=of,Uo=class extends ls{constructor(t,e,i){super(t),this.map=e,this.frameState=void 0!==i?i:null}},Ls=class extends Uo{constructor(t,e,i,s,r,o){super(t,e,r),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==s&&s,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},ze={SINGLECLICK:"singleclick",CLICK:"click",DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},NC=class extends eu{constructor(t,e){super(t),this.map_=t,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===e?1:e,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=ve(i,"pointerdown",this.handlePointerDown_,this),this.relayedListenerKey_=ve(i,"pointermove",this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener("touchmove",this.boundHandleTouchMove_,!!v_&&{passive:!1})}emulateClick_(t){let e=new Ls(ze.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Ls(ze.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new Ls(ze.SINGLECLICK,this.map_,t);this.dispatchEvent(i)},250)}updateActivePointers_(t){const e=t,i=e.pointerId;if(e.type==ze.POINTERUP||e.type==ze.POINTERCANCEL){delete this.trackedTouches_[i];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==e.target){delete this.trackedTouches_[s];break}}else(e.type==ze.POINTERDOWN||e.type==ze.POINTERMOVE)&&(this.trackedTouches_[i]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new Ls(ze.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(ti),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return 0===t.button}handlePointerDown_(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t);const e=new Ls(ze.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),0===this.dragListenerKeys_.length){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(ve(i,ze.POINTERMOVE,this.handlePointerMove_,this),ve(i,ze.POINTERUP,this.handlePointerUp_,this),ve(this.element_,ze.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(ve(this.element_.getRootNode(),ze.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new Ls(ze.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new Ls(ze.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&&("boolean"!=typeof t.cancelable||!0===t.cancelable)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(ti(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener("touchmove",this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(ti(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(ti),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},af=1/0,zC=class{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,sl(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const s=this.keyFunction_(i);return delete this.queuedElements_[s],i}enqueue(t){xe(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const e=this.priorityFunction_(t);return e!=af&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(t){return 2*t+1}getRightChildIndex_(t){return 2*t+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return 0===this.elements_.length}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,i=this.priorities_,s=e.length,r=e[t],o=i[t],a=t;for(;t<s>>1;){const l=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),u=h<s&&i[h]<i[l]?h:l;e[t]=e[u],i[t]=i[u],t=u}e[t]=r,i[t]=o,this.siftDown_(a,t)}siftDown_(t,e){const i=this.elements_,s=this.priorities_,r=i[e],o=s[e];for(;e>t;){const a=this.getParentIndex_(e);if(!(s[a]>o))break;i[e]=i[a],s[e]=s[a],e=a}i[e]=r,s[e]=o}reprioritize(){const t=this.priorityFunction_,e=this.elements_,i=this.priorities_;let s=0;const r=e.length;let o,a,l;for(a=0;a<r;++a)o=e[a],l=t(o),l==af?delete this.queuedElements_[this.keyFunction_(o)]:(i[s]=l,e[s++]=o);e.length=s,i.length=s,this.heapify_()}},jC=class extends zC{constructor(t,e){super(function(i){return t.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);return e&&t[0].addEventListener("change",this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,i=e.getState();if(2===i||3===i||4===i){3!==i&&e.removeEventListener("change",this.boundHandleTileChange_);const s=e.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let i,s,r,o=0;for(;this.tilesLoading_<t&&o<e&&this.getCount()>0;)s=this.dequeue()[0],r=s.getKey(),i=s.getState(),0===i&&!(r in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++o,s.load())}},wl=class extends Kn{constructor(t){super();const e=t.element;e&&!t.target&&!e.style.pointerEvents&&(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){Su(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&Su(this.element);for(let e=0,i=this.listenerKeys.length;e<i;++e)ti(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Ao&&this.listenerKeys.push(ve(t,"postrender",this.render,this)),t.render())}render(t){}setTarget(t){this.target_="string"==typeof t?document.getElementById(t):t}},GC=class extends wl{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===t.collapsed||t.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==t.collapsible,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1);const e=void 0!==t.className?t.className:"ol-attribution",i=void 0!==t.tipLabel?t.tipLabel:"Attributions",s=void 0!==t.expandClassName?t.expandClassName:e+"-expand",r=void 0!==t.collapseLabel?t.collapseLabel:"\u203a",o=void 0!==t.collapseClassName?t.collapseClassName:e+"-collapse";"string"==typeof r?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=o):this.collapseLabel_=r;const a=void 0!==t.label?t.label:"i";"string"==typeof a?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=s):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener("click",this.handleClick_.bind(this),!1);const h=this.element;h.className=e+" "+ml+" "+Cu+(this.collapsed_&&this.collapsible_?" "+x1:"")+(this.collapsible_?"":" ol-uncollapsible"),h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=Array.from(new Set(this.getMap().getAllLayers().flatMap(s=>s.getAttributions(t)))),i=!this.getMap().getAllLayers().some(s=>s.getSource()&&!1===s.getSource().getAttributionsCollapsible());return this.overrideCollapsible_||this.setCollapsible(i),e}updateElement_(t){if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=this.collectSourceAttributions_(t),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!er(e,this.renderedAttributions_)){C1(this.ulElement_);for(let s=0,r=e.length;s<r;++s){const o=document.createElement("li");o.innerHTML=e[s],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(x1),this.collapsed_?Mu(this.collapseLabel_,this.label_):Mu(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}},qC=class extends wl{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=void 0!==t.className?t.className:"ol-rotate",i=void 0!==t.label?t.label:"\u21e7",s=void 0!==t.compassClassName?t.compassClassName:"ol-compass";this.label_=null,"string"==typeof i?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(s));const r=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=e+"-reset",o.setAttribute("type","button"),o.title=r,o.appendChild(this.label_),o.addEventListener("click",this.handleClick_.bind(this),!1);const a=this.element;a.className=e+" "+ml+" "+Cu,a.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=void 0!==t.duration?t.duration:250,this.autoHide_=void 0===t.autoHide||t.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(bu)}handleClick_(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:Bo}):t.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const i=e.viewState.rotation;if(i!=this.rotation_){const s="rotate("+i+"rad)";if(this.autoHide_){const r=this.element.classList.contains(bu);r||0!==i?r&&0!==i&&this.element.classList.remove(bu):this.element.classList.add(bu)}this.label_.style.transform=s}this.rotation_=i}},VC=class extends wl{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=void 0!==t.className?t.className:"ol-zoom",i=void 0!==t.delta?t.delta:1,s=void 0!==t.zoomInClassName?t.zoomInClassName:e+"-in",r=void 0!==t.zoomOutClassName?t.zoomOutClassName:e+"-out",o=void 0!==t.zoomInLabel?t.zoomInLabel:"+",a=void 0!==t.zoomOutLabel?t.zoomOutLabel:"\u2013",l=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",h=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=s,u.setAttribute("type","button"),u.title=l,u.appendChild("string"==typeof o?document.createTextNode(o):o),u.addEventListener("click",this.handleClick_.bind(this,i),!1);const c=document.createElement("button");c.className=r,c.setAttribute("type","button"),c.title=h,c.appendChild("string"==typeof a?document.createTextNode(a):a),c.addEventListener("click",this.handleClick_.bind(this,-i),!1);const d=this.element;d.className=e+" "+ml+" "+Cu,d.appendChild(u),d.appendChild(c),this.duration_=void 0!==t.duration?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const e=this.getMap().getView();if(!e)return;const i=e.getZoom();if(void 0!==i){const s=e.getConstrainedZoom(i+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:s,duration:this.duration_,easing:Bo})):e.setZoom(s)}}};function k1(n){n=n||{};const t=new us;return(void 0===n.zoom||n.zoom)&&t.push(new VC(n.zoomOptions)),(void 0===n.rotate||n.rotate)&&t.push(new qC(n.rotateOptions)),(void 0===n.attribution||n.attribution)&&t.push(new GC(n.attributionOptions)),t}function lf(n,t,e,i){const s=n.getZoom();if(void 0===s)return;const r=n.getConstrainedZoom(s+t),o=n.getResolutionForZoom(r);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:o,anchor:e,duration:void 0!==i?i:250,easing:Bo})}const bl=class extends Kn{constructor(t){super(),t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get("active")}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set("active",t)}setMap(t){this.map_=t}},BC=class extends bl{constructor(t){super(),this.delta_=(t=t||{}).delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:250}handleEvent(t){let e=!1;if(t.type==ze.DBLCLICK){const i=t.originalEvent,s=t.coordinate,r=i.shiftKey?-this.delta_:this.delta_;lf(t.map.getView(),r,s,this.duration_),i.preventDefault(),e=!0}return!e}};function hf(n){const t=n.length;let e=0,i=0;for(let s=0;s<t;s++)e+=n[s].clientX,i+=n[s].clientY;return{clientX:e/t,clientY:i/t}}const Xo=class extends bl{constructor(t){super(t=t||{}),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==ze.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==ze.POINTERUP){const i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==ze.POINTERDOWN){const i=this.handleDownEvent(t);this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==ze.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}};function uf(n){const t=arguments;return function(e){let i=!0;for(let s=0,r=t.length;s<r&&(i=i&&t[s](e),i);++s);return i}}const ZC=function(n){const t=n.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},I1=function(n){return!n.map.getTargetElement().hasAttribute("tabindex")||function(t){const e=t.map.getTargetElement(),i=t.map.getOwnerDocument().activeElement;return e.contains(i)}(n)},cf=Fo,P1=function(n){const t=n.originalEvent;return 0==t.button&&!(lC&&m_&&t.ctrlKey)},WC=Oo,df=function(n){const t=n.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},R1=function(n){const t=n.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},F1=function(n){const t=n.originalEvent,e=t.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e&&!t.target.isContentEditable},pf=function(n){const t=n.originalEvent;return xe(void 0!==t,"mapBrowserEvent must originate from a pointer event"),"mouse"==t.pointerType},HC=function(n){const t=n.originalEvent;return xe(void 0!==t,"mapBrowserEvent must originate from a pointer event"),t.isPrimary&&0===t.button},UC=class extends Xo{constructor(t){super({stopDown:Oo}),this.kinetic_=(t=t||{}).kinetic,this.lastCentroid=null,this.panning_=!1;const e=t.condition?t.condition:uf(df,HC);this.condition_=t.onFocusOnly?uf(I1,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const i=this.targetPointers,s=e.getEventPixel(hf(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const r=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],o=t.map.getView();l=r,h=o.getResolution(),l[0]*=h,l[1]*=h,Rp(r,o.getRotation()),o.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();var l,h;this.lastCentroid=s,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,i=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=e.getPixelFromCoordinateInternal(o),l=e.getCoordinateFromPixelInternal([a[0]-s*Math.cos(r),a[1]-s*Math.sin(r)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:Bo})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},XC=class extends Xo{constructor(t){t=t||{},super({stopDown:Oo}),this.condition_=t.condition?t.condition:ZC,this.lastAngle_=void 0,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){if(!pf(t))return;const e=t.map,i=e.getView();if(i.getConstraints().rotation===qp)return;const s=e.getSize(),r=t.pixel,o=Math.atan2(s[1]/2-r[1],r[0]-s[0]/2);void 0!==this.lastAngle_&&i.adjustRotationInternal(-(o-this.lastAngle_)),this.lastAngle_=o}handleUpEvent(t){return!pf(t)||(t.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(t){return!!(pf(t)&&P1(t)&&this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)}},YC=class extends mp{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,i="px",s=this.element_.style;s.left=Math.min(t[0],e[0])+i,s.top=Math.min(t[1],e[1])+i,s.width=Math.abs(e[0]-t[0])+i,s.height=Math.abs(e[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new ur([i])}getGeometry(){return this.geometry_}};class ff extends ls{constructor(t,e,i){super(t),this.coordinate=e,this.mapBrowserEvent=i}}const $C=class extends Xo{constructor(t){super(),this.box_=new YC((t=t||{}).className||"ol-dragbox"),this.minArea_=void 0!==t.minArea?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:P1,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,i){const s=i[0]-e[0],r=i[1]-e[1];return s*s+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new ff("boxdrag",t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new ff(e?"boxend":"boxcancel",t.coordinate,t)),!1}handleDownEvent(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new ff("boxstart",t.coordinate,t)),!0)}onBoxEnd(t){}},KC=class extends $C{constructor(t){super({condition:(t=t||{}).condition?t.condition:R1,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=void 0!==t.duration?t.duration:200,this.out_=void 0!==t.out&&t.out}onBoxEnd(t){const e=this.getMap().getView();let i=this.getGeometry();if(this.out_){const s=e.rotatedExtentForGeometry(i),r=e.getResolutionForExtentInternal(s),o=e.getResolution()/r;i=i.clone(),i.scale(o*o)}e.fitInternal(i,{duration:this.duration_,easing:Bo})}},JC=class extends bl{constructor(t){super(),t=t||{},this.defaultCondition_=function(e){return df(e)&&F1(e)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128}handleEvent(t){let e=!1;if("keydown"==t.type){const i=t.originalEvent,s=i.key;if(this.condition_(t)&&("ArrowDown"==s||"ArrowLeft"==s||"ArrowRight"==s||"ArrowUp"==s)){const r=t.map.getView(),o=r.getResolution()*this.pixelDelta_;let a=0,l=0;"ArrowDown"==s?l=-o:"ArrowLeft"==s?a=-o:"ArrowRight"==s?a=o:l=o;const h=[a,l];Rp(h,r.getRotation()),function(c,d,p){const f=c.getCenterInternal();f&&c.animateInternal({duration:void 0!==p?p:250,easing:EC,center:c.getConstrainedCenter([f[0]+d[0],f[1]+d[1]])})}(r,h,this.duration_),i.preventDefault(),e=!0}}return!e}},QC=class extends bl{constructor(t){super(),this.condition_=(t=t||{}).condition?t.condition:function(e){return!function(i){const s=i.originalEvent;return m_?s.metaKey:s.ctrlKey}(e)&&F1(e)},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:100}handleEvent(t){let e=!1;if("keydown"==t.type||"keypress"==t.type){const i=t.originalEvent,s=i.key;if(this.condition_(t)&&("+"===s||"-"===s)){const r="+"===s?this.delta_:-this.delta_;lf(t.map.getView(),r,void 0,this.duration_),i.preventDefault(),e=!0}}return!e}},tM=class{constructor(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let i=e-3;for(;i>0&&this.points_[i+2]>t;)i-=3;const s=this.points_[e+2]-this.points_[i+2];if(s<1e3/60)return!1;const r=this.points_[e]-this.points_[i],o=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}},eM=class extends bl{constructor(t){super(t=t||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,this.duration_=void 0!==t.duration?t.duration:250,this.timeout_=void 0!==t.timeout?t.timeout:80,this.useAnchor_=void 0===t.useAnchor||t.useAnchor,this.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;const e=t.condition?t.condition:cf;this.condition_=t.onFocusOnly?uf(I1,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();t&&t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||"wheel"!==t.type)return!0;const e=t.map,i=t.originalEvent;let s;if(i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),"wheel"==t.type&&(s=i.deltaY,aC&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=y_),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),0===s)return!1;this.lastDelta_=s;const r=Date.now();void 0===this.startTime_&&(this.startTime_=r),(!this.mode_||r-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const o=e.getView();if("trackpad"===this.mode_&&!o.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=r,!1;this.totalDelta_+=s;const a=Math.max(this.timeout_-(r-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,e),a),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let i=-di(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),lf(e,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}},iM=class extends Xo{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=Oo),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){let e=0;const i=this.targetPointers[0],s=this.targetPointers[1],r=Math.atan2(s.clientY-i.clientY,s.clientX-i.clientX);if(void 0!==this.lastAngle_){const l=r-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=l}this.lastAngle_=r;const o=t.map,a=o.getView();a.getConstraints().rotation!==qp&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(hf(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_),1))}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}},nM=class extends Xo{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=Oo),super(e),this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const i=this.targetPointers[0],s=this.targetPointers[1],r=i.clientX-s.clientX,o=i.clientY-s.clientY,a=Math.sqrt(r*r+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/a),this.lastDistance_=a;const l=t.map,h=l.getView();1!=e&&(this.lastScaleDelta_=e),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(hf(this.targetPointers))),l.render(),h.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),1))}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}};function O1(n){return n[0]>0&&n[1]>0}function Ki(n,t){return Array.isArray(n)?n:(void 0===t?t=[n,n]:(t[0]=n,t[1]=n),t)}function A1(n){n instanceof wu?n.setMapInternal(null):n instanceof xl&&n.getLayers().forEach(A1)}function L1(n,t){if(n instanceof wu)n.setMapInternal(t);else if(n instanceof xl){const e=n.getLayers().getArray();for(let i=0,s=e.length;i<s;++i)L1(e[i],t)}}const Yo=class extends Kn{constructor(t){super();const e=function(r){let o=null;void 0!==r.keyboardEventTarget&&(o="string"==typeof r.keyboardEventTarget?document.getElementById(r.keyboardEventTarget):r.keyboardEventTarget);const a={},l=r.layers&&"function"==typeof r.layers.getLayers?r.layers:new xl({layers:r.layers});let h,u,c;return a.layergroup=l,a.target=r.target,a.view=r.view instanceof Mn?r.view:new Mn,void 0!==r.controls&&(Array.isArray(r.controls)?h=new us(r.controls.slice()):(xe("function"==typeof r.controls.getArray,"Expected `controls` to be an array or an `ol/Collection.js`"),h=r.controls)),void 0!==r.interactions&&(Array.isArray(r.interactions)?u=new us(r.interactions.slice()):(xe("function"==typeof r.interactions.getArray,"Expected `interactions` to be an array or an `ol/Collection.js`"),u=r.interactions)),void 0!==r.overlays?Array.isArray(r.overlays)?c=new us(r.overlays.slice()):(xe("function"==typeof r.overlays.getArray,"Expected `overlays` to be an array or an `ol/Collection.js`"),c=r.overlays):c=new us,{controls:h,interactions:u,keyboardEventTarget:o,overlays:c,values:a}}(t=t||{});this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:y_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=e.controls||k1(),this.interactions=e.interactions||function(r){r=r||{};const o=new us,a=new tM(-.005,.05,100);return(void 0===r.altShiftDragRotate||r.altShiftDragRotate)&&o.push(new XC),(void 0===r.doubleClickZoom||r.doubleClickZoom)&&o.push(new BC({delta:r.zoomDelta,duration:r.zoomDuration})),(void 0===r.dragPan||r.dragPan)&&o.push(new UC({onFocusOnly:r.onFocusOnly,kinetic:a})),(void 0===r.pinchRotate||r.pinchRotate)&&o.push(new iM),(void 0===r.pinchZoom||r.pinchZoom)&&o.push(new nM({duration:r.zoomDuration})),(void 0===r.keyboard||r.keyboard)&&(o.push(new JC),o.push(new QC({delta:r.zoomDelta,duration:r.zoomDuration}))),(void 0===r.mouseWheelZoom||r.mouseWheelZoom)&&o.push(new eM({onFocusOnly:r.onFocusOnly,duration:r.zoomDuration})),(void 0===r.shiftDragZoom||r.shiftDragZoom)&&o.push(new KC({duration:r.zoomDuration})),o}({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new jC(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener("layergroup",this.handleLayerGroupChanged_),this.addChangeListener("view",this.handleViewChanged_),this.addChangeListener("size",this.handleSizeChanged_),this.addChangeListener("target",this.handleTargetChanged_),this.setProperties(e.values);const i=this;t.view&&!(t.view instanceof Mn)&&t.view.then(function(s){i.setView(new Mn(s))}),this.controls.addEventListener("add",s=>{s.element.setMap(this)}),this.controls.addEventListener("remove",s=>{s.element.setMap(null)}),this.interactions.addEventListener("add",s=>{s.element.setMap(this)}),this.interactions.addEventListener("remove",s=>{s.element.setMap(null)}),this.overlays_.addEventListener("add",s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener("remove",s=>{const r=s.element.getId();void 0!==r&&delete this.overlayIdIndex_[r.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){L1(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,i){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(t);return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0,!1!==i.checkWrapped,e,null,void 0!==i.layerFilter?i.layerFilter:Fo,null)}getFeaturesAtPixel(t,e){const i=[];return this.forEachFeatureAtPixel(t,function(s){i.push(s)},e),i}getAllLayers(){const t=[];return function e(i){i.forEach(function(s){s instanceof xl?e(s.getLayers()):t.push(s)})}(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(t);return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,void 0!==(e=void 0!==e?e:{}).hitTolerance?e.hitTolerance:0,!1!==e.checkWrapped,void 0!==e.layerFilter?e.layerFilter:Fo,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_.getBoundingClientRect(),i=this.getSize(),s="changedTouches"in t?t.changedTouches[0]:t;return[(s.clientX-e.left)/(e.width/i[0]),(s.clientY-e.top)/(e.height/i[1])]}getTarget(){return this.get("target")}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return Np(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?ji(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get("layergroup")}setLayers(t){const e=this.getLayerGroup();if(t instanceof us)return void e.setLayers(t);const i=e.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const s=t[e];if(!s.visible)continue;const r=s.layer.getRenderer();if(r&&!r.ready)return!0;const o=s.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(t){const e=zn(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?ji(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get("size")}getView(){return this.get("view")}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,i,s){return function(o,a,l,h,u){if(!o||!(l in o.wantedTiles)||!o.wantedTiles[l][a.getKey()])return af;const c=o.viewState.center,d=h[0]-c[0],p=h[1]-c[1];return 65536*Math.log(u)+Math.sqrt(d*d+p*p)/u}(this.frameState_,t,e,i,s)}handleBrowserEvent(t,e){const i=new Ls(e=e||t.type,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,i=e.type;if("pointerdown"===i||"wheel"===i||"keydown"===i){const s=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():s,o=e.target;if(this.overlayContainerStopEvent_.contains(o)||!(r===s?s.documentElement:r).contains(o))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t)){const s=this.getInteractions().getArray().slice();for(let r=s.length-1;r>=0;r--){const o=s[r];if(o.getMap()===this&&o.getActive()&&this.getTargetElement()&&(!o.handleEvent(t)||t.propagationStopped))break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let s=this.maxTilesLoading_,r=s;if(t){const o=t.viewHints;if(o[0]||o[1]){const a=Date.now()-t.time>8;s=a?0:8,r=a?0:2}}e.getTilesLoading()<s&&(e.reprioritize(),e.loadMoreTiles(s,r))}t&&this.renderer_&&!t.animate&&(!0===this.renderComplete_?(this.hasListener("rendercomplete")&&this.renderer_.dispatchRenderEvent("rendercomplete",t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new Uo("loadend",this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new Uo("loadstart",this,t))));const i=this.postRenderFunctions_;for(let s=0,r=i.length;s<r;++s)i[s](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,s=this.targetChangeHandlerKeys_.length;i<s;++i)ti(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener("contextmenu",this.boundHandleBrowserEvent_),this.viewport_.removeEventListener("wheel",this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Su(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const t=this.getTarget(),e="string"==typeof t?document.getElementById(t):t;if(this.targetElement_=e,e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new DC(this)),this.mapBrowserEventHandler_=new NC(this,this.moveTolerance_);for(const r in ze)this.mapBrowserEventHandler_.addEventListener(ze[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener("contextmenu",this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener("wheel",this.boundHandleBrowserEvent_,!!v_&&{passive:!1});const i=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.targetChangeHandlerKeys_=[ve(i,"keydown",this.handleBrowserEvent,this),ve(i,"keypress",this.handleBrowserEvent,this)];const s=e.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(e)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(ti(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(ti(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=ve(t,"propertychange",this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=ve(t,"change",this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(ti),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new cr("addlayer",t)),this.layerGroupPropertyListenerKeys_=[ve(t,"propertychange",this.render,this),ve(t,"change",this.render,this),ve(t,"addlayer",this.handleLayerAdd_,this),ve(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const s=t[e].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const t=this.frameState_;t&&this.renderer_.flushDeclutterItems(t)}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){A1(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),i=this.getView(),s=this.frameState_;let r=null;if(void 0!==e&&O1(e)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Tp(a.center,a.resolution,a.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:$t(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;r.nextExtent=Tp(a.nextCenter,a.nextResolution,l,e)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),s&&(!this.previousExtent_||!hl(this.previousExtent_)&&!Do(r.extent,this.previousExtent_))&&(this.dispatchEvent(new Uo("movestart",this,s)),this.previousExtent_=Lo(this.previousExtent_)),this.previousExtent_&&!r.viewHints[0]&&!r.viewHints[1]&&!Do(r.extent,this.previousExtent_)&&(this.dispatchEvent(new Uo("moveend",this,r)),M_(r.extent,this.previousExtent_))),this.dispatchEvent(new Uo("postrender",this,r)),this.renderComplete_=this.hasListener("loadstart")||this.hasListener("loadend")||this.hasListener("rendercomplete")?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new cr("removelayer",e)),this.set("layergroup",t)}setSize(t){this.set("size",t)}setTarget(t){this.set("target",t)}setView(t){if(!t||t instanceof Mn)return void this.set("view",t);this.set("view",new Mn);const e=this;t.then(function(i){e.setView(new Mn(i))})}updateSize(){const t=this.getTargetElement();let e;if(t){const s=getComputedStyle(t),r=t.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),o=t.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(r)&&!isNaN(o)&&(e=[r,o],!O1(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&W_("No map visible because the map container's width or height are 0."))}const i=this.getSize();e&&(!i||!er(e,i))&&(this.setSize(e),this.updateViewportSize_())}updateViewportSize_(){const t=this.getView();if(t){let e;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(e=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(e)}}},ku=class extends eu{constructor(t,e,i){super(),i=i||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===i.transition?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent("change")}release(){3===this.state&&this.setState(4)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(2==t.getState())return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(2==t.getState()){t.interimTile=null;break}1==t.getState()?e=t:0==t.getState()?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(3!==this.state&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){Zt()}getAlpha(t,e){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;const s=e-i+1e3/60;return s>=this.transition_?1:n1(s/this.transition_)}inTransition(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}},D1=class extends ku{constructor(t,e,i,s,r,o){super(t,e,o),this.crossOrigin_=s,this.src_=i,this.key=i,this.image_=new Image,null!==s&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(t){this.image_=t,this.state=2,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=3,this.unlistenImage_(),this.image_=function(){const e=Wi(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas}(),this.changed()}handleImageLoad_(){const t=this.image_;this.state=t.naturalWidth&&t.naturalHeight?2:4,this.unlistenImage_(),this.changed()}load(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=function(e,i,s){const r=e;let o=!0,a=!1,l=!1;const h=[iu(r,"load",function(){l=!0,a||i()})];return r.src&&__?(a=!0,r.decode().then(function(){o&&i()}).catch(function(u){o&&(l?i():s())})):h.push(iu(r,"error",s)),function(){o=!1,h.forEach(ti)}}(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}},sM=class{constructor(t,e,i,s,r,o){this.sourceProj_=t,this.targetProj_=e;let a={};const l=dl(this.targetProj_,this.sourceProj_);this.transformInv_=function(_){const v=_[0]+"/"+_[1];return a[v]||(a[v]=l(_)),a[v]},this.maxSourceExtent_=s,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&We(s)>=We(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?We(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?We(this.targetProj_.getExtent()):null;const h=Dn(i),u=ll(i),c=al(i),d=No(i),p=this.transformInv_(h),f=this.transformInv_(u),g=this.transformInv_(c),m=this.transformInv_(d),y=10+(o?Math.max(0,Math.ceil(Math.log2(Ep(i)/(o*o*256*256)))):0);if(this.addQuad_(h,u,c,d,p,f,g,m,y),this.wrapsXInSource_){let _=1/0;this.triangles_.forEach(function(v,x,w){_=Math.min(_,v.source[0][0],v.source[1][0],v.source[2][0])}),this.triangles_.forEach(v=>{if(Math.max(v.source[0][0],v.source[1][0],v.source[2][0])-_>this.sourceWorldWidth_/2){const x=[[v.source[0][0],v.source[0][1]],[v.source[1][0],v.source[1][1]],[v.source[2][0],v.source[2][1]]];x[0][0]-_>this.sourceWorldWidth_/2&&(x[0][0]-=this.sourceWorldWidth_),x[1][0]-_>this.sourceWorldWidth_/2&&(x[1][0]-=this.sourceWorldWidth_),x[2][0]-_>this.sourceWorldWidth_/2&&(x[2][0]-=this.sourceWorldWidth_);const w=Math.min(x[0][0],x[1][0],x[2][0]);Math.max(x[0][0],x[1][0],x[2][0])-w<this.sourceWorldWidth_/2&&(v.source=x)}})}a={}}addTriangle_(t,e,i,s,r,o){this.triangles_.push({source:[s,r,o],target:[t,e,i]})}addQuad_(t,e,i,s,r,o,a,l,h){const u=rl([r,o,a,l]),c=this.sourceWorldWidth_?We(u)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&c>.5&&c<1;let f=!1;if(h>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(f=We(rl([t,e,i,s]))/this.targetWorldWidth_>.25||f),!p&&this.sourceProj_.isGlobal()&&c&&(f=c>.25||f)),!f&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!yi(u,this.maxSourceExtent_))return;let g=0;if(!(f||isFinite(r[0])&&isFinite(r[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(l[0])&&isFinite(l[1])))if(h>0)f=!0;else if(g=(isFinite(r[0])&&isFinite(r[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(a[0])&&isFinite(a[1])?0:2)+(isFinite(l[0])&&isFinite(l[1])?0:1),1!=g&&2!=g&&4!=g&&8!=g)return;if(h>0){if(!f){const m=this.transformInv_([(t[0]+i[0])/2,(t[1]+i[1])/2]);let y;y=p?(zo(r[0],d)+zo(a[0],d))/2-zo(m[0],d):(r[0]+a[0])/2-m[0];const _=(r[1]+a[1])/2-m[1];f=y*y+_*_>this.errorThresholdSquared_}if(f){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){const m=[(e[0]+i[0])/2,(e[1]+i[1])/2],y=this.transformInv_(m),_=[(s[0]+t[0])/2,(s[1]+t[1])/2],v=this.transformInv_(_);this.addQuad_(t,e,m,_,r,o,y,v,h-1),this.addQuad_(_,m,i,s,v,y,a,l,h-1)}else{const m=[(t[0]+e[0])/2,(t[1]+e[1])/2],y=this.transformInv_(m),_=[(i[0]+s[0])/2,(i[1]+s[1])/2],v=this.transformInv_(_);this.addQuad_(t,m,_,s,r,y,v,l,h-1),this.addQuad_(m,e,i,_,y,o,a,v,h-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}11&g||this.addTriangle_(t,i,s,r,a,l),14&g||this.addTriangle_(t,i,e,r,a,o),g&&(13&g||this.addTriangle_(e,s,t,o,l,r),7&g||this.addTriangle_(e,s,i,o,l,a))}calculateSourceExtent(){const t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(e,i,s){const r=e.source;ol(t,r[0]),ol(t,r[1]),ol(t,r[2])}),t}getTriangles(){return this.triangles_}};let gf;const $o=[];function N1(n,t,e,i,s){n.beginPath(),n.moveTo(0,0),n.lineTo(t,e),n.lineTo(i,s),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(t,i)+1,Math.max(e,s)),n.restore()}function mf(n,t){return Math.abs(n[4*t]-210)>2||Math.abs(n[4*t+3]-191.25)>2}function z1(n,t,e,i){const s=fu(e,t,n);let r=Y_(t,i,e);const o=t.getMetersPerUnit();void 0!==o&&(r*=o);const a=n.getMetersPerUnit();void 0!==a&&(r/=a);const l=n.getExtent();if(!l||ru(l,s)){const h=Y_(n,r,s)/r;isFinite(h)&&h>0&&(r/=h)}return r}const yf=class extends ku{constructor(t,e,i,s,r,o,a,l,h,u,c,d){super(r,0,{interpolate:!!d}),this.renderEdges_=void 0!==c&&c,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=s,this.wrappedTileCoord_=o||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const p=s.getTileCoordExtent(this.wrappedTileCoord_),f=this.targetTileGrid_.getExtent();let g=this.sourceTileGrid_.getExtent();const m=f?Ur(p,f):p;if(0===Ep(m))return void(this.state=4);const y=t.getExtent();y&&(g=g?Ur(g,y):y);const _=s.getResolution(this.wrappedTileCoord_[0]),v=function(C,M,S,F){const P=Jn(S);let A=z1(C,M,P,F);return(!isFinite(A)||A<=0)&&Sp(S,function(T){return A=z1(C,M,T,F),isFinite(A)&&A>0}),A}(t,i,m,_);if(!isFinite(v)||v<=0)return void(this.state=4);if(this.triangulation_=new sM(t,i,m,g,v*(void 0!==u?u:.5),_),0===this.triangulation_.getTriangles().length)return void(this.state=4);this.sourceZ_=e.getZForResolution(v);let x=this.triangulation_.calculateSourceExtent();if(g&&(t.canWrapX()?(x[1]=di(x[1],g[1],g[3]),x[3]=di(x[3],g[1],g[3])):x=Ur(x,g)),Ep(x)){const w=e.getTileRangeForExtentAndZ(x,this.sourceZ_);for(let C=w.minX;C<=w.maxX;C++)for(let M=w.minY;M<=w.maxY;M++){const S=h(this.sourceZ_,C,M,a);S&&this.sourceTiles_.push(S)}0===this.sourceTiles_.length&&(this.state=4)}else this.state=4}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(e=>{e&&2==e.getState()&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}),this.sourceTiles_.length=0,0===t.length)this.state=3;else{const e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),s="number"==typeof i?i:i[0],r="number"==typeof i?i:i[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function(u,c,d,p,f,g,m,y,_,v,x,w){const C=Wi(Math.round(d*u),Math.round(d*c),$o);if(w||(C.imageSmoothingEnabled=!1),0===_.length)return C.canvas;function M(L){return Math.round(L*d)/d}C.scale(d,d),C.globalCompositeOperation="lighter";const S=[1/0,1/0,-1/0,-1/0];_.forEach(function(L,D,V){E_(S,L.extent)});const F=We(S),P=Ln(S),A=Wi(Math.round(d*F/p),Math.round(d*P/p),$o);w||(A.imageSmoothingEnabled=!1);const T=d/p;_.forEach(function(L,D,V){const z=L.extent[0]-S[0],K=-(L.extent[3]-S[3]),lt=We(L.extent),ut=Ln(L.extent);L.image.width>0&&L.image.height>0&&A.drawImage(L.image,v,v,L.image.width-2*v,L.image.height-2*v,z*T,K*T,lt*T,ut*T)});const $=Dn(m);return y.getTriangles().forEach(function(L,D,V){const z=L.source,K=L.target;let lt=z[0][0],ut=z[0][1],N=z[1][0],G=z[1][1],Et=z[2][0],mt=z[2][1];const Ut=M((K[0][0]-$[0])/g),ce=M(-(K[0][1]-$[1])/g),ye=M((K[1][0]-$[0])/g),we=M(-(K[1][1]-$[1])/g),De=M((K[2][0]-$[0])/g),ii=M(-(K[2][1]-$[1])/g),st=lt,pi=ut;lt=0,ut=0,N-=st,G-=pi,Et-=st,mt-=pi;const _i=function(se){const de=se.length;for(let he=0;he<de;he++){let fi=he,Xi=Math.abs(se[he][he]);for(let He=he+1;He<de;He++){const oe=Math.abs(se[He][he]);oe>Xi&&(Xi=oe,fi=He)}if(0===Xi)return null;const qi=se[fi];se[fi]=se[he],se[he]=qi;for(let He=he+1;He<de;He++){const oe=-se[He][he]/se[he][he];for(let Ai=he;Ai<de+1;Ai++)he==Ai?se[He][Ai]=0:se[He][Ai]+=oe*se[he][Ai]}}const vi=new Array(de);for(let he=de-1;he>=0;he--){vi[he]=se[he][de]/se[he][he];for(let fi=he-1;fi>=0;fi--)se[fi][de]-=se[fi][he]*vi[he]}return vi}([[N,G,0,0,ye-Ut],[Et,mt,0,0,De-Ut],[0,0,N,G,we-ce],[0,0,Et,mt,ii-ce]]);if(_i){if(C.save(),C.beginPath(),function(){if(void 0===gf){const se=Wi(6,6,$o);se.globalCompositeOperation="lighter",se.fillStyle="rgba(210, 0, 0, 0.75)",N1(se,4,5,4,0),N1(se,4,5,0,5);const de=se.getImageData(0,0,3,3).data;gf=mf(de,0)||mf(de,4)||mf(de,8),yl(se),$o.push(se.canvas)}return gf}()||!w){C.moveTo(ye,we);const Ne=4,se=Ut-ye,de=ce-we;for(let vi=0;vi<Ne;vi++)C.lineTo(ye+M((vi+1)*se/Ne),we+M(vi*de/(Ne-1))),vi!=Ne-1&&C.lineTo(ye+M((vi+1)*se/Ne),we+M((vi+1)*de/(Ne-1)));C.lineTo(De,ii)}else C.moveTo(ye,we),C.lineTo(Ut,ce),C.lineTo(De,ii);C.clip(),C.transform(_i[0],_i[2],_i[1],_i[3],Ut,ce),C.translate(S[0]-st,S[3]-pi),C.scale(p/d,-p/d),C.drawImage(A.canvas,0,0),C.restore()}}),yl(A),$o.push(A.canvas),x&&(C.save(),C.globalCompositeOperation="source-over",C.strokeStyle="black",C.lineWidth=1,y.getTriangles().forEach(function(L,D,V){const z=L.target,K=(z[0][0]-$[0])/g,lt=-(z[0][1]-$[1])/g,ut=(z[1][0]-$[0])/g,N=-(z[1][1]-$[1])/g,G=(z[2][0]-$[0])/g,Et=-(z[2][1]-$[1])/g;C.beginPath(),C.moveTo(ut,N),C.lineTo(K,lt),C.lineTo(G,Et),C.closePath(),C.stroke()}),C.restore()),C.canvas}(s,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=2}this.changed()}load(){if(0==this.state){this.state=1,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(e=>{const i=e.getState();if(0==i||1==i){t++;const s=ve(e,"change",function(r){const o=e.getState();(2==o||3==o||4==o)&&(ti(s),t--,0===t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(s)}}),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(e,i,s){0==e.getState()&&e.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(ti),this.sourcesListenerKeys_=null}release(){this.canvas_&&(yl(this.canvas_.getContext("2d")),$o.push(this.canvas_),this.canvas_=null),super.release()}},rM=class{constructor(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const i=this.entries_[t];return xe(void 0!==i,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){const e=this.entries_[t];return xe(void 0!==e,"Tried to get a value for a key that does not exist in the cache"),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e,i=0;for(e=this.newest_;e;e=e.older)t[i++]=e.key_;return t}getValues(){const t=new Array(this.count_);let e,i=0;for(e=this.newest_;e;e=e.older)t[i++]=e.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){xe(!(t in this.entries_),"Tried to set a value for a key that is used already");const i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}};function j1(n,t,e,i){return void 0!==i?(i[0]=n,i[1]=t,i[2]=e,i):[n,t,e]}function Ko(n,t,e){return n+"/"+t+"/"+e}function G1(n){return Ko(n[0],n[1],n[2])}function q1(n){return n.split("/").map(Number)}const _f=class extends rM{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return;const t=q1(this.peekFirstKey())[0];this.forEach(e=>{e.tileCoord[0]!==t&&(this.remove(G1(e.tileCoord)),e.release())})}};function V1(n){return n?Array.isArray(n)?function(t){return n}:"function"==typeof n?n:function(t){return[n]}:null}const B1=class extends Kn{constructor(t){super(),this.projection=Ee(t.projection),this.attributions_=V1(t.attributions),this.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,this.loading=!1,this.state_=void 0!==t.state?t.state:"ready",this.wrapX_=void 0!==t.wrapX&&t.wrapX,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise(function(i,s){e.viewResolver=i,e.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=V1(t),this.changed()}setState(t){this.state_=t,this.changed()}};class Z1{constructor(t,e,i,s){this.minX=t,this.maxX=e,this.minY=i,this.maxY=s}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function Jo(n,t,e,i,s){return void 0!==s?(s.minX=n,s.maxX=t,s.minY=e,s.maxY=i,s):new Z1(n,t,e,i)}const W1=Z1,Qo=[0,0,0],dr=class{constructor(t){let e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,xe(function(r,o,a){const l=function(s,r){return r-s}||tr;return r.every(function(h,u){if(0===u)return!0;const c=l(r[u-1],h);return!(c>0||0===c)})}(this.resolutions_),"`resolutions` must be sorted in descending order"),!t.origins)for(let s=0,r=this.resolutions_.length-1;s<r;++s)if(e){if(this.resolutions_[s]/this.resolutions_[s+1]!==e){e=void 0;break}}else e=this.resolutions_[s]/this.resolutions_[s+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,xe(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=t.extent;void 0!==i&&!this.origin_&&!this.origins_&&(this.origin_=Dn(i)),xe(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,xe(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:Ip,xe(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=void 0!==i?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(s,r){const o=new W1(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,r);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,e,i){const s=this.getTileRangeForExtentAndZ(t,e);for(let r=s.minX,o=s.maxX;r<=o;++r)for(let a=s.minY,l=s.maxY;a<=l;++a)i([e,r,a])}forEachTileCoordParentTileRange(t,e,i,s){let r,o,a,l=null,h=t[0]-1;for(2===this.zoomFactor_?(o=t[1],a=t[2]):l=this.getTileCoordExtent(t,s);h>=this.minZoom;){if(2===this.zoomFactor_?(o=Math.floor(o/2),a=Math.floor(a/2),r=Jo(o,o,a,a,i)):r=this.getTileRangeForExtentAndZ(l,h,i),e(h,r))return!0;--h}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){const r=2*t[1],o=2*t[2];return Jo(r,r+1,o,o+1,e)}const s=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,i){if(e>this.maxZoom||e<this.minZoom)return null;const s=t[0],r=t[1],o=t[2];if(e===s)return Jo(r,o,r,o,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,e-s),h=Math.floor(r*l),u=Math.floor(o*l);return e<s?Jo(h,h,u,u,i):Jo(h,Math.floor(l*(r+1))-1,u,Math.floor(l*(o+1))-1,i)}const a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,e,i)}getTileRangeForExtentAndZ(t,e,i){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,Qo);const s=Qo[1],r=Qo[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,Qo),Jo(s,Qo[1],r,Qo[2],i)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),i=this.getResolution(t[0]),s=Ki(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*s[0]*i,e[1]-(t[2]+.5)*s[1]*i]}getTileCoordExtent(t,e){const i=this.getOrigin(t[0]),s=this.getResolution(t[0]),r=Ki(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*r[0]*s,a=i[1]-(t[2]+1)*r[1]*s;return cs(o,a,o+r[0]*s,a+r[1]*s,e)}getTileCoordForCoordAndResolution(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)}getTileCoordForXYAndResolution_(t,e,i,s,r){const o=this.getZForResolution(i),a=i/this.getResolution(o),l=this.getOrigin(o),h=Ki(this.getTileSize(o),this.tmpSize_);let u=a*(t-l[0])/i/h[0],c=a*(l[1]-e)/i/h[1];return s?(u=hu(u,5)-1,c=hu(c,5)-1):(u=lu(u,5),c=lu(c,5)),j1(o,u,c,r)}getTileCoordForXYAndZ_(t,e,i,s,r){const o=this.getOrigin(i),a=this.getResolution(i),l=Ki(this.getTileSize(i),this.tmpSize_);let h=(t-o[0])/a/l[0],u=(o[1]-e)/a/l[1];return s?(h=hu(h,5)-1,u=hu(u,5)-1):(h=lu(h,5),u=lu(u,5)),j1(i,h,u,r)}getTileCoordForCoordAndZ(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){return di(yp(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return f1(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,i=new Array(e);for(let s=this.minZoom;s<e;++s)i[s]=this.getTileRangeForExtentAndZ(t,s);this.fullTileRanges_=i}};function H1(n){let t=n.getDefaultTileGrid();return t||(t=function(i,s,r,o){return function(l,h,u,c){c=void 0!==c?c:"top-left";const d=U1(l,void 0,u);return new dr({extent:l,origin:uC(l,c),resolutions:d,tileSize:u})}(Cl(i),0,void 0,void 0)}(n),n.setDefaultTileGrid(t)),t}function Iu(n){const t=n||{},e=t.extent||Ee("EPSG:3857").getExtent(),i={extent:e,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:U1(e,t.maxZoom,t.tileSize,t.maxResolution)};return new dr(i)}function U1(n,t,e,i){t=void 0!==t?t:L_,e=Ki(void 0!==e?e:Ip);const s=Ln(n),r=We(n);i=i>0?i:Math.max(r/e[0],s/e[1]);const o=t+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function Cl(n){let t=(n=Ee(n)).getExtent();if(!t){const e=180*rr.degrees/n.getMetersPerUnit();t=cs(-e,-e,e,e)}return t}class oM extends ls{constructor(t,e){super(t),this.tile=e}}const aM=class extends B1{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.opaque_=void 0!==t.opaque&&t.opaque,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null,this.tileGrid&&Ki(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new _f(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){const i=this.getTileCacheForProjection(t);i&&i.expireCache(e)}forEachLoadedTile(t,e,i,s){const r=this.getTileCacheForProjection(t);if(!r)return!1;let o,a,l,h=!0;for(let u=i.minX;u<=i.maxX;++u)for(let c=i.minY;c<=i.maxY;++c)a=Ko(e,u,c),l=!1,r.containsKey(a)&&(o=r.get(a),l=2===o.getState(),l&&(l=!1!==s(o))),l||(h=!1);return h}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,i,s,r){return Zt()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:H1(t)}getTileCacheForProjection(t){const e=this.getProjection();return xe(null===e||or(e,t),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,i){const s=this.getTileGridForProjection(i),r=this.getTilePixelRatio(e),o=Ki(s.getTileSize(t),this.tmpSize);return 1==r?o:(void 0===(u=this.tmpSize)&&(u=[0,0]),u[0]=(l=o)[0]*(h=r)+.5|0,u[1]=l[1]*h+.5|0,u);var l,h,u}getTileCoordForTileUrlFunction(t,e){e=void 0!==e?e:this.getProjection();const i=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=function(r,o,a){const l=o[0],h=r.getTileCoordCenter(o),u=Cl(a);if(!ru(u,h)){const c=We(u),d=Math.ceil((u[0]-h[0])/c);return h[0]+=c*d,r.getTileCoordForCoordAndZ(h,l)}return o}(i,t,e)),function(r,o){const a=r[0],l=r[1],h=r[2];if(o.getMinZoom()>a||a>o.getMaxZoom())return!1;const u=o.getFullTileRange(a);return!u||u.containsXY(l,h)}(t,i)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){const i=this.getTileCacheForProjection(e);t>i.highWaterMark&&(i.highWaterMark=t)}useTile(t,e,i,s){}};function lM(n,t){const e=/\{z\}/g,i=/\{x\}/g,s=/\{y\}/g,r=/\{-y\}/g;return function(o,a,l){if(o)return n.replace(e,o[0].toString()).replace(i,o[1].toString()).replace(s,o[2].toString()).replace(r,function(){const h=t.getFullTileRange(o[0]);return xe(h,"The {-y} placeholder requires a tile grid with extent"),(h.getHeight()-o[2]-1).toString()})}}function X1(n,t){const e=n.length,i=new Array(e);for(let s=0;s<e;++s)i[s]=lM(n[s],t);return vf(i)}function vf(n){return 1===n.length?n[0]:function(t,e,i){if(!t)return;const r=zo(((a=t)[1]<<a[0])+a[2],n.length);var a;return n[r](t,e,i)}}function xf(n){const t=[];let e=/\{([a-z])-([a-z])\}/.exec(n);if(e){const i=e[1].charCodeAt(0),s=e[2].charCodeAt(0);let r;for(r=i;r<=s;++r)t.push(n.replace(e[0],String.fromCharCode(r)));return t}if(e=/\{(\d+)-(\d+)\}/.exec(n),e){const i=parseInt(e[2],10);for(let s=parseInt(e[1],10);s<=i;s++)t.push(n.replace(e[0],s.toString()));return t}return t.push(n),t}class wf extends aM{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===wf.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,i=$t(e),s=e.getState();let r;1==s?(this.tileLoadingKeys_[i]=!0,r="tileloadstart"):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],r=3==s?"tileloaderror":2==s?"tileloadend":void 0),null!=r&&this.dispatchEvent(new oM(r,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof e<"u"?this.setKey(e):this.changed()}setUrl(t){const e=xf(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(X1(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,i){}useTile(t,e,i){const s=Ko(t,e,i);this.tileCache.containsKey(s)&&this.tileCache.get(s)}}const Y1=wf;function hM(n,t){n.getImage().src=t}const bf=class extends Y1{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:hM,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:void 0===t.interpolate||t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:D1,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){const i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?e:{});for(const s in this.tileCacheForProjection){const r=this.tileCacheForProjection[s];r.expireCache(r==i?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!or(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return!(this.getProjection()&&t&&!or(this.getProjection(),t))&&super.getOpaque(t)}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||or(e,t)))return this.tileGrid;const i=$t(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=H1(t)),this.tileGridForProjection[i]}getTileCacheForProjection(t){const e=this.getProjection();if(!e||or(e,t))return this.tileCache;const i=$t(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new _f(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(t,e,i,s,r,o){const a=[t,e,i],l=this.getTileCoordForTileUrlFunction(a,r),h=l?this.tileUrlFunction(l,s,r):void 0,u=new this.tileClass(a,void 0!==h?0:4,void 0!==h?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener("change",this.handleTileChange.bind(this)),u}getTile(t,e,i,s,r){const o=this.getProjection();if(!o||!r||or(o,r))return this.getTileInternal(t,e,i,s,o||r);const a=this.getTileCacheForProjection(r),l=[t,e,i];let h;const u=G1(l);a.containsKey(u)&&(h=a.get(u));const c=this.getKey();if(h&&h.key==c)return h;const d=this.getTileGridForProjection(o),p=this.getTileGridForProjection(r),f=this.getTileCoordForTileUrlFunction(l,r),g=new yf(o,d,r,p,l,f,this.getTilePixelRatio(s),this.getGutter(),(m,y,_,v)=>this.getTileInternal(m,y,_,v,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return g.key=c,h?(g.interimTile=h,g.refreshInterimChain(),a.replace(u,g)):a.set(u,g),g}getTileInternal(t,e,i,s,r){let o=null;const a=Ko(t,e,i),l=this.getKey();if(this.tileCache.containsKey(a)){if(o=this.tileCache.get(a),o.key!=l){const h=o;o=this.createTile_(t,e,i,s,r,l),o.interimTile=0==h.getState()?h.interimTile:h,o.refreshInterimChain(),this.tileCache.replace(a,o)}}else o=this.createTile_(t,e,i,s,r,l),this.tileCache.set(a,o);return o}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}}setTileGridForProjection(t,e){const i=Ee(t);if(i){const s=$t(i);s in this.tileGridForProjection||(this.tileGridForProjection[s]=e)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}},$1=class extends bf{constructor(t){const e=void 0!==(t=t||{}).projection?t.projection:"EPSG:3857",i=void 0!==t.tileGrid?t.tileGrid:Iu({extent:Cl(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0}getGutter(){return this.gutter_}},uM=class extends $1{constructor(t){super({opaque:!1,projection:(t=t||{}).projection,tileGrid:t.tileGrid,wrapX:void 0===t.wrapX||t.wrapX,zDirection:t.zDirection,url:t.template||"z:{z} x:{x} y:{y}",tileLoadFunction:(e,i)=>{const s=e.getTileCoord()[0],r=Ki(this.tileGrid.getTileSize(s)),o=Wi(r[0],r[1]);o.strokeStyle="grey",o.strokeRect(.5,.5,r[0]+.5,r[1]+.5),o.fillStyle="grey",o.strokeStyle="white",o.textAlign="center",o.textBaseline="middle",o.font="24px sans-serif",o.lineWidth=4,o.strokeText(i,r[0]/2,r[1]/2,r[0]),o.fillText(i,r[0]/2,r[1]/2,r[0]),e.setImage(o.canvas)}})}},K1=class extends ku{constructor(t,e,i,s,r,o){super(t,e,o),this.extent=null,this.format_=s,this.features_=null,this.projection=null,this.tileLoadFunction_=r,this.url_=i,this.key=i}getFormat(){return this.format_}getFeatures(){return this.features_}load(){0==this.state&&(this.setState(1),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(t,e){this.setFeatures(t)}onError(){this.setState(3)}setFeatures(t){this.features_=t,this.setState(2)}setLoader(t){this.loader_=t}},J1=[],cM=class extends ku{constructor(t,e,i,s){super(t,e,{transition:0}),this.context_={},this.executorGroups={},this.declutterExecutorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.getSourceTiles=s.bind(void 0,this),this.wrappedTileCoord=i}getContext(t){const e=$t(t);return e in this.context_||(this.context_[e]=Wi(1,1,J1)),this.context_[e]}hasContext(t){return $t(t)in this.context_}getImage(t){return this.hasContext(t)?this.getContext(t).canvas:null}getReplayState(t){const e=$t(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[e]}load(){this.getSourceTiles()}release(){for(const t in this.context_){const e=this.context_[t];yl(e),J1.push(e.canvas),delete this.context_[t]}super.release()}};let dM=!1;function Q1(n,t,e,i,s,r,o){const a=new XMLHttpRequest;a.open("GET","function"==typeof n?n(e,i,s):n,!0),"arraybuffer"==t.getType()&&(a.responseType="arraybuffer"),a.withCredentials=dM,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const h=t.getType();let u;"json"==h||"text"==h?u=a.responseText:"xml"==h?(u=a.responseXML,u||(u=(new DOMParser).parseFromString(a.responseText,"application/xml"))):"arraybuffer"==h&&(u=a.response),u?r(t.readFeatures(u,{extent:e,featureProjection:s}),t.readProjection(u)):o()}else o()},a.onerror=o,a.send()}function tv(n,t){return function(e,i,s,r,o){const a=this;Q1(n,t,e,i,s,function(l,h){a.addFeatures(l),void 0!==r&&r(l)},o||Ao)}}const Cf=class extends Y1{constructor(t){const e=t.projection||"EPSG:3857",i=t.extent||Cl(e),s=t.tileGrid||Iu({extent:i,maxResolution:t.maxResolution,maxZoom:void 0!==t.maxZoom?t.maxZoom:22,minZoom:t.minZoom,tileSize:t.tileSize||512});super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,interpolate:!0,opaque:!1,projection:e,state:t.state,tileGrid:s,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:ev,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:void 0===t.zDirection?1:t.zDirection}),this.format_=t.format?t.format:null,this.sourceTileCache=new _f(this.tileCache.highWaterMark),this.overlaps_=null==t.overlaps||t.overlaps,this.tileClass=t.tileClass?t.tileClass:K1,this.tileGrids_={}}getFeaturesInExtent(t){const e=[],i=this.tileCache;if(0===i.getCount())return e;const s=q1(i.peekFirstKey())[0],r=this.tileGrid;return i.forEach(function(o){if(o.tileCoord[0]!==s||2!==o.getState())return;const a=o.getSourceTiles();for(let l=0,h=a.length;l<h;++l){const u=a[l];if(yi(t,r.getTileCoordExtent(u.tileCoord))){const c=u.getFeatures();if(c)for(let d=0,p=c.length;d<p;++d){const f=c[d],g=f.getGeometry();yi(t,g.getExtent())&&e.push(f)}}}}),e}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(t,e){const i=this.getTileCacheForProjection(t),s=Object.keys(e).reduce((r,o)=>{const a=function(u){const[c,d,p]=u.substring(u.lastIndexOf("/")+1,u.length).split(",").map(Number);return Ko(c,d,p)}(o),l=i.peek(a);if(l){const h=l.sourceTiles;for(let u=0,c=h.length;u<c;++u)r[h[u].getKey()]=!0}return r},{});super.expireCache(t,e),this.sourceTileCache.expireCache(s)}getSourceTiles(t,e,i){if(0===i.getState()){i.setState(1);const s=i.wrappedTileCoord,r=this.getTileGridForProjection(e),o=r.getTileCoordExtent(s),a=r.getResolution(s[0]);nr(o,-a,o);const l=this.tileGrid,h=l.getExtent();h&&Ur(o,h,o);const u=l.getZForResolution(a,this.zDirection);l.forEachTileCoord(o,u,c=>{const d=this.tileUrlFunction(c,t,e),p=this.sourceTileCache.containsKey(d)?this.sourceTileCache.get(d):new this.tileClass(c,d?0:4,d,this.format_,this.tileLoadFunction);i.sourceTiles.push(p);const f=p.getState();if(f<2){const g=m=>{this.handleTileChange(m);const y=p.getState();if(2===y||3===y){const _=p.getKey();_ in i.errorTileKeys?2===p.getState()&&delete i.errorTileKeys[_]:i.loadingSourceTiles--,3===y?i.errorTileKeys[_]=!0:p.removeEventListener("change",g),0===i.loadingSourceTiles&&i.setState(Wr(i.errorTileKeys)?2:3)}};p.addEventListener("change",g),i.loadingSourceTiles++}0===f&&(p.extent=l.getTileCoordExtent(c),p.projection=e,p.resolution=l.getResolution(c[0]),this.sourceTileCache.set(d,p),p.load())}),i.loadingSourceTiles||i.setState(i.sourceTiles.some(c=>3===c.getState())?3:2)}return i.sourceTiles}getTile(t,e,i,s,r){const o=Ko(t,e,i),a=this.getKey();let l;if(this.tileCache.containsKey(o)&&(l=this.tileCache.get(o),l.key===a))return l;const h=[t,e,i];let u=this.getTileCoordForTileUrlFunction(h,r);const c=this.getTileGrid().getExtent(),d=this.getTileGridForProjection(r);if(u&&c){const g=d.getTileCoordExtent(u);nr(g,-d.getResolution(t),g),yi(c,g)||(u=null)}let p=!0;if(null!==u){const g=this.tileGrid,m=d.getResolution(t),y=g.getZForResolution(m,1),_=d.getTileCoordExtent(u);nr(_,-m,_),g.forEachTileCoord(_,y,v=>{p=p&&!this.tileUrlFunction(v,s,r)})}const f=new cM(h,p?4:0,u,this.getSourceTiles.bind(this,s,r));return f.key=a,l?(f.interimTile=l,f.refreshInterimChain(),this.tileCache.replace(o,f)):this.tileCache.set(o,f),f}getTileGridForProjection(t){const e=t.getCode();let i=this.tileGrids_[e];if(!i){const s=this.tileGrid,r=s.getResolutions().slice(),o=r.map(function(h,u){return s.getOrigin(u)}),a=r.map(function(h,u){return s.getTileSize(u)}),l=L_+1;for(let h=r.length;h<l;++h)r.push(r[h-1]/2),o.push(o[h-1]),a.push(a[h-1]);i=new dr({extent:s.getExtent(),origins:o,resolutions:r,tileSizes:a}),this.tileGrids_[e]=i}return i}getTilePixelRatio(t){return t}getTilePixelSize(t,e,i){const s=Ki(this.getTileGridForProjection(i).getTileSize(t),this.tmpSize);return[Math.round(s[0]*e),Math.round(s[1]*e)]}updateCacheSize(t,e){super.updateCacheSize(2*t,e),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(e).highWaterMark}};function ev(n,t){n.setLoader(function(e,i,s){Q1(t,n.getFormat(),e,i,s,n.onLoad.bind(n),n.onError.bind(n))})}let pM=null;var Qr=1,to=2,ta=3,Mf=5,iv=6378137,fM=6356752.314,nv=.0066943799901413165,Ml=484813681109536e-20,et=Math.PI/2,ct=1e-10,Hi=.017453292519943295,ps=57.29577951308232,je=Math.PI/4,Sl=2*Math.PI,Si=3.14159265359,gM={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};const mM={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var sv=/[\s_\-\/\(\)]/g;function pr(n,t){if(n[t])return n[t];for(var e,i=Object.keys(n),s=t.toLowerCase().replace(sv,""),r=-1;++r<i.length;)if((e=i[r]).toLowerCase().replace(sv,"")===s)return n[e]}function Sf(n){var t,e,i,s={},r=n.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,l){var h=l.split("=");return h.push(!0),a[h[0].toLowerCase()]=h[1],a},{}),o={proj:"projName",datum:"datumCode",rf:function(a){s.rf=parseFloat(a)},lat_0:function(a){s.lat0=a*Hi},lat_1:function(a){s.lat1=a*Hi},lat_2:function(a){s.lat2=a*Hi},lat_ts:function(a){s.lat_ts=a*Hi},lon_0:function(a){s.long0=a*Hi},lon_1:function(a){s.long1=a*Hi},lon_2:function(a){s.long2=a*Hi},alpha:function(a){s.alpha=parseFloat(a)*Hi},gamma:function(a){s.rectified_grid_angle=parseFloat(a)},lonc:function(a){s.longc=a*Hi},x_0:function(a){s.x0=parseFloat(a)},y_0:function(a){s.y0=parseFloat(a)},k_0:function(a){s.k0=parseFloat(a)},k:function(a){s.k0=parseFloat(a)},a:function(a){s.a=parseFloat(a)},b:function(a){s.b=parseFloat(a)},r_a:function(){s.R_A=!0},zone:function(a){s.zone=parseInt(a,10)},south:function(){s.utmSouth=!0},towgs84:function(a){s.datum_params=a.split(",").map(function(l){return parseFloat(l)})},to_meter:function(a){s.to_meter=parseFloat(a)},units:function(a){s.units=a;var l=pr(mM,a);l&&(s.to_meter=l.to_meter)},from_greenwich:function(a){s.from_greenwich=a*Hi},pm:function(a){var l=pr(gM,a);s.from_greenwich=(l||parseFloat(a))*Hi},nadgrids:function(a){"@null"===a?s.datumCode="none":s.nadgrids=a},axis:function(a){var l="ewnsud";3===a.length&&-1!==l.indexOf(a.substr(0,1))&&-1!==l.indexOf(a.substr(1,1))&&-1!==l.indexOf(a.substr(2,1))&&(s.axis=a)},approx:function(){s.approx=!0}};for(t in r)e=r[t],t in o?"function"==typeof(i=o[t])?i(e):s[i]=e:s[t]=e;return"string"==typeof s.datumCode&&"WGS84"!==s.datumCode&&(s.datumCode=s.datumCode.toLowerCase()),s}const yM=function(t){return new Ds(t).output()};var El=1,_M=/\s/,vM=/[A-Za-z]/,xM=/[A-Za-z84_]/,Pu=/[,\]]/,rv=/[\d\.E\-\+]/;function Ds(n){if("string"!=typeof n)throw new Error("not a string");this.text=n.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=El}function ov(n,t,e){Array.isArray(t)&&(e.unshift(t),t=null);var i=e.reduce(function(s,r){return ea(r,s),s},t?{}:n);t&&(n[t]=i)}function ea(n,t){if(Array.isArray(n)){var e=n.shift();if("PARAMETER"===e&&(e=n.shift()),1===n.length)return Array.isArray(n[0])?(t[e]={},void ea(n[0],t[e])):void(t[e]=n[0]);if(n.length)if("TOWGS84"!==e){if("AXIS"===e)return e in t||(t[e]=[]),void t[e].push(n);var i;switch(Array.isArray(e)||(t[e]={}),e){case"UNIT":case"PRIMEM":case"VERT_DATUM":return t[e]={name:n[0].toLowerCase(),convert:n[1]},void(3===n.length&&ea(n[2],t[e]));case"SPHEROID":case"ELLIPSOID":return t[e]={name:n[0],a:n[1],rf:n[2]},void(4===n.length&&ea(n[3],t[e]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return n[0]=["name",n[0]],void ov(t,e,n);default:for(i=-1;++i<n.length;)if(!Array.isArray(n[i]))return ea(n,t[e]);return ov(t,e,n)}}else t[e]=n;else t[e]=!0}else t[n]=!0}Ds.prototype.readCharicter=function(){var n=this.text[this.place++];if(4!==this.state)for(;_M.test(n);){if(this.place>=this.text.length)return;n=this.text[this.place++]}switch(this.state){case El:return this.neutral(n);case 2:return this.keyword(n);case 4:return this.quoted(n);case 5:return this.afterquote(n);case 3:return this.number(n);case-1:return}},Ds.prototype.afterquote=function(n){if('"'===n)return this.word+='"',void(this.state=4);if(Pu.test(n))return this.word=this.word.trim(),void this.afterItem(n);throw new Error("havn't handled \""+n+'" in afterquote yet, index '+this.place)},Ds.prototype.afterItem=function(n){return","===n?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=El)):"]"===n?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=El,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},Ds.prototype.number=function(n){if(!rv.test(n)){if(Pu.test(n))return this.word=parseFloat(this.word),void this.afterItem(n);throw new Error("havn't handled \""+n+'" in number yet, index '+this.place)}this.word+=n},Ds.prototype.quoted=function(n){'"'!==n?this.word+=n:this.state=5},Ds.prototype.keyword=function(n){if(xM.test(n))this.word+=n;else{if("["===n){var t=[];return t.push(this.word),this.level++,null===this.root?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,void(this.state=El)}if(!Pu.test(n))throw new Error("havn't handled \""+n+'" in keyword yet, index '+this.place);this.afterItem(n)}},Ds.prototype.neutral=function(n){if(vM.test(n))return this.word=n,void(this.state=2);if('"'===n)return this.word="",void(this.state=4);if(rv.test(n))return this.word=n,void(this.state=3);if(!Pu.test(n))throw new Error("havn't handled \""+n+'" in neutral yet, index '+this.place);this.afterItem(n)},Ds.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var t,wM=.017453292519943295;function fs(n){return n*wM}function av(n){var t=yM(n),e=t.shift(),i=t.shift();t.unshift(["name",i]),t.unshift(["type",e]);var s={};return ea(t,s),function(o){if("GEOGCS"===o.type?o.projName="longlat":"LOCAL_CS"===o.type?(o.projName="identity",o.local=!0):o.projName="object"==typeof o.PROJECTION?Object.keys(o.PROJECTION)[0]:o.PROJECTION,o.AXIS){for(var a="",l=0,h=o.AXIS.length;l<h;++l){var u=[o.AXIS[l][0].toLowerCase(),o.AXIS[l][1].toLowerCase()];-1!==u[0].indexOf("north")||("y"===u[0]||"lat"===u[0])&&"north"===u[1]?a+="n":-1!==u[0].indexOf("south")||("y"===u[0]||"lat"===u[0])&&"south"===u[1]?a+="s":-1!==u[0].indexOf("east")||("x"===u[0]||"lon"===u[0])&&"east"===u[1]?a+="e":(-1!==u[0].indexOf("west")||("x"===u[0]||"lon"===u[0])&&"west"===u[1])&&(a+="w")}2===a.length&&(a+="u"),3===a.length&&(o.axis=a)}o.UNIT&&(o.units=o.UNIT.name.toLowerCase(),"metre"===o.units&&(o.units="meter"),o.UNIT.convert&&("GEOGCS"===o.type?o.DATUM&&o.DATUM.SPHEROID&&(o.to_meter=o.UNIT.convert*o.DATUM.SPHEROID.a):o.to_meter=o.UNIT.convert));var c=o.GEOGCS;function d(p){return p*(o.to_meter||1)}"GEOGCS"===o.type&&(c=o),c&&(o.datumCode=c.DATUM?c.DATUM.name.toLowerCase():c.name.toLowerCase(),"d_"===o.datumCode.slice(0,2)&&(o.datumCode=o.datumCode.slice(2)),("new_zealand_geodetic_datum_1949"===o.datumCode||"new_zealand_1949"===o.datumCode)&&(o.datumCode="nzgd49"),("wgs_1984"===o.datumCode||"world_geodetic_system_1984"===o.datumCode)&&("Mercator_Auxiliary_Sphere"===o.PROJECTION&&(o.sphere=!0),o.datumCode="wgs84"),"_ferro"===o.datumCode.slice(-6)&&(o.datumCode=o.datumCode.slice(0,-6)),"_jakarta"===o.datumCode.slice(-8)&&(o.datumCode=o.datumCode.slice(0,-8)),~o.datumCode.indexOf("belge")&&(o.datumCode="rnb72"),c.DATUM&&c.DATUM.SPHEROID&&(o.ellps=c.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===o.ellps.toLowerCase().slice(0,13)&&(o.ellps="intl"),o.a=c.DATUM.SPHEROID.a,o.rf=parseFloat(c.DATUM.SPHEROID.rf,10)),c.DATUM&&c.DATUM.TOWGS84&&(o.datum_params=c.DATUM.TOWGS84),~o.datumCode.indexOf("osgb_1936")&&(o.datumCode="osgb36"),~o.datumCode.indexOf("osni_1952")&&(o.datumCode="osni52"),(~o.datumCode.indexOf("tm65")||~o.datumCode.indexOf("geodetic_datum_of_1965"))&&(o.datumCode="ire65"),"ch1903+"===o.datumCode&&(o.datumCode="ch1903"),~o.datumCode.indexOf("israel")&&(o.datumCode="isr93")),o.b&&!isFinite(o.b)&&(o.b=o.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",fs],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",fs],["x0","false_easting",d],["y0","false_northing",d],["long0","central_meridian",fs],["lat0","latitude_of_origin",fs],["lat0","standard_parallel_1",fs],["lat1","standard_parallel_1",fs],["lat2","standard_parallel_2",fs],["azimuth","Azimuth"],["alpha","azimuth",fs],["srsCode","name"]].forEach(function(p){return _=(m=p)[1],void(!((y=m[0])in(g=o))&&_ in g&&(g[y]=g[_],3===m.length&&(g[y]=m[2](g[y]))));var g,m,y,_}),!o.long0&&o.longc&&("Albers_Conic_Equal_Area"===o.projName||"Lambert_Azimuthal_Equal_Area"===o.projName)&&(o.long0=o.longc),o.lat_ts||!o.lat1||"Stereographic_South_Pole"!==o.projName&&"Polar Stereographic (variant B)"!==o.projName?!o.lat_ts&&o.lat0&&"Polar_Stereographic"===o.projName&&(o.lat_ts=o.lat0,o.lat0=fs(o.lat0>0?90:-90)):(o.lat0=fs(o.lat1>0?90:-90),o.lat_ts=o.lat1)}(s),s}function gs(n){var t=this;if(2===arguments.length){var e=arguments[1];gs[n]="string"==typeof e?"+"===e.charAt(0)?Sf(arguments[1]):av(arguments[1]):e}else if(1===arguments.length){if(Array.isArray(n))return n.map(function(i){Array.isArray(i)?gs.apply(t,i):gs(i)});if("string"==typeof n){if(n in gs)return gs[n]}else"EPSG"in n?gs["EPSG:"+n.EPSG]=n:"ESRI"in n?gs["ESRI:"+n.ESRI]=n:"IAU2000"in n?gs["IAU2000:"+n.IAU2000]=n:console.log(n);return}}(t=gs)("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"];const Ru=gs;var bM=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],CM=["3857","900913","3785","102113"];function lv(n,t){var e,i;if(n=n||{},!t)return n;for(i in t)void 0!==(e=t[i])&&(n[i]=e);return n}function ms(n,t,e){var i=n*t;return e/Math.sqrt(1-i*i)}function Tl(n){return n<0?-1:1}function Mt(n){return Math.abs(n)<=Si?n:n-Tl(n)*Sl}function ts(n,t,e){var i=n*e;return i=Math.pow((1-i)/(1+i),.5*n),Math.tan(.5*(et-t))/i}function kl(n,t){for(var e,i,s=.5*n,r=et-2*Math.atan(t),o=0;o<=15;o++)if(e=n*Math.sin(r),r+=i=et-2*Math.atan(t*Math.pow((1-e)/(1+e),s))-r,Math.abs(i)<=1e-10)return r;return-9999}function hv(n){return n}var MM=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.k0=this.sphere?Math.cos(this.lat_ts):ms(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k0=this.k?this.k:1)},forward:function(t){var e,i,s=t.x,r=t.y;if(r*ps>90&&r*ps<-90&&s*ps>180&&s*ps<-180||Math.abs(Math.abs(r)-et)<=ct)return null;if(this.sphere)e=this.x0+this.a*this.k0*Mt(s-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(je+.5*r));else{var o=Math.sin(r),a=ts(this.e,r,o);e=this.x0+this.a*this.k0*Mt(s-this.long0),i=this.y0-this.a*this.k0*Math.log(a)}return t.x=e,t.y=i,t},inverse:function(t){var e,i,s=t.x-this.x0,r=t.y-this.y0;if(this.sphere)i=et-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var o=Math.exp(-r/(this.a*this.k0));if(-9999===(i=kl(this.e,o)))return null}return e=Mt(this.long0+s/(this.a*this.k0)),t.x=e,t.y=i,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:hv,inverse:hv,names:["longlat","identity"]}],Fu={},Ou=[];function uv(n,t){var e=Ou.length;return n.names?(Ou[e]=n,n.names.forEach(function(i){Fu[i.toLowerCase()]=e}),this):(console.log(t),!0)}const SM={start:function(){MM.forEach(uv)},add:uv,get:function(t){if(!t)return!1;var e=t.toLowerCase();return typeof Fu[e]<"u"&&Ou[Fu[e]]?Ou[Fu[e]]:void 0}};var Ef={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},EM=Ef.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Ef.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var TM={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},cv={};function kM(n){if(0===n.length)return null;var t="@"===n[0];return t&&(n=n.slice(1)),"null"===n?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:n,mandatory:!t,grid:cv[n]||null,isNull:!1}}function ia(n){return n/3600*Math.PI/180}function Tf(n,t,e){return String.fromCharCode.apply(null,new Uint8Array(n.buffer.slice(t,e)))}function IM(n){return n.map(function(t){return[ia(t.longitudeShift),ia(t.latitudeShift)]})}function PM(n,t,e){return{name:Tf(n,t+8,t+16).trim(),parent:Tf(n,t+24,t+24+8).trim(),lowerLatitude:n.getFloat64(t+72,e),upperLatitude:n.getFloat64(t+88,e),lowerLongitude:n.getFloat64(t+104,e),upperLongitude:n.getFloat64(t+120,e),latitudeInterval:n.getFloat64(t+136,e),longitudeInterval:n.getFloat64(t+152,e),gridNodeCount:n.getInt32(t+168,e)}}function RM(n,t,e,i){for(var s=t+176,r=[],o=0;o<e.gridNodeCount;o++){var a={latitudeShift:n.getFloat32(s+16*o,i),longitudeShift:n.getFloat32(s+16*o+4,i),latitudeAccuracy:n.getFloat32(s+16*o+8,i),longitudeAccuracy:n.getFloat32(s+16*o+12,i)};r.push(a)}return r}function Il(n,t){if(!(this instanceof Il))return new Il(n);t=t||function(h){if(h)throw h};var u,c,f,g,m,y,e=function(u){if("string"!=typeof u)return u;if(function(f){return f in Ru}(u))return Ru[u];if(function(f){return bM.some(function(g){return f.indexOf(g)>-1})}(u)){var c=av(u);if(function(f){var g=pr(f,"authority");if(g){var m=pr(g,"epsg");return m&&CM.indexOf(m)>-1}}(c))return Ru["EPSG:3857"];var d=function(f){var g=pr(f,"extension");if(g)return pr(g,"proj4")}(c);return d?Sf(d):c}return function(f){return"+"===f[0]}(u)?Sf(u):void 0}(n);if("object"==typeof e){var i=Il.projections.get(e.projName);if(i){if(e.datumCode&&"none"!==e.datumCode){var s=pr(TM,e.datumCode);s&&(e.datum_params=e.datum_params||(s.towgs84?s.towgs84.split(","):null),e.ellps=s.ellipse,e.datumName=s.datumName?s.datumName:e.datumCode)}e.k0=e.k0||1,e.axis=e.axis||"enu",e.ellps=e.ellps||"wgs84",e.lat1=e.lat1||e.lat0;var r=function(u,c,d,p,f){if(!u){var g=pr(Ef,p);g||(g=EM),u=g.a,c=g.b,d=g.rf}return d&&!c&&(c=(1-1/d)*u),(0===d||Math.abs(u-c)<ct)&&(f=!0,c=u),{a:u,b:c,rf:d,sphere:f}}(e.a,e.b,e.rf,e.ellps,e.sphere),o=(m=((f=(u=r.a)*u)-(g=(c=r.b)*c))/f,y=0,e.R_A?(f=(u*=1-m*(.16666666666666666+m*(.04722222222222222+.022156084656084655*m)))*u,m=0):y=Math.sqrt(m),{es:m,e:y,ep2:(f-g)/g}),a=function(u){return void 0===u?null:u.split(",").map(kM)}(e.nadgrids),l=e.datum||function(u,c,d,p,f,g,m){var y={};return y.datum_type=void 0===u||"none"===u?Mf:4,c&&(y.datum_params=c.map(parseFloat),(0!==y.datum_params[0]||0!==y.datum_params[1]||0!==y.datum_params[2])&&(y.datum_type=Qr),y.datum_params.length>3&&(0!==y.datum_params[3]||0!==y.datum_params[4]||0!==y.datum_params[5]||0!==y.datum_params[6])&&(y.datum_type=to,y.datum_params[3]*=Ml,y.datum_params[4]*=Ml,y.datum_params[5]*=Ml,y.datum_params[6]=y.datum_params[6]/1e6+1)),m&&(y.datum_type=ta,y.grids=m),y.a=d,y.b=p,y.es=f,y.ep2=g,y}(e.datumCode,e.datum_params,r.a,r.b,o.es,o.ep2,a);lv(this,e),lv(this,i),this.a=r.a,this.b=r.b,this.rf=r.rf,this.sphere=r.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=l,this.init(),t(null,this)}else t(n)}else t(n)}(Il.projections=SM).start();const Pl=Il;function dv(n,t,e){var i,s,r,o=n.x,a=n.y,l=n.z?n.z:0;if(a<-et&&a>-1.001*et)a=-et;else if(a>et&&a<1.001*et)a=et;else{if(a<-et)return{x:-1/0,y:-1/0,z:n.z};if(a>et)return{x:1/0,y:1/0,z:n.z}}return o>Math.PI&&(o-=2*Math.PI),s=Math.sin(a),r=Math.cos(a),{x:((i=e/Math.sqrt(1-t*(s*s)))+l)*r*Math.cos(o),y:(i+l)*r*Math.sin(o),z:(i*(1-t)+l)*s}}function pv(n,t,e,i){var s,r,o,a,l,h,u,c,d,p,f,g,m,y,_,v=n.x,x=n.y,w=n.z?n.z:0;if(s=Math.sqrt(v*v+x*x),r=Math.sqrt(v*v+x*x+w*w),s/e<1e-12){if(y=0,r/e<1e-12)return _=-i,{x:n.x,y:n.y,z:n.z}}else y=Math.atan2(x,v);o=w/r,c=(a=s/r)*(1-t)*(l=1/Math.sqrt(1-t*(2-t)*a*a)),d=o*l,m=0;do{m++,h=t*(u=e/Math.sqrt(1-t*d*d))/(u+(_=s*c+w*d-u*(1-t*d*d))),g=(f=o*(l=1/Math.sqrt(1-h*(2-h)*a*a)))*c-(p=a*(1-h)*l)*d,c=p,d=f}while(g*g>1e-24&&m<30);return{x:y,y:Math.atan(f/Math.abs(p)),z:_}}function Au(n){return n===Qr||n===to}function fv(n,t,e){if(null===n.grids||0===n.grids.length)return console.log("Grid shift grids not found"),-1;var i={x:-e.x,y:e.y},s={x:Number.NaN,y:Number.NaN},r=[];t:for(var o=0;o<n.grids.length;o++){var a=n.grids[o];if(r.push(a.name),a.isNull){s=i;break}if(null!==a.grid)for(var l=a.grid.subgrids,h=0,u=l.length;h<u;h++){var c=l[h],d=(Math.abs(c.del[1])+Math.abs(c.del[0]))/1e4;if(!(c.ll[1]-d>i.y||c.ll[0]-d>i.x||c.ll[1]+(c.lim[1]-1)*c.del[1]+d<i.y||c.ll[0]+(c.lim[0]-1)*c.del[0]+d<i.x||(s=FM(i,t,c),isNaN(s.x))))break t}else if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1}return isNaN(s.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*ps+" "+i.y*ps+" tried: '"+r+"'"),-1):(e.x=-s.x,e.y=s.y,0)}function FM(n,t,e){var i={x:Number.NaN,y:Number.NaN};if(isNaN(n.x))return i;var s={x:n.x,y:n.y};s.x-=e.ll[0],s.y-=e.ll[1],s.x=Mt(s.x-Math.PI)+Math.PI;var r=gv(s,e);if(t){if(isNaN(r.x))return i;r.x=s.x-r.x,r.y=s.y-r.y;var o,a,l=9;do{if(a=gv(r,e),isNaN(a.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}r.x+=(o={x:s.x-(a.x+r.x),y:s.y-(a.y+r.y)}).x,r.y+=o.y}while(l--&&Math.abs(o.x)>1e-12&&Math.abs(o.y)>1e-12);if(l<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=Mt(r.x+e.ll[0]),i.y=r.y+e.ll[1]}else isNaN(r.x)||(i.x=n.x+r.x,i.y=n.y+r.y);return i}function gv(n,t){var e,i={x:n.x/t.del[0],y:n.y/t.del[1]},s=Math.floor(i.x),r=Math.floor(i.y),o=i.x-1*s,a=i.y-1*r,l={x:Number.NaN,y:Number.NaN};if(s<0||s>=t.lim[0]||r<0||r>=t.lim[1])return l;var h=t.cvs[e=r*t.lim[0]+s][0],u=t.cvs[e][1];e++;var c=t.cvs[e][0],d=t.cvs[e][1],p=t.cvs[e+=t.lim[0]][0],f=t.cvs[e][1];e--;var g=t.cvs[e][1],m=o*a,y=o*(1-a),_=(1-o)*(1-a),v=(1-o)*a;return l.x=_*h+y*c+v*t.cvs[e][0]+m*p,l.y=_*u+y*d+v*g+m*f,l}function mv(n,t,e){var i,s,r,o=e.x,a=e.y,l=e.z||0,h={};for(r=0;r<3;r++)if(!t||2!==r||void 0!==e.z)switch(0===r?(i=o,s=-1!=="ew".indexOf(n.axis[r])?"x":"y"):1===r?(i=a,s=-1!=="ns".indexOf(n.axis[r])?"y":"x"):(i=l,s="z"),n.axis[r]){case"e":case"n":h[s]=i;break;case"w":case"s":h[s]=-i;break;case"u":void 0!==e[s]&&(h.z=i);break;case"d":void 0!==e[s]&&(h.z=-i);break;default:return null}return h}function yv(n){var t={x:n[0],y:n[1]};return n.length>2&&(t.z=n[2]),n.length>3&&(t.m=n[3]),t}function _v(n){if("function"==typeof Number.isFinite){if(Number.isFinite(n))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof n||n!=n||!isFinite(n))throw new TypeError("coordinates must be finite numbers")}function Lu(n,t,e,i){var s,a,r=void 0!==(e=Array.isArray(e)?yv(e):{x:e.x,y:e.y,z:e.z,m:e.m}).z;if(_v((a=e).x),_v(a.y),n.datum&&t.datum&&function(a,l){return(a.datum.datum_type===Qr||a.datum.datum_type===to||a.datum.datum_type===ta)&&"WGS84"!==l.datumCode||(l.datum.datum_type===Qr||l.datum.datum_type===to||l.datum.datum_type===ta)&&"WGS84"!==a.datumCode}(n,t)&&(e=Lu(n,s=new Pl("WGS84"),e,i),n=s),i&&"enu"!==n.axis&&(e=mv(n,!1,e)),"longlat"===n.projName)e={x:e.x*Hi,y:e.y*Hi,z:e.z||0};else if(n.to_meter&&(e={x:e.x*n.to_meter,y:e.y*n.to_meter,z:e.z||0}),!(e=n.inverse(e)))return;if(n.from_greenwich&&(e.x+=n.from_greenwich),e=function(a,l,h){if(!((m=a).datum_type!==(y=l).datum_type||m.a!==y.a||Math.abs(m.es-y.es)>5e-11)&&(m.datum_type===Qr?m.datum_params[0]===y.datum_params[0]&&m.datum_params[1]===y.datum_params[1]&&m.datum_params[2]===y.datum_params[2]:m.datum_type!==to||m.datum_params[0]===y.datum_params[0]&&m.datum_params[1]===y.datum_params[1]&&m.datum_params[2]===y.datum_params[2]&&m.datum_params[3]===y.datum_params[3]&&m.datum_params[4]===y.datum_params[4]&&m.datum_params[5]===y.datum_params[5]&&m.datum_params[6]===y.datum_params[6])||a.datum_type===Mf||l.datum_type===Mf)return h;var m,y,u=a.a,c=a.es;if(a.datum_type===ta){if(0!==fv(a,!1,h))return;u=iv,c=nv}var d=l.a,p=l.b,f=l.es;return l.datum_type===ta&&(d=iv,p=fM,f=nv),c!==f||u!==d||Au(a.datum_type)||Au(l.datum_type)?(h=dv(h,c,u),Au(a.datum_type)&&(h=function(m,y,_){if(y===Qr)return{x:m.x+_[0],y:m.y+_[1],z:m.z+_[2]};if(y===to){var v=_[3],x=_[4],w=_[5],C=_[6];return{x:C*(m.x-w*m.y+x*m.z)+_[0],y:C*(w*m.x+m.y-v*m.z)+_[1],z:C*(-x*m.x+v*m.y+m.z)+_[2]}}}(h,a.datum_type,a.datum_params)),Au(l.datum_type)&&(h=function(m,y,_){if(y===Qr)return{x:m.x-_[0],y:m.y-_[1],z:m.z-_[2]};if(y===to){var v=_[3],x=_[4],w=_[5],C=_[6],M=(m.x-_[0])/C,S=(m.y-_[1])/C,F=(m.z-_[2])/C;return{x:M+w*S-x*F,y:-w*M+S+v*F,z:x*M-v*S+F}}}(h,l.datum_type,l.datum_params)),h=pv(h,f,d,p),l.datum_type!==ta||0===fv(l,!0,h)?h:void 0):h}(n.datum,t.datum,e))return t.from_greenwich&&(e={x:e.x-t.from_greenwich,y:e.y,z:e.z||0}),"longlat"===t.projName?e={x:e.x*ps,y:e.y*ps,z:e.z||0}:(e=t.forward(e),t.to_meter&&(e={x:e.x/t.to_meter,y:e.y/t.to_meter,z:e.z||0})),i&&"enu"!==t.axis?mv(t,!0,e):(e&&!r&&delete e.z,e)}var vv=Pl("WGS84");function kf(n,t,e,i){var s,r,o;return Array.isArray(e)?(s=Lu(n,t,e,i)||{x:NaN,y:NaN},e.length>2?typeof n.name<"u"&&"geocent"===n.name||typeof t.name<"u"&&"geocent"===t.name?"number"==typeof s.z?[s.x,s.y,s.z].concat(e.splice(3)):[s.x,s.y,e[2]].concat(e.splice(3)):[s.x,s.y].concat(e.splice(2)):[s.x,s.y]):(r=Lu(n,t,e,i),2===(o=Object.keys(e)).length||o.forEach(function(a){if(typeof n.name<"u"&&"geocent"===n.name||typeof t.name<"u"&&"geocent"===t.name){if("x"===a||"y"===a||"z"===a)return}else if("x"===a||"y"===a)return;r[a]=e[a]}),r)}function xv(n){return n instanceof Pl?n:n.oProj?n.oProj:Pl(n)}const Sn=function(t,e,i){t=xv(t);var s,r=!1;return typeof e>"u"?(e=t,t=vv,r=!0):(typeof e.x<"u"||Array.isArray(e))&&(i=e,e=t,t=vv,r=!0),e=xv(e),i?kf(t,e,i):(s={forward:function(o,a){return kf(t,e,o,a)},inverse:function(o,a){return kf(e,t,o,a)}},r&&(s.oProj=e),s)};var wv=6,bv="AJSAJS",Cv="AFAFAF",na=65,dn=73,jn=79,Rl=86,Fl=90;const OM={forward:Mv,inverse:function(t){var e=Pf(kv(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:Sv};function Mv(n,t){return t=t||5,function(i,s){var l,h,p,f,m,y,_,v,x,w,c,r="00000"+i.easting,o="00000"+i.northing;return i.zoneNumber+i.zoneLetter+(l=i.easting,h=i.northing,c=Tv(i.zoneNumber),p=Math.floor(l/1e5),f=Math.floor(h/1e5)%20,y=bv.charCodeAt(m=c-1),_=Cv.charCodeAt(m),w=!1,(v=y+p-1)>Fl&&(v=v-Fl+na-1,w=!0),(v===dn||y<dn&&v>dn||(v>dn||y<dn)&&w)&&v++,(v===jn||y<jn&&v>jn||(v>jn||y<jn)&&w)&&++v===dn&&v++,v>Fl&&(v=v-Fl+na-1),(x=_+f)>Rl?(x=x-Rl+na-1,w=!0):w=!1,(x===dn||_<dn&&x>dn||(x>dn||_<dn)&&w)&&x++,(x===jn||_<jn&&x>jn||(x>jn||_<jn)&&w)&&++x===dn&&x++,x>Rl&&(x=x-Rl+na-1),String.fromCharCode(v)+String.fromCharCode(x))+r.substr(r.length-5,s)+o.substr(o.length-5,s)}(function(i){var s,r,o,a,l,h,u,c=i.lat,d=i.lon,p=6378137,f=.00669438,g=.9996,m=If(c),y=If(d);u=Math.floor((d+180)/6)+1,180===d&&(u=60),c>=56&&c<64&&d>=3&&d<12&&(u=32),c>=72&&c<84&&(d>=0&&d<9?u=31:d>=9&&d<21?u=33:d>=21&&d<33?u=35:d>=33&&d<42&&(u=37)),h=If(6*(u-1)-180+3),s=f/(1-f),r=p/Math.sqrt(1-f*Math.sin(m)*Math.sin(m)),o=Math.tan(m)*Math.tan(m),a=s*Math.cos(m)*Math.cos(m);var _=g*r*((l=Math.cos(m)*(y-h))+(1-o+a)*l*l*l/6+(5-18*o+o*o+72*a-58*s)*l*l*l*l*l/120)+5e5,v=g*(p*(.9983242984503243*m-.002514607064228144*Math.sin(2*m)+2639046602129982e-21*Math.sin(4*m)-35*f*f*f/3072*Math.sin(6*m))+r*Math.tan(m)*(l*l/2+(5-o+9*a+4*a*a)*l*l*l*l/24+(61-58*o+o*o+600*a-330*s)*l*l*l*l*l*l/720));return c<0&&(v+=1e7),{northing:Math.round(v),easting:Math.round(_),zoneNumber:u,zoneLetter:AM(c)}}({lat:n[1],lon:n[0]}),t)}function Sv(n){var t=Pf(kv(n.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function If(n){return n*(Math.PI/180)}function Ev(n){return n/Math.PI*180}function Pf(n){var t=n.northing,e=n.easting,i=n.zoneLetter,s=n.zoneNumber;if(s<0||s>60)return null;var r,o,a,l,h,u,c,d,p,f=.9996,g=6378137,m=.00669438,y=(1-Math.sqrt(1-m))/(1+Math.sqrt(1-m)),_=e-5e5,v=t;i<"N"&&(v-=1e7),c=6*(s-1)-180+3,r=m/(1-m),p=(d=v/f/6367449.145945056)+(3*y/2-27*y*y*y/32)*Math.sin(2*d)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*d)+151*y*y*y/96*Math.sin(6*d),o=g/Math.sqrt(1-m*Math.sin(p)*Math.sin(p)),a=Math.tan(p)*Math.tan(p),l=r*Math.cos(p)*Math.cos(p),h=g*(1-m)/Math.pow(1-m*Math.sin(p)*Math.sin(p),1.5),u=_/(o*f);var x=p-o*Math.tan(p)/h*(u*u/2-(5+3*a+10*l-4*l*l-9*r)*u*u*u*u/24+(61+90*a+298*l+45*a*a-252*r-3*l*l)*u*u*u*u*u*u/720);x=Ev(x);var w,C=(u-(1+2*a+l)*u*u*u/6+(5-2*l+28*a-3*l*l+8*r+24*a*a)*u*u*u*u*u/120)/Math.cos(p);if(C=c+Ev(C),n.accuracy){var M=Pf({northing:n.northing+n.accuracy,easting:n.easting+n.accuracy,zoneLetter:n.zoneLetter,zoneNumber:n.zoneNumber});w={top:M.lat,right:M.lon,bottom:x,left:C}}else w={lat:x,lon:C};return w}function AM(n){var t="Z";return 84>=n&&n>=72?t="X":72>n&&n>=64?t="W":64>n&&n>=56?t="V":56>n&&n>=48?t="U":48>n&&n>=40?t="T":40>n&&n>=32?t="S":32>n&&n>=24?t="R":24>n&&n>=16?t="Q":16>n&&n>=8?t="P":8>n&&n>=0?t="N":0>n&&n>=-8?t="M":-8>n&&n>=-16?t="L":-16>n&&n>=-24?t="K":-24>n&&n>=-32?t="J":-32>n&&n>=-40?t="H":-40>n&&n>=-48?t="G":-48>n&&n>=-56?t="F":-56>n&&n>=-64?t="E":-64>n&&n>=-72?t="D":-72>n&&n>=-80&&(t="C"),t}function Tv(n){var t=n%wv;return 0===t&&(t=wv),t}function kv(n){if(n&&0===n.length)throw"MGRSPoint coverting from nothing";for(var t,e=n.length,i=null,s="",r=0;!/[A-Z]/.test(t=n.charAt(r));){if(r>=2)throw"MGRSPoint bad conversion from: "+n;s+=t,r++}var o=parseInt(s,10);if(0===r||r+3>e)throw"MGRSPoint bad conversion from: "+n;var a=n.charAt(r++);if(a<="A"||"B"===a||"Y"===a||a>="Z"||"I"===a||"O"===a)throw"MGRSPoint zone letter "+a+" not handled: "+n;i=n.substring(r,r+=2);for(var l=Tv(o),h=function(v,x){for(var w=bv.charCodeAt(x-1),C=1e5,M=!1;w!==v.charCodeAt(0);){if(++w===dn&&w++,w===jn&&w++,w>Fl){if(M)throw"Bad character: "+v;w=na,M=!0}C+=1e5}return C}(i.charAt(0),l),u=function(v,x){if(v>"V")throw"MGRSPoint given invalid Northing "+v;for(var w=Cv.charCodeAt(x-1),C=0,M=!1;w!==v.charCodeAt(0);){if(++w===dn&&w++,w===jn&&w++,w>Rl){if(M)throw"Bad character: "+v;w=na,M=!0}C+=1e5}return C}(i.charAt(1),l);u<LM(a);)u+=2e6;var c=e-r;if(c%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+n;var d,p,f,g=c/2,m=0,y=0;return g>0&&(d=1e5/Math.pow(10,g),p=n.substring(r,r+g),m=parseFloat(p)*d,f=n.substring(r+g),y=parseFloat(f)*d),{easting:m+h,northing:y+u,zoneLetter:a,zoneNumber:o,accuracy:d}}function LM(n){var t;switch(n){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+n}function sa(n,t,e){if(!(this instanceof sa))return new sa(n,t,e);if(Array.isArray(n))this.x=n[0],this.y=n[1],this.z=n[2]||0;else if("object"==typeof n)this.x=n.x,this.y=n.y,this.z=n.z||0;else if("string"==typeof n&&typeof t>"u"){var i=n.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=n,this.y=t,this.z=e||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}sa.fromMGRS=function(n){return new sa(Sv(n))},sa.prototype.toMGRS=function(n){return Mv([this.x,this.y],n)};const DM=sa;var Iv=.01953125,Pv=.01068115234375;function Rv(n){var t=[];t[0]=1-n*(.25+n*(.046875+n*(Iv+n*Pv))),t[1]=n*(.75-n*(.046875+n*(Iv+n*Pv)));var e=n*n;return t[2]=e*(.46875-n*(.013020833333333334+.007120768229166667*n)),t[3]=(e*=n)*(.3645833333333333-.005696614583333333*n),t[4]=e*n*.3076171875,t}function Du(n,t,e,i){return i[0]*n-(e*=t)*(i[1]+(t*=t)*(i[2]+t*(i[3]+t*i[4])))}function Fv(n,t,e){for(var i=1/(1-t),s=n,r=20;r;--r){var o=Math.sin(s),a=1-t*o*o;if(s-=a=(Du(s,o,Math.cos(s),e)-n)*(a*Math.sqrt(a))*i,Math.abs(a)<ct)return s}return s}const Nu={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Rv(this.es),this.ml0=Du(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,i,s,r=t.y,o=Mt(t.x-this.long0),a=Math.sin(r),l=Math.cos(r);if(this.es){var h=l*o,u=Math.pow(h,2),c=this.ep2*Math.pow(l,2),d=Math.pow(c,2),p=Math.abs(l)>ct?Math.tan(r):0,f=Math.pow(p,2),g=Math.pow(f,2);e=1-this.es*Math.pow(a,2),h/=Math.sqrt(e);var m=Du(r,a,l,this.en);i=this.a*(this.k0*h*(1+u/6*(1-f+c+u/20*(5-18*f+g+14*c-58*f*c+u/42*(61+179*g-g*f-479*f)))))+this.x0,s=this.a*(this.k0*(m-this.ml0+a*o*h/2*(1+u/12*(5-f+9*c+4*d+u/30*(61+g-58*f+270*c-330*f*c+u/56*(1385+543*g-g*f-3111*f))))))+this.y0}else{var y=l*Math.sin(o);if(Math.abs(Math.abs(y)-1)<ct)return 93;if(i=.5*this.a*this.k0*Math.log((1+y)/(1-y))+this.x0,s=l*Math.cos(o)/Math.sqrt(1-Math.pow(y,2)),(y=Math.abs(s))>=1){if(y-1>ct)return 93;s=0}else s=Math.acos(s);r<0&&(s=-s),s=this.a*this.k0*(s-this.lat0)+this.y0}return t.x=i,t.y=s,t},inverse:function(t){var e,i,s,r,o=1/this.a*(t.x-this.x0),a=1/this.a*(t.y-this.y0);if(this.es)if(i=Fv(e=this.ml0+a/this.k0,this.es,this.en),Math.abs(i)<et){var l=Math.sin(i),h=Math.cos(i),u=Math.abs(h)>ct?Math.tan(i):0,c=this.ep2*Math.pow(h,2),d=Math.pow(c,2),p=Math.pow(u,2),f=Math.pow(p,2);e=1-this.es*Math.pow(l,2);var g=o*Math.sqrt(e)/this.k0,m=Math.pow(g,2);s=i-(e*=u)*m/(1-this.es)*.5*(1-m/12*(5+3*p-9*c*p+c-4*d-m/30*(61+90*p-252*c*p+45*f+46*c-m/56*(1385+3633*p+4095*f+1574*f*p)))),r=Mt(this.long0+g*(1-m/6*(1+2*p+c-m/20*(5+28*p+24*f+8*c*p+6*c-m/42*(61+662*p+1320*f+720*f*p))))/h)}else s=et*Tl(a),r=0;else{var y=Math.exp(o/this.k0),_=.5*(y-1/y),v=Math.cos(this.lat0+a/this.k0);e=Math.sqrt((1-Math.pow(v,2))/(1+Math.pow(_,2))),s=Math.asin(e),a<0&&(s=-s),r=0===_&&0===v?0:Mt(Math.atan2(_,v)+this.long0)}return t.x=r,t.y=s,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function Ov(n){var t=Math.exp(n);return(t-1/t)/2}function es(n,t){n=Math.abs(n),t=Math.abs(t);var e=Math.max(n,t),i=Math.min(n,t)/(e||1);return e*Math.sqrt(1+Math.pow(i,2))}function Rf(n,t){for(var e,i=2*Math.cos(2*t),s=n.length-1,r=n[s],o=0;--s>=0;)e=i*r-o+n[s],o=r,r=e;return t+e*Math.sin(2*t)}function Av(n,t,e){for(var i,s,r=Math.sin(t),o=Math.cos(t),a=Ov(e),l=(void 0,((_=Math.exp(e))+1/_)/2),h=2*o*l,u=-2*r*a,c=n.length-1,d=n[c],p=0,f=0,g=0;--c>=0;)i=f,s=p,d=h*(f=d)-i-u*(p=g)+n[c],g=u*f-s+h*p;var _;return[(h=r*l)*d-(u=o*a)*g,h*g+u*d]}const zu={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Nu.init.apply(this),this.forward=Nu.forward,this.inverse=Nu.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),i=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),this.cgb[1]=(i*=e)*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=i*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),this.cgb[2]=(i*=e)*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=i*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),this.cgb[3]=(i*=e)*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=i*(1237/630+e*(e*(-24832/14175)-2.4)),this.cgb[4]=(i*=e)*(4174/315+e*(-144838/6237)),this.cbg[4]=i*(-734/315+e*(109598/31185)),this.cgb[5]=(i*=e)*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=i*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=i*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),this.utg[2]=(i*=e)*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=i*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),this.utg[3]=(i*=e)*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=i*(49561/161280+e*(-179/168+e*(6601661/7257600))),this.utg[4]=(i*=e)*(-4583/161280+e*(108847/3991680)),this.gtu[4]=i*(34729/80640+e*(-3418889/1995840)),this.utg[5]=(i*=e)*(-20648693/638668800),this.gtu[5]=.6650675310896665*i;var s=Rf(this.cbg,this.lat0);this.Zb=-this.Qn*(s+function(o,a){for(var l,h=2*Math.cos(a),u=o.length-1,c=o[u],d=0;--u>=0;)l=h*c-d+o[u],d=c,c=l;return Math.sin(a)*l}(this.gtu,2*s))},forward:function(t){var e=Mt(t.x-this.long0),i=t.y;i=Rf(this.cbg,i);var d,g,m,y,p,s=Math.sin(i),r=Math.cos(i),o=Math.sin(e),a=Math.cos(e);i=Math.atan2(s,a*r),e=Math.atan2(o*r,es(s,r*a)),d=Math.tan(e),p=0==(y=(m=1+(g=(p=Math.abs(d))*(1+p/(es(1,p)+1))))-1)?g:g*Math.log(m)/y;var l,h,u=Av(this.gtu,2*i,2*(e=d<0?-p:p));return i+=u[0],e+=u[1],Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,h=this.a*(this.Qn*i+this.Zb)+this.y0):(l=1/0,h=1/0),t.x=l,t.y=h,t},inverse:function(t){var e,i,s=1/this.a*(t.x-this.x0),r=1/this.a*(t.y-this.y0);if(r=(r-this.Zb)/this.Qn,s/=this.Qn,Math.abs(s)<=2.623395162778){var o=Av(this.utg,2*r,2*s);r+=o[0],s+=o[1],s=Math.atan(Ov(s));var a=Math.sin(r),l=Math.cos(r),h=Math.sin(s),u=Math.cos(s);r=Math.atan2(a*u,es(h,u*l)),e=Mt((s=Math.atan2(h,u*l))+this.long0),i=Rf(this.cgb,r)}else e=1/0,i=1/0;return t.x=e,t.y=i,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},NM={init:function(){var t=function(i,s){if(void 0===i){if((i=Math.floor(30*(Mt(s)+Math.PI)/Math.PI)+1)<0)return 0;if(i>60)return 60}return i}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*Hi,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,zu.init.apply(this),this.forward=zu.forward,this.inverse=zu.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function Ff(n,t){return Math.pow((1-n)/(1+n),t)}const Of={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+je)/(Math.pow(Math.tan(.5*this.lat0+je),this.C)*Ff(this.e*t,this.ratexp))},forward:function(t){var e=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+je),this.C)*Ff(this.e*Math.sin(i),this.ratexp))-et,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,i=t.y,s=Math.pow(Math.tan(.5*i+je)/this.K,1/this.C),r=20;r>0&&(i=2*Math.atan(s*Ff(this.e*Math.sin(t.y),-.5*this.e))-et,!(Math.abs(i-t.y)<1e-14));--r)t.y=i;return r?(t.x=e,t.y=i,t):null},names:["gauss"]},zM={init:function(){Of.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,i,s,r;return t.x=Mt(t.x-this.long0),Of.forward.apply(this,[t]),e=Math.sin(t.y),i=Math.cos(t.y),s=Math.cos(t.x),t.x=(r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*i*s))*i*Math.sin(t.x),t.y=r*(this.cosc0*e-this.sinc0*i*s),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,i,s,r,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var a=2*Math.atan2(o,this.R2);e=Math.sin(a),i=Math.cos(a),r=Math.asin(i*this.sinc0+t.y*e*this.cosc0/o),s=Math.atan2(t.x*e,o*this.cosc0*i-t.y*this.sinc0*e)}else r=this.phic0,s=0;return t.x=s,t.y=r,Of.inverse.apply(this,[t]),t.x=Mt(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},jM={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ct&&(this.k0=.5*(1+Tl(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=ct&&(this.con=this.lat0>0?1:-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ct&&Math.abs(Math.cos(this.lat_ts))>ct&&(this.k0=.5*this.cons*ms(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ts(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=ms(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-et,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,i,s,r,o,a,l=t.x,h=t.y,u=Math.sin(h),c=Math.cos(h),d=Mt(l-this.long0);return Math.abs(Math.abs(l-this.long0)-Math.PI)<=ct&&Math.abs(h+this.lat0)<=ct?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*u+this.coslat0*c*Math.cos(d)),t.x=this.a*e*c*Math.sin(d)+this.x0,t.y=this.a*e*(this.coslat0*u-this.sinlat0*c*Math.cos(d))+this.y0,t):(i=2*Math.atan(this.ssfn_(h,u,this.e))-et,r=Math.cos(i),s=Math.sin(i),Math.abs(this.coslat0)<=ct?(o=ts(this.e,h*this.con,this.con*u),t.x=this.x0+(a=2*this.a*this.k0*o/this.cons)*Math.sin(l-this.long0),t.y=this.y0-this.con*a*Math.cos(l-this.long0),t):(Math.abs(this.sinlat0)<ct?(e=2*this.a*this.k0/(1+r*Math.cos(d)),t.y=e*s):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*s+this.cosX0*r*Math.cos(d))),t.y=e*(this.cosX0*s-this.sinX0*r*Math.cos(d))+this.y0),t.x=e*r*Math.sin(d)+this.x0,t))},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,s,r,o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,i=this.lat0,o<=ct?(t.x=e,t.y=i,t):(i=Math.asin(Math.cos(a)*this.sinlat0+t.y*Math.sin(a)*this.coslat0/o),e=Math.abs(this.coslat0)<ct?Mt(this.lat0>0?this.long0+Math.atan2(t.x,-1*t.y):this.long0+Math.atan2(t.x,t.y)):Mt(this.long0+Math.atan2(t.x*Math.sin(a),o*this.coslat0*Math.cos(a)-t.y*this.sinlat0*Math.sin(a))),t.x=e,t.y=i,t)}if(Math.abs(this.coslat0)<=ct){if(o<=ct)return i=this.lat0,t.x=e=this.long0,t.y=i,t;t.x*=this.con,t.y*=this.con,i=this.con*kl(this.e,o*this.cons/(2*this.a*this.k0)),e=this.con*Mt(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else s=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=ct?r=this.X0:(r=Math.asin(Math.cos(s)*this.sinX0+t.y*Math.sin(s)*this.cosX0/o),e=Mt(this.long0+Math.atan2(t.x*Math.sin(s),o*this.cosX0*Math.cos(s)-t.y*this.sinX0*Math.sin(s)))),i=-1*kl(this.e,Math.tan(.5*(et+r)));return t.x=e,t.y=i,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],ssfn_:function(t,e,i){return e*=i,Math.tan(.5*(et+t))*Math.pow((1-e)/(1+e),.5*i)}},GM={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),i=this.a,s=1/this.rf,r=2*s-Math.pow(s,2),o=this.e=Math.sqrt(r);this.R=this.k0*i*Math.sqrt(1-r)/(1-r*Math.pow(e,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+t/2)),h=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*l+this.alpha*o/2*h},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),s=2*(Math.atan(Math.exp(-this.alpha*(e+i)+this.K))-Math.PI/4),r=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(r)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(r))),a=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(r));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*o+this.x0,t},inverse:function(t){for(var e=(t.x-this.x0)/this.R,i=2*(Math.atan(Math.exp((t.y-this.y0)/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(e)),r=Math.atan(Math.sin(e)/(Math.cos(this.b0)*Math.cos(e)-Math.sin(this.b0)*Math.tan(i))),o=this.lambda0+r/this.alpha,a=0,l=s,h=-1e3,u=0;Math.abs(l-h)>1e-7;){if(++u>20)return;a=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),h=l,l=2*Math.atan(Math.exp(a))-Math.PI/2}return t.x=o,t.y=l,t},names:["somerc"]};var ra=1e-7;const qM={init:function(){var t,e,i,s,r,o,a,l,h,u,c,M,S,d=0,p=0,f=0,g=0,m=0,y=0,_=0;this.no_off=(S="object"==typeof(M=this).PROJECTION?Object.keys(M.PROJECTION)[0]:M.PROJECTION,"no_uoff"in M||"no_off"in M||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(S)),this.no_rot="no_rot"in this;var v=!1;"alpha"in this&&(v=!0);var x=!1;if("rectified_grid_angle"in this&&(x=!0),v&&(_=this.alpha),x&&(d=this.rectified_grid_angle*Hi),v||x)p=this.longc;else if(f=this.long1,m=this.lat1,g=this.long2,y=this.lat2,Math.abs(m-y)<=ra||(t=Math.abs(m))<=ra||Math.abs(t-et)<=ra||Math.abs(Math.abs(this.lat0)-et)<=ra||Math.abs(Math.abs(y)-et)<=ra)throw new Error;var w=1-this.es;e=Math.sqrt(w),Math.abs(this.lat0)>ct?(l=Math.sin(this.lat0),i=Math.cos(this.lat0),t=1-this.es*l*l,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/w),this.A=this.B*this.k0*e/t,(r=(s=this.B*e/(i*Math.sqrt(t)))*s-1)<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=s,this.E*=Math.pow(ts(this.e,this.lat0,l),this.B)):(this.B=1/e,this.A=this.k0,this.E=s=r=1),v||x?(v?(c=Math.asin(Math.sin(_)/s),x||(d=_)):(c=d,_=Math.asin(s*Math.sin(c))),this.lam0=p-Math.asin(.5*(r-1/r)*Math.tan(c))/this.B):(o=Math.pow(ts(this.e,m,Math.sin(m)),this.B),a=Math.pow(ts(this.e,y,Math.sin(y)),this.B),r=this.E/o,h=(a-o)/(a+o),u=((u=this.E*this.E)-a*o)/(u+a*o),(t=f-g)<-Math.pi?g-=Sl:t>Math.pi&&(g+=Sl),this.lam0=Mt(.5*(f+g)-Math.atan(u*Math.tan(.5*this.B*(f-g))/h)/this.B),c=Math.atan(2*Math.sin(this.B*Mt(f-this.lam0))/(r-1/r)),d=_=Math.asin(s*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(d),this.cosrot=Math.cos(d),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(s*s-1)/Math.cos(_))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(je-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(je+r))},forward:function(t){var e,i,s,r,o,a,l,h,u={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-et)>ct){if(e=.5*((o=this.E/Math.pow(ts(this.e,t.y,Math.sin(t.y)),this.B))-(a=1/o)),i=.5*(o+a),r=Math.sin(this.B*t.x),s=(e*this.singam-r*this.cosgam)/i,Math.abs(Math.abs(s)-1)<ct)throw new Error;h=.5*this.ArB*Math.log((1-s)/(1+s)),a=Math.cos(this.B*t.x),l=Math.abs(a)<ra?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+r*this.singam,a)}else h=t.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*t.y;return this.no_rot?(u.x=l,u.y=h):(u.x=h*this.cosrot+(l-=this.u_0)*this.sinrot,u.y=l*this.cosrot-h*this.sinrot),u.x=this.a*u.x+this.x0,u.y=this.a*u.y+this.y0,u},inverse:function(t){var e,i,s,r,o,a,l,h={};if(t.x=1/this.a*(t.x-this.x0),t.y=1/this.a*(t.y-this.y0),this.no_rot?(i=t.y,e=t.x):(i=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),r=.5*((s=Math.exp(-this.BrA*i))-1/s),o=.5*(s+1/s),l=((a=Math.sin(this.BrA*e))*this.cosgam+r*this.singam)/o,Math.abs(Math.abs(l)-1)<ct)h.x=0,h.y=l<0?-et:et;else{if(h.y=this.E/Math.sqrt((1+l)/(1-l)),h.y=kl(this.e,Math.pow(h.y,1/this.B)),h.y===1/0)throw new Error;h.x=-this.rB*Math.atan2(r*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return h.x+=this.lam0,h},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},VM={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<ct)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),i=Math.cos(this.lat1),s=ms(this.e,e,i),r=ts(this.e,this.lat1,e),o=Math.sin(this.lat2),a=Math.cos(this.lat2),l=ms(this.e,o,a),h=ts(this.e,this.lat2,o),u=ts(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>ct?Math.log(s/l)/Math.log(r/h):e,isNaN(this.ns)&&(this.ns=e),this.f0=s/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,i=t.y;Math.abs(2*Math.abs(i)-Math.PI)<=ct&&(i=Tl(i)*(et-2*ct));var s,r,o=Math.abs(Math.abs(i)-et);if(o>ct)s=ts(this.e,i,Math.sin(i)),r=this.a*this.f0*Math.pow(s,this.ns);else{if((o=i*this.ns)<=0)return null;r=0}var a=this.ns*Mt(e-this.long0);return t.x=this.k0*(r*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-r*Math.cos(a))+this.y0,t},inverse:function(t){var e,i,s,r,o,a=(t.x-this.x0)/this.k0,l=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+l*l),i=1):(e=-Math.sqrt(a*a+l*l),i=-1);var h=0;if(0!==e&&(h=Math.atan2(i*a,i*l)),0!==e||this.ns>0){if(i=1/this.ns,s=Math.pow(e/(this.a*this.f0),i),-9999===(r=kl(this.e,s)))return null}else r=-et;return o=Mt(h/this.ns+this.long0),t.x=o,t.y=r,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]},BM={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,i,s,r,o,a,l,h=t.y,u=Mt(t.x-this.long0);return e=Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(h/2+this.s45),this.alfa)/e)-this.s45),s=-u*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(s)),o=Math.asin(Math.cos(i)*Math.sin(s)/Math.cos(r)),a=this.n*o,l=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),t.y=l*Math.cos(a)/1,t.x=l*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,i,s,r,o,a,l,h=t.x;t.x=t.y,t.y=h,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),r=Math.atan2(t.y,t.x)/Math.sin(this.s0),s=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(s)-Math.sin(this.ad)*Math.cos(s)*Math.cos(r)),i=Math.asin(Math.cos(s)*Math.sin(r)/Math.cos(e)),t.x=this.long0-i/this.alfa,a=e,l=0;var u=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(l=1),a=t.y,u+=1}while(0===l&&u<15);return u>=15?null:t},names:["Krovak","krovak"]};function rn(n,t,e,i,s){return n*s-t*Math.sin(2*s)+e*Math.sin(4*s)-i*Math.sin(6*s)}function Ol(n){return 1-.25*n*(1+n/16*(3+1.25*n))}function Al(n){return.375*n*(1+.25*n*(1+.46875*n))}function Ll(n){return.05859375*n*n*(1+.75*n)}function Dl(n){return n*n*n*(35/3072)}function oa(n,t,e){var i=t*e;return n/Math.sqrt(1-i*i)}function aa(n){return Math.abs(n)<et?n:n-Tl(n)*Math.PI}function ju(n,t,e,i,s){var r,o;r=n/t;for(var a=0;a<15;a++)if(r+=o=(n-(t*r-e*Math.sin(2*r)+i*Math.sin(4*r)-s*Math.sin(6*r)))/(t-2*e*Math.cos(2*r)+4*i*Math.cos(4*r)-6*s*Math.cos(6*r)),Math.abs(o)<=1e-10)return r;return NaN}const ZM={init:function(){this.sphere||(this.e0=Ol(this.es),this.e1=Al(this.es),this.e2=Ll(this.es),this.e3=Dl(this.es),this.ml0=this.a*rn(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,i,s=t.x,r=t.y;if(s=Mt(s-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(s)),i=this.a*(Math.atan2(Math.tan(r),Math.cos(s))-this.lat0);else{var o=Math.sin(r),a=Math.cos(r),l=oa(this.a,this.e,o),h=Math.tan(r)*Math.tan(r),u=s*Math.cos(r),c=u*u,d=this.es*a*a/(1-this.es);e=l*u*(1-c*h*(1/6-(8-h+8*d)*c/120)),i=this.a*rn(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+l*o/a*c*(.5+(5-h+6*d)*c/24)}return t.x=e+this.x0,t.y=i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,s=t.x/this.a,r=t.y/this.a;if(this.sphere){var o=r+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(s)),i=Math.atan2(Math.tan(s),Math.cos(o))}else{var a=ju(this.ml0/this.a+r,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-et)<=ct)return t.x=this.long0,t.y=et,r<0&&(t.y*=-1),t;var l=oa(this.a,this.e,Math.sin(a)),h=l*l*l/this.a/this.a*(1-this.es),u=Math.pow(Math.tan(a),2),c=s*this.a/l,d=c*c;e=a-l*Math.tan(a)/h*c*c*(.5-(1+3*u)*c*c/24),i=c*(1-d*(u/3+(1+3*u)*u*d/15))/Math.cos(a)}return t.x=Mt(i+this.long0),t.y=aa(e),t},names:["Cassini","Cassini_Soldner","cass"]};function fr(n,t){var e;return n>1e-7?(1-n*n)*(t/(1-(e=n*t)*e)-.5/n*Math.log((1-e)/(1+e))):2*t}const WM={init:function(){var t,e=Math.abs(this.lat0);if(this.mode=Math.abs(e-et)<ct?this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<ct?this.EQUIT:this.OBLIQ,this.es>0)switch(this.qp=fr(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(s){var r,o=[];return o[0]=.3333333333333333*s,o[0]+=.17222222222222222*(r=s*s),o[1]=.06388888888888888*r,o[0]+=.10257936507936508*(r*=s),o[1]+=.0664021164021164*r,o[2]=.016415012942191543*r,o}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=fr(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,i,s,r,o,a,l,h,u,c,d=t.x,p=t.y;if(d=Mt(d-this.long0),this.sphere){if(o=Math.sin(p),c=Math.cos(p),s=Math.cos(d),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((i=this.mode===this.EQUIT?1+c*s:1+this.sinph0*o+this.cosph0*c*s)<=ct)return null;e=(i=Math.sqrt(2/i))*c*Math.sin(d),i*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*c*s}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(s=-s),Math.abs(p+this.lat0)<ct)return null;i=je-.5*p,e=(i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)))*Math.sin(d),i*=s}}else{switch(l=0,h=0,u=0,s=Math.cos(d),r=Math.sin(d),o=Math.sin(p),a=fr(this.e,o),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(l=a/this.qp,h=Math.sqrt(1-l*l)),this.mode){case this.OBLIQ:u=1+this.sinb1*l+this.cosb1*h*s;break;case this.EQUIT:u=1+h*s;break;case this.N_POLE:u=et+p,a=this.qp-a;break;case this.S_POLE:u=p-et,a=this.qp+a}if(Math.abs(u)<ct)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),i=this.mode===this.OBLIQ?this.ymf*u*(this.cosb1*l-this.sinb1*h*s):(u=Math.sqrt(2/(1+h*s)))*l*this.ymf,e=this.xmf*u*h*r;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(u=Math.sqrt(a))*r,i=s*(this.mode===this.S_POLE?u:-u)):e=i=0}}return t.x=this.a*e+this.x0,t.y=this.a*i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,s,r,o,a,l,g,m,y,h=t.x/this.a,u=t.y/this.a;if(this.sphere){var c,d=0,p=0;if((i=.5*(c=Math.sqrt(h*h+u*u)))>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(p=Math.sin(i),d=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(c)<=ct?0:Math.asin(u*p/c),h*=p,u=d*c;break;case this.OBLIQ:i=Math.abs(c)<=ct?this.lat0:Math.asin(d*this.sinph0+u*p*this.cosph0/c),h*=p*this.cosph0,u=(d-Math.sin(i)*this.sinph0)*c;break;case this.N_POLE:u=-u,i=et-i;break;case this.S_POLE:i-=et}e=0!==u||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(h,u):0}else{if(l=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(h/=this.dd,u*=this.dd,(a=Math.sqrt(h*h+u*u))<ct)return t.x=this.long0,t.y=this.lat0,t;r=2*Math.asin(.5*a/this.rq),s=Math.cos(r),h*=r=Math.sin(r),this.mode===this.OBLIQ?(o=this.qp*(l=s*this.sinb1+u*r*this.cosb1/a),u=a*this.cosb1*s-u*this.sinb1*r):(o=this.qp*(l=u*r/a),u=a*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(u=-u),!(o=h*h+u*u))return t.x=this.long0,t.y=this.lat0,t;l=1-o/this.qp,this.mode===this.S_POLE&&(l=-l)}e=Math.atan2(h,u),y=(g=Math.asin(l))+g,i=g+(m=this.apa)[0]*Math.sin(y)+m[1]*Math.sin(y+y)+m[2]*Math.sin(y+y+y)}return t.x=Mt(this.long0+e),t.y=i,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function gr(n){return Math.abs(n)>1&&(n=n>1?1:-1),Math.asin(n)}const HM={init:function(){Math.abs(this.lat1+this.lat2)<ct||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=ms(this.e3,this.sin_po,this.cos_po),this.qs1=fr(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=ms(this.e3,this.sin_po,this.cos_po),this.qs2=fr(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=fr(this.e3,this.sin_po),this.ns0=Math.abs(this.lat1-this.lat2)>ct?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var s=fr(this.e3,this.sin_phi),r=this.a*Math.sqrt(this.c-this.ns0*s)/this.ns0,o=this.ns0*Mt(e-this.long0),a=r*Math.sin(o)+this.x0,l=this.rh-r*Math.cos(o)+this.y0;return t.x=a,t.y=l,t},inverse:function(t){var e,i,s,r,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1),s=0,0!==e&&(s=Math.atan2(i*t.x,i*t.y)),i=e*this.ns0/this.a,o=this.sphere?Math.asin((this.c-i*i)/(2*this.ns0)):this.phi1z(this.e3,(this.c-i*i)/this.ns0),r=Mt(s/this.ns0+this.long0),t.x=r,t.y=o,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var i,s,r,o,a=gr(.5*e);if(t<ct)return a;for(var l=t*t,h=1;h<=25;h++)if(a+=o=.5*(r=1-(s=t*(i=Math.sin(a)))*s)*r/Math.cos(a)*(e/(1-l)-i/r+.5/t*Math.log((1-s)/(1+s))),Math.abs(o)<=1e-7)return a;return null}},UM={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,i,s,r,o,a,l,h=t.y;return s=Mt(t.x-this.long0),e=Math.sin(h),i=Math.cos(h),r=Math.cos(s),(o=this.sin_p14*e+this.cos_p14*i*r)>0||Math.abs(o)<=ct?(a=this.x0+1*this.a*i*Math.sin(s)/o,l=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*r)/o):(a=this.x0+this.infinity_dist*i*Math.sin(s),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*i*r)),t.x=a,t.y=l,t},inverse:function(t){var e,i,s,r,o,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(r=Math.atan2(e,this.rc),i=Math.sin(r),a=gr((s=Math.cos(r))*this.sin_p14+t.y*i*this.cos_p14/e),o=Math.atan2(t.x*i,e*this.cos_p14*s-t.y*this.sin_p14*i),o=Mt(this.long0+o)):(a=this.phic0,o=0),t.x=o,t.y=a,t},names:["gnom"]},XM={init:function(){this.sphere||(this.k0=ms(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,i,s=t.y,r=Mt(t.x-this.long0);if(this.sphere)e=this.x0+this.a*r*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(s)/Math.cos(this.lat_ts);else{var o=fr(this.e,Math.sin(s));e=this.x0+this.a*this.k0*r,i=this.y0+this.a*o*.5/this.k0}return t.x=e,t.y=i,t},inverse:function(t){var e,i;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=Mt(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(i=function(r,o){var a=1-(1-r*r)/(2*r)*Math.log((1-r)/(1+r));if(Math.abs(Math.abs(o)-a)<1e-6)return o<0?-1*et:et;for(var l,h,u,c,d=Math.asin(.5*o),p=0;p<30;p++)if(h=Math.sin(d),u=Math.cos(d),c=r*h,d+=l=Math.pow(1-c*c,2)/(2*u)*(o/(1-r*r)-h/(1-c*c)+.5/r*Math.log((1-c)/(1+c))),Math.abs(l)<=1e-10)return d;return NaN}(this.e,2*t.y*this.k0/this.a),e=Mt(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=i,t},names:["cea"]},YM={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.y,i=Mt(t.x-this.long0),s=aa(e-this.lat0);return t.x=this.x0+this.a*i*this.rc,t.y=this.y0+this.a*s,t},inverse:function(t){var e=t.y;return t.x=Mt(this.long0+(t.x-this.x0)/(this.a*this.rc)),t.y=aa(this.lat0+(e-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},$M={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ol(this.es),this.e1=Al(this.es),this.e2=Ll(this.es),this.e3=Dl(this.es),this.ml0=this.a*rn(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,i,s,r=t.y,o=Mt(t.x-this.long0);if(s=o*Math.sin(r),this.sphere)Math.abs(r)<=ct?(e=this.a*o,i=-1*this.a*this.lat0):(e=this.a*Math.sin(s)/Math.tan(r),i=this.a*(aa(r-this.lat0)+(1-Math.cos(s))/Math.tan(r)));else if(Math.abs(r)<=ct)e=this.a*o,i=-1*this.ml0;else{var a=oa(this.a,this.e,Math.sin(r))/Math.tan(r);e=a*Math.sin(s),i=this.a*rn(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+a*(1-Math.cos(s))}return t.x=e+this.x0,t.y=i+this.y0,t},inverse:function(t){var e,i,s,r,o,a,l,h,u;if(s=t.x-this.x0,r=t.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=ct)e=Mt(s/this.a+this.long0),i=0;else{var c;for(l=s*s/this.a/this.a+(a=this.lat0+r/this.a)*a,h=a,o=20;o;--o)if(h+=u=-1*(a*(h*(c=Math.tan(h))+1)-h-.5*(h*h+l)*c)/((h-a)/c-1),Math.abs(u)<=ct){i=h;break}e=Mt(this.long0+Math.asin(s*Math.tan(h)/this.a)/Math.sin(i))}else if(Math.abs(r+this.ml0)<=ct)i=0,e=Mt(this.long0+s/this.a);else{var d,p,f,g,m;for(l=s*s/this.a/this.a+(a=(this.ml0+r)/this.a)*a,h=a,o=20;o;--o)if(m=this.e*Math.sin(h),d=Math.sqrt(1-m*m)*Math.tan(h),p=this.a*rn(this.e0,this.e1,this.e2,this.e3,h),f=this.e0-2*this.e1*Math.cos(2*h)+4*this.e2*Math.cos(4*h)-6*this.e3*Math.cos(6*h),h-=u=(a*(d*(g=p/this.a)+1)-g-.5*d*(g*g+l))/(this.es*Math.sin(2*h)*(g*g+l-2*a*g)/(4*d)+(a-g)*(d*f-2/Math.sin(2*h))-f),Math.abs(u)<=ct){i=h;break}d=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),e=Mt(this.long0+Math.asin(s*d/this.a)/Math.sin(i))}return t.x=e,t.y=i,t},names:["Polyconic","poly"]},KM={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,i=(t.y-this.lat0)/Ml*1e-5,s=t.x-this.long0,r=1,o=0;for(e=1;e<=10;e++)o+=this.A[e]*(r*=i);var a,l=o,h=s,u=1,c=0,d=0,p=0;for(e=1;e<=6;e++)a=c*l+u*h,d=d+this.B_re[e]*(u=u*l-c*h)-this.B_im[e]*(c=a),p=p+this.B_im[e]*u+this.B_re[e]*c;return t.x=p*this.a+this.x0,t.y=d*this.a+this.y0,t},inverse:function(t){var e,i,s=(t.y-this.y0)/this.a,r=(t.x-this.x0)/this.a,o=1,a=0,l=0,h=0;for(e=1;e<=6;e++)i=a*s+o*r,l=l+this.C_re[e]*(o=o*s-a*r)-this.C_im[e]*(a=i),h=h+this.C_im[e]*o+this.C_re[e]*a;for(var u=0;u<this.iterations;u++){var c,d=l,p=h,f=s,g=r;for(e=2;e<=6;e++)c=p*l+d*h,f+=(e-1)*(this.B_re[e]*(d=d*l-p*h)-this.B_im[e]*(p=c)),g+=(e-1)*(this.B_im[e]*d+this.B_re[e]*p);d=1,p=0;var m=this.B_re[1],y=this.B_im[1];for(e=2;e<=6;e++)c=p*l+d*h,m+=e*(this.B_re[e]*(d=d*l-p*h)-this.B_im[e]*(p=c)),y+=e*(this.B_im[e]*d+this.B_re[e]*p);var _=m*m+y*y;l=(f*m+g*y)/_,h=(g*m-f*y)/_}var v=l,x=h,w=1,C=0;for(e=1;e<=9;e++)C+=this.D[e]*(w*=v);var M=this.lat0+C*Ml*1e5;return t.x=this.long0+x,t.y=M,t},names:["New_Zealand_Map_Grid","nzmg"]},JM={init:function(){},forward:function(t){var e=t.y,i=Mt(t.x-this.long0),s=this.x0+this.a*i,r=this.y0+this.a*Math.log(Math.tan(Math.PI/4+e/2.5))*1.25;return t.x=s,t.y=r,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=Mt(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=i,t},names:["Miller_Cylindrical","mill"]},QM={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Rv(this.es)},forward:function(t){var e,i,s=t.x,r=t.y;if(s=Mt(s-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(r),a=20;a;--a){var l=(this.m*r+Math.sin(r)-o)/(this.m+Math.cos(r));if(r-=l,Math.abs(l)<ct)break}else r=1!==this.n?Math.asin(this.n*Math.sin(r)):r;e=this.a*this.C_x*s*(this.m+Math.cos(r)),i=this.a*this.C_y*r}else{var h=Math.sin(r),u=Math.cos(r);i=this.a*Du(r,h,u,this.en),e=this.a*s*u/Math.sqrt(1-this.es*h*h)}return t.x=e,t.y=i,t},inverse:function(t){var e,i,s;return t.x-=this.x0,i=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,i/=this.C_x*(this.m+Math.cos(e)),this.m?e=gr((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=gr(Math.sin(e)/this.n)),i=Mt(i+this.long0),e=aa(e)):(e=Fv(t.y/this.a,this.es,this.en),(s=Math.abs(e))<et?(s=Math.sin(e),i=Mt(this.long0+t.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(e)))):s-ct<et&&(i=this.long0)),t.x=i,t.y=e,t},names:["Sinusoidal","sinu"]},tS={init:function(){},forward:function(t){for(var e=t.y,i=Mt(t.x-this.long0),s=e,r=Math.PI*Math.sin(e);;){var o=-(s+Math.sin(s)-r)/(1+Math.cos(s));if(s+=o,Math.abs(o)<ct)break}s/=2,Math.PI/2-Math.abs(e)<ct&&(i=0);var a=.900316316158*this.a*i*Math.cos(s)+this.x0,l=1.4142135623731*this.a*Math.sin(s)+this.y0;return t.x=a,t.y=l,t},inverse:function(t){var e,i;t.x-=this.x0,t.y-=this.y0,i=t.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),e=Math.asin(i);var s=Mt(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));s<-Math.PI&&(s=-Math.PI),s>Math.PI&&(s=Math.PI),i=(2*e+Math.sin(2*e))/Math.PI,Math.abs(i)>1&&(i=1);var r=Math.asin(i);return t.x=s,t.y=r,t},names:["Mollweide","moll"]},eS={init:function(){Math.abs(this.lat1+this.lat2)<ct||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ol(this.es),this.e1=Al(this.es),this.e2=Ll(this.es),this.e3=Dl(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=ms(this.e,this.sinphi,this.cosphi),this.ml1=rn(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<ct?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=ms(this.e,this.sinphi,this.cosphi),this.ml2=rn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=rn(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,i=t.x,s=t.y;if(this.sphere)e=this.a*(this.g-s);else{var r=rn(this.e0,this.e1,this.e2,this.e3,s);e=this.a*(this.g-r)}var o=this.ns*Mt(i-this.long0),a=this.x0+e*Math.sin(o),l=this.y0+this.rh-e*Math.cos(o);return t.x=a,t.y=l,t},inverse:function(t){var e,i,s,r;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;return 0!==i&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere?(r=Mt(this.long0+o/this.ns),s=aa(this.g-i/this.a),t.x=r,t.y=s,t):(s=ju(this.g-i/this.a,this.e0,this.e1,this.e2,this.e3),r=Mt(this.long0+o/this.ns),t.x=r,t.y=s,t)},names:["Equidistant_Conic","eqdc"]},iS={init:function(){this.R=this.a},forward:function(t){var e,i,s=t.y,r=Mt(t.x-this.long0);Math.abs(s)<=ct&&(e=this.x0+this.R*r,i=this.y0);var o=gr(2*Math.abs(s/Math.PI));(Math.abs(r)<=ct||Math.abs(Math.abs(s)-et)<=ct)&&(e=this.x0,i=s>=0?this.y0+Math.PI*this.R*Math.tan(.5*o):this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/r-r/Math.PI),l=a*a,h=Math.sin(o),u=Math.cos(o),c=u/(h+u-1),d=c*(2/h-1),p=d*d,f=Math.PI*this.R*(a*(c-p)+Math.sqrt(l*(c-p)*(c-p)-(p+l)*(c*c-p)))/(p+l);r<0&&(f=-f),e=this.x0+f;var g=l+c;return f=Math.PI*this.R*(d*g-a*Math.sqrt((p+l)*(l+1)-g*g))/(p+l),i=s>=0?this.y0+f:this.y0-f,t.x=e,t.y=i,t},inverse:function(t){var e,i,s,r,o,a,l,h,u,c,d,p;return t.x-=this.x0,t.y-=this.y0,d=Math.PI*this.R,o=(s=t.x/d)*s+(r=t.y/d)*r,d=3*(r*r/(h=-2*(a=-Math.abs(r)*(1+o))+1+2*r*r+o*o)+(2*(l=a-2*r*r+s*s)*l*l/h/h/h-9*a*l/h/h)/27)/(u=(a-l*l/3/h)/h)/(c=2*Math.sqrt(-u/3)),Math.abs(d)>1&&(d=d>=0?1:-1),p=Math.acos(d)/3,i=t.y>=0?(-c*Math.cos(p+Math.PI/3)-l/3/h)*Math.PI:-(-c*Math.cos(p+Math.PI/3)-l/3/h)*Math.PI,e=Math.abs(s)<ct?this.long0:Mt(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(s*s-r*r)+o*o))/2/s),t.x=e,t.y=i,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},nS={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,i,s,r,o,a,l,h,u,c,d,p,f,g,m,y,_,v,x,w,C,M,S=t.x,F=t.y,P=Math.sin(t.y),A=Math.cos(t.y),T=Mt(S-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=ct?(t.x=this.x0+this.a*(et-F)*Math.sin(T),t.y=this.y0-this.a*(et-F)*Math.cos(T),t):Math.abs(this.sin_p12+1)<=ct?(t.x=this.x0+this.a*(et+F)*Math.sin(T),t.y=this.y0+this.a*(et+F)*Math.cos(T),t):(v=this.sin_p12*P+this.cos_p12*A*Math.cos(T),_=(y=Math.acos(v))?y/Math.sin(y):1,t.x=this.x0+this.a*_*A*Math.sin(T),t.y=this.y0+this.a*_*(this.cos_p12*P-this.sin_p12*A*Math.cos(T)),t):(e=Ol(this.es),i=Al(this.es),s=Ll(this.es),r=Dl(this.es),Math.abs(this.sin_p12-1)<=ct?(o=this.a*rn(e,i,s,r,et),a=this.a*rn(e,i,s,r,F),t.x=this.x0+(o-a)*Math.sin(T),t.y=this.y0-(o-a)*Math.cos(T),t):Math.abs(this.sin_p12+1)<=ct?(o=this.a*rn(e,i,s,r,et),a=this.a*rn(e,i,s,r,F),t.x=this.x0+(o+a)*Math.sin(T),t.y=this.y0+(o+a)*Math.cos(T),t):(l=P/A,h=oa(this.a,this.e,this.sin_p12),u=oa(this.a,this.e,P),c=Math.atan((1-this.es)*l+this.es*h*this.sin_p12/(u*A)),x=0===(d=Math.atan2(Math.sin(T),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(T)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(d)-Math.PI)<=ct?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(T)*Math.cos(c)/Math.sin(d)),p=this.e*this.sin_p12/Math.sqrt(1-this.es),f=this.e*this.cos_p12*Math.cos(d)/Math.sqrt(1-this.es),t.x=this.x0+(y=h*x*(1-(w=x*x)*(m=f*f)*(1-m)/6+(C=w*x)/8*(g=p*f)*(1-2*m)+(M=C*x)/120*(m*(4-7*m)-3*p*p*(1-7*m))-M*x/48*g))*Math.sin(d),t.y=this.y0+y*Math.cos(d),t))},inverse:function(t){var e,i,s,r,o,a,l,h,u,c,d,p,f,g,m,y,_,v,x,w,C,M,S;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y))>2*et*this.a?void 0:(i=e/this.a,s=Math.sin(i),r=Math.cos(i),o=this.long0,Math.abs(e)<=ct?a=this.lat0:(a=gr(r*this.sin_p12+t.y*s*this.cos_p12/e),l=Math.abs(this.lat0)-et,o=Math.abs(l)<=ct?Mt(this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y)):Mt(this.long0+Math.atan2(t.x*s,e*this.cos_p12*r-t.y*this.sin_p12*s))),t.x=o,t.y=a,t):(h=Ol(this.es),u=Al(this.es),c=Ll(this.es),d=Dl(this.es),Math.abs(this.sin_p12-1)<=ct?(a=ju(((p=this.a*rn(h,u,c,d,et))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,h,u,c,d),o=Mt(this.long0+Math.atan2(t.x,-1*t.y)),t.x=o,t.y=a,t):Math.abs(this.sin_p12+1)<=ct?(p=this.a*rn(h,u,c,d,et),a=ju(((e=Math.sqrt(t.x*t.x+t.y*t.y))-p)/this.a,h,u,c,d),o=Mt(this.long0+Math.atan2(t.x,t.y)),t.x=o,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),m=Math.atan2(t.x,t.y),f=oa(this.a,this.e,this.sin_p12),y=Math.cos(m),x=3*this.es*(1-(v=-(_=this.e*this.cos_p12*y)*_/(1-this.es)))*this.sin_p12*this.cos_p12*y/(1-this.es),M=1-v*(C=(w=e/f)-v*(1+v)*Math.pow(w,3)/6-x*(1+3*v)*Math.pow(w,4)/24)*C/2-w*C*C*C/6,g=Math.asin(this.sin_p12*Math.cos(C)+this.cos_p12*Math.sin(C)*y),o=Mt(this.long0+Math.asin(Math.sin(m)*Math.sin(C)/Math.cos(g))),S=Math.sin(g),a=Math.atan2((S-this.es*M*this.sin_p12)*Math.tan(g),S*(1-this.es)),t.x=o,t.y=a,t))},names:["Azimuthal_Equidistant","aeqd"]},sS={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,i,s,r,o,a,l,h=t.y;return s=Mt(t.x-this.long0),e=Math.sin(h),i=Math.cos(h),r=Math.cos(s),((o=this.sin_p14*e+this.cos_p14*i*r)>0||Math.abs(o)<=ct)&&(a=1*this.a*i*Math.sin(s),l=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*r)),t.x=a,t.y=l,t},inverse:function(t){var e,i,s,r,o,a,l;return t.x-=this.x0,t.y-=this.y0,i=gr((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),s=Math.sin(i),r=Math.cos(i),a=this.long0,Math.abs(e)<=ct?(l=this.lat0,t.x=a,t.y=l,t):(l=gr(r*this.sin_p14+t.y*s*this.cos_p14/e),o=Math.abs(this.lat0)-et,Math.abs(o)<=ct?(a=Mt(this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=l,t):(a=Mt(this.long0+Math.atan2(t.x*s,e*this.cos_p14*r-t.y*this.sin_p14*s)),t.x=a,t.y=l,t))},names:["ortho"]};function Gu(n,t,e,i){var s;return n<ct?(i.value=1,s=0):(s=Math.atan2(t,e),Math.abs(s)<=je?i.value=1:s>je&&s<=et+je?(i.value=2,s-=et):s>et+je||s<=-(et+je)?(i.value=3,s=s>=0?s-Si:s+Si):(i.value=4,s+=et)),s}function ha(n,t){var e=n+t;return e<-Si?e+=Sl:e>+Si&&(e-=Sl),e}const rS={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.face=this.lat0>=et-je/2?5:this.lat0<=-(et-je/2)?6:Math.abs(this.long0)<=je?1:Math.abs(this.long0)<=et+je?this.long0>0?2:4:3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,i,s,r,o,a,l={x:0,y:0},h={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,i=t.x,5===this.face)r=et-e,i>=je&&i<=et+je?(h.value=1,s=i-et):i>et+je||i<=-(et+je)?(h.value=2,s=i>0?i-Si:i+Si):i>-(et+je)&&i<=-je?(h.value=3,s=i+et):(h.value=4,s=i);else if(6===this.face)r=et+e,i>=je&&i<=et+je?(h.value=1,s=-i+et):i<je&&i>=-je?(h.value=2,s=-i):i<-je&&i>=-(et+je)?(h.value=3,s=-i-et):(h.value=4,s=i>0?-i+Si:-i-Si);else{var u,c,d,p,f,g;2===this.face?i=ha(i,+et):3===this.face?i=ha(i,+Si):4===this.face&&(i=ha(i,-et)),p=Math.sin(e),f=Math.cos(e),g=Math.sin(i),u=f*Math.cos(i),c=f*g,d=p,1===this.face?s=Gu(r=Math.acos(u),d,c,h):2===this.face?s=Gu(r=Math.acos(c),d,-u,h):3===this.face?s=Gu(r=Math.acos(-u),d,-c,h):4===this.face?s=Gu(r=Math.acos(-c),d,u,h):(r=s=0,h.value=1)}return a=Math.atan(12/Si*(s+Math.acos(Math.sin(s)*Math.cos(je))-et)),o=Math.sqrt((1-Math.cos(r))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(s))))),2===h.value?a+=et:3===h.value?a+=Si:4===h.value&&(a+=1.5*Si),l.x=o*Math.cos(a),l.y=o*Math.sin(a),l.x=l.x*this.a+this.x0,l.y=l.y*this.a+this.y0,t.x=l.x,t.y=l.y,t},inverse:function(t){var e,i,s,r,o,a,l,h,u,c,d,p,f={lam:0,phi:0},g={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,i=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?g.value=1:t.y>=0&&t.y>=Math.abs(t.x)?(g.value=2,e-=et):t.x<0&&-t.x>=Math.abs(t.y)?(g.value=3,e=e<0?e+Si:e-Si):(g.value=4,e+=et),u=Si/12*Math.tan(e),o=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),a=Math.atan(o),(l=1-(s=Math.cos(e))*s*(r=Math.tan(i))*r*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?l=-1:l>1&&(l=1),5===this.face)h=Math.acos(l),f.phi=et-h,f.lam=1===g.value?a+et:2===g.value?a<0?a+Si:a-Si:3===g.value?a-et:a;else if(6===this.face)h=Math.acos(l),f.phi=h-et,f.lam=1===g.value?-a+et:2===g.value?-a:3===g.value?-a-et:a<0?-a-Si:-a+Si;else{var m,y,_;u=(m=l)*m,y=(u+=(_=u>=1?0:Math.sqrt(1-u)*Math.sin(a))*_)>=1?0:Math.sqrt(1-u),2===g.value?(u=y,y=-_,_=u):3===g.value?(y=-y,_=-_):4===g.value&&(u=y,y=_,_=-u),2===this.face?(u=m,m=-y,y=u):3===this.face?(m=-m,y=-y):4===this.face&&(u=m,m=y,y=-u),f.phi=Math.acos(-_)-et,f.lam=Math.atan2(y,m),2===this.face?f.lam=ha(f.lam,-et):3===this.face?f.lam=ha(f.lam,-Si):4===this.face&&(f.lam=ha(f.lam,+et))}return 0!==this.es&&(c=f.phi<0?1:0,d=Math.tan(f.phi),p=this.b/Math.sqrt(d*d+this.one_minus_f_squared),f.phi=Math.atan(Math.sqrt(this.a*this.a-p*p)/(this.one_minus_f*p)),c&&(f.phi=-f.phi)),f.lam+=this.long0,t.x=f.lam,t.y=f.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var Af=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Nl=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Lv=ps/5,oS=1/Lv,qu=function(n,t){return n[0]+t*(n[1]+t*(n[2]+t*n[3]))};const aS={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=Mt(t.x-this.long0),i=Math.abs(t.y),s=Math.floor(i*Lv);s<0?s=0:s>=18&&(s=17);var r={x:qu(Af[s],i=ps*(i-oS*s))*e,y:qu(Nl[s],i)};return t.y<0&&(r.y=-r.y),r.x=r.x*this.a*.8487+this.x0,r.y=r.y*this.a*1.3523+this.y0,r},inverse:function(t){var e={x:(t.x-this.x0)/(.8487*this.a),y:Math.abs(t.y-this.y0)/(1.3523*this.a)};if(e.y>=1)e.x/=Af[18][0],e.y=t.y<0?-et:et;else{var i=Math.floor(18*e.y);for(i<0?i=0:i>=18&&(i=17);;)if(Nl[i][0]>e.y)--i;else{if(!(Nl[i+1][0]<=e.y))break;++i}var s=Nl[i],r=5*(e.y-s[0])/(Nl[i+1][0]-s[0]);r=function(a,l,h,u){for(var c=l;u;--u){var d=(qu(s,o=c)-e.y)/function(a,l){return a[1]+l*(2*a[2]+3*l*a[3])}(s,o);if(c-=d,Math.abs(d)<1e-10)break}var o;return c}(0,r,0,100),e.x/=qu(Af[i],r),e.y=(5*i+r)*Hi,t.y<0&&(e.y=-e.y)}return e.x=Mt(e.x+this.long0),e},names:["Robinson","robin"]},lS={init:function(){this.name="geocent"},forward:function(t){return dv(t,this.es,this.a)},inverse:function(t){return pv(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var zl={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const hS={init:function(){if(Object.keys(zl).forEach(function(i){if(typeof this[i]>"u")this[i]=zl[i].def;else{if(zl[i].num&&isNaN(this[i]))throw new Error("Invalid parameter value, must be numeric "+i+" = "+this[i]);zl[i].num&&(this[i]=parseFloat(this[i]))}zl[i].degrees&&(this[i]=this[i]*Hi)}.bind(this)),Math.abs(Math.abs(this.lat0)-et)<ct?this.mode=this.lat0<0?1:0:Math.abs(this.lat0)<ct?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,i,s,r,o=Math.sin(t.y),a=Math.cos(t.y),l=Math.cos(t.x);switch(this.mode){case 3:i=this.sinph0*o+this.cosph0*a*l;break;case 2:i=a*l;break;case 1:i=-o;break;case 0:i=o}switch(e=(i=this.pn1/(this.p-i))*a*Math.sin(t.x),this.mode){case 3:i*=this.cosph0*o-this.sinph0*a*l;break;case 2:i*=o;break;case 0:i*=-a*l;break;case 1:i*=a*l}return e=(e*this.cg-i*this.sg)*this.cw*(r=1/((s=i*this.cg+e*this.sg)*this.sw*this.h1+this.cw)),i=s*r,t.x=e*this.a,t.y=i*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,i,s,r={x:t.x,y:t.y};t.x=(e=this.pn1*t.x*(s=1/(this.pn1-t.y*this.sw)))*this.cg+(i=this.pn1*t.y*this.cw*s)*this.sg,t.y=i*this.cg-e*this.sg;var o=es(t.x,t.y);if(Math.abs(o)<ct)r.x=0,r.y=t.y;else{var a,l;switch(l=1-o*o*this.pfact,l=(this.p-Math.sqrt(l))/(this.pn1/o+o/this.pn1),a=Math.sqrt(1-l*l),this.mode){case 3:r.y=Math.asin(a*this.sinph0+t.y*l*this.cosph0/o),t.y=(a-this.sinph0*Math.sin(r.y))*o,t.x*=l*this.cosph0;break;case 2:r.y=Math.asin(t.y*l/o),t.y=a*o,t.x*=l;break;case 0:r.y=Math.asin(a),t.y=-t.y;break;case 1:r.y=-Math.asin(a)}r.x=Math.atan2(t.x,t.y)}return t.x=r.x+this.long0,t.y=r.y,t},names:["Tilted_Perspective","tpers"]},uS={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,i,s,r,o=t.x,a=t.y;if(o-=this.long0,"ellipse"===this.shape){a=Math.atan(this.radius_p2*Math.tan(a));var l=this.radius_p/es(this.radius_p*Math.cos(a),Math.sin(a));if(i=l*Math.cos(o)*Math.cos(a),s=l*Math.sin(o)*Math.cos(a),r=l*Math.sin(a),(this.radius_g-i)*i-s*s-r*r*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(s/es(r,e)),t.y=this.radius_g_1*Math.atan(r/e)):(t.x=this.radius_g_1*Math.atan(s/e),t.y=this.radius_g_1*Math.atan(r/es(s,e)))}else"sphere"===this.shape&&(e=Math.cos(a),i=Math.cos(o)*e,s=Math.sin(o)*e,r=Math.sin(a),e=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(s/es(r,e)),t.y=this.radius_g_1*Math.atan(r/e)):(t.x=this.radius_g_1*Math.atan(s/e),t.y=this.radius_g_1*Math.atan(r/es(s,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,i,s,r,o=-1,a=0,l=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(l=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*es(1,l)):(a=Math.tan(t.x/this.radius_g_1),l=Math.tan(t.y/this.radius_g_1)*es(1,a));var h=l/this.radius_p;if((s=(i=2*this.radius_g*o)*i-4*(e=a*a+h*h+o*o)*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=(-i-Math.sqrt(s))/(2*e),o=this.radius_g+r*o,a*=r,l*=r,t.x=Math.atan2(a,o),t.y=Math.atan(l*Math.cos(t.x)/o),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(l=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+l*l)):(a=Math.tan(t.x/this.radius_g_1),l=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+a*a)),(s=(i=2*this.radius_g*o)*i-4*(e=a*a+l*l+o*o)*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=(-i-Math.sqrt(s))/(2*e),o=this.radius_g+r*o,a*=r,l*=r,t.x=Math.atan2(a,o),t.y=Math.atan(l*Math.cos(t.x)/o)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};Sn.defaultDatum="WGS84",Sn.Proj=Pl,Sn.WGS84=new Sn.Proj("WGS84"),Sn.Point=DM,Sn.toPoint=yv,Sn.defs=Ru,Sn.nadgrid=function(t,e){var h,i=new DataView(e),s=11!==(h=i).getInt32(8,!1)&&(11!==h.getInt32(8,!0)&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0),r=function(h,u){return{nFields:h.getInt32(8,u),nSubgridFields:h.getInt32(24,u),nSubgrids:h.getInt32(40,u),shiftType:Tf(h,56,64).trim(),fromSemiMajorAxis:h.getFloat64(120,u),fromSemiMinorAxis:h.getFloat64(136,u),toSemiMajorAxis:h.getFloat64(152,u),toSemiMinorAxis:h.getFloat64(168,u)}}(i,s),o=function(h,u,c){for(var d=176,p=[],f=0;f<u.nSubgrids;f++){var g=PM(h,d,c),m=RM(h,d,g,c),y=Math.round(1+(g.upperLongitude-g.lowerLongitude)/g.longitudeInterval),_=Math.round(1+(g.upperLatitude-g.lowerLatitude)/g.latitudeInterval);p.push({ll:[ia(g.lowerLongitude),ia(g.lowerLatitude)],del:[ia(g.longitudeInterval),ia(g.latitudeInterval)],lim:[y,_],count:g.gridNodeCount,cvs:IM(m)}),d+=176+16*g.gridNodeCount}return p}(i,r,s),a={header:r,subgrids:o};return cv[t]=a,a},Sn.transform=Lu,Sn.mgrs=OM,Sn.version="__VERSION__",function(t){t.Proj.projections.add(Nu),t.Proj.projections.add(zu),t.Proj.projections.add(NM),t.Proj.projections.add(zM),t.Proj.projections.add(jM),t.Proj.projections.add(GM),t.Proj.projections.add(qM),t.Proj.projections.add(VM),t.Proj.projections.add(BM),t.Proj.projections.add(ZM),t.Proj.projections.add(WM),t.Proj.projections.add(HM),t.Proj.projections.add(UM),t.Proj.projections.add(XM),t.Proj.projections.add(YM),t.Proj.projections.add($M),t.Proj.projections.add(KM),t.Proj.projections.add(JM),t.Proj.projections.add(QM),t.Proj.projections.add(tS),t.Proj.projections.add(eS),t.Proj.projections.add(iS),t.Proj.projections.add(nS),t.Proj.projections.add(sS),t.Proj.projections.add(rS),t.Proj.projections.add(aS),t.Proj.projections.add(lS),t.Proj.projections.add(hS),t.Proj.projections.add(uS)}(Sn);const Lf=Sn,Df="NetherlandsRDNewQuad",Dv="EuropeanETRS89_LAEAQuad";function Nv(){Lf.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs"),Lf.defs("EPSG:3035","+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +type=crs"),function(t){pM=t;const e=Object.keys(t.defs),i=e.length;let s,r;for(s=0;s<i;++s){const o=e[s];if(!Ee(o)){const a=t.defs(o);let l=a.units;!l&&"longlat"===a.projName&&(l="degrees"),X_(new Fs({code:o,axisOrientation:a.axis,metersPerUnit:a.to_meter,units:l}))}}for(s=0;s<i;++s){const o=e[s],a=Ee(o);for(r=0;r<i;++r){const l=e[r],h=Ee(l);if(!j_(o,l))if(t.defs[o]===t.defs[l])Lp([a,h]);else{const u=t(o,l);bC(a,h,Q_(a,h,u.forward),Q_(h,a,u.inverse))}}}}(Lf)}class zv{constructor(t){Nv(),this._tileUrl=t}get Projection(){const t=new Fs({code:"EPSG:28992",units:"m",extent:[-285401.92,22598.08,595401.92,903401.92],axisOrientation:"enu",global:!1}),e=new Fs({code:"EPSG:3857",units:"m",extent:[-20037508.342789244,-20037508.342789244,20037508.342789244,20037508.342789244],worldExtent:[-180,-85,180,85],axisOrientation:"enu",global:!0}),i=new Fs({axisOrientation:"neu",code:"EPSG:3035",units:"m",extent:[2e6,2164940.6031185603,5394791.161618613,55e5]});return this._tileUrl.includes(Df)?t:this._tileUrl.includes(Dv)?i:e}}class Nf{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Ki(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Nf({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Zt()}getImage(t){return Zt()}getHitDetectionImage(){return Zt()}getPixelRatio(t){return 1}getImageState(){return Zt()}getImageSize(){return Zt()}getOrigin(){return Zt()}getSize(){return Zt()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Ki(t)}listenImageChange(t){Zt()}load(){Zt()}unlistenImageChange(t){Zt()}}const jv=Nf;function ys(n){return Array.isArray(n)?F_(n):n}class zf extends jv{constructor(t){super({opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=void 0!==t.radius?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const t=this.getScale(),e=new zf({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_;if(!t)return null;const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let e=this.canvas_[t];if(!e){const i=this.renderOptions_,s=Wi(i.size*t,i.size*t);this.draw_(i,s,t),e=s.canvas,this.canvas_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return 2}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,i){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;let s=this.radius_,r=void 0===this.radius2_?s:this.radius2_;if(s<r){const y=s;s=r,r=y}const o=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),a=r*Math.sin(o),l=s-Math.sqrt(r*r-a*a),h=Math.sqrt(a*a+l*l),u=h/a;if("miter"===t&&u<=i)return u*e;const c=e/2/u,d=e/2*(l/h),p=Math.sqrt((s+c)*(s+c)+d*d)-s;if(void 0===this.radius2_||"bevel"===t)return 2*p;const f=s*Math.sin(o),g=r-Math.sqrt(s*s-f*f),m=Math.sqrt(f*f+g*g)/f;return m<=i?2*Math.max(p,m*e/2-r-s):2*p}createRenderOptions(){let t,e=Zo,i=Wo,s=0,r=null,o=0,a=0;this.stroke_&&(t=this.stroke_.getColor(),null===t&&(t=_l),t=ys(t),a=this.stroke_.getWidth(),void 0===a&&(a=1),r=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),i=this.stroke_.getLineJoin(),void 0===i&&(i=Wo),e=this.stroke_.getLineCap(),void 0===e&&(e=Zo),s=this.stroke_.getMiterLimit(),void 0===s&&(s=10));const l=this.calculateLineJoinSize_(i,a,s),h=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:t,strokeWidth:a,size:Math.ceil(2*h+l),lineCap:e,lineDash:r,lineDashOffset:o,lineJoin:i,miterLimit:s}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let s=this.fill_.getColor();null===s&&(s=cn),e.fillStyle=ys(s),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let e=this.fill_.getColor(),i=0;if("string"==typeof e&&(e=uu(e)),null===e?i=1:Array.isArray(e)&&(i=4===e.length?e[3]:1),0===i){const s=Wi(t.size,t.size);this.hitDetectionCanvas_=s.canvas,this.drawHitDetectionCanvas_(t,s)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let e=this.points_;const i=this.radius_;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{const s=void 0===this.radius2_?i:this.radius2_;void 0!==this.radius2_&&(e*=2);const r=this.angle_-Math.PI/2,o=2*Math.PI/e;for(let a=0;a<e;a++){const l=r+a*o,h=a%2==0?i:s;t.lineTo(h*Math.cos(l),h*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=cn,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}}const Gv=zf;class jf extends Gv{constructor(t){super({points:1/0,fill:(t=t||{radius:5}).fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new jf({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}}const ua=jf;class Gf{constructor(t){this.color_=void 0!==(t=t||{}).color?t.color:null}clone(){const t=this.getColor();return new Gf({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}const En=Gf;let jl=null;class cS extends eu{constructor(t,e,i,s,r){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=i,this.canvas_={},this.color_=r,this.imageState_=void 0===s?0:s,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&2===this.imageState_){jl||(jl=Wi(1,1,void 0,{willReadFrequently:!0})),jl.drawImage(this.image_,0,0);try{jl.getImageData(0,0,1,1),this.tainted_=!1}catch{jl=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent("change")}handleImageError_(){this.imageState_=3,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=2,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],i=Wi(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(0===this.imageState_){this.image_||this.initializeImage_(),this.imageState_=1;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&function(e,i){return i&&(e.src=i),__?new Promise((s,r)=>e.decode().then(()=>s(e),r)):function(r,o){return new Promise((a,l)=>{function h(){c(),a(r)}function u(){c(),l(new Error("Image load error"))}function c(){r.removeEventListener("load",h),r.removeEventListener("error",u)}r.addEventListener("load",h),r.addEventListener("error",u)})}(e)}(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||2!==this.imageState_)return;const e=this.image_,i=document.createElement("canvas");i.width=Math.ceil(e.width*t),i.height=Math.ceil(e.height*t);const s=i.getContext("2d");s.scale(t,t),s.drawImage(e,0,0),s.globalCompositeOperation="multiply",s.fillStyle=P_(this.color_),s.fillRect(0,0,i.width/t,i.height/t),s.globalCompositeOperation="destination-in",s.drawImage(e,0,0),this.canvas_[t]=i}}function qv(n,t,e,i){return void 0!==e&&void 0!==i?[e/n,i/t]:void 0!==e?e/n:void 0!==i?i/t:1}class qf extends jv{constructor(t){super({opacity:void 0!==(t=t||{}).opacity?t.opacity:1,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,declutterMode:t.declutterMode}),this.anchor_=void 0!==t.anchor?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;const e=void 0!==t.img?t.img:null;let i,s=t.src;if(xe(!(void 0!==s&&e),"`image` and `src` cannot be provided at the same time"),(void 0===s||0===s.length)&&e&&(s=e.src||$t(e)),xe(void 0!==s&&s.length>0,"A defined and non-empty `src` or `image` must be provided"),xe(!((void 0!==t.width||void 0!==t.height)&&void 0!==t.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==t.src?i=0:void 0!==e&&(i=e instanceof HTMLImageElement?e.complete?e.src?2:0:1:2),this.color_=void 0!==t.color?uu(t.color):null,this.iconImage_=function(o,a,l,h,u){let c=void 0===a?void 0:cu.get(a,l,u);return c||(c=new cS(o,o instanceof HTMLImageElement?o.src||void 0:a,l,h,u),cu.set(a,l,u,c)),c}(e,s,this.crossOrigin_,i,this.color_),this.offset_=void 0!==t.offset?t.offset:[0,0],this.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==t.size?t.size:null,void 0!==t.width||void 0!==t.height){let r,o;if(t.size)[r,o]=t.size;else{const a=this.getImage(1);if(a.width&&a.height)r=a.width,o=a.height;else if(a instanceof HTMLImageElement){this.initialOptions_=t;const l=()=>{if(this.unlistenImageChange(l),!this.initialOptions_)return;const h=this.iconImage_.getSize();this.setScale(qv(h[0],h[1],t.width,t.height))};return void this.listenImageChange(l)}}void 0!==r&&this.setScale(qv(r,o,t.width,t.height))}}clone(){let t,e,i;return this.initialOptions_?(e=this.initialOptions_.width,i=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new qf({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:i,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const s=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!s)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=s[0]),"fraction"==this.anchorYUnits_&&(t[1]*=s[1])}if("top-left"!=this.anchorOrigin_){if(!s)return null;t===this.anchor_&&(t=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(t[0]=-t[0]+s[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(t[1]=-t[1]+s[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]-e[0]/i[0],t[1]+e[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if("top-left"!=this.offsetOrigin_){const e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(t[0]=i[0]-e[0]-t[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();return this.size_?this.size_[0]*t[0]:2==this.iconImage_.getImageState()?this.iconImage_.getSize()[0]*t[0]:void 0}getHeight(){const t=this.getScaleArray();return this.size_?this.size_[1]*t[1]:2==this.iconImage_.getImageState()?this.iconImage_.getSize()[1]*t[1]:void 0}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener("change",t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener("change",t)}}const Vu=qf;function Bu(n,t,e,i,s,r,o){let a,l;const h=(e-t)/i;if(1===h)a=t;else if(2===h)a=t,l=s;else if(0!==h){let u=n[t],c=n[t+1],d=0;const p=[0];for(let m=t+i;m<e;m+=i){const y=n[m],_=n[m+1];d+=Math.sqrt((y-u)*(y-u)+(_-c)*(_-c)),p.push(d),u=y,c=_}const f=s*d,g=function(y,_,v){let x,w;v=v||tr;let C=0,M=y.length,S=!1;for(;C<M;)x=C+(M-C>>1),w=+v(y[x],_),w<0?C=x+1:(M=x,S=!w);return S?C:~C}(p,f);g<0?(l=(f-p[-g-2])/(p[-g-1]-p[-g-2]),a=t+(-g-2)*i):a=t+g*i}o=o>1?o:2,r=r||new Array(o);for(let u=0;u<o;++u)r[u]=void 0===a?NaN:void 0===l?n[a+u]:Cn(n[a+u],n[a+i+u],l);return r}function Vf(n,t,e,i,s,r){if(e==t)return null;let o;if(s<n[t+i-1])return r?(o=n.slice(t,t+i),o[i-1]=s,o):null;if(n[e-1]<s)return r?(o=n.slice(e-i,e),o[i-1]=s,o):null;if(s==n[t+i-1])return n.slice(t,t+i);let a=t/i,l=e/i;for(;a<l;){const c=a+l>>1;s<n[(c+1)*i-1]?l=c:a=c+1}const h=n[a*i-1];if(s==h)return n.slice((a-1)*i,(a-1)*i+i);const u=(s-h)/(n[(a+1)*i-1]-h);o=[];for(let c=0;c<i-1;++c)o.push(Cn(n[(a-1)*i+c],n[a*i+c],u));return o.push(s),o}function Vv(n,t,e,i){const s=[];let r=[1/0,1/0,-1/0,-1/0];for(let o=0,a=e.length;o<a;++o){const l=e[o];r=Mp(n,t,l[0],i),s.push((r[0]+r[2])/2,(r[1]+r[3])/2),t=l[l.length-1]}return s}const Bv=[1,0,0,1,0,0];class Gl{constructor(t,e,i,s,r){this.id_=r,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i,this.properties_=s}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?S_(this.flatCoordinates_):Mp(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=Jn(this.getExtent());this.flatInteriorPoints_=Jp(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=Vv(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=d1(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Bu(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let e=0;const i=this.ends_;for(let s=0,r=i.length;s<r;++s){const o=i[s],a=Bu(t,e,o,2,.5);hs(this.flatMidpoints_,a),e=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return 2}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){const e=(t=Ee(t)).getExtent(),i=t.getWorldExtent();if(e&&i){const s=Ln(i)/Ln(e);Ps(Bv,i[0],i[3],s,-s,0,0,0),ar(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Bv,this.flatCoordinates_)}}getEnds(){return this.ends_}}Gl.prototype.getEndss=Gl.prototype.getEnds,Gl.prototype.getFlatCoordinates=Gl.prototype.getOrientedFlatCoordinates;const Bf=Gl;class Zf{constructor(t){this.color_=void 0!==(t=t||{}).color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new Zf({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}const Tn=Zf;class vr{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=Zv,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new vr({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Zv,this.geometry_=t}setZIndex(t){this.zIndex_=t}}let Wf=null;function dS(n,t){if(!Wf){const e=new En({color:"rgba(255,255,255,0.4)"}),i=new Tn({color:"#3399CC",width:1.25});Wf=[new vr({image:new ua({fill:e,stroke:i,radius:5}),fill:e,stroke:i})]}return Wf}function Zv(n){return n.getGeometry()}const pn=vr;class Hf{constructor(t){this.font_=(t=t||{}).font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=Ki(void 0!==t.scale?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new En({color:"#333"}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding}clone(){const t=this.getScale();return new Hf({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Ki(void 0!==t?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const Wv=Hf;class Uf extends Kn{constructor(t){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t&&("function"==typeof t.getSimplifiedGeometry?this.setGeometry(t):this.setProperties(t))}clone(){const t=new Uf(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(ti(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=ve(t,"change",this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?function(i){if("function"==typeof i)return i;let s;return Array.isArray(i)?s=i:(xe("function"==typeof i.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),s=[i]),function(){return s}}(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const Ns=Uf;class Zu extends r1{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(ti),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(ve(this.geometries_[t],"change",this.changed,this))}clone(){const t=new Zu(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,e,i,s){if(s<Hr(this.getExtent(),t,e))return s;const r=this.geometries_;for(let o=0,a=r.length;o<a;++o)s=r[o].closestPointXY(t,e,i,s);return s}containsXY(t,e){const i=this.geometries_;for(let s=0,r=i.length;s<r;++s)if(i[s].containsXY(t,e))return!0;return!1}computeExtent(t){Lo(t);const e=this.geometries_;for(let i=0,s=e.length;i<s;++i)E_(t,e[i].getExtent());return t}getGeometries(){return Hv(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let i=0,s=e.length;i<s;++i)e[i].getType()===this.getType()?t=t.concat(e[i].getGeometriesArrayRecursive()):t.push(e[i]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],i=this.geometries_;let s=!1;for(let r=0,o=i.length;r<o;++r){const a=i[r],l=a.getSimplifiedGeometry(t);e.push(l),l!==a&&(s=!0)}if(s){const r=new Zu(null);return r.setGeometriesArray(e),r}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let i=0,s=e.length;i<s;++i)if(e[i].intersectsExtent(t))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(t,e){const i=this.geometries_;for(let s=0,r=i.length;s<r;++s)i[s].rotate(t,e);this.changed()}scale(t,e,i){i||(i=Jn(this.getExtent()));const s=this.geometries_;for(let r=0,o=s.length;r<o;++r)s[r].scale(t,e,i);this.changed()}setGeometries(t){this.setGeometriesArray(Hv(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let i=0,s=e.length;i<s;++i)e[i].applyTransform(t);this.changed()}translate(t,e){const i=this.geometries_;for(let s=0,r=i.length;s<r;++s)i[s].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Hv(n){const t=[];for(let e=0,i=n.length;e<i;++e)t.push(n[e].clone());return t}const Uv=Zu,Xv=class{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let i=e.dataProjection?Ee(e.dataProjection):this.readProjection(t);e.extent&&i&&"tile-pixels"===i.getUnits()&&(i=Ee(i),i.setWorldExtent(e.extent)),e={dataProjection:i,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}getType(){return Zt()}readFeature(t,e){return Zt()}readFeatures(t,e){return Zt()}readGeometry(t,e){return Zt()}readProjection(t){return Zt()}writeFeature(t,e){return Zt()}writeFeatures(t,e){return Zt()}writeGeometry(t,e){return Zt()}};function Xf(n,t,e){const i=e?Ee(e.featureProjection):null,s=e?Ee(e.dataProjection):null;let r;if(r=i&&s&&!or(i,s)?(t?n.clone():n).transform(t?i:s,t?s:i):n,t&&e&&void 0!==e.decimals){const o=Math.pow(10,e.decimals),a=function(l){for(let h=0,u=l.length;h<u;++h)l[h]=Math.round(l[h]*o)/o;return l};r===n&&(r=n.clone()),r.applyTransform(a)}return r}function Wu(n){return"string"==typeof n?JSON.parse(n)||null:null!==n?n:null}const pS=class extends Xv{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(Wu(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(Wu(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return Zt()}readFeaturesFromObject(t,e){return Zt()}readGeometry(t,e){return this.readGeometryFromObject(Wu(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return Zt()}readProjection(t){return this.readProjectionFromObject(Wu(t))}readProjectionFromObject(t){return Zt()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return Zt()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return Zt()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return Zt()}};function Yv(n,t,e,i){let s=n[t],r=n[t+1],o=0;for(let a=t+i;a<e;a+=i){const l=n[a],h=n[a+1];o+=Math.sqrt((l-s)*(l-s)+(h-r)*(h-r)),s=l,r=h}return o}class Hu extends lr{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}appendCoordinate(t){this.flatCoordinates?hs(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){const t=new Hu(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,s){return s<Hr(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Bp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Wp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,s))}forEachSegment(t){return p1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:Vf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e=void 0!==e&&e)}getCoordinates(){return hr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return Bu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return Yv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=Xp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Hu(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return _u(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=mu(this.flatCoordinates,0,t,this.stride),this.changed()}}const zs=Hu;class Uu extends lr{constructor(t,e,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(void 0!==e&&i)this.setFlatCoordinates(e,t),this.ends_=i;else{let s=this.getLayout();const r=t,o=[],a=[];for(let l=0,h=r.length;l<h;++l){const u=r[l];0===l&&(s=u.getLayout()),hs(o,u.getFlatCoordinates()),a.push(o.length)}this.setFlatCoordinates(s,o),this.ends_=a}}appendLineString(t){this.flatCoordinates?hs(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Uu(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,s){return s<Hr(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Zp(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Hp(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,s))}getCoordinateAtM(t,e,i){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:function(r,o,a,l,h,u,c){if(c)return Vf(r,o,a[a.length-1],l,h,u);let d;if(h<r[l-1])return u?(d=r.slice(0,l),d[l-1]=h,d):null;if(r[r.length-1]<h)return u?(d=r.slice(r.length-l),d[l-1]=h,d):null;for(let p=0,f=a.length;p<f;++p){const g=a[p];if(o!=g){if(h<r[o+l-1])return null;if(h<=r[g-1])return Vf(r,o,g,l,h,!1);o=g}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,e=void 0!==e&&e,i=void 0!==i&&i)}getCoordinates(){return fl(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new zs(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,i=this.layout,s=[];let r=0;for(let o=0,a=e.length;o<a;++o){const l=e[o],h=new zs(t.slice(r,l),i);s.push(h),r=l}return s}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let i=0;const s=this.ends_,r=this.stride;for(let o=0,a=s.length;o<a;++o){const l=s[o];hs(t,Bu(e,i,l,r,.5)),i=l}return t}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=function(r,o,a,l,h,u,c,d){for(let p=0,f=a.length;p<f;++p){const g=a[p];c=Xp(r,o,g,l,h,u,c),d.push(c),o=g}return c}(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i),new Uu(e,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(t){return function(i,s,r,o,a){for(let l=0,h=r.length;l<h;++l){if(_u(i,s,r[l],o,a))return!0;s=r[l]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Up(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}const Xu=Uu;class Yf extends lr{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){this.flatCoordinates?hs(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){const t=new Yf(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,s){if(s<Hr(this.getExtent(),t,e))return s;const r=this.flatCoordinates,o=this.stride;for(let a=0,l=r.length;a<l;a+=o){const h=Rs(t,e,r[a],r[a+1]);if(h<s){s=h;for(let u=0;u<o;++u)i[u]=r[a+u];i.length=o}}return s}getCoordinates(){return hr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){return t<0||(this.flatCoordinates?this.flatCoordinates.length/this.stride:0)<=t?null:new Os(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,i=this.stride,s=[];for(let r=0,o=t.length;r<o;r+=i){const a=new Os(t.slice(r,r+i),e);s.push(a)}return s}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,i=this.stride;for(let s=0,r=e.length;s<r;s+=i)if(bp(t,e[s],e[s+1]))return!0;return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=mu(this.flatCoordinates,0,t,this.stride),this.changed()}}const Yu=Yf;class $u extends lr{constructor(t,e,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){let s=this.getLayout();const r=t,o=[],a=[];for(let l=0,h=r.length;l<h;++l){const u=r[l];0===l&&(s=u.getLayout());const c=o.length,d=u.getEnds();for(let p=0,f=d.length;p<f;++p)d[p]+=c;hs(o,u.getFlatCoordinates()),a.push(d)}e=s,t=o,i=a}void 0!==e&&i?(this.setFlatCoordinates(e,t),this.endss_=i):this.setCoordinates(t,e)}appendPolygon(t){let e;if(this.flatCoordinates){const i=this.flatCoordinates.length;hs(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let s=0,r=e.length;s<r;++s)e[s]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let s=0;s<t;++s)e[s]=this.endss_[s].slice();const i=new $u(this.flatCoordinates.slice(),this.layout,e);return i.applyProperties(this),i}closestPointXY(t,e,i,s){return s<Hr(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(o,a,l,h,u){for(let c=0,d=l.length;c<d;++c){const p=l[c];u=Zp(o,a,p,h,u),a=p[p.length-1]}return u}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(o,a,l,h,u,c,d,p,f,g,m){m=m||[NaN,NaN];for(let y=0,_=l.length;y<_;++y){const v=l[y];g=Hp(o,a,v,h,u,!0,d,p,f,g,m),a=v[v.length-1]}return g}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,0,t,e,i,s))}containsXY(t,e){return function(s,r,o,a,l,h){if(0===o.length)return!1;for(let u=0,c=o.length;u<c;++u){const d=o[u];if(Kp(s,r,d,a,l,h))return!0;r=d[d.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return function(e,i,s,r){let o=0;for(let a=0,l=s.length;a<l;++a){const h=s[a];o+=u1(e,i,h,r),i=h[h.length-1]}return o}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),y1(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Yp(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=Vv(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=d1(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Yu(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;!function(i,s,r,o,a){for(let l=0,h=r.length;l<h;++l){const u=r[l];if(!m1(i,s,u,o,void 0))return!1;u.length&&(s=u[u.length-1])}return!0}(t,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=y1(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=function(r,o,a,l,h,u,c,d){for(let p=0,f=a.length;p<f;++p){const g=a[p],m=[];c=l1(r,o,g,l,h,u,c,m),d.push(m),o=g[g.length-1]}return c}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i),new $u(e,"XY",i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(0===t)e=0;else{const r=this.endss_[t-1];e=r[r.length-1]}const i=this.endss_[t].slice(),s=i[i.length-1];if(0!==e)for(let r=0,o=i.length;r<o;++r)i[r]-=e;return new ur(this.flatCoordinates.slice(e,s),this.layout,i)}getPolygons(){const t=this.layout,e=this.flatCoordinates,i=this.endss_,s=[];let r=0;for(let o=0,a=i.length;o<a;++o){const l=i[o].slice(),h=l[l.length-1];if(0!==r)for(let c=0,d=l.length;c<d;++c)l[c]-=r;const u=new ur(e.slice(r,h),t,l);s.push(u),r=h}return s}getType(){return"MultiPolygon"}intersectsExtent(t){return function(i,s,r,o,a){for(let l=0,h=r.length;l<h;++l){const u=r[l];if(g1(i,s,u,o,a))return!0;s=u[u.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=function(r,o,a,l,h){h=h||[];let u=0;for(let c=0,d=a.length;c<d;++c){const p=Up(r,o,a[c],l,h[u]);0===p.length&&(p[0]=o),h[u++]=p,o=p[p.length-1]}return h.length=u,h}(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{const s=i[i.length-1];this.flatCoordinates.length=0===s.length?0:s[s.length-1]}this.changed()}}const Ku=$u;function $f(n,t){if(!n)return null;let e;switch(n.type){case"Point":e=function(s){return new Os(s.coordinates)}(n);break;case"LineString":e=function(s){return new zs(s.coordinates)}(n);break;case"Polygon":e=function(s){return new ur(s.coordinates)}(n);break;case"MultiPoint":e=function(s){return new Yu(s.coordinates)}(n);break;case"MultiLineString":e=function(s){return new Xu(s.coordinates)}(n);break;case"MultiPolygon":e=function(s){return new Ku(s.coordinates)}(n);break;case"GeometryCollection":e=function(s,r){const o=s.geometries.map(function(a){return $f(a,void 0)});return new Uv(o)}(n);break;default:throw new Error("Unsupported GeoJSON type: "+n.type)}return Xf(e,!1,t)}function Kf(n,t){const e=(n=Xf(n,!0,t)).getType();let i;switch(e){case"Point":i=function(r,o){return{type:"Point",coordinates:r.getCoordinates()}}(n);break;case"LineString":i=function(r,o){return{type:"LineString",coordinates:r.getCoordinates()}}(n);break;case"Polygon":i=function(r,o){let a;return o&&(a=o.rightHanded),{type:"Polygon",coordinates:r.getCoordinates(a)}}(n,t);break;case"MultiPoint":i=function(r,o){return{type:"MultiPoint",coordinates:r.getCoordinates()}}(n);break;case"MultiLineString":i=function(r,o){return{type:"MultiLineString",coordinates:r.getCoordinates()}}(n);break;case"MultiPolygon":i=function(r,o){let a;return o&&(a=o.rightHanded),{type:"MultiPolygon",coordinates:r.getCoordinates(a)}}(n,t);break;case"GeometryCollection":i=function(r,o){return delete(o=Object.assign({},o)).featureProjection,{type:"GeometryCollection",geometries:r.getGeometriesArray().map(function(a){return Kf(a,o)})}}(n,t);break;case"Circle":i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+e)}return i}const Jf=class extends pS{constructor(t){t=t||{},super(),this.dataProjection=Ee(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=Ee(t.featureProjection)),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let i=null;i="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null};const s=$f(i.geometry,e),r=new Ns;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&r.setGeometryName(i.geometry_name),r.setGeometry(s),"id"in i&&r.setId(i.id),i.properties&&r.setProperties(i.properties,!0),r}readFeaturesFromObject(t,e){let i=null;if("FeatureCollection"===t.type){i=[];const s=t.features;for(let r=0,o=s.length;r<o;++r)i.push(this.readFeatureFromObject(s[r],e))}else i=[this.readFeatureFromObject(t,e)];return i}readGeometryFromObject(t,e){return $f(t,e)}readProjectionFromObject(t){const e=t.crs;let i;if(e)if("name"==e.type)i=Ee(e.properties.name);else{if("EPSG"!==e.type)throw new Error("Unknown SRS type");i=Ee("EPSG:"+e.properties.code)}else i=this.dataProjection;return i}writeFeatureObject(t,e){e=this.adaptOptions(e);const i={type:"Feature",geometry:null,properties:null},s=t.getId();if(void 0!==s&&(i.id=s),!t.hasProperties())return i;const r=t.getProperties(),o=t.getGeometry();return o&&(i.geometry=Kf(o,e),delete r[t.getGeometryName()]),Wr(r)||(i.properties=r),i}writeFeaturesObject(t,e){e=this.adaptOptions(e);const i=[];for(let s=0,r=t.length;s<r;++s)i.push(this.writeFeatureObject(t[s],e));return{type:"FeatureCollection",features:i}}writeGeometryObject(t,e){return Kf(t,this.adaptOptions(e))}};var fS=oi(463);function gS(n,t,e){if(3===n){const i={keys:[],values:[],features:[]},s=e.readVarint()+e.pos;e.readFields(mS,i,s),i.length=i.features.length,i.length&&(t[i.name]=i)}}function mS(n,t,e){if(15===n)t.version=e.readVarint();else if(1===n)t.name=e.readString();else if(5===n)t.extent=e.readVarint();else if(2===n)t.features.push(e.pos);else if(3===n)t.keys.push(e.readString());else if(4===n){let i=null;const s=e.readVarint()+e.pos;for(;e.pos<s;)i=1==(n=e.readVarint()>>3)?e.readString():2===n?e.readFloat():3===n?e.readDouble():4===n?e.readVarint64():5===n?e.readVarint():6===n?e.readSVarint():7===n?e.readBoolean():null;t.values.push(i)}}function yS(n,t,e){if(1==n)t.id=e.readVarint();else if(2==n){const i=e.readVarint()+e.pos;for(;e.pos<i;){const s=t.layer.keys[e.readVarint()],r=t.layer.values[e.readVarint()];t.properties[s]=r}}else 3==n?t.type=e.readVarint():4==n&&(t.geometry=e.pos)}function _S(n,t,e){n.pos=t.features[e];const i=n.readVarint()+n.pos,s={layer:t,type:0,properties:{}};return n.readFields(yS,s,i),s}const Qf=class extends Xv{constructor(t){super(),t=t||{},this.dataProjection=new Fs({code:"",units:"tile-pixels"}),this.featureClass_=t.featureClass?t.featureClass:Bf,this.geometryName_=t.geometryName,this.layerName_=t.layerName?t.layerName:"layer",this.layers_=t.layers?t.layers:null,this.idProperty_=t.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(t,e,i,s){t.pos=e.geometry;const r=t.readVarint()+t.pos;let o=1,a=0,l=0,h=0,u=0,c=0;for(;t.pos<r;){if(!a){const d=t.readVarint();o=7&d,a=d>>3}if(a--,1===o||2===o)l+=t.readSVarint(),h+=t.readSVarint(),1===o&&u>c&&(s.push(u),c=u),i.push(l,h),u+=2;else{if(7!==o)throw new Error("Invalid command found in the PBF");u>c&&(i.push(i[c],i[c+1]),u+=2)}}u>c&&(s.push(u),c=u)}createFeature_(t,e,i){const s=e.type;if(0===s)return null;let r;const o=e.properties;let a;this.idProperty_?(a=o[this.idProperty_],delete o[this.idProperty_]):a=e.id,o[this.layerName_]=e.layer.name;const l=[],h=[];this.readRawGeometry_(t,e,l,h);const u=function(d,p){let f;return 1===d?f=1===p?"Point":"MultiPoint":2===d?f=1===p?"LineString":"MultiLineString":3===d&&(f="Polygon"),f}(s,h.length);if(this.featureClass_===Bf)r=new this.featureClass_(u,l,h,o,a),r.transform(i.dataProjection);else{let c;if("Polygon"==u){const p=function(g,m){const y=[];let _=0,v=0;for(let x=0,w=m.length;x<w;++x){const C=m[x];if(Qp(g,_,C,2)){if(0===y.length)continue;y[y.length-1].push(m[v])}else y.push(m.slice(v,x+1));v=x+1,_=C}return y}(l,h);c=p.length>1?new Ku(l,"XY",p):new ur(l,"XY",h)}else c="Point"===u?new Os(l,"XY"):"LineString"===u?new zs(l,"XY"):"MultiPoint"===u?new Yu(l,"XY"):"MultiLineString"===u?new Xu(l,"XY",h):null;r=new this.featureClass_,this.geometryName_&&r.setGeometryName(this.geometryName_);const d=Xf(c,!1,i);r.setGeometry(d),void 0!==a&&r.setId(a),r.setProperties(o,!0)}return r}getType(){return"arraybuffer"}readFeatures(t,e){const i=this.layers_,s=Ee((e=this.adaptOptions(e)).dataProjection);s.setWorldExtent(e.extent),e.dataProjection=s;const r=new fS(t),o=r.readFields(gS,{}),a=[];for(const l in o){if(i&&!i.includes(l))continue;const h=o[l];s.setExtent(h?[0,0,h.extent,h.extent]:null);for(let u=0,c=h.length;u<c;++u){const d=_S(r,h,u),p=this.createFeature_(r,d,e);null!==p&&a.push(p)}}return a}readProjection(t){return this.dataProjection}setLayers(t){this.layers_=t}},vS=class extends bf{constructor(t){if(super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:Ee("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.tileJSON_=null,this.tileSize_=t.tileSize,t.url)if(t.jsonp)!function(i,s,r,o){const a=document.createElement("script"),l="olc_"+$t(s);function h(){delete window[l],a.parentNode.removeChild(a)}a.async=!0,a.src=i+(i.includes("?")?"&":"?")+"callback="+l;const u=setTimeout(function(){h(),r&&r()},1e4);window[l]=function(c){clearTimeout(u),h(),s(c)},document.head.appendChild(a)}(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const e=new XMLHttpRequest;e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",t.url),e.send()}else{if(!t.tileJSON)throw new Error("Either `url` or `tileJSON` options must be provided");this.handleTileJSONResponse(t.tileJSON)}}onXHRLoad_(t){const e=t.target;if(!e.status||e.status>=200&&e.status<300){let i;try{i=JSON.parse(e.responseText)}catch{return void this.handleTileJSONError()}this.handleTileJSONResponse(i)}else this.handleTileJSONError()}onXHRError_(t){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(t){const e=Ee("EPSG:4326"),i=this.getProjection();let s;if(void 0!==t.bounds){const a=cl(e,i);s=k_(t.bounds,a)}const r=Cl(i),o=Iu({extent:r,maxZoom:t.maxzoom||22,minZoom:t.minzoom||0,tileSize:this.tileSize_});if(this.tileGrid=o,this.tileUrlFunction=X1(t.tiles,o),t.attribution&&!this.getAttributions()){const a=void 0!==s?s:r;this.setAttributions(function(l){return yi(a,l.extent)?[t.attribution]:null})}this.tileJSON_=t,this.setState("ready")}handleTileJSONError(){this.setState("error")}};var $v=oi(414);let ql=0;const Ji=1<<ql++,me=1<<ql++,ca=1<<ql++,tg=1<<ql++,Vl=1<<ql++,is=Math.pow(2,5)-1,Kv={[Ji]:"boolean",[me]:"number",[ca]:"string",[tg]:"color",[Vl]:"number[]"},xS=Object.keys(Kv).map(Number).sort(tr);function Ju(n){const t=[];for(const e of xS)wS(n,e)&&t.push(Kv[e]);return 0===t.length?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function wS(n,t){return(n&t)===t}function Jv(n,t){return!!(n&t)}class xr{constructor(t,e){this.type=t,this.value=e}}class bS{constructor(t,e,...i){this.type=t,this.operator=e,this.args=i}}function Qv(){return{variables:new Set,properties:new Set}}function Qu(n,t){switch(typeof n){case"boolean":return new xr(Ji,n);case"number":return new xr(me,n);case"string":return new xr(ca,n)}if(!Array.isArray(n))throw new Error("Expression must be an array or a primitive value");if(0===n.length)throw new Error("Empty expression");if("string"==typeof n[0])return function(s,r){const o=s[0],a=CS[o];if(!a)throw new Error(`Unknown operator: ${o}`);return a(s,r)}(n,t);for(const i of n)if("number"!=typeof i)throw new Error("Expected an array of numbers");let e=Vl;return(3===n.length||4===n.length)&&(e|=tg),new xr(e,n)}const nt={Number:"number",String:"string",Get:"get",Var:"var",Any:"any",All:"all",Not:"!",Resolution:"resolution",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match"},CS={[nt.Number]:Ge(ei(1,1/0,is),me),[nt.String]:Ge(ei(1,1/0,is),ca),[nt.Get]:Ge(function(t,e){if(2!==t.length)throw new Error("Expected 1 argument for get operation");const i=Qu(t[1],e);if(!(i instanceof xr))throw new Error("Expected a literal argument for get operation");if("string"!=typeof i.value)throw new Error("Expected a string argument for get operation");return e.properties.add(i.value),[i]},is),[nt.Var]:Ge(function(t,e){if(2!==t.length)throw new Error("Expected 1 argument for var operation");const i=Qu(t[1],e);if(!(i instanceof xr))throw new Error("Expected a literal argument for var operation");if("string"!=typeof i.value)throw new Error("Expected a string argument for get operation");return e.variables.add(i.value),[i]},is),[nt.Resolution]:Ge(function(t,e){if(1!==t.length)throw new Error(`Expected no arguments for ${t[0]} operation`);return[]},me),[nt.Any]:Ge(ei(2,1/0,Ji),Ji),[nt.All]:Ge(ei(2,1/0,Ji),Ji),[nt.Not]:Ge(ei(1,1,Ji),Ji),[nt.Equal]:Ge(ei(2,2,is),Ji),[nt.NotEqual]:Ge(ei(2,2,is),Ji),[nt.GreaterThan]:Ge(ei(2,2,is),Ji),[nt.GreaterThanOrEqualTo]:Ge(ei(2,2,is),Ji),[nt.LessThan]:Ge(ei(2,2,is),Ji),[nt.LessThanOrEqualTo]:Ge(ei(2,2,is),Ji),[nt.Multiply]:Ge(ei(2,1/0,me),me),[nt.Divide]:Ge(ei(2,2,me),me),[nt.Add]:Ge(ei(2,1/0,me),me),[nt.Subtract]:Ge(ei(2,2,me),me),[nt.Clamp]:Ge(ei(3,3,me),me),[nt.Mod]:Ge(ei(2,2,me),me),[nt.Pow]:Ge(ei(2,2,me),me),[nt.Abs]:Ge(ei(1,1,me),me),[nt.Floor]:Ge(ei(1,1,me),me),[nt.Ceil]:Ge(ei(1,1,me),me),[nt.Round]:Ge(ei(1,1,me),me),[nt.Sin]:Ge(ei(1,1,me),me),[nt.Cos]:Ge(ei(1,1,me),me),[nt.Atan]:Ge(ei(1,2,me),me),[nt.Sqrt]:Ge(ei(1,1,me),me),[nt.Match]:Ge(ei(4,1/0,ca|me),is)};function ei(n,t,e){return function(i,s){const r=i[0],o=i.length-1;if(n===t){if(o!==n)throw new Error(`Expected ${n} argument${1===n?"":"s"} for operation ${r}, got ${o}`)}else if(o<n||o>t)throw new Error(`Expected ${n} to ${t} arguments for operation ${r}, got ${o}`);const a=new Array(o);for(let l=0;l<o;++l){const h=Qu(i[l+1],s);if(!Jv(e,h.type)){const u=Ju(e),c=Ju(h.type);throw new Error(`Unexpected type for argument ${l} of ${r} operation : got ${u} but expected ${c}`)}a[l]=h}return a}}function Ge(n,t){return function(e,i){const s=e[0],r=n(e,i);return new bS(t,s,...r)}}function wr(n,t,e){const i=Qu(n,e);if(!Jv(t,i.type)){const s=Ju(t),r=Ju(i.type);throw new Error(`Expected expression to be of type ${s}, got ${r}`)}return eo(i,e)}function eo(n,t){if(n instanceof xr)return function(){return n.value};const e=n.operator;switch(e){case nt.Number:case nt.String:return function(s,r){const o=s.operator,a=s.args.length,l=new Array(a);for(let h=0;h<a;++h)l[h]=eo(s.args[h],r);switch(o){case nt.Number:case nt.String:return h=>{for(let u=0;u<a;++u){const c=l[u](h);if(typeof c===o)return c}throw new Error(`Expected one of the values to be a ${o}`)};default:throw new Error(`Unsupported assertion operator ${o}`)}}(n,t);case nt.Get:case nt.Var:return function(s,r){const o=s.args[0];if(!(o instanceof xr))throw new Error("Expected literal name");const a=o.value;if("string"!=typeof a)throw new Error("Expected string name");switch(s.operator){case nt.Get:return l=>l.properties[a];case nt.Var:return l=>l.variables[a];default:throw new Error(`Unsupported accessor operator ${s.operator}`)}}(n);case nt.Resolution:return i=>i.resolution;case nt.Any:case nt.All:case nt.Not:return function(s,r){const o=s.operator,a=s.args.length,l=new Array(a);for(let h=0;h<a;++h)l[h]=eo(s.args[h],r);switch(o){case nt.Any:return h=>{for(let u=0;u<a;++u)if(l[u](h))return!0;return!1};case nt.All:return h=>{for(let u=0;u<a;++u)if(!l[u](h))return!1;return!0};case nt.Not:return h=>!l[0](h);default:throw new Error(`Unsupported logical operator ${o}`)}}(n,t);case nt.Equal:case nt.NotEqual:case nt.LessThan:case nt.LessThanOrEqualTo:case nt.GreaterThan:case nt.GreaterThanOrEqualTo:return function(s,r){const o=s.operator,a=eo(s.args[0],r),l=eo(s.args[1],r);switch(o){case nt.Equal:return h=>a(h)===l(h);case nt.NotEqual:return h=>a(h)!==l(h);case nt.LessThan:return h=>a(h)<l(h);case nt.LessThanOrEqualTo:return h=>a(h)<=l(h);case nt.GreaterThan:return h=>a(h)>l(h);case nt.GreaterThanOrEqualTo:return h=>a(h)>=l(h);default:throw new Error(`Unsupported comparison operator ${o}`)}}(n,t);case nt.Multiply:case nt.Divide:case nt.Add:case nt.Subtract:case nt.Clamp:case nt.Mod:case nt.Pow:case nt.Abs:case nt.Floor:case nt.Ceil:case nt.Round:case nt.Sin:case nt.Cos:case nt.Atan:case nt.Sqrt:return function(s,r){const o=s.operator,a=s.args.length,l=new Array(a);for(let h=0;h<a;++h)l[h]=eo(s.args[h],r);switch(o){case nt.Multiply:return h=>{let u=1;for(let c=0;c<a;++c)u*=l[c](h);return u};case nt.Divide:return h=>l[0](h)/l[1](h);case nt.Add:return h=>{let u=0;for(let c=0;c<a;++c)u+=l[c](h);return u};case nt.Subtract:return h=>l[0](h)-l[1](h);case nt.Clamp:return h=>{const u=l[0](h),c=l[1](h);if(u<c)return c;const d=l[2](h);return u>d?d:u};case nt.Mod:return h=>l[0](h)%l[1](h);case nt.Pow:return h=>Math.pow(l[0](h),l[1](h));case nt.Abs:return h=>Math.abs(l[0](h));case nt.Floor:return h=>Math.floor(l[0](h));case nt.Ceil:return h=>Math.ceil(l[0](h));case nt.Round:return h=>Math.round(l[0](h));case nt.Sin:return h=>Math.sin(l[0](h));case nt.Cos:return h=>Math.cos(l[0](h));case nt.Atan:return 2===a?h=>Math.atan2(l[0](h),l[1](h)):h=>Math.atan(l[0](h));case nt.Sqrt:return h=>Math.sqrt(l[0](h));default:throw new Error(`Unsupported numeric operator ${o}`)}}(n,t);case nt.Match:return function(s,r){const o=s.args.length,a=new Array(o);for(let l=0;l<o;++l)a[l]=eo(s.args[l],r);return l=>{const h=a[0](l);for(let u=1;u<o;u+=2)if(h===a[u](l))return a[u+1](l);return a[o-1](l)}}(n,t);default:throw new Error(`Unsupported operator ${e}`)}}function MS(n){return!0}function tx(n){const t=Qv(),e=n.length,i=new Array(e);for(let o=0;o<e;++o)i[o]=eg(n[o],t);const s={variables:{},properties:{},resolution:NaN},r=new Array(e);return function(o,a){s.properties=o.getPropertiesInternal(),s.resolution=a;for(let l=0;l<e;++l)r[l]=i[l](s);return r}}function eg(n,t){const e=Bl(n,"",t),i=Zl(n,"",t),s=function(h,u){const c="text-",d=br(h,c+"value",u);if(!d)return null;const p=Bl(h,c,u),f=Bl(h,c+"background-",u),g=Zl(h,c,u),m=Zl(h,c+"background-",u),y=br(h,c+"font",u),_=fn(h,c+"max-angle",u),v=fn(h,c+"offset-x",u),x=fn(h,c+"offset-y",u),w=Wl(h,c+"overflow",u),C=br(h,c+"placement",u),M=fn(h,c+"repeat",u),S=ec(h,c+"scale",u),F=Wl(h,c+"rotate-with-view",u),P=fn(h,c+"rotation",u),A=br(h,c+"align",u),T=br(h,c+"justify",u),$=br(h,c+"baseline",u),L=ix(h,c+"padding",u),D=new Wv({});return function(V){if(D.setText(d(V)),p&&D.setFill(p(V)),f&&D.setBackgroundFill(f(V)),g&&D.setStroke(g(V)),m&&D.setBackgroundStroke(m(V)),y&&D.setFont(y(V)),_&&D.setMaxAngle(_(V)),v&&D.setOffsetX(v(V)),x&&D.setOffsetY(x(V)),w&&D.setOverflow(w(V)),C){const z=C(V);if("point"!==z&&"line"!==z)throw new Error("Expected point or line for text-placement");D.setPlacement(z)}if(M&&D.setRepeat(M(V)),S&&D.setScale(S(V)),F&&D.setRotateWithView(F(V)),P&&D.setRotation(P(V)),A){const z=A(V);if("left"!==z&&"center"!==z&&"right"!==z&&"end"!==z&&"start"!==z)throw new Error("Expected left, right, center, start, or end for text-align");D.setTextAlign(z)}if(T){const z=T(V);if("left"!==z&&"right"!==z&&"center"!==z)throw new Error("Expected left, right, or center for text-justify");D.setJustify(z)}if($){const z=$(V);if("bottom"!==z&&"top"!==z&&"middle"!==z&&"alphabetic"!==z&&"hanging"!==z)throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");D.setTextBaseline(z)}return L&&D.setPadding(L(V)),D}}(n,t),r=(u=t,"icon-src"in(h=n)?function(d,p){const f="icon-",g=f+"src",m=rx(d[g],g),y=tc(d,f+"anchor",p),_=ec(d,f+"scale",p),v=fn(d,f+"opacity",p),x=tc(d,f+"displacement",p),w=fn(d,f+"rotation",p),C=Wl(d,f+"rotate-with-view",p),M=nx(d,f+"anchor-origin"),S=sx(d,f+"anchor-x-units"),F=sx(d,f+"anchor-y-units"),P=function(ut,N){const G=ut[N];if(void 0!==G)return ax(G,N)}(d,f+"color"),A=function(ut,N){const G=ut[N];if(void 0!==G){if("string"!=typeof G)throw new Error(`Expected a string for ${N}`);return G}}(d,f+"cross-origin"),T=function(ut,N){const G=ut[N];if(void 0!==G)return Hl(G,N)}(d,f+"offset"),$=nx(d,f+"offset-origin"),L=da(d,f+"width"),D=da(d,f+"height"),V=function(ut,N){const G=ut[N];if(void 0!==G){if("number"==typeof G)return Ki(G);if(!Array.isArray(G))throw new Error(`Expected a number or size array for ${N}`);if(2!==G.length||"number"!=typeof G[0]||"number"!=typeof G[1])throw new Error(`Expected a number or size array for ${N}`);return G}}(d,f+"size"),z=ig(d,f+"declutter"),K=new Vu({src:m,anchorOrigin:M,anchorXUnits:S,anchorYUnits:F,color:P,crossOrigin:A,offset:T,offsetOrigin:$,height:D,width:L,size:V,declutterMode:z});return function(lt){return v&&K.setOpacity(v(lt)),x&&K.setDisplacement(x(lt)),w&&K.setRotation(w(lt)),C&&K.setRotateWithView(C(lt)),_&&K.setScale(_(lt)),y&&K.setAnchor(y(lt)),K}}(h,u):"shape-points"in h?function(d,p){const f="shape-",g=f+"points",m=ox(d[g],g),y=Bl(d,f,p),_=Zl(d,f,p),v=ec(d,f+"scale",p),x=tc(d,f+"displacement",p),w=fn(d,f+"rotation",p),C=Wl(d,f+"rotate-with-view",p),M=da(d,f+"radius"),S=da(d,f+"radius1"),F=da(d,f+"radius2"),P=da(d,f+"angle"),A=ig(d,f+"declutter-mode"),T=new Gv({points:m,radius:M,radius1:S,radius2:F,angle:P,declutterMode:A});return function($){return y&&T.setFill(y($)),_&&T.setStroke(_($)),x&&T.setDisplacement(x($)),w&&T.setRotation(w($)),C&&T.setRotateWithView(C($)),v&&T.setScale(v($)),T}}(h,u):"circle-radius"in h?function(d,p){const f="circle-",g=Bl(d,f,p),m=Zl(d,f,p),y=fn(d,f+"radius",p),_=ec(d,f+"scale",p),v=tc(d,f+"displacement",p),x=fn(d,f+"rotation",p),w=Wl(d,f+"rotate-with-view",p),C=ig(d,f+"declutter-mode"),M=new ua({radius:5,declutterMode:C});return function(S){return y&&M.setRadius(y(S)),g&&M.setFill(g(S)),m&&M.setStroke(m(S)),v&&M.setDisplacement(v(S)),x&&M.setRotation(x(S)),w&&M.setRotateWithView(w(S)),_&&M.setScale(_(S)),M}}(h,u):null),o=fn(n,"z-index",t),a=new pn;var h,u;return function(l){let h=!0;if(e){const u=e(l);u&&(h=!1),a.setFill(u)}if(i){const u=i(l);u&&(h=!1),a.setStroke(u)}if(s){const u=s(l);u&&(h=!1),a.setText(u)}if(r){const u=r(l);u&&(h=!1),a.setImage(u)}return o&&a.setZIndex(o(l)),h?null:a}}function Bl(n,t,e){const i=ex(n,t+"fill-color",e);if(!i)return null;const s=new En;return function(r){const o=i(r);return"none"===o?null:(s.setColor(o),s)}}function Zl(n,t,e){const i=fn(n,t+"stroke-width",e),s=ex(n,t+"stroke-color",e);if(!i&&!s)return null;const r=br(n,t+"stroke-line-cap",e),o=br(n,t+"stroke-line-join",e),a=ix(n,t+"stroke-line-dash",e),l=fn(n,t+"stroke-line-dash-offset",e),h=fn(n,t+"stroke-miter-limit",e),u=new Tn;return function(c){if(s){const d=s(c);if("none"===d)return null;u.setColor(d)}if(i&&u.setWidth(i(c)),r){const d=r(c);if("butt"!==d&&"round"!==d&&"square"!==d)throw new Error("Expected butt, round, or square line cap");u.setLineCap(d)}if(o){const d=o(c);if("bevel"!==d&&"round"!==d&&"miter"!==d)throw new Error("Expected bevel, round, or miter line join");u.setLineJoin(d)}return a&&u.setLineDash(a(c)),l&&u.setLineDashOffset(l(c)),h&&u.setMiterLimit(h(c)),u}}function fn(n,t,e){if(!(t in n))return;const i=wr(n[t],me,e);return function(s){return ox(i(s),t)}}function br(n,t,e){if(!(t in n))return null;const i=wr(n[t],ca,e);return function(s){return rx(i(s),t)}}function Wl(n,t,e){if(!(t in n))return null;const i=wr(n[t],Ji,e);return function(s){const r=i(s);if("boolean"!=typeof r)throw new Error(`Expected a boolean for ${t}`);return r}}function ex(n,t,e){if(!(t in n))return null;const i=wr(n[t],tg|ca,e);return function(s){return ax(i(s),t)}}function ix(n,t,e){if(!(t in n))return null;const i=wr(n[t],Vl,e);return function(s){return Hl(i(s),t)}}function tc(n,t,e){if(!(t in n))return null;const i=wr(n[t],Vl,e);return function(s){const r=Hl(i(s),t);if(2!==r.length)throw new Error(`Expected two numbers for ${t}`);return r}}function ec(n,t,e){if(!(t in n))return null;const i=wr(n[t],Vl|me,e);return function(s){return function(o,a){if("number"==typeof o)return o;const l=Hl(o,a);if(2!==l.length)throw new Error(`Expected an array of two numbers for ${a}`);return l}(i(s),t)}}function da(n,t){const e=n[t];if(void 0!==e){if("number"!=typeof e)throw new Error(`Expected a number for ${t}`);return e}}function nx(n,t){const e=n[t];if(void 0!==e){if("bottom-left"!==e&&"bottom-right"!==e&&"top-left"!==e&&"top-right"!==e)throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return e}}function sx(n,t){const e=n[t];if(void 0!==e){if("pixels"!==e&&"fraction"!==e)throw new Error(`Expected pixels or fraction for ${t}`);return e}}function ig(n,t){const e=n[t];if(void 0!==e){if("string"!=typeof e)throw new Error(`Expected a string for ${t}`);if("declutter"!==e&&"obstacle"!==e&&"none"!==e)throw new Error(`Expected declutter, obstacle, or none for ${t}`);return e}}function Hl(n,t){if(!Array.isArray(n))throw new Error(`Expected an array for ${t}`);const e=n.length;for(let i=0;i<e;++i)if("number"!=typeof n[i])throw new Error(`Expected an array of numbers for ${t}`);return n}function rx(n,t){if("string"!=typeof n)throw new Error(`Expected a string for ${t}`);return n}function ox(n,t){if("number"!=typeof n)throw new Error(`Expected a number for ${t}`);return n}function ax(n,t){if("string"==typeof n)return n;const e=Hl(n,t),i=e.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return e}const lx=class extends wu{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=void 0!==t.declutter&&t.declutter,this.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new $v(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set("renderOrder",t)}setStyle(t){this.style_=function(i){if(void 0===i)return dS;if(!i)return null;if("function"==typeof i||i instanceof pn)return i;if(!Array.isArray(i))return tx([i]);if(0===i.length)return[];const s=i.length,r=i[0];if(r instanceof pn){const o=new Array(s);for(let a=0;a<s;++a){const l=i[a];if(!(l instanceof pn))throw new Error("Expected a list of style instances");o[a]=l}return o}if("style"in r){const o=new Array(s);for(let a=0;a<s;++a){const l=i[a];if(!("style"in l))throw new Error("Expected a list of rules with a style property");o[a]=l}return function(l){const h=function(d,p){const f=d.length,g=new Array(f);for(let m=0;m<f;++m){const y=d[m],_="filter"in y?wr(y.filter,Ji,p):MS;let v;if(Array.isArray(y.style)){const x=y.style.length;v=new Array(x);for(let w=0;w<x;++w)v[w]=eg(y.style[w],p)}else v=[eg(y.style,p)];g[m]={filter:_,styles:v}}return function(m){const y=[];let _=!1;for(let v=0;v<f;++v)if((0,g[v].filter)(m)&&(!d[v].else||!_)){_=!0;for(const x of g[v].styles){const w=x(m);w&&y.push(w)}}return y}}(l,Qv()),u={variables:{},properties:{},resolution:NaN};return function(c,d){return u.properties=c.getPropertiesInternal(),u.resolution=d,h(u)}}(o)}return tx(i)}(t),this.styleFunction_=null===t?void 0:function(i){let s;if("function"==typeof i)s=i;else{let r;Array.isArray(i)?r=i:(xe("function"==typeof i.getZIndex,"Expected an `Style` or an array of `Style`"),r=[i]),s=function(){return r}}return s}(this.style_),this.changed()}},Ul={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},ic=[Ul.FILL],Cr=[Ul.STROKE],io=[Ul.BEGIN_PATH],hx=[Ul.CLOSE_PATH],qt=Ul,ux=class{drawCustom(t,e,i,s){}drawGeometry(t){}setStyle(t){}drawCircle(t,e){}drawFeature(t,e){}drawGeometryCollection(t,e){}drawLineString(t,e){}drawMultiLineString(t,e){}drawMultiPoint(t,e){}drawMultiPolygon(t,e){}drawPoint(t,e){}drawPolygon(t,e){}drawText(t,e){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}},Xl=class extends ux{constructor(t,e,i,s){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return 1==e?t:t.map(function(i){return i*e})}appendFlatPointCoordinates(t,e){const i=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,r=this.coordinates;let o=r.length;for(let a=0,l=t.length;a<l;a+=e)s[0]=t[a],s[1]=t[a+1],ru(i,s)&&(r[o++]=s[0],r[o++]=s[1]);return o}appendFlatLineCoordinates(t,e,i,s,r,o){const a=this.coordinates;let l=a.length;const h=this.getBufferedMaxExtent();o&&(e+=s);let u=t[e],c=t[e+1];const d=this.tmpCoordinate_;let p,f,g,m=!0;for(p=e+s;p<i;p+=s)d[0]=t[p],d[1]=t[p+1],g=Cp(h,d),g!==f?(m&&(a[l++]=u,a[l++]=c,m=!1),a[l++]=d[0],a[l++]=d[1]):g===Vi.INTERSECTING?(a[l++]=d[0],a[l++]=d[1],m=!1):m=!0,u=d[0],c=d[1],f=g;return(r&&m||p===e+s)&&(a[l++]=u,a[l++]=c),l}drawCustomCoordinates_(t,e,i,s,r){for(let o=0,a=i.length;o<a;++o){const l=i[o],h=this.appendFlatLineCoordinates(t,e,l,s,!1,!1);r.push(h),e=l}return e}drawCustom(t,e,i,s){this.beginGeometry(t,e);const r=t.getType(),o=t.getStride(),a=this.coordinates.length;let l,h,u,c,d;switch(r){case"MultiPolygon":l=t.getOrientedFlatCoordinates(),c=[];const p=t.getEndss();d=0;for(let f=0,g=p.length;f<g;++f){const m=[];d=this.drawCustomCoordinates_(l,d,p[f],o,m),c.push(m)}this.instructions.push([qt.CUSTOM,a,c,t,i,Yp]),this.hitDetectionInstructions.push([qt.CUSTOM,a,c,t,s||i,Yp]);break;case"Polygon":case"MultiLineString":u=[],l="Polygon"==r?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),d=this.drawCustomCoordinates_(l,0,t.getEnds(),o,u),this.instructions.push([qt.CUSTOM,a,u,t,i,fl]),this.hitDetectionInstructions.push([qt.CUSTOM,a,u,t,s||i,fl]);break;case"LineString":case"Circle":l=t.getFlatCoordinates(),h=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([qt.CUSTOM,a,h,t,i,hr]),this.hitDetectionInstructions.push([qt.CUSTOM,a,h,t,s||i,hr]);break;case"MultiPoint":l=t.getFlatCoordinates(),h=this.appendFlatPointCoordinates(l,o),h>a&&(this.instructions.push([qt.CUSTOM,a,h,t,i,hr]),this.hitDetectionInstructions.push([qt.CUSTOM,a,h,t,s||i,hr]));break;case"Point":l=t.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),h=this.coordinates.length,this.instructions.push([qt.CUSTOM,a,h,t,i]),this.hitDetectionInstructions.push([qt.CUSTOM,a,h,t,s||i])}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[qt.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[qt.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let e;t.reverse();const i=t.length;let s,r,o=-1;for(e=0;e<i;++e)s=t[e],r=s[0],r==qt.END_GEOMETRY?o=e:r==qt.BEGIN_GEOMETRY&&(s[2]=e,rC(this.hitDetectionInstructions,o,e),o=-1)}setFillStrokeStyle(t,e){const i=this.state;if(t){const s=t.getColor();i.fillStyle=ys(s||cn)}else i.fillStyle=void 0;if(e){const s=e.getColor();i.strokeStyle=ys(s||_l);const r=e.getLineCap();i.lineCap=void 0!==r?r:Zo;const o=e.getLineDash();i.lineDash=o?o.slice():As;const a=e.getLineDashOffset();i.lineDashOffset=a||0;const l=e.getLineJoin();i.lineJoin=void 0!==l?l:Wo;const h=e.getWidth();i.lineWidth=void 0!==h?h:1;const u=e.getMiterLimit();i.miterLimit=void 0!==u?u:10,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){const e=t.fillStyle,i=[qt.SET_FILL_STYLE,e];return"string"!=typeof e&&i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[qt.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const i=t.fillStyle;("string"!=typeof i||t.currentFillStyle!=i)&&(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){const i=t.strokeStyle,s=t.lineCap,r=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,l=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=s||r!=t.currentLineDash&&!er(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=l||t.currentMiterLimit!=h)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=s,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=l,t.currentMiterLimit=h)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[qt.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=M_(this.maxExtent),this.maxLineWidth>0)&&nr(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}},cx=class extends Xl{constructor(t,e,i,s){super(t,e,i,s)}drawFlatCoordinatess_(t,e,i,s){const r=this.state,o=void 0!==r.fillStyle,a=void 0!==r.strokeStyle,l=i.length;this.instructions.push(io),this.hitDetectionInstructions.push(io);for(let h=0;h<l;++h){const u=i[h],c=this.coordinates.length,d=this.appendFlatLineCoordinates(t,e,u,s,!0,!a),p=[qt.MOVE_TO_LINE_TO,c,d];this.instructions.push(p),this.hitDetectionInstructions.push(p),a&&(this.instructions.push(hx),this.hitDetectionInstructions.push(hx)),e=u}return o&&(this.instructions.push(ic),this.hitDetectionInstructions.push(ic)),a&&(this.instructions.push(Cr),this.hitDetectionInstructions.push(Cr)),e}drawCircle(t,e){const i=this.state;if(void 0===i.fillStyle&&void 0===i.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([qt.SET_FILL_STYLE,cn]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([qt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,As,0]);const s=t.getFlatCoordinates(),r=t.getStride(),o=this.coordinates.length;this.appendFlatLineCoordinates(s,0,s.length,r,!1,!1);const a=[qt.CIRCLE,o];this.instructions.push(io,a),this.hitDetectionInstructions.push(io,a),void 0!==i.fillStyle&&(this.instructions.push(ic),this.hitDetectionInstructions.push(ic)),void 0!==i.strokeStyle&&(this.instructions.push(Cr),this.hitDetectionInstructions.push(Cr)),this.endGeometry(e)}drawPolygon(t,e){const i=this.state;if(void 0===i.fillStyle&&void 0===i.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([qt.SET_FILL_STYLE,cn]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([qt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,As,0]);const s=t.getEnds(),r=t.getOrientedFlatCoordinates(),o=t.getStride();this.drawFlatCoordinatess_(r,0,s,o),this.endGeometry(e)}drawMultiPolygon(t,e){const i=this.state;if(void 0===i.fillStyle&&void 0===i.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([qt.SET_FILL_STYLE,cn]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([qt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,As,0]);const s=t.getEndss(),r=t.getOrientedFlatCoordinates(),o=t.getStride();let a=0;for(let l=0,h=s.length;l<h;++l)a=this.drawFlatCoordinatess_(r,a,s[l],o);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const e=this.coordinates;for(let i=0,s=e.length;i<s;++i)e[i]=$r(e[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}};function SS(n,t,e,i,s){const r=[];let o=e,a=0,l=t.slice(e,2);for(;a<n&&o+s<i;){const[h,u]=l.slice(-2),c=t[o+s],d=t[o+s+1],p=Math.sqrt((c-h)*(c-h)+(d-u)*(d-u));if(a+=p,a>=n){const f=(n-a+p)/p,g=Cn(h,c,f),m=Cn(u,d,f);l.push(g,m),r.push(l),l=[g,m],a==n&&(o+=s),a=0}else if(a<n)l.push(t[o+s],t[o+s+1]),o+=s;else{const f=p-a,g=Cn(h,c,f/p),m=Cn(u,d,f/p);l.push(g,m),r.push(l),l=[g,m],a=0,o+=s}}return a>0&&r.push(l),r}function ES(n,t,e,i,s){let r,o,a,l,h,u,c,d,p,f,g=e,m=e,y=0,_=0,v=e;for(o=e;o<i;o+=s){const x=t[o],w=t[o+1];void 0!==h&&(p=x-h,f=w-u,l=Math.sqrt(p*p+f*f),void 0!==c&&(_+=a,r=Math.acos((c*p+d*f)/(a*l)),r>n&&(_>y&&(y=_,g=v,m=o),_=0,v=o-s)),a=l,c=p,d=f),h=x,u=w}return _+=l,_>y?[v,o]:[g,m]}const nc={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},TS={Circle:cx,Default:Xl,Image:class extends Xl{constructor(t,e,i,s){super(t,e,i,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),s=t.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([qt.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([qt.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),s=t.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([qt.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([qt.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const i=t.getAnchor(),s=t.getSize(),r=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=s[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}},LineString:class extends Xl{constructor(t,e,i,s){super(t,e,i,s)}drawFlatCoordinates_(t,e,i,s){const r=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,i,s,!1,!1),a=[qt.MOVE_TO_LINE_TO,r,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(t,e){const i=this.state;if(void 0===i.strokeStyle||void 0===i.lineWidth)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([qt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,As,0],io);const s=t.getFlatCoordinates(),r=t.getStride();this.drawFlatCoordinates_(s,0,s.length,r),this.hitDetectionInstructions.push(Cr),this.endGeometry(e)}drawMultiLineString(t,e){const i=this.state;if(void 0===i.strokeStyle||void 0===i.lineWidth)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([qt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,As,0],io);const s=t.getEnds(),r=t.getFlatCoordinates(),o=t.getStride();let a=0;for(let l=0,h=s.length;l<h;++l)a=this.drawFlatCoordinates_(r,a,s[l],o);this.hitDetectionInstructions.push(Cr),this.endGeometry(e)}finish(){const t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Cr),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(Cr),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(io)}},Polygon:cx,Text:class extends Xl{constructor(t,e,i,s){super(t,e,i,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[cn]={fillStyle:cn},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){const i=this.textState_;if(""===this.text_||!i||!this.textFillState_&&!this.textStrokeState_)return;const s=this.coordinates;let r=s.length;const o=t.getType();let a=null,l=t.getStride();if("line"!==i.placement||"LineString"!=o&&"MultiLineString"!=o&&"Polygon"!=o&&"MultiPolygon"!=o){let h=i.overflow?null:[];switch(o){case"Point":case"MultiPoint":a=t.getFlatCoordinates();break;case"LineString":a=t.getFlatMidpoint();break;case"Circle":a=t.getCenter();break;case"MultiLineString":a=t.getFlatMidpoints(),l=2;break;case"Polygon":a=t.getFlatInteriorPoint(),i.overflow||h.push(a[2]/this.resolution),l=3;break;case"MultiPolygon":const g=t.getFlatInteriorPoints();a=[];for(let m=0,y=g.length;m<y;m+=3)i.overflow||h.push(g[m+2]/this.resolution),a.push(g[m],g[m+1]);if(0===a.length)return;l=2}const u=this.appendFlatPointCoordinates(a,l);if(u===r)return;if(h&&(u-r)/2!=a.length/l){let g=r/2;h=h.filter((m,y)=>{const _=s[2*(g+y)]===a[y*l]&&s[2*(g+y)+1]===a[y*l+1];return _||--g,_})}this.saveTextStates_(),(i.backgroundFill||i.backgroundStroke)&&(this.setFillStrokeStyle(i.backgroundFill,i.backgroundStroke),i.backgroundFill&&this.updateFillStyle(this.state,this.createFill),i.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let c=i.padding;if(c!=Jr&&(i.scale[0]<0||i.scale[1]<0)){let g=i.padding[0],m=i.padding[1],y=i.padding[2],_=i.padding[3];i.scale[0]<0&&(m=-m,_=-_),i.scale[1]<0&&(g=-g,y=-y),c=[g,m,y,_]}const d=this.pixelRatio;this.instructions.push([qt.DRAW_IMAGE,r,u,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,c==Jr?Jr:c.map(function(g){return g*d}),!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]);const p=1/d,f=this.state.fillStyle;i.backgroundFill&&(this.state.fillStyle=cn,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([qt.DRAW_IMAGE,r,u,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[p,p],NaN,void 0,this.declutterImageWithText_,c,!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?cn:this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]),i.backgroundFill&&(this.state.fillStyle=f,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}else{if(!yi(this.getBufferedMaxExtent(),t.getExtent()))return;let h;if(a=t.getFlatCoordinates(),"LineString"==o)h=[a.length];else if("MultiLineString"==o)h=t.getEnds();else if("Polygon"==o)h=t.getEnds().slice(0,1);else if("MultiPolygon"==o){const p=t.getEndss();h=[];for(let f=0,g=p.length;f<g;++f)h.push(p[f][0])}this.beginGeometry(t,e);const u=i.repeat,c=u?void 0:i.textAlign;let d=0;for(let p=0,f=h.length;p<f;++p){let g;g=u?SS(u*this.resolution,a,d,h[p],l):[a.slice(d,h[p])];for(let m=0,y=g.length;m<y;++m){const _=g[m];let v=0,x=_.length;if(null==c){const C=ES(i.maxAngle,_,0,_.length,2);v=C[0],x=C[1]}for(let C=v;C<x;C+=l)s.push(_[C],_[C+1]);const w=s.length;d=h[p],this.drawChars_(r,w),r=w}}this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,s=this.strokeKey_;t&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:e.font,textAlign:e.textAlign||vl,justify:e.justify,textBaseline:e.textBaseline||Eu,scale:e.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(t,e){const i=this.textStrokeState_,s=this.textState_,r=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,h=nc[s.textBaseline],u=this.textOffsetY_*l,c=this.text_,d=i?i.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([qt.DRAW_CHARS,t,e,h,s.overflow,a,s.maxAngle,l,u,r,d*l,c,o,1]),this.hitDetectionInstructions.push([qt.DRAW_CHARS,t,e,h,s.overflow,a&&cn,s.maxAngle,l,u,r,d*l,c,o,1/l])}setTextStyle(t,e){let i,s,r;if(t){const o=t.getFill();o?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=ys(o.getColor()||cn)):(s=null,this.textFillState_=s);const a=t.getStroke();if(a){r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const f=a.getLineDash(),g=a.getLineDashOffset(),m=a.getWidth(),y=a.getMiterLimit();r.lineCap=a.getLineCap()||Zo,r.lineDash=f?f.slice():As,r.lineDashOffset=void 0===g?0:g,r.lineJoin=a.getLineJoin()||Wo,r.lineWidth=void 0===m?1:m,r.miterLimit=void 0===y?10:y,r.strokeStyle=ys(a.getColor()||_l)}else r=null,this.textStrokeState_=r;i=this.textState_;const l=t.getFont()||M1;S1(l);const h=t.getScaleArray();i.overflow=t.getOverflow(),i.font=l,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||Eu,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Jr,i.scale=void 0===h?[1,1]:h;const u=t.getOffsetX(),c=t.getOffsetY(),d=t.getRotateWithView(),p=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===u?0:u,this.textOffsetY_=void 0===c?0:c,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0===p?0:p,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:$t(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=s?"string"==typeof s.fillStyle?s.fillStyle:"|"+$t(s.fillStyle):""}else this.text_="";this.declutterImageWithText_=e}}},sc=class{constructor(t,e,i,s){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=s,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const i=this.buildersByZIndex_[e];for(const s in i){const r=i[s].finish();t[e][s]=r}}return t}getBuilder(t,e){const i=void 0!==t?t.toString():"0";let s=this.buildersByZIndex_[i];void 0===s&&(s={},this.buildersByZIndex_[i]=s);let r=s[e];return void 0===r&&(r=new TS[e](this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[e]=r),r}},kS=class extends f_{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return Zt()}getData(t){return null}prepareFrame(t){return Zt()}renderFrame(t,e){return Zt()}loadedTileCallback(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i}createLoadedTileFinder(t,e,i){return(s,r)=>{const o=this.loadedTileCallback.bind(this,i,s);return t.forEachLoadedTile(e,s,r,o)}}forEachFeatureAtCoordinate(t,e,i,s,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const e=t.target;(2===e.getState()||3===e.getState())&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return 2!=e&&3!=e&&t.addEventListener("change",this.boundHandleImageChange_),0==e&&(t.load(),e=t.getState()),2==e}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}},dx=[];let pa=null;const px=class extends kS{constructor(t){super(t),this.container=null,this.tempTransform=[1,0,0,1,0,0],this.pixelTransform=[1,0,0,1,0,0],this.inversePixelTransform=[1,0,0,1,0,0],this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,i){let s;pa||(pa=Wi(1,1,void 0,{willReadFrequently:!0})),pa.clearRect(0,0,1,1);try{pa.drawImage(t,e,i,1,1,0,0,1,1),s=pa.getImageData(0,0,1,1).data}catch{return pa=null,null}return s}getBackground(t){let e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0}useContainer(t,e,i){const s=this.getLayer().getClassName();let r,o;if(t&&t.className===s&&(!i||t&&t.style.backgroundColor&&er(uu(t.style.backgroundColor),uu(i)))){const a=t.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){r=document.createElement("div"),r.className=s;let a=r.style;a.position="absolute",a.width="100%",a.height="100%",o=Wi();const l=o.canvas;r.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=r,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(t,e,i){const s=Dn(i),r=ll(i),o=al(i),a=No(i);ji(e.coordinateToPixelTransform,s),ji(e.coordinateToPixelTransform,r),ji(e.coordinateToPixelTransform,o),ji(e.coordinateToPixelTransform,a);const l=this.inversePixelTransform;ji(l,s),ji(l,r),ji(l,o),ji(l,a),t.save(),t.beginPath(),t.moveTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}dispatchRenderEvent_(t,e,i){const s=this.getLayer();if(s.hasListener(t)){const r=new _1(t,this.inversePixelTransform,i,e);s.dispatchEvent(r)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_("prerender",t,e)}postRender(t,e){this.dispatchRenderEvent_("postrender",t,e)}getRenderTransform(t,e,i,s,r,o,a){const l=s/e;return Ps(this.tempTransform,r/2,o/2,l,-l,-i,-t[0]+a,-t[1])}disposeInternal(){delete this.frameState,super.disposeInternal()}};function IS(n,t,e,i,s,r,o,a,l,h,u,c){let d=n[t],p=n[t+1],f=0,g=0,m=0,y=0;function _(){f=d,g=p,d=n[t+=i],p=n[t+1],y+=m,m=Math.sqrt((d-f)*(d-f)+(p-g)*(p-g))}do{_()}while(t<e-i&&y+m<r);let v=0===m?0:(r-y)/m;const x=Cn(f,d,v),w=Cn(g,p,v),C=t-i,M=y,S=r+a*l(h,s,u);for(;t<e-i&&y+m<S;)_();v=0===m?0:(S-y)/m;const F=Cn(f,d,v),P=Cn(g,p,v);let A;if(c){const V=[x,w,F,P];Vp(V,0,4,2,c,V,V),A=V[0]>V[2]}else A=x>F;const T=Math.PI,$=[],L=C+i===t;let D;if(m=0,y=M,d=n[t=C],p=n[t+1],L)return _(),D=Math.atan2(p-g,d-f),A&&(D+=D>0?-T:T),$[0]=[(F+x)/2,(P+w)/2,(S-r)/2,D,s],$;for(let V=0,z=(s=s.replace(/\n/g," ")).length;V<z;){_();let K=Math.atan2(p-g,d-f);if(A&&(K+=K>0?-T:T),void 0!==D){let mt=K-D;if(mt+=mt>T?-2*T:mt<-T?2*T:0,Math.abs(mt)>o)return null}D=K;const lt=V;let ut=0;for(;V<z;++V){const mt=a*l(h,s[A?z-V-1:V],u);if(t+i<e&&y+m<r+ut+mt/2)break;ut+=mt}if(V===lt)continue;const N=A?s.substring(z-lt,z-V):s.substring(lt,V);v=0===m?0:(r+ut/2-y)/m;const G=Cn(f,d,v),Et=Cn(g,p,v);$.push([G,Et,ut/2,K,N]),r+=ut}return $}const fa=[1/0,1/0,-1/0,-1/0],Mr=[],js=[],Gs=[],Sr=[];function fx(n){return n[3].declutterBox}const gx=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function ng(n,t){return"start"===t?t=gx.test(n)?"right":"left":"end"===t&&(t=gx.test(n)?"left":"right"),nc[t]}function PS(n,t,e){return e>0&&n.push("\n",""),n.push(t,""),n}const RS=class{constructor(t,e,i,s){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,i,s){const r=t+e+i+s;if(this.labels_[r])return this.labels_[r];const o=s?this.strokeStates[s]:null,a=i?this.fillStates[i]:null,l=this.textStates[e],h=this.pixelRatio,u=[l.scale[0]*h,l.scale[1]*h],c=Array.isArray(t),d=l.justify?nc[l.justify]:ng(Array.isArray(t)?t[0]:t,l.textAlign||vl),p=s&&o.lineWidth?o.lineWidth:0,f=c?t:t.split("\n").reduce(PS,[]),{width:g,height:m,widths:y,heights:_,lineWidths:v}=function(lt,ut){const N=[],G=[],Et=[];let mt=0,Ut=0,ce=0,ye=0;for(let we=0,De=ut.length;we<=De;we+=2){const ii=ut[we];if("\n"===ii||we===De){mt=Math.max(mt,Ut),Et.push(Ut),Ut=0,ce+=ye;continue}const st=ut[we+1]||lt.font,pi=Tu(st,ii);N.push(pi),Ut+=pi;const _i=LC(st);G.push(_i),ye=Math.max(ye,_i)}return{width:mt,height:ce,widths:N,heights:G,lineWidths:Et}}(l,f),x=g+p,w=[],C=(x+2)*u[0],M=(m+p)*u[1],S={width:C<0?Math.floor(C):Math.ceil(C),height:M<0?Math.floor(M):Math.ceil(M),contextInstructions:w};(1!=u[0]||1!=u[1])&&w.push("scale",u),s&&(w.push("strokeStyle",o.strokeStyle),w.push("lineWidth",p),w.push("lineCap",o.lineCap),w.push("lineJoin",o.lineJoin),w.push("miterLimit",o.miterLimit),w.push("setLineDash",[o.lineDash]),w.push("lineDashOffset",o.lineDashOffset)),i&&w.push("fillStyle",a.fillStyle),w.push("textBaseline","middle"),w.push("textAlign","center");const F=.5-d;let P=d*x+F*p;const A=[],T=[];let $,L=0,D=0,V=0,z=0;for(let K=0,lt=f.length;K<lt;K+=2){const ut=f[K];if("\n"===ut){D+=L,L=0,P=d*x+F*p,++z;continue}const N=f[K+1]||l.font;N!==$&&(s&&A.push("font",N),i&&T.push("font",N),$=N),L=Math.max(L,_[V]);const G=[ut,P+F*y[V]+d*(y[V]-v[z]),.5*(p+L)+D];P+=y[V],s&&A.push("strokeText",G),i&&T.push("fillText",G),++V}return Array.prototype.push.apply(w,A),Array.prototype.push.apply(w,T),this.labels_[r]=S,S}replayTextBackground_(t,e,i,s,r,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,s),t.lineTo.apply(t,r),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,s,r,o,a,l,h,u,c,d,p,f,g,m){let y=i-(a*=d[0]),_=s-(l*=d[1]);const v=r+h>t?t-h:r,x=o+u>e?e-u:o,w=f[3]+v*d[0]+f[1],C=f[0]+x*d[1]+f[2],M=y-f[3],S=_-f[0];let F;return(g||0!==c)&&(Mr[0]=M,Sr[0]=M,Mr[1]=S,js[1]=S,js[0]=M+w,Gs[0]=js[0],Gs[1]=S+C,Sr[1]=Gs[1]),0!==c?(F=Ps([1,0,0,1,0,0],i,s,1,1,c,-i,-s),ji(F,Mr),ji(F,js),ji(F,Gs),ji(F,Sr),cs(Math.min(Mr[0],js[0],Gs[0],Sr[0]),Math.min(Mr[1],js[1],Gs[1],Sr[1]),Math.max(Mr[0],js[0],Gs[0],Sr[0]),Math.max(Mr[1],js[1],Gs[1],Sr[1]),fa)):cs(Math.min(M,M+w),Math.min(S,S+C),Math.max(M,M+w),Math.max(S,S+C),fa),p&&(y=Math.round(y),_=Math.round(_)),{drawImageX:y,drawImageY:_,drawImageW:v,drawImageH:x,originX:h,originY:u,declutterBox:{minX:fa[0],minY:fa[1],maxX:fa[2],maxY:fa[3],value:m},canvasTransform:F,scale:d}}replayImageOrLabel_(t,e,i,s,r,o,a){const l=s.declutterBox,h=t.canvas,u=a?a[2]*s.scale[0]/2:0;return l.minX-u<=h.width/e&&l.maxX+u>=0&&l.minY-u<=h.height/e&&l.maxY+u>=0&&(!(!o&&!a)&&this.replayTextBackground_(t,Mr,js,Gs,Sr,o,a),p=s.canvasTransform,f=r,g=i,m=s.originX,y=s.originY,_=s.drawImageW,v=s.drawImageH,x=s.drawImageX,w=s.drawImageY,C=s.scale,(d=t).save(),1!==f&&(d.globalAlpha*=f),p&&d.transform.apply(d,p),g.contextInstructions?(d.translate(x,w),d.scale(C[0],C[1]),function(S,F){const P=S.contextInstructions;for(let A=0,T=P.length;A<T;A+=2)Array.isArray(P[A+1])?F[P[A]].apply(F,P[A+1]):F[P[A]]=P[A+1]}(g,d)):C[0]<0||C[1]<0?(d.translate(x,w),d.scale(C[0],C[1]),d.drawImage(g,m,y,_,v,0,0,_,v)):d.drawImage(g,m,y,_,v,x,w,_*C[0],v*C[1]),d.restore()),!0;var d,p,f,g,m,y,_,v,x,w,C}fill_(t){if(this.alignFill_){const e=ji(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,i,s){const r=this.textStates[e],o=this.createLabel(t,e,s,i),a=this.strokeStates[i],l=this.pixelRatio,h=ng(Array.isArray(t)?t[0]:t,r.textAlign||vl),u=nc[r.textBaseline||Eu],c=a&&a.lineWidth?a.lineWidth:0;return{label:o,anchorX:h*(o.width/l-2*r.scale[0])+2*(.5-h)*c,anchorY:u*o.height/l+2*(.5-u)*c}}execute_(t,e,i,s,r,o,a,l){let h;var Et,mt;this.pixelCoordinates_&&er(i,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=ar(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),(Et=this.renderedTransform_)[0]=(mt=i)[0],Et[1]=mt[1],Et[2]=mt[2],Et[3]=mt[3],Et[4]=mt[4],Et[5]=mt[5]);let u=0;const c=s.length;let d,p,f,g,m,y,_,v,x,w,C,M,S=0,F=0,P=0,A=null,T=null;const $=this.coordinateCache_,L=this.viewRotation_,D=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,V={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:L},z=this.instructions!=s||this.overlaps?0:200;let K,lt,ut,N;for(;u<c;){const G=s[u];switch(G[0]){case qt.BEGIN_GEOMETRY:K=G[1],N=G[3],K.getGeometry()?void 0===a||yi(a,N.getExtent())?++u:u=G[2]+1:u=G[2];break;case qt.BEGIN_PATH:F>z&&(this.fill_(t),F=0),P>z&&(t.stroke(),P=0),!F&&!P&&(t.beginPath(),g=NaN,m=NaN),++u;break;case qt.CIRCLE:S=G[1];const Et=h[S],mt=h[S+1],Ut=h[S+2]-Et,ce=h[S+3]-mt,ye=Math.sqrt(Ut*Ut+ce*ce);t.moveTo(Et+ye,mt),t.arc(Et,mt,ye,0,2*Math.PI,!0),++u;break;case qt.CLOSE_PATH:t.closePath(),++u;break;case qt.CUSTOM:S=G[1],d=G[2];const we=G[4],De=6==G.length?G[5]:void 0;V.geometry=G[3],V.feature=K,u in $||($[u]=[]);const ii=$[u];De?De(h,S,d,2,ii):(ii[0]=h[S],ii[1]=h[S+1],ii.length=2),we(ii,V),++u;break;case qt.DRAW_IMAGE:S=G[1],d=G[2],v=G[3],p=G[4],f=G[5];let st=G[6];const pi=G[7],_i=G[8],Ne=G[9],se=G[10];let de=G[11];const vi=G[12];let he=G[13];const fi=G[14],Xi=G[15];if(!v&&G.length>=20){x=G[19],w=G[20],C=G[21],M=G[22];const gi=this.drawLabelWithPointPlacement_(x,w,C,M);v=gi.label,G[3]=v,p=(gi.anchorX-G[23])*this.pixelRatio,G[4]=p,f=(gi.anchorY-G[24])*this.pixelRatio,G[5]=f,st=v.height,G[6]=st,he=v.width,G[13]=he}let qi,He,oe,Ai;G.length>25&&(qi=G[25]),G.length>17?(He=G[16],oe=G[17],Ai=G[18]):(He=Jr,oe=!1,Ai=!1),se&&D?de+=L:!se&&!D&&(de-=L);let $e=0;for(;S<d;S+=2){if(qi&&qi[$e++]<he/this.pixelRatio)continue;const gi=this.calculateImageOrLabelDimensions_(v.width,v.height,h[S],h[S+1],he,st,p,f,_i,Ne,de,vi,r,He,oe||Ai,K),ws=[t,e,v,gi,pi,oe?A:null,Ai?T:null];if(l){if("none"===fi)continue;if("obstacle"===fi){l.insert(gi.declutterBox);continue}{let an,Pr;if(Xi){const Zs=d-S;if(!Xi[Zs]){Xi[Zs]=ws;continue}if(an=Xi[Zs],delete Xi[Zs],Pr=fx(an),l.collides(Pr))continue}if(l.collides(gi.declutterBox))continue;an&&(l.insert(Pr),this.replayImageOrLabel_.apply(this,an)),l.insert(gi.declutterBox)}}this.replayImageOrLabel_.apply(this,ws)}++u;break;case qt.DRAW_CHARS:const Ue=G[1],ke=G[2],Pe=G[3],be=G[4];M=G[5];const Kt=G[6],ci=G[7],xi=G[8];C=G[9];const wi=G[10];x=G[11],w=G[12];const Bi=[G[13],G[13]],mn=this.textStates[w],Qi=mn.font,qe=[mn.scale[0]*ci,mn.scale[1]*ci];let Ti;Qi in this.widths_?Ti=this.widths_[Qi]:(Ti={},this.widths_[Qi]=Ti);const on=Yv(h,Ue,ke,2),Li=Math.abs(qe[0])*T1(Qi,x,Ti);if(be||Li<=on){const gi=IS(h,Ue,ke,2,x,(on-Li)*ng(x,this.textStates[w].textAlign),Kt,Math.abs(qe[0]),T1,Qi,Ti,D?0:this.viewRotation_);t:if(gi){const ws=[];let an,Pr,Zs,yn,qn;if(C)for(an=0,Pr=gi.length;an<Pr;++an){qn=gi[an],Zs=qn[4],yn=this.createLabel(Zs,w,"",C),p=qn[2]+(qe[0]<0?-wi:wi),f=Pe*yn.height+2*(.5-Pe)*wi*qe[1]/qe[0]-xi;const Ws=this.calculateImageOrLabelDimensions_(yn.width,yn.height,qn[0],qn[1],yn.width,yn.height,p,f,0,0,qn[3],Bi,!1,Jr,!1,K);if(l&&l.collides(Ws.declutterBox))break t;ws.push([t,e,yn,Ws,1,null,null])}if(M)for(an=0,Pr=gi.length;an<Pr;++an){qn=gi[an],Zs=qn[4],yn=this.createLabel(Zs,w,M,""),p=qn[2],f=Pe*yn.height-xi;const Ws=this.calculateImageOrLabelDimensions_(yn.width,yn.height,qn[0],qn[1],yn.width,yn.height,p,f,0,0,qn[3],Bi,!1,Jr,!1,K);if(l&&l.collides(Ws.declutterBox))break t;ws.push([t,e,yn,Ws,1,null,null])}l&&l.load(ws.map(fx));for(let Ws=0,$T=ws.length;Ws<$T;++Ws)this.replayImageOrLabel_.apply(this,ws[Ws])}}++u;break;case qt.END_GEOMETRY:if(void 0!==o){K=G[1];const gi=o(K,N);if(gi)return gi}++u;break;case qt.FILL:z?F++:this.fill_(t),++u;break;case qt.MOVE_TO_LINE_TO:for(S=G[1],d=G[2],lt=h[S],ut=h[S+1],y=lt+.5|0,_=ut+.5|0,(y!==g||_!==m)&&(t.moveTo(lt,ut),g=y,m=_),S+=2;S<d;S+=2)lt=h[S],ut=h[S+1],y=lt+.5|0,_=ut+.5|0,(S==d-2||y!==g||_!==m)&&(t.lineTo(lt,ut),g=y,m=_);++u;break;case qt.SET_FILL_STYLE:A=G,this.alignFill_=G[2],F&&(this.fill_(t),F=0,P&&(t.stroke(),P=0)),t.fillStyle=G[1],++u;break;case qt.SET_STROKE_STYLE:T=G,P&&(t.stroke(),P=0),this.setStrokeStyle_(t,G),++u;break;case qt.STROKE:z?P++:t.stroke(),++u;break;default:++u}}F&&this.fill_(t),P&&t.stroke()}execute(t,e,i,s,r,o){this.viewRotation_=s,this.execute_(t,e,i,this.instructions,r,void 0,void 0,o)}executeHitDetection(t,e,i,s,r){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,s,r)}},sg=["Polygon","Circle","LineString","Image","Text","Default"],rg={},rc=class{constructor(t,e,i,s,r,o){this.maxExtent_=t,this.overlaps_=s,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(r)}clip(t,e){const i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t){for(const e in t){let i=this.executorsByZIndex_[e];void 0===i&&(i={},this.executorsByZIndex_[e]=i);const s=t[e];for(const r in s)i[r]=new RS(this.resolution_,this.pixelRatio_,this.overlaps_,s[r])}}hasExecutors(t){for(const e in this.executorsByZIndex_){const i=this.executorsByZIndex_[e];for(let s=0,r=t.length;s<r;++s)if(t[s]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,s,r,o){const a=2*(s=Math.round(s))+1,l=Ps(this.hitDetectionTransform_,s+.5,s+.5,1/e,-1/e,-i,-t[0],-t[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=Wi(a,a,void 0,{willReadFrequently:!0}));const u=this.hitDetectionContext_;let c;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):h||u.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(c=[1/0,1/0,-1/0,-1/0],ol(c,t),nr(c,e*(this.renderBuffer_+s),c));const d=function(C){if(void 0!==rg[C])return rg[C];const M=2*C+1,S=C*C,F=new Array(S+1);for(let A=0;A<=C;++A)for(let T=0;T<=C;++T){const $=A*A+T*T;if($>S)break;let L=F[$];L||(L=[],F[$]=L),L.push(4*((C+A)*M+(C+T))+3),A>0&&L.push(4*((C-A)*M+(C+T))+3),T>0&&(L.push(4*((C+A)*M+(C-T))+3),A>0&&L.push(4*((C-A)*M+(C-T))+3))}const P=[];for(let A=0,T=F.length;A<T;++A)F[A]&&P.push(...F[A]);return rg[C]=P,P}(s);let p;function f(w,C){const M=u.getImageData(0,0,a,a).data;for(let S=0,F=d.length;S<F;S++)if(M[d[S]]>0){if(!o||"Image"!==p&&"Text"!==p||o.includes(w)){const P=(d[S]-3)/4,A=s-P%a,T=s-(P/a|0),$=r(w,C,A*A+T*T);if($)return $}u.clearRect(0,0,a,a);break}}const g=Object.keys(this.executorsByZIndex_).map(Number);let m,y,_,v,x;for(g.sort(tr),m=g.length-1;m>=0;--m){const w=g[m].toString();for(_=this.executorsByZIndex_[w],y=sg.length-1;y>=0;--y)if(p=sg[y],v=_[p],void 0!==v&&(x=v.executeHitDetection(u,l,i,f,c),x))return x}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const i=e[0],s=e[1],r=e[2],o=e[3],a=[i,s,i,o,r,o,r,s];return ar(a,0,8,2,t,a),a}isEmpty(){return Wr(this.executorsByZIndex_)}execute(t,e,i,s,r,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);let h,u,c,d,p,f;for(l.sort(tr),this.maxExtent_&&(t.save(),this.clip(t,i)),o=o||sg,a&&l.reverse(),h=0,u=l.length;h<u;++h){const g=l[h].toString();for(p=this.executorsByZIndex_[g],c=0,d=o.length;c<d;++c)f=p[o[c]],void 0!==f&&f.execute(t,e,i,s,r,a)}this.maxExtent_&&t.restore()}},FS=class extends ux{constructor(t,e,i,s,r,o,a){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=s,this.transformRotation_=s?au(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=r,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}drawImages_(t,e,i,s){if(!this.image_)return;const r=ar(t,e,i,s,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=l*this.imageOpacity_);let h=this.imageRotation_;0===this.transformRotation_&&(h-=this.viewRotation_),this.imageRotateWithView_&&(h+=this.viewRotation_);for(let u=0,c=r.length;u<c;u+=2){const d=r[u]-this.imageAnchorX_,p=r[u+1]-this.imageAnchorY_;if(0!==h||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const f=d+this.imageAnchorX_,g=p+this.imageAnchorY_;Ps(a,f,g,1,1,h,-f,-g),o.save(),o.transform.apply(o,a),o.translate(f,g),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,p,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=l)}drawText_(t,e,i,s){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=ar(t,e,i,s,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(0===this.transformRotation_&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);e<i;e+=s){const l=r[e]+this.textOffsetX_,h=r[e+1]+this.textOffsetY_;0!==a||1!=this.textScale_[0]||1!=this.textScale_[1]?(o.save(),o.translate(l-this.textOffsetX_,h-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,h),this.textFillState_&&o.fillText(this.text_,l,h))}}moveToLineTo_(t,e,i,s,r){const o=this.context_,a=ar(t,e,i,s,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;r&&(l-=2);for(let h=2;h<l;h+=2)o.lineTo(a[h],a[h+1]);return r&&o.closePath(),i}drawRings_(t,e,i,s){for(let r=0,o=i.length;r<o;++r)e=this.moveToLineTo_(t,e,i[r],s,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),yi(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=function(l,h,u){const c=l.getFlatCoordinates();if(!c)return null;const d=l.getStride();return ar(c,0,c.length,d,h,u)}(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],s=e[3]-e[1],r=Math.sqrt(i*i+s*s),o=this.context_;o.beginPath(),o.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}}drawFeature(t,e){const i=e.getGeometryFunction()(t);i&&(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let i=0,s=e.length;i<s;++i)this.drawGeometry(e[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),yi(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(yi(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,s=t.getFlatCoordinates();let r=0;const o=t.getEnds(),a=t.getStride();i.beginPath();for(let l=0,h=o.length;l<h;++l)r=this.moveToLineTo_(s,r,o[l],a,!1);i.stroke()}if(""!==this.text_){const i=t.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),yi(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),yi(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getOrientedFlatCoordinates();let s=0;const r=t.getEndss(),o=t.getStride();e.beginPath();for(let a=0,l=r.length;a<l;++a)s=this.drawRings_(i,s,r[a],o);this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),er(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,i=this.contextTextState_,s=t.textAlign?t.textAlign:vl;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=s&&(i.textAlign=s,e.textAlign=s),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=s,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:s,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(t){const i=t.getColor();this.fillState_={fillStyle:ys(i||cn)}}else this.fillState_=null;if(e){const i=e.getColor(),s=e.getLineCap(),r=e.getLineDash(),o=e.getLineDashOffset(),a=e.getLineJoin(),l=e.getWidth(),h=e.getMiterLimit(),u=r||As;this.strokeState_={lineCap:void 0!==s?s:Zo,lineDash:1===this.pixelRatio_?u:u.map(c=>c*this.pixelRatio_),lineDashOffset:(o||0)*this.pixelRatio_,lineJoin:void 0!==a?a:Wo,lineWidth:(void 0!==l?l:1)*this.pixelRatio_,miterLimit:void 0!==h?h:10,strokeStyle:ys(i||_l)}}else this.strokeState_=null}setImageStyle(t){let e;if(!t||!(e=t.getSize()))return void(this.image_=null);const i=t.getPixelRatio(this.pixelRatio_),s=t.getAnchor(),r=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*i,this.imageAnchorY_=s[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(t){const e=t.getFill();if(e){const p=e.getColor();this.textFillState_={fillStyle:ys(p||cn)}}else this.textFillState_=null;const i=t.getStroke();if(i){const p=i.getColor(),f=i.getLineCap(),g=i.getLineDash(),m=i.getLineDashOffset(),y=i.getLineJoin(),_=i.getWidth(),v=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==f?f:Zo,lineDash:g||As,lineDashOffset:m||0,lineJoin:void 0!==y?y:Wo,lineWidth:void 0!==_?_:1,miterLimit:void 0!==v?v:10,strokeStyle:ys(p||_l)}}else this.textStrokeState_=null;const s=t.getFont(),r=t.getOffsetX(),o=t.getOffsetY(),a=t.getRotateWithView(),l=t.getRotation(),h=t.getScaleArray(),u=t.getText(),c=t.getTextAlign(),d=t.getTextBaseline();this.textState_={font:void 0!==s?s:M1,textAlign:void 0!==c?c:vl,textBaseline:void 0!==d?d:Eu},this.text_=void 0!==u?Array.isArray(u)?u.reduce((p,f,g)=>p+(g%2?" ":f),""):u:"",this.textOffsetX_=void 0!==r?this.pixelRatio_*r:0,this.textOffsetY_=void 0!==o?this.pixelRatio_*o:0,this.textRotateWithView_=void 0!==a&&a,this.textRotation_=void 0!==l?l:0,this.textScale_=[this.pixelRatio_*h[0],this.pixelRatio_*h[1]]}else this.text_=""}},kn=.5;function mx(n,t,e,i,s,r,o){const a=Wi(n[0]*kn,n[1]*kn);a.imageSmoothingEnabled=!1;const l=a.canvas,h=new FS(a,kn,s,null,o),u=e.length,c=Math.floor(16777215/u),d={};for(let f=1;f<=u;++f){const g=e[f-1],m=g.getStyleFunction()||i;if(!m)continue;let y=m(g,r);if(!y)continue;Array.isArray(y)||(y=[y]);const _=(f*c).toString(16).padStart(7,"#00000");for(let v=0,x=y.length;v<x;++v){const w=y[v],C=w.getGeometryFunction()(g);if(!C||!yi(s,C.getExtent()))continue;const M=w.clone(),S=M.getFill();S&&S.setColor(_);const F=M.getStroke();F&&(F.setColor(_),F.setLineDash(null)),M.setText(void 0);const P=w.getImage();if(P){const L=P.getImageSize();if(!L)continue;const D=Wi(L[0],L[1],void 0,{alpha:!1}),V=D.canvas;D.fillStyle=_,D.fillRect(0,0,V.width,V.height),M.setImage(new Vu({img:V,anchor:P.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:P.getOrigin(),opacity:1,size:P.getSize(),scale:P.getScale(),rotation:P.getRotation(),rotateWithView:P.getRotateWithView()}))}const A=M.getZIndex()||0;let T=d[A];T||(T={},d[A]=T,T.Polygon=[],T.Circle=[],T.LineString=[],T.Point=[]);const $=C.getType();if("GeometryCollection"===$){const L=C.getGeometriesArrayRecursive();for(let D=0,V=L.length;D<V;++D){const z=L[D];T[z.getType().replace("Multi","")].push(z,M)}}else T[$.replace("Multi","")].push(C,M)}}const p=Object.keys(d).map(Number).sort(tr);for(let f=0,g=p.length;f<g;++f){const m=d[p[f]];for(const y in m){const _=m[y];for(let v=0,x=_.length;v<x;v+=2){h.setStyle(_[v+1]);for(let w=0,C=t.length;w<C;++w)h.setTransform(t[w]),h.drawGeometry(_[v])}}}return a.getImageData(0,0,l.width,l.height)}function yx(n,t,e){const i=[];if(e){const s=Math.floor(Math.round(n[0])*kn),r=Math.floor(Math.round(n[1])*kn),o=4*(di(s,0,e.width-1)+di(r,0,e.height-1)*e.width),a=e.data[o+2]+256*(e.data[o+1]+256*e.data[o]),l=Math.floor(16777215/t.length);a&&a%l==0&&i.push(t[a/l-1])}return i}const OS=.5,_x={Point:function(t,e,i,s,r){const o=i.getImage(),a=i.getText();let l;if(o){if(2!=o.getImageState())return;let h=t;if(r){const c=o.getDeclutterMode();if("none"!==c)if(h=r,"obstacle"===c){const d=t.getBuilder(i.getZIndex(),"Image");d.setImageStyle(o,l),d.drawPoint(e,s)}else a&&a.getText()&&(l={})}const u=h.getBuilder(i.getZIndex(),"Image");u.setImageStyle(o,l),u.drawPoint(e,s)}if(a&&a.getText()){let h=t;r&&(h=r);const u=h.getBuilder(i.getZIndex(),"Text");u.setTextStyle(a,l),u.drawText(e,s)}},LineString:function(t,e,i,s,r){const o=i.getStroke();if(o){const l=t.getBuilder(i.getZIndex(),"LineString");l.setFillStrokeStyle(null,o),l.drawLineString(e,s)}const a=i.getText();if(a&&a.getText()){const l=(r||t).getBuilder(i.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,s)}},Polygon:function(t,e,i,s,r){const o=i.getFill(),a=i.getStroke();if(o||a){const h=t.getBuilder(i.getZIndex(),"Polygon");h.setFillStrokeStyle(o,a),h.drawPolygon(e,s)}const l=i.getText();if(l&&l.getText()){const h=(r||t).getBuilder(i.getZIndex(),"Text");h.setTextStyle(l),h.drawText(e,s)}},MultiPoint:function(t,e,i,s,r){const o=i.getImage(),a=i.getText();let l;if(o){if(2!=o.getImageState())return;let h=t;if(r){const c=o.getDeclutterMode();if("none"!==c)if(h=r,"obstacle"===c){const d=t.getBuilder(i.getZIndex(),"Image");d.setImageStyle(o,l),d.drawMultiPoint(e,s)}else a&&a.getText()&&(l={})}const u=h.getBuilder(i.getZIndex(),"Image");u.setImageStyle(o,l),u.drawMultiPoint(e,s)}if(a&&a.getText()){let h=t;r&&(h=r);const u=h.getBuilder(i.getZIndex(),"Text");u.setTextStyle(a,l),u.drawText(e,s)}},MultiLineString:function(t,e,i,s,r){const o=i.getStroke();if(o){const l=t.getBuilder(i.getZIndex(),"LineString");l.setFillStrokeStyle(null,o),l.drawMultiLineString(e,s)}const a=i.getText();if(a&&a.getText()){const l=(r||t).getBuilder(i.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,s)}},MultiPolygon:function(t,e,i,s,r){const o=i.getFill(),a=i.getStroke();if(a||o){const h=t.getBuilder(i.getZIndex(),"Polygon");h.setFillStrokeStyle(o,a),h.drawMultiPolygon(e,s)}const l=i.getText();if(l&&l.getText()){const h=(r||t).getBuilder(i.getZIndex(),"Text");h.setTextStyle(l),h.drawText(e,s)}},GeometryCollection:function(t,e,i,s,r){const o=e.getGeometriesArray();let a,l;for(a=0,l=o.length;a<l;++a)(0,_x[o[a].getType()])(t,o[a],i,s,r)},Circle:function(t,e,i,s,r){const o=i.getFill(),a=i.getStroke();if(o||a){const h=t.getBuilder(i.getZIndex(),"Circle");h.setFillStrokeStyle(o,a),h.drawCircle(e,s)}const l=i.getText();if(l&&l.getText()){const h=(r||t).getBuilder(i.getZIndex(),"Text");h.setTextStyle(l),h.drawText(e,s)}}};function AS(n,t){return parseInt($t(n),10)-parseInt($t(t),10)}function vx(n,t){const e=og(n,t);return e*e}function og(n,t){return OS*n/t}function oc(n,t,e,i,s,r,o){let a=!1;const l=e.getImage();if(l){const h=l.getImageState();2==h||3==h?l.unlistenImageChange(s):(0==h&&l.load(),l.listenImageChange(s),a=!0)}return function(u,c,d,p,f,g){const m=d.getGeometryFunction()(c);if(!m)return;const y=m.simplifyTransformed(p,f);d.getRenderer()?xx(u,y,d,c):(0,_x[y.getType()])(u,y,d,c,g)}(n,t,e,i,r,o),a}function xx(n,t,e,i){if("GeometryCollection"!=t.getType())n.getBuilder(e.getZIndex(),"Default").drawCustom(t,i,e.getRenderer(),e.getHitDetectionRenderer());else{const s=t.getGeometries();for(let r=0,o=s.length;r<o;++r)xx(n,s[r],e,i)}}const LS=class extends px{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,i){const s=e.extent,r=e.viewState,o=r.center,a=r.resolution,l=r.projection,h=r.rotation,u=l.getExtent(),c=this.getLayer().getSource(),d=e.pixelRatio,p=e.viewHints,f=!(p[0]||p[1]),g=this.compositionContext_,m=Math.round(e.size[0]*d),y=Math.round(e.size[1]*d),_=c.getWrapX()&&l.canWrapX(),v=_?We(u):null,x=_?Math.ceil((s[2]-u[2])/v)+1:1;let w=_?Math.floor((s[0]-u[0])/v):0;do{const C=this.getRenderTransform(o,a,h,d,m,y,w*v);t.execute(g,1,C,h,f,void 0,i)}while(++w<x)}setupCompositionContext_(){if(1!==this.opacity_){const t=Wi(this.context.canvas.width,this.context.canvas.height,dx);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,yl(this.compositionContext_),dx.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,e){const i=t.pixelRatio,s=t.layerStatesArray[t.layerIndex];su(this.pixelTransform,1/i,0,0,1/i,0,0),wp(this.inversePixelTransform,this.pixelTransform);const r=C_(this.pixelTransform);this.useContainer(e,r,this.getBackground(t));const o=this.context,a=o.canvas,l=this.replayGroup_,h=this.declutterExecutorGroup;let u=l&&!l.isEmpty()||h&&!h.isEmpty();if(!u&&!this.getLayer().hasListener("prerender")&&!this.getLayer().hasListener("postrender"))return null;const c=Math.round(t.size[0]*i),d=Math.round(t.size[1]*i);a.width!=c||a.height!=d?(a.width=c,a.height=d,a.style.transform!==r&&(a.style.transform=r)):this.containerReused||o.clearRect(0,0,c,d),this.preRender(o,t);const p=t.viewState,f=p.projection;this.opacity_=s.opacity,this.setupCompositionContext_();let g=!1;if(u&&s.extent&&this.clipping){const m=Yr(s.extent,f);u=yi(m,t.extent),g=u&&!sr(m,t.extent),g&&this.clipUnrotated(this.compositionContext_,t,m)}return u&&this.renderWorlds(l,t),g&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,t),this.renderedRotation_!==p.rotation&&(this.renderedRotation_=p.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(e=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];ji(this.pixelTransform,i);const s=this.renderedCenter_,r=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,h=this.getLayer(),u=[],c=i[0]*kn,d=i[1]*kn;u.push(this.getRenderTransform(s,r,o,kn,c,d,0).slice());const p=h.getSource(),f=a.getExtent();if(p.getWrapX()&&a.canWrapX()&&!sr(f,l)){let g=l[0];const m=We(f);let y,_=0;for(;g<f[0];)--_,y=m*_,u.push(this.getRenderTransform(s,r,o,kn,c,d,y).slice()),g+=m;for(_=0,g=l[2];g>f[2];)++_,y=m*_,u.push(this.getRenderTransform(s,r,o,kn,c,d,y).slice()),g-=m}this.hitDetectionImageData_=mx(i,u,this.renderedFeatures_,h.getStyleFunction(),l,r,o)}e(yx(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,e,i,s,r){if(!this.replayGroup_)return;const o=e.viewState.resolution,a=e.viewState.rotation,l=this.getLayer(),h={},u=function(p,f,g){const m=$t(p),y=h[m];if(y){if(!0!==y&&g<y.distanceSq){if(0===g)return h[m]=!0,r.splice(r.lastIndexOf(y),1),s(p,l,f);y.geometry=f,y.distanceSq=g}}else{if(0===g)return h[m]=!0,s(p,l,f);r.push(h[m]={feature:p,layer:l,geometry:f,distanceSq:g,callback:s})}};let c;const d=[this.replayGroup_];return this.declutterExecutorGroup&&d.push(this.declutterExecutorGroup),d.some(p=>c=p.forEachFeatureAtCoordinate(t,o,a,i,u,p===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map(f=>f.value):null)),c}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),i=e.getSource();if(!i)return!1;const s=t.viewHints[0],r=t.viewHints[1],o=e.getUpdateWhileAnimating(),a=e.getUpdateWhileInteracting();if(this.ready&&!o&&s||!a&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=t.extent,h=t.viewState,u=h.projection,c=h.resolution,d=t.pixelRatio,p=e.getRevision(),f=e.getRenderBuffer();let g=e.getRenderOrder();void 0===g&&(g=AS);const m=h.center.slice(),y=nr(l,f*c),_=y.slice(),v=[y.slice()],x=u.getExtent();if(i.getWrapX()&&u.canWrapX()&&!sr(x,t.extent)){const V=We(x),z=Math.max(We(y)/2,V);y[0]=x[0]-z,y[2]=x[2]+z,Fp(m,u);const K=I_(v[0],u);K[0]<x[0]&&K[2]<x[2]?v.push([K[0]+V,K[1],K[2]+V,K[3]]):K[0]>x[0]&&K[2]>x[2]&&v.push([K[0]-V,K[1],K[2]-V,K[3]])}if(this.ready&&this.renderedResolution_==c&&this.renderedRevision_==p&&this.renderedRenderOrder_==g&&sr(this.wrappedRenderedExtent_,y))return er(this.renderedExtent_,_)||(this.hitDetectionImageData_=null,this.renderedExtent_=_),this.renderedCenter_=m,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const w=new sc(og(c,d),y,c,d);let C;this.getLayer().getDeclutter()&&(C=new sc(og(c,d),y,c,d));const M=pl();let S;if(M){for(let V=0,z=v.length;V<z;++V){const K=zp(v[V],u);i.loadFeatures(K,CC(c,u),M)}S=cl(M,u)}else for(let V=0,z=v.length;V<z;++V)i.loadFeatures(v[V],c,u);const F=vx(c,d);let P=!0;const A=V=>{let z;const K=V.getStyleFunction()||e.getStyleFunction();if(K&&(z=K(V,c)),z){const lt=this.renderFeature(V,F,z,w,S,C);P=P&&!lt}},T=zp(y,u),$=i.getFeaturesInExtent(T);g&&$.sort(g);for(let V=0,z=$.length;V<z;++V)A($[V]);this.renderedFeatures_=$,this.ready=P;const L=w.finish(),D=new rc(y,c,d,i.getOverlaps(),L,e.getRenderBuffer());return C&&(this.declutterExecutorGroup=new rc(y,c,d,i.getOverlaps(),C.finish(),e.getRenderBuffer())),this.renderedResolution_=c,this.renderedRevision_=p,this.renderedRenderOrder_=g,this.renderedExtent_=_,this.wrappedRenderedExtent_=y,this.renderedCenter_=m,this.renderedProjection_=u,this.replayGroup_=D,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,i,s,r,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let l=0,h=i.length;l<h;++l)a=oc(s,t,i[l],e,this.boundHandleStyleImageChange_,r,o)||a;else a=oc(s,t,i,e,this.boundHandleStyleImageChange_,r,o);return a}},ac=class extends lx{constructor(t){super(t)}createRenderer(){return new LS(this)}},wx=class{constructor(t){this.rbush_=new $v(t),this.items_={}}insert(t,e){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[$t(e)]=i}load(t,e){const i=new Array(e.length);for(let s=0,r=e.length;s<r;s++){const o=t[s],a=e[s],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[s]=l,this.items_[$t(a)]=l}this.rbush_.load(i)}remove(t){const e=$t(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)}update(t,e){const i=this.items_[$t(e)];Do([i.minX,i.minY,i.maxX,i.maxY],t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(t){return this.rbush_.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}).map(function(e){return e.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let i;for(let s=0,r=t.length;s<r;s++)if(i=e(t[s]),i)return i;return i}isEmpty(){return Wr(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return cs(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}};function DS(n,t){return[[-1/0,-1/0,1/0,1/0]]}function NS(n,t){return[n]}class Er extends ls{constructor(t,e,i){super(t),this.feature=e,this.features=i}}const no=class extends B1{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.loader_=Ao,this.format_=t.format,this.overlaps_=void 0===t.overlaps||t.overlaps,this.url_=t.url,void 0!==t.loader?this.loader_=t.loader:void 0!==this.url_&&(xe(this.format_,"`format` must be set when `url` is set"),this.loader_=tv(this.url_,this.format_)),this.strategy_=void 0!==t.strategy?t.strategy:DS;const e=void 0===t.useSpatialIndex||t.useSpatialIndex;let i,s;this.featuresRtree_=e?new wx:null,this.loadedExtentsRtree_=new wx,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(t.features)?s=t.features:t.features&&(i=t.features,s=i.getArray()),!e&&void 0===i&&(i=new us(s)),void 0!==s&&this.addFeaturesInternal(s),void 0!==i&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=$t(t);if(!this.addToIndex_(e,t))return void(this.featuresCollection_&&this.featuresCollection_.remove(t));this.setupChangeEvents_(e,t);const i=t.getGeometry();if(i){const s=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new Er("addfeature",t))}setupChangeEvents_(t,e){this.featureChangeKeys_[t]=[ve(e,"change",this.handleFeatureChange_,this),ve(e,"propertychange",this.handleFeatureChange_,this)]}addToIndex_(t,e){let i=!0;const s=e.getId();return void 0!==s&&(s.toString()in this.idIndex_?i=!1:this.idIndex_[s.toString()]=e),i&&(xe(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],i=[],s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=$t(a);this.addToIndex_(l,a)&&i.push(a)}for(let r=0,o=i.length;r<o;r++){const a=i[r],l=$t(a);this.setupChangeEvents_(l,a);const h=a.getGeometry();if(h){const u=h.getExtent();e.push(u),s.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(e,s),this.hasListener("addfeature"))for(let r=0,o=i.length;r<o;r++)this.dispatchEvent(new Er("addfeature",i[r]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener("addfeature",function(i){e||(e=!0,t.push(i.feature),e=!1)}),this.addEventListener("removefeature",function(i){e||(e=!0,t.remove(i.feature),e=!1)}),t.addEventListener("add",i=>{e||(e=!0,this.addFeature(i.element),e=!1)}),t.addEventListener("remove",i=>{e||(e=!0,this.removeFeature(i.element),e=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(ti);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(i=>{this.removeFeatureInternal(i)});for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new Er("clear");this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){return this.forEachFeatureInExtent([t[0],t[1],t[0],t[1]],function(i){if(i.getGeometry().intersectsCoordinate(t))return e(i)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){const s=e(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Wr(this.nullGeometryFeatures_)||hs(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(i){e.push(i)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const i=function(r,o){if(o.canWrapX()){const a=o.getExtent();if(!isFinite(r[0])||!isFinite(r[2]))return[[a[0],r[1],a[2],r[3]]];I_(r,o);const l=We(a);if(We(r)>l)return[[a[0],r[1],a[2],r[3]]];if(r[0]<a[0])return[[r[0]+l,r[1],a[2],r[3]],[a[0],r[1],r[2],r[3]]];if(r[2]>a[2])return[[r[0],r[1],a[2],r[3]],[a[0],r[1],r[2]-l,r[3]]]}return[r]}(t,e);return[].concat(...i.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const i=t[0],s=t[1];let r=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return e=e||Fo,this.featuresRtree_.forEachInExtent(l,function(h){if(e(h)){const u=h.getGeometry(),c=a;if(a=u.closestPointXY(i,s,o,a),a<c){r=h;const d=Math.sqrt(a);l[0]=i-d,l[1]=s-d,l[2]=i+d,l[3]=s+d}}}),r}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return void 0!==e?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return void 0!==e?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,i=$t(e),s=e.getGeometry();if(s){const o=s.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,e)):this.featuresRtree_&&this.featuresRtree_.update(o,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);const r=e.getId();if(void 0!==r){const o=r.toString();this.idIndex_[o]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[o]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new Er("changefeature",e))}hasFeature(t){const e=t.getId();return void 0!==e?e in this.idIndex_:$t(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Wr(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(t,e,i){const s=this.loadedExtentsRtree_,r=this.strategy_(t,e,i);for(let o=0,a=r.length;o<a;++o){const l=r[o];s.forEachInExtent(l,function(h){return sr(h.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Er("featuresloadstart")),this.loader_.call(this,l,e,i,h=>{--this.loadingExtentsCount_,this.dispatchEvent(new Er("featuresloadend",void 0,h))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Er("featuresloaderror"))}),s.insert(l,{extent:l.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let i;e.forEachInExtent(t,function(s){if(Do(s.extent,t))return i=s,!0}),i&&e.remove(i)}removeFeature(t){if(!t)return;const e=$t(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=$t(t),i=this.featureChangeKeys_[e];if(!i)return;i.forEach(ti),delete this.featureChangeKeys_[e];const s=t.getId();return void 0!==s&&delete this.idIndex_[s.toString()],delete this.uidIndex_[e],this.dispatchEvent(new Er("removefeature",t)),t}removeFromIdIndex_(t){let e=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e}setLoader(t){this.loader_=t}setUrl(t){xe(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(tv(t,this.format_))}},bx=class extends px{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedProjection=null,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=[1/0,1/0,-1/0,-1/0],this.tmpTileRange_=new W1(0,0,0,0)}isDrawableTile(t){const e=this.getLayer(),i=t.getState(),s=e.getUseInterimTilesOnError();return 2==i||4==i||3==i&&!s}getTile(t,e,i,s){const r=s.pixelRatio,o=s.viewState.projection,a=this.getLayer();let l=a.getSource().getTile(t,e,i,r,o);return 3==l.getState()&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(l)||(l=l.getInterimTile()),l}getData(t){const e=this.frameState;if(!e)return null;const i=this.getLayer(),s=ji(e.pixelToCoordinateTransform,t.slice()),r=i.getExtent();if(r&&!ru(r,s))return null;const o=e.pixelRatio,a=e.viewState.projection,l=e.viewState,h=i.getRenderSource(),u=h.getTileGridForProjection(l.projection),c=h.getTilePixelRatio(e.pixelRatio);for(let d=u.getZForResolution(l.resolution);d>=u.getMinZoom();--d){const p=u.getTileCoordForCoordAndZ(s,d),f=h.getTile(d,p[1],p[2],o,a);if(!(f instanceof D1||f instanceof yf)||f instanceof yf&&4===f.getState())return null;if(2!==f.getState())continue;const g=u.getOrigin(d),m=Ki(u.getTileSize(d)),y=u.getResolution(d),_=Math.floor(c*((s[0]-g[0])/y-p[1]*m[0])),v=Math.floor(c*((g[1]-s[1])/y-p[2]*m[1])),x=Math.round(c*h.getGutterForProjection(l.projection));return this.getImageData(f.getImage(),_+x,v+x)}return null}loadedTileCallback(t,e,i){return!!this.isDrawableTile(i)&&super.loadedTileCallback(t,e,i)}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){const i=t.layerStatesArray[t.layerIndex],s=t.viewState,r=s.projection,o=s.resolution,a=s.center,l=s.rotation,h=t.pixelRatio,u=this.getLayer(),c=u.getSource(),d=c.getRevision(),p=c.getTileGridForProjection(r),f=p.getZForResolution(o,c.zDirection),g=p.getResolution(f);let m=t.extent;const y=t.viewState.resolution,_=c.getTilePixelRatio(h),v=Math.round(We(m)/y*h),x=Math.round(Ln(m)/y*h),w=i.extent&&Yr(i.extent,r);w&&(m=Ur(m,Yr(i.extent,r)));const C=g*v/2/_,M=g*x/2/_,S=[a[0]-C,a[1]-M,a[0]+C,a[1]+M],F=p.getTileRangeForExtentAndZ(m,f),P={};P[f]={};const A=this.createLoadedTileFinder(c,r,P),T=this.tmpExtent,$=this.tmpTileRange_;this.newTiles_=!1;const L=l?kp(s.center,y,l,t.size):void 0;for(let Et=F.minX;Et<=F.maxX;++Et)for(let mt=F.minY;mt<=F.maxY;++mt){if(l&&!p.tileCoordIntersectsViewport([f,Et,mt],L))continue;const Ut=this.getTile(f,Et,mt,t);if(this.isDrawableTile(Ut)){const we=$t(this);if(2==Ut.getState()){P[f][Ut.tileCoord.toString()]=Ut;let De=Ut.inTransition(we);De&&1!==i.opacity&&(Ut.endTransition(we),De=!1),!this.newTiles_&&(De||!this.renderedTiles.includes(Ut))&&(this.newTiles_=!0)}if(1===Ut.getAlpha(we,t.time))continue}const ce=p.getTileCoordChildTileRange(Ut.tileCoord,$,T);let ye=!1;ce&&(ye=A(f+1,ce)),ye||p.forEachTileCoordParentTileRange(Ut.tileCoord,A,$,T)}const D=g/o*h/_;Ps(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/h,1/h,l,-v/2,-x/2);const V=C_(this.pixelTransform);this.useContainer(e,V,this.getBackground(t));const z=this.context,K=z.canvas;wp(this.inversePixelTransform,this.pixelTransform),Ps(this.tempTransform,v/2,x/2,D,D,0,-v/2,-x/2),K.width!=v||K.height!=x?(K.width=v,K.height=x):this.containerReused||z.clearRect(0,0,v,x),w&&this.clipUnrotated(z,t,w),c.getInterpolate()||(z.imageSmoothingEnabled=!1),this.preRender(z,t),this.renderedTiles.length=0;let lt,ut,N,G=Object.keys(P).map(Number);G.sort(tr),1!==i.opacity||this.containerReused&&!c.getOpaque(t.viewState.projection)?(lt=[],ut=[]):G=G.reverse();for(let Et=G.length-1;Et>=0;--Et){const mt=G[Et],Ut=c.getTilePixelSize(mt,h,r),ce=p.getResolution(mt)/g,ye=Ut[0]*ce*D,we=Ut[1]*ce*D,De=p.getTileCoordForCoordAndZ(Dn(S),mt),ii=p.getTileCoordExtent(De),st=ji(this.tempTransform,[_*(ii[0]-S[0])/g,_*(S[3]-ii[3])/g]),pi=_*c.getGutterForProjection(r),_i=P[mt];for(const Ne in _i){const se=_i[Ne],de=se.tileCoord,vi=De[1]-de[1],he=Math.round(st[0]-(vi-1)*ye),fi=De[2]-de[2],Xi=Math.round(st[1]-(fi-1)*we),qi=Math.round(st[0]-vi*ye),He=Math.round(st[1]-fi*we),oe=he-qi,Ai=Xi-He,$e=f===mt,Ue=$e&&1!==se.getAlpha($t(this),t.time);let ke=!1;if(!Ue)if(lt){N=[qi,He,qi+oe,He,qi+oe,He+Ai,qi,He+Ai];for(let Pe=0,be=lt.length;Pe<be;++Pe)if(f!==mt&&mt<ut[Pe]){const Kt=lt[Pe];yi([qi,He,qi+oe,He+Ai],[Kt[0],Kt[3],Kt[4],Kt[7]])&&(ke||(z.save(),ke=!0),z.beginPath(),z.moveTo(N[0],N[1]),z.lineTo(N[2],N[3]),z.lineTo(N[4],N[5]),z.lineTo(N[6],N[7]),z.moveTo(Kt[6],Kt[7]),z.lineTo(Kt[4],Kt[5]),z.lineTo(Kt[2],Kt[3]),z.lineTo(Kt[0],Kt[1]),z.clip())}lt.push(N),ut.push(mt)}else z.clearRect(qi,He,oe,Ai);this.drawTileImage(se,t,qi,He,oe,Ai,pi,$e),lt&&!Ue?(ke&&z.restore(),this.renderedTiles.unshift(se)):this.renderedTiles.push(se),this.updateUsedTiles(t.usedTiles,c,se)}}return this.renderedRevision=d,this.renderedResolution=g,this.extentChanged=!this.renderedExtent_||!Do(this.renderedExtent_,S),this.renderedExtent_=S,this.renderedPixelRatio=h,this.renderedProjection=r,this.manageTilePyramid(t,c,p,h,r,m,f,u.getPreload()),this.scheduleExpireCache(t,c),this.postRender(z,t),i.extent&&z.restore(),z.imageSmoothingEnabled=!0,V!==K.style.transform&&(K.style.transform=V),this.container}drawTileImage(t,e,i,s,r,o,a,l){const h=this.getTileImage(t);if(!h)return;const u=$t(this),c=e.layerStatesArray[e.layerIndex],d=c.opacity*(l?t.getAlpha(u,e.time):1),p=d!==this.context.globalAlpha;p&&(this.context.save(),this.context.globalAlpha=d),this.context.drawImage(h,a,a,h.width-2*a,h.height-2*a,i,s,r,o),p&&this.context.restore(),d!==c.opacity?e.animate=!0:l&&t.endTransition(u)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){const i=function(s,r,o){const a=$t(s);a in o.usedTiles&&s.expireCache(o.viewState.projection,o.usedTiles[a])}.bind(null,e);t.postRenderFunctions.push(i)}}updateUsedTiles(t,e,i){const s=$t(e);s in t||(t[s]={}),t[s][i.getKey()]=!0}manageTilePyramid(t,e,i,s,r,o,a,l,h){const u=$t(e);u in t.wantedTiles||(t.wantedTiles[u]={});const c=t.wantedTiles[u],d=t.tileQueue,p=i.getMinZoom(),f=t.viewState.rotation,g=f?kp(t.viewState.center,t.viewState.resolution,f,t.size):void 0;let m,y,_,v,x,w,C=0;for(w=p;w<=a;++w)for(y=i.getTileRangeForExtentAndZ(o,w,y),_=i.getResolution(w),v=y.minX;v<=y.maxX;++v)for(x=y.minY;x<=y.maxY;++x)f&&!i.tileCoordIntersectsViewport([w,v,x],g)||(a-w<=l?(++C,m=e.getTile(w,v,x,s,r),0==m.getState()&&(c[m.getKey()]=!0,d.isKeyQueued(m.getKey())||d.enqueue([m,u,i.getTileCoordCenter(m.tileCoord),_])),void 0!==h&&h(m)):e.useTile(w,v,x,r));e.updateCacheSize(C,r)}},zS={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},jS={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]},GS=class extends bx{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedPixelToCoordinateTransform_=null,this.tmpTransform_=[1,0,0,1,0,0]}prepareTile(t,e,i){let s;const r=t.getState();return(2===r||3===r)&&(this.updateExecutorGroup_(t,e,i),this.tileImageNeedsRender_(t)&&(s=!0)),s}getTile(t,e,i,s){const r=s.pixelRatio,o=s.viewState,a=o.resolution,l=o.projection,h=this.getLayer(),u=h.getSource().getTile(t,e,i,r,l),c=s.viewHints,d=!(c[0]||c[1]);return(d||!u.wantedResolution)&&(u.wantedResolution=a),this.prepareTile(u,r,l)&&(d||Date.now()-s.time<8)&&"vector"!==h.getRenderMode()&&this.renderTileImage_(u,s),super.getTile(t,e,i,s)}isDrawableTile(t){const e=this.getLayer();return super.isDrawableTile(t)&&("vector"===e.getRenderMode()?$t(e)in t.executorGroups:t.hasContext(e))}getTileImage(t){return t.getImage(this.getLayer())}prepareFrame(t){const e=this.getLayer().getRevision();return this.renderedLayerRevision_!==e&&(this.renderedLayerRevision_=e,this.renderedTiles.length=0),super.prepareFrame(t)}updateExecutorGroup_(t,e,i){const s=this.getLayer(),r=s.getRevision(),o=s.getRenderOrder()||null,a=t.wantedResolution,l=t.getReplayState(s);if(!l.dirty&&l.renderedResolution===a&&l.renderedRevision==r&&l.renderedRenderOrder==o)return;const h=s.getSource(),u=s.getDeclutter(),c=h.getTileGrid(),d=h.getTileGridForProjection(i).getTileCoordExtent(t.wrappedTileCoord),p=h.getSourceTiles(e,i,t),f=$t(s);delete t.hitDetectionImageData[f],t.executorGroups[f]=[],u&&(t.declutterExecutorGroups[f]=[]),l.dirty=!1;for(let g=0,m=p.length;g<m;++g){const y=p[g];if(2!=y.getState())continue;const _=c.getTileCoordExtent(y.tileCoord),v=Ur(d,_),x=nr(v,s.getRenderBuffer()*a,this.tmpExtent),w=Do(_,v)?null:x,C=new sc(0,x,a,e),M=u?new sc(0,v,a,e):void 0,S=vx(a,e),F=function(L){let D;const V=L.getStyleFunction()||s.getStyleFunction();if(V&&(D=V(L,a)),D){const z=this.renderFeature(L,S,D,C,M);l.dirty=l.dirty||z}},P=y.getFeatures();o&&o!==l.renderedRenderOrder&&P.sort(o);for(let L=0,D=P.length;L<D;++L){const V=P[L];(!w||yi(w,V.getGeometry().getExtent()))&&F.call(this,V)}const A=C.finish(),T="vector"!==s.getRenderMode()&&u&&1===p.length?null:v,$=new rc(T,a,e,h.getOverlaps(),A,s.getRenderBuffer());if(t.executorGroups[f].push($),M){const L=new rc(null,a,e,h.getOverlaps(),M.finish(),s.getRenderBuffer());t.declutterExecutorGroups[f].push(L)}}l.renderedRevision=r,l.renderedRenderOrder=o,l.renderedResolution=a}forEachFeatureAtCoordinate(t,e,i,s,r){const o=e.viewState.resolution,a=e.viewState.rotation;i=i??0;const l=this.getLayer(),h=l.getSource().getTileGridForProjection(e.viewState.projection),u=rl([t]);nr(u,o*i,u);const c={},d=function(g,m,y){let _=g.getId();void 0===_&&(_=$t(g));const v=c[_];if(v){if(!0!==v&&y<v.distanceSq){if(0===y)return c[_]=!0,r.splice(r.lastIndexOf(v),1),s(g,l,m);v.geometry=m,v.distanceSq=y}}else{if(0===y)return c[_]=!0,s(g,l,m);r.push(c[_]={feature:g,layer:l,geometry:m,distanceSq:y,callback:s})}},p=this.renderedTiles;let f;for(let g=0,m=p.length;!f&&g<m;++g){const y=p[g];if(!yi(h.getTileCoordExtent(y.wrappedTileCoord),u))continue;const _=$t(l),v=[y.executorGroups[_]],x=y.declutterExecutorGroups[_];x&&v.push(x),v.some(w=>{const C=w===x?e.declutterTree.all().map(M=>M.value):null;for(let M=0,S=w.length;M<S;++M)if(f=w[M].forEachFeatureAtCoordinate(t,o,a,i,d,C),f)return!0})}return f}getFeatures(t){return new Promise((e,i)=>{const s=this.getLayer(),r=$t(s),o=s.getSource(),a=this.renderedProjection,l=a.getExtent(),h=this.renderedResolution,u=o.getTileGridForProjection(a),c=ji(this.renderedPixelToCoordinateTransform_,t.slice()),d=u.getTileCoordForCoordAndResolution(c,h);let p;for(let _=0,v=this.renderedTiles.length;_<v;++_)if(d.toString()===this.renderedTiles[_].tileCoord.toString()){if(p=this.renderedTiles[_],2===p.getState()){const x=u.getTileCoordExtent(p.tileCoord);o.getWrapX()&&a.canWrapX()&&!sr(l,x)&&Fp(c,a);break}p=void 0}if(!p||p.loadingSourceTiles>0)return void e([]);const f=Dn(u.getTileCoordExtent(p.wrappedTileCoord)),g=[(c[0]-f[0])/h,(f[1]-c[1])/h],m=p.getSourceTiles().reduce(function(_,v){return _.concat(v.getFeatures())},[]);let y=p.hitDetectionImageData[r];if(!y){const _=Ki(u.getTileSize(u.getZForResolution(h,o.zDirection))),v=this.renderedRotation_;y=mx(_,[this.getRenderTransform(u.getTileCoordCenter(p.wrappedTileCoord),h,0,kn,_[0]*kn,_[1]*kn,0)],m,s.getStyleFunction(),u.getTileCoordExtent(p.wrappedTileCoord),p.getReplayState(s).renderedResolution,v),p.hitDetectionImageData[r]=y}e(yx(g,m,y))})}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&void 0!==this.renderedLayerRevision_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}renderDeclutter(t){const e=this.context,i=e.globalAlpha;e.globalAlpha=this.getLayer().getOpacity();const s=t.viewHints,r=!(s[0]||s[1]),o=this.renderedTiles;for(let a=0,l=o.length;a<l;++a){const h=o[a],u=h.declutterExecutorGroups[$t(this.getLayer())];if(u)for(let c=u.length-1;c>=0;--c)u[c].execute(this.context,1,this.getTileRenderTransform(h,t),t.viewState.rotation,r,void 0,t.declutterTree)}e.globalAlpha=i}getTileRenderTransform(t,e){const i=e.pixelRatio,s=e.viewState,r=s.center,o=s.resolution,a=s.rotation,l=e.size,h=Math.round(l[0]*i),u=Math.round(l[1]*i),c=this.getLayer().getSource().getTileGridForProjection(e.viewState.projection),d=t.tileCoord,p=c.getTileCoordExtent(t.wrappedTileCoord),f=c.getTileCoordExtent(d,this.tmpExtent)[0]-p[0];return vp(xp(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(r,o,a,i,h,u,f))}postRender(t,e){const i=e.viewHints,s=!(i[0]||i[1]);this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation;const r=this.getLayer(),o=r.getRenderMode(),a=t.globalAlpha;t.globalAlpha=r.getOpacity();const l=jS[o],h=e.viewState,u=h.rotation,c=r.getSource(),d=c.getTileGridForProjection(h.projection).getZForResolution(h.resolution,c.zDirection),p=this.renderedTiles,f=[],g=[];let m=!0;for(let y=p.length-1;y>=0;--y){const _=p[y];m=m&&!_.getReplayState(r).dirty;const v=_.executorGroups[$t(r)].filter(S=>S.hasExecutors(l));if(0===v.length)continue;const x=this.getTileRenderTransform(_,e),w=_.tileCoord[0];let C=!1;const M=v[0].getClipCoords(x);if(M){for(let S=0,F=f.length;S<F;++S)if(d!==w&&w<g[S]){const P=f[S];yi([M[0],M[3],M[4],M[7]],[P[0],P[3],P[4],P[7]])&&(C||(t.save(),C=!0),t.beginPath(),t.moveTo(M[0],M[1]),t.lineTo(M[2],M[3]),t.lineTo(M[4],M[5]),t.lineTo(M[6],M[7]),t.moveTo(P[6],P[7]),t.lineTo(P[4],P[5]),t.lineTo(P[2],P[3]),t.lineTo(P[0],P[1]),t.clip())}f.push(M),g.push(w)}for(let S=0,F=v.length;S<F;++S)v[S].execute(t,1,x,u,s,l);C&&t.restore()}t.globalAlpha=a,this.ready=m,super.postRender(t,e)}renderFeature(t,e,i,s,r){if(!i)return!1;let o=!1;if(Array.isArray(i))for(let a=0,l=i.length;a<l;++a)o=oc(s,t,i[a],e,this.boundHandleStyleImageChange_,void 0,r)||o;else o=oc(s,t,i,e,this.boundHandleStyleImageChange_,void 0,r);return o}tileImageNeedsRender_(t){const e=this.getLayer();if("vector"===e.getRenderMode())return!1;const i=t.getReplayState(e),s=e.getRevision();return i.renderedTileResolution!==t.wantedResolution||i.renderedTileRevision!==s}renderTileImage_(t,e){const i=this.getLayer(),s=t.getReplayState(i),r=i.getRevision(),o=t.executorGroups[$t(i)];s.renderedTileRevision=r;const a=t.wrappedTileCoord,l=a[0],h=i.getSource();let u=e.pixelRatio;const c=e.viewState.projection,d=h.getTileGridForProjection(c),p=d.getResolution(t.tileCoord[0]),f=e.pixelRatio/t.wantedResolution*p,g=d.getResolution(l),m=t.getContext(i);u=Math.round(Math.max(u,f/u));const y=h.getTilePixelSize(l,u,c);m.canvas.width=y[0],m.canvas.height=y[1];const _=u/f;if(1!==_){const C=w_(this.tmpTransform_);xp(C,_,_),m.setTransform.apply(m,C)}const v=d.getTileCoordExtent(a,this.tmpExtent),x=f/g,w=w_(this.tmpTransform_);xp(w,x,-x),vp(w,su(x_,1,0,0,1,-v[0],-v[3]));for(let C=0,M=o.length;C<M;++C)o[C].execute(m,_,w,0,!0,zS[i.getRenderMode()]);s.renderedTileResolution=t.wantedResolution}},Yl=class extends lx{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e);const i=t.renderMode||"hybrid";xe("hybrid"==i||"vector"==i,"`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=i,this.setPreload(t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError)}createRenderer(){return new GS(this)}getFeatures(t){return super.getFeatures(t)}getRenderMode(){return this.renderMode_}getPreload(){return this.get("preload")}getUseInterimTilesOnError(){return this.get("useInterimTilesOnError")}setPreload(t){this.set("preload",t)}setUseInterimTilesOnError(t){this.set("useInterimTilesOnError",t)}};function Cx(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Mx,Sx={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function lc(n){return(n=Math.round(n))<0?0:n>255?255:n}function ag(n){return lc("%"===n[n.length-1]?parseFloat(n)/100*255:parseInt(n))}function hc(n){return(e="%"===n[n.length-1]?parseFloat(n)/100:parseFloat(n))<0?0:e>1?1:e;var e}function lg(n,t,e){return e<0?e+=1:e>1&&(e-=1),6*e<1?n+(t-n)*e*6:2*e<1?t:3*e<2?n+(t-n)*(2/3-e)*6:n}try{Mx={}.parseCSSColor=function(t){var e,i=t.replace(/ /g,"").toLowerCase();if(i in Sx)return Sx[i].slice();if("#"===i[0])return 4===i.length?(e=parseInt(i.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===i.length&&(e=parseInt(i.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var s=i.indexOf("("),r=i.indexOf(")");if(-1!==s&&r+1===i.length){var o=i.substr(0,s),a=i.substr(s+1,r-(s+1)).split(","),l=1;switch(o){case"rgba":if(4!==a.length)return null;l=hc(a.pop());case"rgb":return 3!==a.length?null:[ag(a[0]),ag(a[1]),ag(a[2]),l];case"hsla":if(4!==a.length)return null;l=hc(a.pop());case"hsl":if(3!==a.length)return null;var h=(parseFloat(a[0])%360+360)%360/360,u=hc(a[1]),c=hc(a[2]),d=c<=.5?c*(u+1):c+u-c*u,p=2*c-d;return[lc(255*lg(p,d,h+1/3)),lc(255*lg(p,d,h)),lc(255*lg(p,d,h-1/3)),l];default:return null}}return null}}catch{}class gn{constructor(t,e,i,s=1){this.r=t,this.g=e,this.b=i,this.a=s}static parse(t){if(!t)return;if(t instanceof gn)return t;if("string"!=typeof t)return;const e=Mx(t);return e?new gn(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,i,s]=this.toArray();return`rgba(${Math.round(t)},${Math.round(e)},${Math.round(i)},${s})`}toArray(){const{r:t,g:e,b:i,a:s}=this;return 0===s?[0,0,0,0]:[255*t/s,255*e/s,255*i/s,s]}toArray01(){const{r:t,g:e,b:i,a:s}=this;return 0===s?[0,0,0,0]:[t/s,e/s,i/s,s]}toArray01PremultipliedAlpha(){const{r:t,g:e,b:i,a:s}=this;return[t,e,i,s]}}gn.black=new gn(0,0,0,1),gn.white=new gn(1,1,1,1),gn.transparent=new gn(0,0,0,0),gn.red=new gn(1,0,0,1),gn.blue=new gn(0,0,1,1);var In=gn;function $l(n){return"object"==typeof n?["literal",n]:n}function hg(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Ex(n,t){const e=$l(function(s,r){return void 0!==s?s:void 0!==r?r:void 0}(n.default,t.default));return void 0===e&&"resolvedImage"===t.type?"":e}function ug(n,t,e){const i=dg(n,t),s=["get",n.property];if("categorical"===i&&"boolean"==typeof e[0][0]){const r=["case"];for(const o of e)r.push(["==",s,o[0]],o[1]);return r.push(Ex(n,t)),r}if("categorical"===i){const r=["match",s];for(const o of e)ga(r,o[0],o[1],!1);return r.push(Ex(n,t)),r}if("interval"===i){const r=["step",["number",s]];for(const o of e)ga(r,o[0],o[1],!0);return cg(r),void 0===n.default?r:["case",["==",["typeof",s],"number"],r,$l(n.default)]}if("exponential"===i){const r=void 0!==n.base?n.base:1,o=[hg(n),1===r?["linear"]:["exponential",r],["number",s]];for(const a of e)ga(o,a[0],a[1],!1);return void 0===n.default?o:["case",["==",["typeof",s],"number"],o,$l(n.default)]}throw new Error(`Unknown property function type ${i}`)}function cg(n){"step"===n[0]&&3===n.length&&(n.push(0),n.push(n[3]))}function ga(n,t,e,i){n.length>3&&t===n[n.length-2]||(i&&2===n.length||n.push(t),n.push(e))}function dg(n,t){return n.type?n.type:t.expression.interpolated?"exponential":"interval"}function qS(n){const t=["concat"],e=/{([^{}]+)}/g;let i=0;for(let s=e.exec(n);null!==s;s=e.exec(n)){const r=n.slice(i,e.lastIndex-s[0].length);i=e.lastIndex,r.length>0&&t.push(r),t.push(["get",s[1]])}if(1===t.length)return n;if(i<n.length)t.push(n.slice(i));else if(2===t.length)return["to-string",t[1]];return t}class VS extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}var _s=VS;class pg{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[i,s]of e)this.bindings[i]=s}concat(t){return new pg(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}var BS=pg;const uc={kind:"null"},ot={kind:"number"},re={kind:"string"},te={kind:"boolean"},qs={kind:"color"},ma={kind:"object"},ee={kind:"value"},cc={kind:"collator"},dc={kind:"formatted"},Kl={kind:"resolvedImage"};function Gn(n,t){return{kind:"array",itemType:n,N:t}}function ui(n){if("array"===n.kind){const t=ui(n.itemType);return"number"==typeof n.N?`array<${t}, ${n.N}>`:"value"===n.itemType.kind?"array":`array<${t}>`}return n.kind}const ZS=[uc,ot,re,te,qs,dc,ma,Gn(ee),Kl];function Jl(n,t){if("error"===t.kind)return null;if("array"===n.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!Jl(n.itemType,t.itemType))&&("number"!=typeof n.N||n.N===t.N))return null}else{if(n.kind===t.kind)return null;if("value"===n.kind)for(const e of ZS)if(!Jl(e,t))return null}return`Expected ${ui(n)} but found ${ui(t)} instead.`}function fg(n,t){return t.some(e=>e.kind===n.kind)}function Ql(n,t){return t.some(e=>"null"===e?null===n:"array"===e?Array.isArray(n):"object"===e?n&&!Array.isArray(n)&&"object"==typeof n:e===typeof n)}class gg{constructor(t,e,i){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class mg{constructor(t,e,i,s,r){this.text=t.normalize?t.normalize():t,this.image=e,this.scale=i,this.fontStack=s,this.textColor=r}}class vs{constructor(t){this.sections=t}static fromString(t){return new vs([new mg(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(t=>0!==t.text.length||t.image&&0!==t.image.name.length)}static factory(t){return t instanceof vs?t:vs.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map(t=>t.text).join("")}serialize(){const t=["format"];for(const e of this.sections){if(e.image){t.push(["image",e.image.name]);continue}t.push(e.text);const i={};e.fontStack&&(i["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(i["font-scale"]=e.scale),e.textColor&&(i["text-color"]=["rgba"].concat(e.textColor.toArray())),t.push(i)}return t}}class Tr{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Tr({name:t,available:!1}):null}serialize(){return["image",this.name]}}function Tx(n,t,e,i){return"number"==typeof n&&n>=0&&n<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255?typeof i>"u"||"number"==typeof i&&i>=0&&i<=1?null:`Invalid rgba value [${[n,t,e,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof i?[n,t,e,i]:[n,t,e]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function pc(n){if(null===n||"string"==typeof n||"boolean"==typeof n||"number"==typeof n||n instanceof In||n instanceof gg||n instanceof vs||n instanceof Tr)return!0;if(Array.isArray(n)){for(const t of n)if(!pc(t))return!1;return!0}if("object"==typeof n){for(const t in n)if(!pc(n[t]))return!1;return!0}return!1}function Gi(n){if(null===n)return uc;if("string"==typeof n)return re;if("boolean"==typeof n)return te;if("number"==typeof n)return ot;if(n instanceof In)return qs;if(n instanceof gg)return cc;if(n instanceof vs)return dc;if(n instanceof Tr)return Kl;if(Array.isArray(n)){const t=n.length;let e;for(const i of n){const s=Gi(i);if(e){if(e===s)continue;e=ee;break}e=s}return Gn(e||ee,t)}return ma}function th(n){const t=typeof n;return null===n?"":"string"===t||"number"===t||"boolean"===t?String(n):n instanceof In||n instanceof vs||n instanceof Tr?n.toString():JSON.stringify(n)}class yg{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!pc(t[1]))return e.error("invalid value");const i=t[1];let s=Gi(i);const r=e.expectedType;return"array"===s.kind&&0===s.N&&r&&"array"===r.kind&&("number"!=typeof r.N||0===r.N)&&(s=r),new yg(s,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof In?["rgba"].concat(this.value.toArray()):this.value instanceof vs?this.value.serialize():this.value}}var fc=yg,Ui=class{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}};const _g={string:re,number:ot,boolean:te,object:ma};class vg{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let i,s=1;const r=t[0];if("array"===r){let a,l;if(t.length>2){const h=t[1];if("string"!=typeof h||!(h in _g)||"object"===h)return e.error('The item type argument of "array" must be one of string, number, boolean',1);a=_g[h],s++}else a=ee;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);l=t[2],s++}i=Gn(a,l)}else i=_g[r];const o=[];for(;s<t.length;s++){const a=e.parse(t[s],s,ee);if(!a)return null;o.push(a)}return new vg(i,o)}evaluate(t){for(let e=0;e<this.args.length;e++){const i=this.args[e].evaluate(t);if(!Jl(this.type,Gi(i)))return i;if(e===this.args.length-1)throw new Ui(`Expected value to be of type ${ui(this.type)}, but found ${ui(Gi(i))} instead.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=this.type,e=[t.kind];if("array"===t.kind){const i=t.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){e.push(i.kind);const s=t.N;("number"==typeof s||this.args.length>1)&&e.push(s)}}return e.concat(this.args.map(i=>i.serialize()))}}var Vs=vg;class gc{constructor(t){this.type=dc,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const i=t[1];if(!Array.isArray(i)&&"object"==typeof i)return e.error("First argument must be an image or text section.");const s=[];let r=!1;for(let o=1;o<=t.length-1;++o){const a=t[o];if(r&&"object"==typeof a&&!Array.isArray(a)){r=!1;let l=null;if(a["font-scale"]&&(l=e.parse(a["font-scale"],1,ot),!l))return null;let h=null;if(a["text-font"]&&(h=e.parse(a["text-font"],1,Gn(re)),!h))return null;let u=null;if(a["text-color"]&&(u=e.parse(a["text-color"],1,qs),!u))return null;const c=s[s.length-1];c.scale=l,c.font=h,c.textColor=u}else{const l=e.parse(t[o],1,ee);if(!l)return null;const h=l.type.kind;if("string"!==h&&"value"!==h&&"null"!==h&&"resolvedImage"!==h)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");r=!0,s.push({content:l,scale:null,font:null,textColor:null})}}return new gc(s)}evaluate(t){return new vs(this.sections.map(e=>{const i=e.content.evaluate(t);return Gi(i)===Kl?new mg("",i,null,null,null):new mg(th(i),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)}))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const e of this.sections){t.push(e.content.serialize());const i={};e.scale&&(i["font-scale"]=e.scale.serialize()),e.font&&(i["text-font"]=e.font.serialize()),e.textColor&&(i["text-color"]=e.textColor.serialize()),t.push(i)}return t}}class mc{constructor(t){this.type=Kl,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const i=e.parse(t[1],1,re);return i?new mc(i):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),i=Tr.fromString(e);return i&&t.availableImages&&(i.available=t.availableImages.indexOf(e)>-1),i}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const WS={"to-boolean":te,"to-color":qs,"to-number":ot,"to-string":re};class xg{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const i=t[0];if(("to-boolean"===i||"to-string"===i)&&2!==t.length)return e.error("Expected one argument.");const s=WS[i],r=[];for(let o=1;o<t.length;o++){const a=e.parse(t[o],o,ee);if(!a)return null;r.push(a)}return new xg(s,r)}evaluate(t){if("boolean"===this.type.kind)return!!this.args[0].evaluate(t);if("color"===this.type.kind){let e,i;for(const s of this.args){if(e=s.evaluate(t),i=null,e instanceof In)return e;if("string"==typeof e){const r=t.parseColor(e);if(r)return r}else if(Array.isArray(e)&&(i=e.length<3||e.length>4?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:Tx(e[0],e[1],e[2],e[3]),!i))return new In(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new Ui(i||`Could not parse color from value '${"string"==typeof e?e:String(JSON.stringify(e))}'`)}if("number"===this.type.kind){let e=null;for(const i of this.args){if(e=i.evaluate(t),null===e)return 0;const s=Number(e);if(!isNaN(s))return s}throw new Ui(`Could not convert ${JSON.stringify(e)} to number.`)}return"formatted"===this.type.kind?vs.fromString(th(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?Tr.fromString(th(this.args[0].evaluate(t))):th(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){if("formatted"===this.type.kind)return new gc([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new mc(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild(e=>{t.push(e.serialize())}),t}}var ya=xg;const HS=["Unknown","Point","LineString","Polygon"];var kx=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?HS[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const t=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:i,y:s}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(i*e-t[0])+this.featureDistanceData.bearing[1]*(s*e-t[1])}return 0}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=In.parse(t)),e}};class _a{constructor(t,e,i,s){this.name=t,this.type=e,this._evaluate=i,this.args=s}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(t=>t.serialize()))}static parse(t,e){const i=t[0],s=_a.definitions[i];if(!s)return e.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const r=Array.isArray(s)?s[0]:s.type,o=Array.isArray(s)?[[s[1],s[2]]]:s.overloads,a=o.filter(([h])=>!Array.isArray(h)||h.length===t.length-1);let l=null;for(const[h,u]of a){l=new Dx(e.registry,e.path,null,e.scope);const c=[];let d=!1;for(let p=1;p<t.length;p++){const f=t[p],g=Array.isArray(h)?h[p-1]:h.type,m=l.parse(f,1+c.length,g);if(!m){d=!0;break}c.push(m)}if(!d){if(Array.isArray(h)&&h.length!==c.length){l.error(`Expected ${h.length} arguments, but found ${c.length} instead.`);continue}for(let p=0;p<c.length;p++){const f=Array.isArray(h)?h[p]:h.type,g=c[p];l.concat(p+1).checkSubtype(f,g.type)}if(0===l.errors.length)return new _a(i,r,u,c)}}if(1===a.length)e.errors.push(...l.errors);else{const h=(a.length?a:o).map(([c])=>{return p=c,Array.isArray(p)?`(${p.map(ui).join(", ")})`:`(${ui(p.type)}...)`;var p}).join(" | "),u=[];for(let c=1;c<t.length;c++){const d=e.parse(t[c],1+u.length);if(!d)return null;u.push(ui(d.type))}e.error(`Expected arguments of type ${h}, but found (${u.join(", ")}) instead.`)}return null}static register(t,e){_a.definitions=e;for(const i in e)t[i]=_a}}var va=_a;class yc{constructor(t,e,i){this.type=cc,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const i=t[1];if("object"!=typeof i||Array.isArray(i))return e.error("Collator options argument must be an object.");const s=e.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,te);if(!s)return null;const r=e.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,te);if(!r)return null;let o=null;return i.locale&&(o=e.parse(i.locale,1,re),!o)?null:new yc(s,r,o)}evaluate(t){return new gg(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const kr=8192;function wg(n,t){n[0]=Math.min(n[0],t[0]),n[1]=Math.min(n[1],t[1]),n[2]=Math.max(n[2],t[0]),n[3]=Math.max(n[3],t[1])}function _c(n,t){return!(n[0]<=t[0]||n[2]>=t[2]||n[1]<=t[1]||n[3]>=t[3])}function US(n,t){const e=(180+n[0])/360,i=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n[1]*Math.PI/360)))/360,s=Math.pow(2,t.z);return[Math.round(e*s*kr),Math.round(i*s*kr)]}function XS(n,t,e){const i=n[0]-t[0],s=n[1]-t[1],r=n[0]-e[0],o=n[1]-e[1];return i*o-r*s==0&&i*r<=0&&s*o<=0}function YS(n,t,e){return t[1]>n[1]!=e[1]>n[1]&&n[0]<(e[0]-t[0])*(n[1]-t[1])/(e[1]-t[1])+t[0]}function bg(n,t){let e=!1;for(let i=0,s=t.length;i<s;i++){const r=t[i];for(let o=0,a=r.length;o<a-1;o++){if(XS(n,r[o],r[o+1]))return!1;YS(n,r[o],r[o+1])&&(e=!e)}}return e}function $S(n,t){for(let e=0;e<t.length;e++)if(bg(n,t[e]))return!0;return!1}function Ix(n,t,e,i){const s=i[0]-e[0],r=i[1]-e[1],o=(n[0]-e[0])*r-s*(n[1]-e[1]),a=(t[0]-e[0])*r-s*(t[1]-e[1]);return o>0&&a<0||o<0&&a>0}function KS(n,t,e,i){return 0!==function(r,o){return r[0]*o[1]-r[1]*o[0]}([i[0]-e[0],i[1]-e[1]],[t[0]-n[0],t[1]-n[1]])&&!(!Ix(n,t,e,i)||!Ix(e,i,n,t))}function JS(n,t,e){for(const i of e)for(let s=0;s<i.length-1;++s)if(KS(n,t,i[s],i[s+1]))return!0;return!1}function Px(n,t){for(let e=0;e<n.length;++e)if(!bg(n[e],t))return!1;for(let e=0;e<n.length-1;++e)if(JS(n[e],n[e+1],t))return!1;return!0}function QS(n,t){for(let e=0;e<t.length;e++)if(Px(n,t[e]))return!0;return!1}function Cg(n,t,e){const i=[];for(let s=0;s<n.length;s++){const r=[];for(let o=0;o<n[s].length;o++){const a=US(n[s][o],e);wg(t,a),r.push(a)}i.push(r)}return i}function Rx(n,t,e){const i=[];for(let s=0;s<n.length;s++){const r=Cg(n[s],t,e);i.push(r)}return i}function Fx(n,t,e,i){if(n[0]<e[0]||n[0]>e[2]){const s=.5*i;let r=n[0]-e[0]>s?-i:e[0]-n[0]>s?i:0;0===r&&(r=n[0]-e[2]>s?-i:e[2]-n[0]>s?i:0),n[0]+=r}wg(t,n)}function Ox(n,t,e,i){const s=Math.pow(2,i.z)*kr,r=[i.x*kr,i.y*kr],o=[];if(!n)return o;for(const a of n)for(const l of a){const h=[l.x+r[0],l.y+r[1]];Fx(h,t,e,s),o.push(h)}return o}function Ax(n,t,e,i){const s=Math.pow(2,i.z)*kr,r=[i.x*kr,i.y*kr],o=[];if(!n)return o;for(const a of n){const l=[];for(const h of a){const u=[h.x+r[0],h.y+r[1]];wg(t,u),l.push(u)}o.push(l)}if(t[2]-t[0]<=s/2){(l=t)[0]=l[1]=1/0,l[2]=l[3]=-1/0;for(const a of o)for(const l of a)Fx(l,t,e,s)}var l;return o}class eh{constructor(t,e){this.type=te,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(pc(t[1])){const i=t[1];if("FeatureCollection"===i.type)for(let s=0;s<i.features.length;++s){const r=i.features[s].geometry.type;if("Polygon"===r||"MultiPolygon"===r)return new eh(i,i.features[s].geometry)}else if("Feature"===i.type){const s=i.geometry.type;if("Polygon"===s||"MultiPolygon"===s)return new eh(i,i.geometry)}else if("Polygon"===i.type||"MultiPolygon"===i.type)return new eh(i,i)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(i,s){const r=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],a=i.canonicalID();if(!a)return!1;if("Polygon"===s.type){const l=Cg(s.coordinates,o,a),h=Ox(i.geometry(),r,o,a);if(!_c(r,o))return!1;for(const u of h)if(!bg(u,l))return!1}if("MultiPolygon"===s.type){const l=Rx(s.coordinates,o,a),h=Ox(i.geometry(),r,o,a);if(!_c(r,o))return!1;for(const u of h)if(!$S(u,l))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(i,s){const r=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],a=i.canonicalID();if(!a)return!1;if("Polygon"===s.type){const l=Cg(s.coordinates,o,a),h=Ax(i.geometry(),r,o,a);if(!_c(r,o))return!1;for(const u of h)if(!Px(u,l))return!1}if("MultiPolygon"===s.type){const l=Rx(s.coordinates,o,a),h=Ax(i.geometry(),r,o,a);if(!_c(r,o))return!1;for(const u of h)if(!QS(u,l))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Mg=eh;function vc(n){if(n instanceof va&&("get"===n.name&&1===n.args.length||"feature-state"===n.name||"has"===n.name&&1===n.args.length||"properties"===n.name||"geometry-type"===n.name||"id"===n.name||/^filter-/.test(n.name))||n instanceof Mg)return!1;let t=!0;return n.eachChild(e=>{t&&!vc(e)&&(t=!1)}),t}function Sg(n){if(n instanceof va&&"feature-state"===n.name)return!1;let t=!0;return n.eachChild(e=>{t&&!Sg(e)&&(t=!1)}),t}function Eg(n,t){if(n instanceof va&&t.indexOf(n.name)>=0)return!1;let e=!0;return n.eachChild(i=>{e&&!Eg(i,t)&&(e=!1)}),e}class Tg{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const i=t[1];return e.scope.has(i)?new Tg(i,e.scope.get(i)):e.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Lx=Tg;class kg{constructor(t,e=[],i,s=new BS,r=[]){this.registry=t,this.path=e,this.key=e.map(o=>`[${o}]`).join(""),this.scope=s,this.errors=r,this.expectedType=i}parse(t,e,i,s,r={}){return e?this.concat(e,i,s)._parse(t,r):this._parse(t,r)}_parse(t,e){function i(s,r,o){return"assert"===o?new Vs(r,[s]):"coerce"===o?new ya(r,[s]):s}if((null===t||"string"==typeof t||"boolean"==typeof t||"number"==typeof t)&&(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const s=t[0];if("string"!=typeof s)return this.error(`Expression name must be a string, but found ${typeof s} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const r=this.registry[s];if(r){let o=r.parse(t,this);if(!o)return null;if(this.expectedType){const a=this.expectedType,l=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==l.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==l.kind&&"string"!==l.kind){if(this.checkSubtype(a,l))return null}else o=i(o,a,e.typeAnnotation||"coerce");else o=i(o,a,e.typeAnnotation||"assert")}if(!(o instanceof fc)&&"resolvedImage"!==o.type.kind&&Ig(o)){const a=new kx;try{o=new fc(o.type,o.evaluate(a))}catch(l){return this.error(l.message),null}}return o}return this.error(`Unknown expression "${s}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(typeof t>"u"?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,e,i){const s="number"==typeof t?this.path.concat(t):this.path,r=i?this.scope.concat(i):this.scope;return new kg(this.registry,s,e||null,r,this.errors)}error(t,...e){const i=`${this.key}${e.map(s=>`[${s}]`).join("")}`;this.errors.push(new _s(i,t))}checkSubtype(t,e){const i=Jl(t,e);return i&&this.error(i),i}}var Dx=kg;function Ig(n){if(n instanceof Lx)return Ig(n.boundExpression);if(n instanceof va&&"error"===n.name||n instanceof yc||n instanceof Mg)return!1;const t=n instanceof ya||n instanceof Vs;let e=!0;return n.eachChild(i=>{e=t?e&&Ig(i):e&&i instanceof fc}),!!e&&vc(n)&&Eg(n,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Nx(n,t){const e=n.length-1;let i,s,r=0,o=e,a=0;for(;r<=o;)if(a=Math.floor((r+o)/2),i=n[a],s=n[a+1],i<=t){if(a===e||t<s)return a;r=a+1}else{if(!(i>t))throw new Ui("Input is not a number.");o=a-1}return 0}class Pg{constructor(t,e,i){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[s,r]of i)this.labels.push(s),this.outputs.push(r)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const i=e.parse(t[1],1,ot);if(!i)return null;const s=[];let r=null;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(let o=1;o<t.length;o+=2){const a=1===o?-1/0:t[o],l=t[o+1],h=o,u=o+1;if("number"!=typeof a)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(s.length&&s[s.length-1][0]>=a)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',h);const c=e.parse(l,u,r);if(!c)return null;r=r||c.type,s.push([a,c])}return new Pg(r,i,s)}evaluate(t){const e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);const s=this.input.evaluate(t);if(s<=e[0])return i[0].evaluate(t);const r=e.length;return s>=e[r-1]?i[r-1].evaluate(t):i[Nx(e,s)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){const t=["step",this.input.serialize()];for(let e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}var zx=Pg,tE=xa;function xa(n,t,e,i){this.cx=3*n,this.bx=3*(e-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=i,this.p2x=e,this.p2y=i}xa.prototype.sampleCurveX=function(n){return((this.ax*n+this.bx)*n+this.cx)*n},xa.prototype.sampleCurveY=function(n){return((this.ay*n+this.by)*n+this.cy)*n},xa.prototype.sampleCurveDerivativeX=function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},xa.prototype.solveCurveX=function(n,t){var e,i,s,r,o;for(typeof t>"u"&&(t=1e-6),s=n,o=0;o<8;o++){if(r=this.sampleCurveX(s)-n,Math.abs(r)<t)return s;var a=this.sampleCurveDerivativeX(s);if(Math.abs(a)<1e-6)break;s-=r/a}if((s=n)<(e=0))return e;if(s>(i=1))return i;for(;e<i;){if(r=this.sampleCurveX(s),Math.abs(r-n)<t)return s;n>r?e=s:i=s,s=.5*(i-e)+e}return s},xa.prototype.solve=function(n,t){return this.sampleCurveY(this.solveCurveX(n,t))};var eE=Cx(tE);function Pn(n,t,e){return n*(1-e)+t*e}var iE=Object.freeze({__proto__:null,number:Pn,color:function(t,e,i){return new In(Pn(t.r,e.r,i),Pn(t.g,e.g,i),Pn(t.b,e.b,i),Pn(t.a,e.a,i))},array:function(t,e,i){return t.map((s,r)=>Pn(s,e[r],i))}});const jx=4/29,wa=6/29,Gx=3*wa*wa,nE=wa*wa*wa,sE=Math.PI/180,rE=180/Math.PI;function Rg(n){return n>nE?Math.pow(n,1/3):n/Gx+jx}function Fg(n){return n>wa?n*n*n:Gx*(n-jx)}function Og(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function Ag(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function qx(n){const t=Ag(n.r),e=Ag(n.g),i=Ag(n.b),s=Rg((.4124564*t+.3575761*e+.1804375*i)/.95047),r=Rg((.2126729*t+.7151522*e+.072175*i)/1);return{l:116*r-16,a:500*(s-r),b:200*(r-Rg((.0193339*t+.119192*e+.9503041*i)/1.08883)),alpha:n.a}}function Vx(n){let t=(n.l+16)/116,e=isNaN(n.a)?t:t+n.a/500,i=isNaN(n.b)?t:t-n.b/200;return t=1*Fg(t),e=.95047*Fg(e),i=1.08883*Fg(i),new In(Og(3.2404542*e-1.5371385*t-.4985314*i),Og(-.969266*e+1.8760108*t+.041556*i),Og(.0556434*e-.2040259*t+1.0572252*i),n.alpha)}function oE(n,t,e){const i=t-n;return n+e*(i>180||i<-180?i-360*Math.round(i/360):i)}const xc={forward:qx,reverse:Vx,interpolate:function(t,e,i){return{l:Pn(t.l,e.l,i),a:Pn(t.a,e.a,i),b:Pn(t.b,e.b,i),alpha:Pn(t.alpha,e.alpha,i)}}},Bx=function(t){const{l:e,a:i,b:s}=qx(t),r=Math.atan2(s,i)*rE;return{h:r<0?r+360:r,c:Math.sqrt(i*i+s*s),l:e,alpha:t.a}};class wc{constructor(t,e,i,s,r){this.type=t,this.operator=e,this.interpolation=i,this.input=s,this.labels=[],this.outputs=[];for(const[o,a]of r)this.labels.push(o),this.outputs.push(a)}static interpolationFactor(t,e,i,s){let r=0;if("exponential"===t.name)r=Lg(e,t.base,i,s);else if("linear"===t.name)r=Lg(e,1,i,s);else if("cubic-bezier"===t.name){const o=t.controlPoints;r=new eE(o[0],o[1],o[2],o[3]).solve(Lg(e,1,i,s))}return r}static parse(t,e){let[i,s,r,...o]=t;if(!Array.isArray(s)||0===s.length)return e.error("Expected an interpolation type expression.",1);if("linear"===s[0])s={name:"linear"};else if("exponential"===s[0]){const h=s[1];if("number"!=typeof h)return e.error("Exponential interpolation requires a numeric base.",1,1);s={name:"exponential",base:h}}else{if("cubic-bezier"!==s[0])return e.error(`Unknown interpolation type ${String(s[0])}`,1,0);{const h=s.slice(1);if(4!==h.length||h.some(u=>"number"!=typeof u||u<0||u>1))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);s={name:"cubic-bezier",controlPoints:h}}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(r=e.parse(r,2,ot),!r)return null;const a=[];let l=null;"interpolate-hcl"===i||"interpolate-lab"===i?l=qs:e.expectedType&&"value"!==e.expectedType.kind&&(l=e.expectedType);for(let h=0;h<o.length;h+=2){const u=o[h],c=o[h+1],d=h+3,p=h+4;if("number"!=typeof u)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(a.length&&a[a.length-1][0]>=u)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',d);const f=e.parse(c,p,l);if(!f)return null;l=l||f.type,a.push([u,f])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new wc(l,i,s,r,a):e.error(`Type ${ui(l)} is not interpolatable.`)}evaluate(t){const e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);const s=this.input.evaluate(t);if(s<=e[0])return i[0].evaluate(t);const r=e.length;if(s>=e[r-1])return i[r-1].evaluate(t);const o=Nx(e,s),a=wc.interpolationFactor(this.interpolation,s,e[o],e[o+1]),l=i[o].evaluate(t),h=i[o+1].evaluate(t);return"interpolate"===this.operator?iE[this.type.kind.toLowerCase()](l,h,a):"interpolate-hcl"===this.operator?function(t){const e=t.h*sE,i=t.c;return Vx({l:t.l,a:Math.cos(e)*i,b:Math.sin(e)*i,alpha:t.alpha})}(function(t,e,i){return{h:oE(t.h,e.h,i),c:Pn(t.c,e.c,i),l:Pn(t.l,e.l,i),alpha:Pn(t.alpha,e.alpha,i)}}(Bx(l),Bx(h),a)):xc.reverse(xc.interpolate(xc.forward(l),xc.forward(h),a))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){let t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const e=[this.operator,t,this.input.serialize()];for(let i=0;i<this.labels.length;i++)e.push(this.labels[i],this.outputs[i].serialize());return e}}function Lg(n,t,e,i){const s=i-e,r=n-e;return 0===s?0:1===t?r/s:(Math.pow(t,r)-1)/(Math.pow(t,s)-1)}var so=wc;class bc{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let i=null;const s=e.expectedType;s&&"value"!==s.kind&&(i=s);const r=[];for(const o of t.slice(1)){const a=e.parse(o,1+r.length,i,void 0,{typeAnnotation:"omit"});if(!a)return null;i=i||a.type,r.push(a)}return s&&r.some(o=>Jl(s,o.type))?new bc(ee,r):new bc(i,r)}evaluate(t){let e,i=null,s=0;for(const r of this.args){if(s++,i=r.evaluate(t),i&&i instanceof Tr&&!i.available&&(e||(e=i),i=null,s===this.args.length))return e;if(null!==i)break}return i}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=["coalesce"];return this.eachChild(e=>{t.push(e.serialize())}),t}}var Zx=bc;class Dg{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const i=[];for(let r=1;r<t.length-1;r+=2){const o=t[r];if("string"!=typeof o)return e.error(`Expected string, but found ${typeof o} instead.`,r);if(/[^a-zA-Z0-9_]/.test(o))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);const a=e.parse(t[r+1],r+1);if(!a)return null;i.push([o,a])}const s=e.parse(t[t.length-1],t.length-1,e.expectedType,i);return s?new Dg(i,s):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[e,i]of this.bindings)t.push(e,i.serialize());return t.push(this.result.serialize()),t}}var Wx=Dg;class Ng{constructor(t,e,i){this.type=t,this.index=e,this.input=i}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,ot),s=e.parse(t[2],2,Gn(e.expectedType||ee));return i&&s?new Ng(s.type.itemType,i,s):null}evaluate(t){const e=this.index.evaluate(t),i=this.input.evaluate(t);if(e<0)throw new Ui(`Array index out of bounds: ${e} < 0.`);if(e>=i.length)throw new Ui(`Array index out of bounds: ${e} > ${i.length-1}.`);if(e!==Math.floor(e))throw new Ui(`Array index must be an integer, but found ${e} instead.`);return i[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var hE=Ng;class zg{constructor(t,e){this.type=te,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,ee),s=e.parse(t[2],2,ee);return i&&s?fg(i.type,[te,re,ot,uc,ee])?new zg(i,s):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${ui(i.type)} instead`):null}evaluate(t){const e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(null==i)return!1;if(!Ql(e,["boolean","string","number","null"]))throw new Ui(`Expected first argument to be of type boolean, string, number or null, but found ${ui(Gi(e))} instead.`);if(!Ql(i,["string","array"]))throw new Ui(`Expected second argument to be of type array or string, but found ${ui(Gi(i))} instead.`);return i.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var uE=zg;class Cc{constructor(t,e,i){this.type=ot,this.needle=t,this.haystack=e,this.fromIndex=i}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,ee),s=e.parse(t[2],2,ee);if(!i||!s)return null;if(!fg(i.type,[te,re,ot,uc,ee]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${ui(i.type)} instead`);if(4===t.length){const r=e.parse(t[3],3,ot);return r?new Cc(i,s,r):null}return new Cc(i,s)}evaluate(t){const e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!Ql(e,["boolean","string","number","null"]))throw new Ui(`Expected first argument to be of type boolean, string, number or null, but found ${ui(Gi(e))} instead.`);if(!Ql(i,["string","array"]))throw new Ui(`Expected second argument to be of type array or string, but found ${ui(Gi(i))} instead.`);if(this.fromIndex){const s=this.fromIndex.evaluate(t);return i.indexOf(e,s)}return i.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var cE=Cc;class jg{constructor(t,e,i,s,r,o){this.inputType=t,this.type=e,this.input=i,this.cases=s,this.outputs=r,this.otherwise=o}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error("Expected an even number of arguments.");let i,s;e.expectedType&&"value"!==e.expectedType.kind&&(s=e.expectedType);const r={},o=[];for(let h=2;h<t.length-1;h+=2){let u=t[h];const c=t[h+1];Array.isArray(u)||(u=[u]);const d=e.concat(h);if(0===u.length)return d.error("Expected at least one branch label.");for(const f of u){if("number"!=typeof f&&"string"!=typeof f)return d.error("Branch labels must be numbers or strings.");if("number"==typeof f&&Math.abs(f)>Number.MAX_SAFE_INTEGER)return d.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof f&&Math.floor(f)!==f)return d.error("Numeric branch labels must be integer values.");if(i){if(d.checkSubtype(i,Gi(f)))return null}else i=Gi(f);if(typeof r[String(f)]<"u")return d.error("Branch labels must be unique.");r[String(f)]=o.length}const p=e.parse(c,h,s);if(!p)return null;s=s||p.type,o.push(p)}const a=e.parse(t[1],1,ee);if(!a)return null;const l=e.parse(t[t.length-1],t.length-1,s);return!l||"value"!==a.type.kind&&e.concat(1).checkSubtype(i,a.type)?null:new jg(i,s,a,r,o,l)}evaluate(t){const e=this.input.evaluate(t);return(Gi(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],e=Object.keys(this.cases).sort(),i=[],s={};for(const o of e){const a=s[this.cases[o]];void 0===a?(s[this.cases[o]]=i.length,i.push([this.cases[o],[o]])):i[a][1].push(o)}const r=o=>"number"===this.inputType.kind?Number(o):o;for(const[o,a]of i)t.push(1===a.length?r(a[0]):a.map(r)),t.push(this.outputs[o].serialize());return t.push(this.otherwise.serialize()),t}}var dE=jg;class Gg{constructor(t,e,i){this.type=t,this.branches=e,this.otherwise=i}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);const s=[];for(let o=1;o<t.length-1;o+=2){const a=e.parse(t[o],o,te);if(!a)return null;const l=e.parse(t[o+1],o+1,i);if(!l)return null;s.push([a,l]),i=i||l.type}const r=e.parse(t[t.length-1],t.length-1,i);return r?new Gg(i,s,r):null}evaluate(t){for(const[e,i]of this.branches)if(e.evaluate(t))return i.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,i]of this.branches)t(e),t(i);t(this.otherwise)}outputDefined(){return this.branches.every(([t,e])=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild(e=>{t.push(e.serialize())}),t}}var pE=Gg;class Mc{constructor(t,e,i,s){this.type=t,this.input=e,this.beginIndex=i,this.endIndex=s}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,ee),s=e.parse(t[2],2,ot);if(!i||!s)return null;if(!fg(i.type,[Gn(ee),re,ee]))return e.error(`Expected first argument to be of type array or string, but found ${ui(i.type)} instead`);if(4===t.length){const r=e.parse(t[3],3,ot);return r?new Mc(i.type,i,s,r):null}return new Mc(i.type,i,s)}evaluate(t){const e=this.input.evaluate(t),i=this.beginIndex.evaluate(t);if(!Ql(e,["string","array"]))throw new Ui(`Expected first argument to be of type array or string, but found ${ui(Gi(e))} instead.`);if(this.endIndex){const s=this.endIndex.evaluate(t);return e.slice(i,s)}return e.slice(i)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var fE=Mc;function Hx(n,t){return"=="===n||"!="===n?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function Ux(n,t,e,i){return 0===i.compare(t,e)}function ba(n,t,e){const i="=="!==n&&"!="!==n;return class $w{constructor(r,o,a){this.type=te,this.lhs=r,this.rhs=o,this.collator=a,this.hasUntypedArgument="value"===r.type.kind||"value"===o.type.kind}static parse(r,o){if(3!==r.length&&4!==r.length)return o.error("Expected two or three arguments.");const a=r[0];let l=o.parse(r[1],1,ee);if(!l)return null;if(!Hx(a,l.type))return o.concat(1).error(`"${a}" comparisons are not supported for type '${ui(l.type)}'.`);let h=o.parse(r[2],2,ee);if(!h)return null;if(!Hx(a,h.type))return o.concat(2).error(`"${a}" comparisons are not supported for type '${ui(h.type)}'.`);if(l.type.kind!==h.type.kind&&"value"!==l.type.kind&&"value"!==h.type.kind)return o.error(`Cannot compare types '${ui(l.type)}' and '${ui(h.type)}'.`);i&&("value"===l.type.kind&&"value"!==h.type.kind?l=new Vs(h.type,[l]):"value"!==l.type.kind&&"value"===h.type.kind&&(h=new Vs(l.type,[h])));let u=null;if(4===r.length){if("string"!==l.type.kind&&"string"!==h.type.kind&&"value"!==l.type.kind&&"value"!==h.type.kind)return o.error("Cannot use collator to compare non-string types.");if(u=o.parse(r[3],3,cc),!u)return null}return new $w(l,h,u)}evaluate(r){const o=this.lhs.evaluate(r),a=this.rhs.evaluate(r);if(i&&this.hasUntypedArgument){const l=Gi(o),h=Gi(a);if(l.kind!==h.kind||"string"!==l.kind&&"number"!==l.kind)throw new Ui(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${l.kind}, ${h.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const l=Gi(o),h=Gi(a);if("string"!==l.kind||"string"!==h.kind)return t(r,o,a)}return this.collator?e(r,o,a,this.collator.evaluate(r)):t(r,o,a)}eachChild(r){r(this.lhs),r(this.rhs),this.collator&&r(this.collator)}outputDefined(){return!0}serialize(){const r=[n];return this.eachChild(o=>{r.push(o.serialize())}),r}}}const gE=ba("==",function(t,e,i){return e===i},Ux),mE=ba("!=",function(t,e,i){return e!==i},function(t,e,i,s){return!Ux(0,e,i,s)}),yE=ba("<",function(t,e,i){return e<i},function(t,e,i,s){return s.compare(e,i)<0}),_E=ba(">",function(t,e,i){return e>i},function(t,e,i,s){return s.compare(e,i)>0}),vE=ba("<=",function(t,e,i){return e<=i},function(t,e,i,s){return s.compare(e,i)<=0}),xE=ba(">=",function(t,e,i){return e>=i},function(t,e,i,s){return s.compare(e,i)>=0});class qg{constructor(t,e,i,s,r,o){this.type=re,this.number=t,this.locale=e,this.currency=i,this.unit=s,this.minFractionDigits=r,this.maxFractionDigits=o}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const i=e.parse(t[1],1,ot);if(!i)return null;const s=t[2];if("object"!=typeof s||Array.isArray(s))return e.error("NumberFormat options argument must be an object.");let r=null;if(s.locale&&(r=e.parse(s.locale,1,re),!r))return null;let o=null;if(s.currency&&(o=e.parse(s.currency,1,re),!o))return null;let a=null;if(s.unit&&(a=e.parse(s.unit,1,re),!a))return null;let l=null;if(s["min-fraction-digits"]&&(l=e.parse(s["min-fraction-digits"],1,ot),!l))return null;let h=null;return s["max-fraction-digits"]&&(h=e.parse(s["max-fraction-digits"],1,ot),!h)?null:new qg(i,r,o,a,l,h)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(t):void 0,unit:this.unit?this.unit.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.unit&&t(this.unit),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.unit&&(t.unit=this.unit.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class Vg{constructor(t){this.type=ot,this.input=t}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const i=e.parse(t[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?e.error(`Expected argument of type string or array, but found ${ui(i.type)} instead.`):new Vg(i):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e||Array.isArray(e))return e.length;throw new Ui(`Expected value to be of type string or array, but found ${ui(Gi(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild(e=>{t.push(e.serialize())}),t}}const Xx={"==":gE,"!=":mE,">":_E,"<":yE,">=":xE,"<=":vE,array:Vs,at:hE,boolean:Vs,case:pE,coalesce:Zx,collator:yc,format:gc,image:mc,in:uE,"index-of":cE,interpolate:so,"interpolate-hcl":so,"interpolate-lab":so,length:Vg,let:Wx,literal:fc,match:dE,number:Vs,"number-format":qg,object:Vs,slice:fE,step:zx,string:Vs,"to-boolean":ya,"to-color":ya,"to-number":ya,"to-string":ya,var:Lx,within:Mg};function Yx(n,[t,e,i,s]){t=t.evaluate(n),e=e.evaluate(n),i=i.evaluate(n);const r=s?s.evaluate(n):1,o=Tx(t,e,i,r);if(o)throw new Ui(o);return new In(t/255*r,e/255*r,i/255*r,r)}function $x(n,t){return n in t}function Bg(n,t){const e=t[n];return typeof e>"u"?null:e}function ro(n){return{type:n}}va.register(Xx,{error:[{kind:"error"},[re],(n,[t])=>{throw new Ui(t.evaluate(n))}],typeof:[re,[ee],(n,[t])=>ui(Gi(t.evaluate(n)))],"to-rgba":[Gn(ot,4),[qs],(n,[t])=>t.evaluate(n).toArray()],rgb:[qs,[ot,ot,ot],Yx],rgba:[qs,[ot,ot,ot,ot],Yx],has:{type:te,overloads:[[[re],(n,[t])=>$x(t.evaluate(n),n.properties())],[[re,ma],(n,[t,e])=>$x(t.evaluate(n),e.evaluate(n))]]},get:{type:ee,overloads:[[[re],(n,[t])=>Bg(t.evaluate(n),n.properties())],[[re,ma],(n,[t,e])=>Bg(t.evaluate(n),e.evaluate(n))]]},"feature-state":[ee,[re],(n,[t])=>Bg(t.evaluate(n),n.featureState||{})],properties:[ma,[],n=>n.properties()],"geometry-type":[re,[],n=>n.geometryType()],id:[ee,[],n=>n.id()],zoom:[ot,[],n=>n.globals.zoom],pitch:[ot,[],n=>n.globals.pitch||0],"distance-from-center":[ot,[],n=>n.distanceFromCenter()],"heatmap-density":[ot,[],n=>n.globals.heatmapDensity||0],"line-progress":[ot,[],n=>n.globals.lineProgress||0],"sky-radial-progress":[ot,[],n=>n.globals.skyRadialProgress||0],accumulated:[ee,[],n=>void 0===n.globals.accumulated?null:n.globals.accumulated],"+":[ot,ro(ot),(n,t)=>{let e=0;for(const i of t)e+=i.evaluate(n);return e}],"*":[ot,ro(ot),(n,t)=>{let e=1;for(const i of t)e*=i.evaluate(n);return e}],"-":{type:ot,overloads:[[[ot,ot],(n,[t,e])=>t.evaluate(n)-e.evaluate(n)],[[ot],(n,[t])=>-t.evaluate(n)]]},"/":[ot,[ot,ot],(n,[t,e])=>t.evaluate(n)/e.evaluate(n)],"%":[ot,[ot,ot],(n,[t,e])=>t.evaluate(n)%e.evaluate(n)],ln2:[ot,[],()=>Math.LN2],pi:[ot,[],()=>Math.PI],e:[ot,[],()=>Math.E],"^":[ot,[ot,ot],(n,[t,e])=>Math.pow(t.evaluate(n),e.evaluate(n))],sqrt:[ot,[ot],(n,[t])=>Math.sqrt(t.evaluate(n))],log10:[ot,[ot],(n,[t])=>Math.log(t.evaluate(n))/Math.LN10],ln:[ot,[ot],(n,[t])=>Math.log(t.evaluate(n))],log2:[ot,[ot],(n,[t])=>Math.log(t.evaluate(n))/Math.LN2],sin:[ot,[ot],(n,[t])=>Math.sin(t.evaluate(n))],cos:[ot,[ot],(n,[t])=>Math.cos(t.evaluate(n))],tan:[ot,[ot],(n,[t])=>Math.tan(t.evaluate(n))],asin:[ot,[ot],(n,[t])=>Math.asin(t.evaluate(n))],acos:[ot,[ot],(n,[t])=>Math.acos(t.evaluate(n))],atan:[ot,[ot],(n,[t])=>Math.atan(t.evaluate(n))],min:[ot,ro(ot),(n,t)=>Math.min(...t.map(e=>e.evaluate(n)))],max:[ot,ro(ot),(n,t)=>Math.max(...t.map(e=>e.evaluate(n)))],abs:[ot,[ot],(n,[t])=>Math.abs(t.evaluate(n))],round:[ot,[ot],(n,[t])=>{const e=t.evaluate(n);return e<0?-Math.round(-e):Math.round(e)}],floor:[ot,[ot],(n,[t])=>Math.floor(t.evaluate(n))],ceil:[ot,[ot],(n,[t])=>Math.ceil(t.evaluate(n))],"filter-==":[te,[re,ee],(n,[t,e])=>n.properties()[t.value]===e.value],"filter-id-==":[te,[ee],(n,[t])=>n.id()===t.value],"filter-type-==":[te,[re],(n,[t])=>n.geometryType()===t.value],"filter-<":[te,[re,ee],(n,[t,e])=>{const i=n.properties()[t.value],s=e.value;return typeof i==typeof s&&i<s}],"filter-id-<":[te,[ee],(n,[t])=>{const e=n.id(),i=t.value;return typeof e==typeof i&&e<i}],"filter->":[te,[re,ee],(n,[t,e])=>{const i=n.properties()[t.value],s=e.value;return typeof i==typeof s&&i>s}],"filter-id->":[te,[ee],(n,[t])=>{const e=n.id(),i=t.value;return typeof e==typeof i&&e>i}],"filter-<=":[te,[re,ee],(n,[t,e])=>{const i=n.properties()[t.value],s=e.value;return typeof i==typeof s&&i<=s}],"filter-id-<=":[te,[ee],(n,[t])=>{const e=n.id(),i=t.value;return typeof e==typeof i&&e<=i}],"filter->=":[te,[re,ee],(n,[t,e])=>{const i=n.properties()[t.value],s=e.value;return typeof i==typeof s&&i>=s}],"filter-id->=":[te,[ee],(n,[t])=>{const e=n.id(),i=t.value;return typeof e==typeof i&&e>=i}],"filter-has":[te,[ee],(n,[t])=>t.value in n.properties()],"filter-has-id":[te,[],n=>null!==n.id()&&void 0!==n.id()],"filter-type-in":[te,[Gn(re)],(n,[t])=>t.value.indexOf(n.geometryType())>=0],"filter-id-in":[te,[Gn(ee)],(n,[t])=>t.value.indexOf(n.id())>=0],"filter-in-small":[te,[re,Gn(ee)],(n,[t,e])=>e.value.indexOf(n.properties()[t.value])>=0],"filter-in-large":[te,[re,Gn(ee)],(n,[t,e])=>function(s,r,o,a){for(;o<=a;){const l=o+a>>1;if(r[l]===s)return!0;r[l]>s?a=l-1:o=l+1}return!1}(n.properties()[t.value],e.value,0,e.value.length-1)],all:{type:te,overloads:[[[te,te],(n,[t,e])=>t.evaluate(n)&&e.evaluate(n)],[ro(te),(n,t)=>{for(const e of t)if(!e.evaluate(n))return!1;return!0}]]},any:{type:te,overloads:[[[te,te],(n,[t,e])=>t.evaluate(n)||e.evaluate(n)],[ro(te),(n,t)=>{for(const e of t)if(e.evaluate(n))return!0;return!1}]]},"!":[te,[te],(n,[t])=>!t.evaluate(n)],"is-supported-script":[te,[re],(n,[t])=>{const e=n.globals&&n.globals.isSupportedScript;return!e||e(t.evaluate(n))}],upcase:[re,[re],(n,[t])=>t.evaluate(n).toUpperCase()],downcase:[re,[re],(n,[t])=>t.evaluate(n).toLowerCase()],concat:[re,ro(ee),(n,t)=>t.map(e=>th(e.evaluate(n))).join("")],"resolved-locale":[re,[cc],(n,[t])=>t.evaluate(n).resolvedLocale()]});var Kx=Xx;function Zg(n){return{result:"success",value:n}}function Ca(n){return{result:"error",value:n}}function Jx(n){return"object"==typeof n&&null!==n&&!Array.isArray(n)}class wE{constructor(t,e){this.expression=t,this._warningHistory={},this._evaluator=new kx,this._defaultValue=e?function(s){return"color"===s.type&&(Jx(s.default)||Array.isArray(s.default))?new In(0,0,0,0):"color"===s.type?In.parse(s.default)||null:void 0===s.default?null:s.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,i,s,r,o,a,l){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=i,this._evaluator.canonical=s||null,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=l||null,this.expression.evaluate(this._evaluator)}evaluate(t,e,i,s,r,o,a,l){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=i||null,this._evaluator.canonical=s||null,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=l||null;try{const h=this.expression.evaluate(this._evaluator);if(null==h||"number"==typeof h&&h!=h)return this._defaultValue;if(this._enumValues&&!(h in this._enumValues))throw new Ui(`Expected value to be one of ${Object.keys(this._enumValues).map(u=>JSON.stringify(u)).join(", ")}, but found ${JSON.stringify(h)} instead.`);return h}catch(h){return this._warningHistory[h.message]||(this._warningHistory[h.message]=!0,typeof console<"u"&&console.warn(h.message)),this._defaultValue}}}function Wg(n,t){const e=new Dx(Kx,[],t?function(r){const o={color:qs,string:re,number:ot,enum:re,boolean:te,formatted:dc,resolvedImage:Kl};return"array"===r.type?Gn(o[r.value]||ee,r.length):o[r.type]}(t):void 0),i=e.parse(n,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return i?Zg(new wE(i,t)):Ca(e.errors)}class bE{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!Sg(e.expression)}evaluateWithoutErrorHandling(t,e,i,s,r,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,s,r,o)}evaluate(t,e,i,s,r,o){return this._styleExpression.evaluate(t,e,i,s,r,o)}}class CE{constructor(t,e,i,s){this.kind=t,this.zoomStops=i,this._styleExpression=e,this.isStateDependent="camera"!==t&&!Sg(e.expression),this.interpolationType=s}evaluateWithoutErrorHandling(t,e,i,s,r,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,s,r,o)}evaluate(t,e,i,s,r,o){return this._styleExpression.evaluate(t,e,i,s,r,o)}interpolationFactor(t,e,i){return this.interpolationType?so.interpolationFactor(this.interpolationType,t,e,i):0}}function ME(n,t){if("error"===(n=Wg(n,t)).result)return n;const e=n.value.expression,i=vc(e);if(!i&&"data-driven"!==t["property-type"])return Ca([new _s("","data expressions not supported")]);const s=Eg(e,["zoom","pitch","distance-from-center"]);if(!(s||(a=t,a.expression&&a.expression.parameters.indexOf("zoom")>-1)))return Ca([new _s("","zoom expressions not supported")]);var a;const r=Sc(e);return r||s?r instanceof _s?Ca([r]):r instanceof so&&!function(a){return!!a.expression&&a.expression.interpolated}(t)?Ca([new _s("",'"interpolate" expressions cannot be used with this property')]):Zg(r?new CE(i?"camera":"composite",n.value,r.labels,r instanceof so?r.interpolation:void 0):new bE(i?"constant":"source",n.value)):Ca([new _s("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}function Sc(n){let t=null;if(n instanceof Wx)t=Sc(n.result);else if(n instanceof Zx){for(const e of n.args)if(t=Sc(e),t)break}else(n instanceof zx||n instanceof so)&&n.input instanceof va&&"zoom"===n.input.name&&(t=n);return t instanceof _s||n.eachChild(e=>{const i=Sc(e);i instanceof _s?t=i:!t&&i?t=new _s("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&i&&t!==i&&(t=new _s("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function Hg(n){if(Array.isArray(n))return n.map(Hg);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const t={};for(const e in n)t[e]=Hg(n[e]);return t}return(e=n)instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e;var e}var Qx={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function tw(n){if(!0===n||!1===n)return!0;if(!Array.isArray(n)||0===n.length)return!1;switch(n[0]){case"has":return n.length>=2&&"$id"!==n[1]&&"$type"!==n[1];case"in":return n.length>=3&&("string"!=typeof n[1]||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==n.length||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const t of n.slice(1))if(!tw(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}function SE(n,t="fill"){if(null==n)return{filter:()=>!0,needGeometry:!1,needFeature:!1};tw(n)||(n=Ec(n));const e=n;let i=!0;try{i=function(u){if(!Ma(u))return u;let c=Hg(u);return iw(c),c=ew(c),c}(e)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(e,null,2)}\n        `)}const s=Qx[`filter_${t}`],r=Wg(i,s);let o=null;if("error"===r.result)throw new Error(r.value.map(h=>`${h.key}: ${h.message}`).join(", "));o=(h,u,c)=>r.value.evaluate(h,u,{},c);let a=null,l=null;if(i!==e){const h=Wg(e,s);if("error"===h.result)throw new Error(h.value.map(u=>`${u.key}: ${u.message}`).join(", "));a=(u,c,d,p,f)=>h.value.evaluate(u,c,{},d,void 0,void 0,p,f),l=!vc(h.value.expression)}return{filter:o,dynamicFilter:a||void 0,needGeometry:nw(i),needFeature:!!l}}function ew(n){if(!Array.isArray(n))return n;const t=function(i){if(EE.has(i[0]))for(let s=1;s<i.length;s++)if(Ma(i[s]))return!0;return i}(n);return!0===t?t:t.map(e=>ew(e))}function iw(n){let t=!1;const e=[];if("case"===n[0]){for(let i=1;i<n.length-1;i+=2)t=t||Ma(n[i]),e.push(n[i+1]);e.push(n[n.length-1])}else if("match"===n[0]){t=t||Ma(n[1]);for(let i=2;i<n.length-1;i+=2)e.push(n[i+1]);e.push(n[n.length-1])}else if("step"===n[0]){t=t||Ma(n[1]);for(let i=1;i<n.length-1;i+=2)e.push(n[i+1])}t&&(n.length=0,n.push("any",...e));for(let i=1;i<n.length;i++)iw(n[i])}function Ma(n){if(!Array.isArray(n))return!1;if("pitch"===(e=n[0])||"distance-from-center"===e)return!0;var e;for(let t=1;t<n.length;t++)if(Ma(n[t]))return!0;return!1}const EE=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function TE(n,t){return n<t?-1:n>t?1:0}function nw(n){if(!Array.isArray(n))return!1;if("within"===n[0])return!0;for(let t=1;t<n.length;t++)if(nw(n[t]))return!0;return!1}function Ec(n){if(!n)return!0;const t=n[0];return n.length<=1?"any"!==t:"=="===t?Ug(n[1],n[2],"=="):"!="===t?Tc(Ug(n[1],n[2],"==")):"<"===t||">"===t||"<="===t||">="===t?Ug(n[1],n[2],t):"any"===t?function(i){return["any"].concat(i.map(Ec))}(n.slice(1)):"all"===t?["all"].concat(n.slice(1).map(Ec)):"none"===t?["all"].concat(n.slice(1).map(Ec).map(Tc)):"in"===t?sw(n[1],n.slice(2)):"!in"===t?Tc(sw(n[1],n.slice(2))):"has"===t?rw(n[1]):"!has"===t?Tc(rw(n[1])):"within"!==t||n}function Ug(n,t,e){switch(n){case"$type":return[`filter-type-${e}`,t];case"$id":return[`filter-id-${e}`,t];default:return[`filter-${e}`,n,t]}}function sw(n,t){if(0===t.length)return!1;switch(n){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(e=>typeof e!=typeof t[0])?["filter-in-large",n,["literal",t.sort(TE)]]:["filter-in-small",n,["literal",t]]}}function rw(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function Tc(n){return["!",n]}var kE=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function IE(n,t){const e={};for(const i in n)"ref"!==i&&(e[i]=n[i]);return kE.forEach(i=>{i in t&&(e[i]=t[i])}),e}var ow={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},aw=/(italic|oblique)$/i,lw={},Xg=Cx(function(n,t,e){var i=lw[n];if(!i){Array.isArray(n)||(n=[n]);for(var s=400,r="normal",o=[],a=0,l=n.length;a<l;++a){var h=n[a].split(" "),u=h[h.length-1].toLowerCase();for(var c in"normal"==u||"italic"==u||"oblique"==u?(r=u,h.pop(),u=h[h.length-1].toLowerCase()):aw.test(u)&&(u=u.replace(aw,""),r=h[h.length-1].replace(u,"")),ow){var d=h.length>1?h[h.length-2].toLowerCase():"";if(u==c||u==c.replace("-","")||d+"-"+u==c){s=ow[c],h.pop(),d&&c.startsWith(d)&&h.pop();break}}"number"==typeof u&&(s=u);var p=h.join(" ").replace("Klokantech Noto Sans","Noto Sans");-1!==p.indexOf(" ")&&(p='"'+p+'"'),o.push(p)}i=lw[n]=[r,s,o]}return i[0]+" "+i[1]+" "+t+"px"+(e?"/"+e:"")+" "+i[2]});const hw="https://api.mapbox.com";function Yg(n){return 0!==n.indexOf("mapbox://")?"":n.slice(9)}function uw(n,t){const e=Yg(n);if(!e)return decodeURI(new URL(n,location.href).href);if(0!==e.indexOf("styles/"))throw new Error(`unexpected style url: ${n}`);const i=e.slice(7);return`${hw}/styles/v1/${i}?&access_token=${t}`}function kc(n,t,e,i){const s=new URL(n,i),r=Yg(n);return r?"mapbox.satellite"===r?`https://api.mapbox.com/v4/${r}/{z}/{x}/{y}${window.devicePixelRatio>=1.5?"@2x":""}.webp?access_token=${t}`:`https://{a-d}.tiles.mapbox.com/v4/${r}/{z}/{x}/{y}.vector.pbf?access_token=${t}`:(t&&(s.searchParams.has(e)||s.searchParams.set(e,t)),decodeURI(s.href))}const cw={},dw={};let PE=0;function $g(n){return n.id||(n.id=PE++),n.id}function Kg(n){return n*Math.PI/180}const Ic=function(){const n=[];for(let t=78271.51696402048;n.length<=24;t/=2)n.push(t);return n}();function pw(n,t){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(n,t);const e=document.createElement("canvas");return e.width=n,e.height=t,e}new dr({extent:Ee("EPSG:3857").getExtent(),resolutions:Ic});const Sa={};function Ea(n,t,e={},i){if(t in Sa)return i&&(i.request=Sa[t][0]),Sa[t][1];const s=e.transformRequest&&e.transformRequest(t,n)||t,r=tu(()=>s).then(o=>(o instanceof Request||(o=new Request(o)),o.headers.get("Accept")||o.headers.set("Accept","application/json"),i&&(i.request=o),fetch(o).then(function(a){return delete Sa[t],a.ok?a.json():Promise.reject(new Error("Error fetching source "+t))}).catch(function(a){return delete Sa[t],Promise.reject(new Error("Error fetching source "+t))})));return Sa[t]=[s,r],r}const fw={};function gw(n,t,e,i){const s=document.createElement("canvas"),r=[2*e*t.pixelRatio+t.width,2*e*t.pixelRatio+t.height];s.width=r[0],s.height=r[1];const o=s.getContext("2d");o.drawImage(n,t.x,t.y,t.width,t.height,e*t.pixelRatio,e*t.pixelRatio,t.width,t.height);const a=o.getImageData(0,0,r[0],r[1]);o.globalCompositeOperation="destination-over",o.fillStyle=`rgba(${255*i.r},${255*i.g},${255*i.b},${i.a})`;const l=a.data;for(let h=0,u=a.width;h<u;++h)for(let c=0,d=a.height;c<d;++c)l[4*(c*u+h)+3]>0&&o.arc(h,c,e*t.pixelRatio,0,2*Math.PI);return o.fill(),s}function RE(n,t,e){const i=Math.max(0,Math.min(1,(e-n)/(t-n)));return i*i*(3-2*i)}function mw(n,t,e){const i=document.createElement("canvas");i.width=t.width,i.height=t.height;const s=i.getContext("2d");s.drawImage(n,t.x,t.y,t.width,t.height,0,0,t.width,t.height);const r=s.getImageData(0,0,t.width,t.height),o=r.data;for(let a=0,l=r.width;a<l;++a)for(let h=0,u=r.height;h<u;++h){const c=4*(h*l+a),d=.75,p=.1,f=RE(d-p,d+p,o[c+3]/255);f>0?(o[c+0]=Math.round(255*e.r*f),o[c+1]=Math.round(255*e.g*f),o[c+2]=Math.round(255*e.b*f),o[c+3]=Math.round(255*f)):o[c+3]=0}return s.putImageData(r,0,0),i}const FE=Array(256).join("\u200a");function Jg(n,t){if(t>=.05){let e="";const i=n.split("\n"),s=FE.slice(0,Math.round(t/.1));for(let r=0,o=i.length;r<o;++r)r>0&&(e+="\n"),e+=i[r].split("").join(s);return e}return n}let Qg;function yw(){return Qg||(Qg=pw(1,1).getContext("2d")),Qg}function oo(n,t){return yw().measureText(n).width+(n.length-1)*t}const _w={};function tm(n,t,e,i){if(-1!==n.indexOf("\n")){const o=n.split("\n"),a=[];for(let l=0,h=o.length;l<h;++l)a.push(tm(o[l],t,e,i));return a.join("\n")}const s=e+","+t+","+n+","+i;let r=_w[s];if(!r){const o=n.split(" ");if(o.length>1){const a=yw();a.font=t;const l=a.measureText("M").width*e;let h="";const u=[];for(let c=0,d=o.length;c<d;++c){const p=o[c],f=h+(h?" ":"")+p;oo(f,i)<=l?h=f:(h&&u.push(h),h=p)}h&&u.push(h);for(let c=0,d=u.length;c<d&&d>1;++c){const p=u[c];if(oo(p,i)<.35*l){const f=c>0?oo(u[c-1],i):1/0,g=c<d-1?oo(u[c+1],i):1/0;u.splice(c,1),d-=1,f<g?(u[c-1]+=" "+p,c-=1):u[c]=p+" "+u[c]}}for(let c=0,d=u.length-1;c<d;++c){const p=u[c],f=u[c+1];if(oo(p,i)>.7*l&&oo(f,i)<.6*l){const g=p.split(" "),m=g.pop();oo(m,i)<.2*l&&(u[c]=g.join(" "),u[c+1]=m+" "+f),d-=1}}r=u.join("\n")}else r=n;r=Jg(r,i),_w[s]=r}return r}const OE=/font-family: ?([^;]*);/,AE=/("|')/g;let Pc;function LE(n){if(!Pc){Pc={};const t=document.styleSheets;for(let e=0,i=t.length;e<i;++e){const s=t[e];try{const r=s.rules||s.cssRules;if(r)for(let o=0,a=r.length;o<a;++o){const l=r[o];if(5==l.type){const h=l.cssText.match(OE);Pc[h[1].replace(AE,"")]=!0}}}catch{}}}return n in Pc}const em={};function DE(n,t="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const e=n.toString();if(e in em)return em[e];const i=[];for(let s=0,r=n.length;s<r;++s){n[s]=n[s].replace("Arial Unicode MS","Arial");const o=Xg(n[s],1);S1(o);const a=o.split(" ");i.push([a.slice(3).join(" ").replace(/"/g,""),a[1],a[0]])}for(let s=0,r=i.length;s<r;++s){const o=i[s],a=o[0];if(!LE(a)&&100!==ds.get(`${o[2]}\n${o[1]} \n${a}`)){const l=t.replace("{font-family}",a.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",a.replace(/ /g,"+")).replace("{fontweight}",o[1]).replace("{-fontstyle}",o[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",o[2]);if(!document.querySelector('link[href="'+l+'"]')){const h=document.createElement("link");h.href=l,h.rel="stylesheet",document.head.appendChild(h)}}}return em[e]=n,n}const NE={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},zE={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},jE=function(n,t){const e=ME(n,t);if("error"===e.result)throw new Error(e.value.map(i=>`${i.key}: ${i.message}`).join(", "));return e.value},im={},Rc={zoom:0};let Fc,nm;function jt(n,t,e,i,s,r,o){const a=n.id;r||(r={},console.warn("No functionCache provided to getValue()")),r[a]||(r[a]={});const l=r[a];if(!l[e]){let h=(n[t]||im)[e];const u=Qx[`${t}_${n.type}`][e];void 0===h&&(h=u.default);let c=(p=h,Array.isArray(p)&&p.length>0&&"string"==typeof p[0]&&p[0]in Kx);if(!c&&Jx(h)&&(h=function(p,f){let g=p.stops;if(!g)return function(x,w){const C=["get",x.property];if(void 0===x.default)return"string"===w.type?["string",C]:C;if("enum"===w.type)return["match",C,Object.keys(w.values),C,x.default];{const M=["color"===w.type?"to-color":w.type,C,$l(x.default)];return"array"===w.type&&M.splice(1,0,w.value,w.length||null),M}}(p,f);const m=g&&"object"==typeof g[0][0],y=m||void 0!==p.property,_=m||!y;return g=g.map(v=>!y&&f.tokens&&"string"==typeof v[1]?[v[0],qS(v[1])]:[v[0],$l(v[1])]),m?function(x,w,C){const M={},S={},F=[];for(let P=0;P<C.length;P++){const A=C[P],T=A[0].zoom;void 0===M[T]&&(M[T]={zoom:T,type:x.type,property:x.property,default:x.default},S[T]=[],F.push(T)),S[T].push([A[0].value,A[1]])}if("exponential"===dg({},w)){const P=[hg(x),["linear"],["zoom"]];for(const A of F)ga(P,A,ug(M[A],w,S[A]),!1);return P}{const P=["step",["zoom"]];for(const A of F)ga(P,A,ug(M[A],w,S[A]),!0);return cg(P),P}}(p,f,g):_?function(x,w,C,M=["zoom"]){const S=dg(x,w);let F,P=!1;if("interval"===S)F=["step",M],P=!0;else{if("exponential"!==S)throw new Error(`Unknown zoom function type "${S}"`);{const A=void 0!==x.base?x.base:1;F=[hg(x),1===A?["linear"]:["exponential",A],M]}}for(const A of C)ga(F,A[0],A[1],P);return cg(F),F}(p,f,g):ug(p,f,g)}(h,u),c=!0),c){const d=jE(h,u);l[e]=d.evaluate.bind(d)}else"color"==u.type&&(h=In.parse(h)),l[e]=function(){return h}}var p;return Rc.zoom=i,l[e](Rc,s,o)}function GE(n,t,e,i){return jt(n,"layout","icon-allow-overlap",t,e,i)?jt(n,"layout","icon-ignore-placement",t,e,i)?"none":"obstacle":"declutter"}function qE(n,t,e,i,s){return s||console.warn("No filterCache provided to evaluateFilter()"),n in s||(s[n]=SE(t).filter),Rc.zoom=i,s[n](Rc,e)}let VE=!1;function ao(n,t){if(n){if(!VE&&(0===n.a||0===t))return;const e=n.a;return t=void 0===t?1:t,0===e?"transparent":"rgba("+Math.round(255*n.r/e)+","+Math.round(255*n.g/e)+","+Math.round(255*n.b/e)+","+e*t+")"}return n}const BE=/\{[^{}}]*\}/g;function sm(n,t){return n.replace(BE,function(e){return t[e.slice(1,-1)]||""})}let vw=!1;const ZE={};function HE(n,t=512){return n.getExtent()?Iu({extent:n.getExtent(),tileSize:t,maxZoom:22}).getResolutions():Ic}function xw(n,t,e="",i={},s=void 0){let r,o,a,l,h=!0;return"string"==typeof e||Array.isArray(e)?l=e:(a=e,l=a.source||a.layers,i=a),"string"==typeof i?(r=i,a={}):(r=i.styleUrl,a=i),!1===a.updateSource&&(h=!1),s||(s=a.resolutions),!r&&"string"==typeof t&&!t.trim().startsWith("{")&&(r=t),r&&(r=r.startsWith("data:")?location.href:uw(r,a.accessToken),c=r,(d=a).accessToken||(d=Object.assign({},d),new URL(c).searchParams.forEach((p,f)=>{d.accessToken=p,d.accessTokenParam=f})),a=d),new Promise(function(u,c){(function(p,f){if("string"!=typeof p)return Promise.resolve(p);if(!p.trim().startsWith("{"))return Ea("Style",p=uw(p,f.accessToken),f);try{const g=JSON.parse(p);return Promise.resolve(g)}catch(g){return Promise.reject(g)}})(t,a).then(function(d){if(8!=d.version)return c(new Error("glStyle version 8 required."));if(!(n instanceof ac||n instanceof Yl))return c(new Error("Can only apply to VectorLayer or VectorTileLayer"));const p=n instanceof Yl?"vector":"geojson";if(l?o=Array.isArray(l)?d.layers.find(function(x){return x.id===l[0]}).source:l:(o=Object.keys(d.sources).find(function(x){return d.sources[x].type===p}),l=o),!o)return c(new Error(`No ${p} source found in the glStyle.`));function f(){if(!h)return Promise.resolve();if(n instanceof Yl)return(S=d.sources[o],F=r,P=a,new Promise(function(A,T){(function(L,D,V={}){const z=[D,JSON.stringify(L)].toString();let K=fw[z];if(!K||V.transformRequest){let lt;V.transformRequest&&(lt=(N,G)=>{const Et=V.transformRequest&&V.transformRequest(G,"Tiles")||G;if(N instanceof K1)N.setLoader((mt,Ut,ce)=>{tu(()=>Et).then(ye=>{fetch(ye).then(we=>we.arrayBuffer()).then(we=>{const De=N.getFormat().readFeatures(we,{extent:mt,featureProjection:ce});N.setFeatures(De)}).catch(we=>N.setState(3))})});else{const mt=N.getImage();tu(()=>Et).then(Ut=>{Ut instanceof Request?fetch(Ut).then(ce=>ce.blob()).then(ce=>{const ye=URL.createObjectURL(ce);mt.addEventListener("load",()=>URL.revokeObjectURL(ye)),mt.addEventListener("error",()=>URL.revokeObjectURL(ye)),mt.src=ye}).catch(ce=>N.setState(3)):mt.src=Ut})}});const ut=L.url;if(ut&&!L.tiles){const N=kc(ut,V.accessToken,V.accessTokenParam||"access_token",D||location.href);if(ut.startsWith("mapbox://"))K=Promise.resolve({tileJson:Object.assign({},L,{url:void 0,tiles:xf(N)}),tileLoadFunction:lt});else{const G={};K=Ea("Source",N,V,G).then(function(Et){return Et.tiles=Et.tiles.map(function(mt){return"tms"===Et.scheme&&(mt=mt.replace("{y}","{-y}")),kc(mt,V.accessToken,V.accessTokenParam||"access_token",G.request.url)}),Promise.resolve({tileJson:Et,tileLoadFunction:lt})})}}else L=Object.assign({},L,{tiles:L.tiles.map(function(N){return"tms"===L.scheme&&(N=N.replace("{y}","{-y}")),kc(N,V.accessToken,V.accessTokenParam||"access_token",D||location.href)})}),K=Promise.resolve({tileJson:Object.assign({},L),tileLoadFunction:lt});fw[z]=K}return K})(S,F,P).then(function({tileJson:$,tileLoadFunction:L}){const D=function(z,K,lt){const ut=new vS({tileJSON:K,tileSize:z.tileSize||K.tileSize||512}),N=ut.getTileJSON(),G=ut.getTileGrid(),Et=Ee(lt.projection||"EPSG:3857"),mt=function(ii,st){const pi=ii.bounds;if(pi){const _i=K_([pi[0],pi[1]],st),Ne=K_([pi[2],pi[3]],st);return[_i[0],_i[1],Ne[0],Ne[1]]}return Ee(st).getExtent()}(N,Et),Ut=Et.getExtent(),ce=N.minzoom||0,ye=N.maxzoom||22,we={attributions:ut.getAttributions(),projection:Et,tileGrid:new dr({origin:Ut?Dn(Ut):G.getOrigin(0),extent:mt||G.getExtent(),minZoom:ce,resolutions:HE(Et,K.tileSize).slice(0,ye+1),tileSize:G.getTileSize(0)})};return Array.isArray(N.tiles)?we.urls=N.tiles:we.url=N.tiles,we}(S,$,P);D.tileLoadFunction=L,D.format=new Qf,A(new Cf(D))}).catch(T)})).then(function(M){const S=n.getSource();if(S?M!==S&&(S.setTileUrlFunction(M.getTileUrlFunction()),"function"==typeof S.setUrls&&"function"==typeof M.getUrls&&S.setUrls(M.getUrls()),S.format_||(S.format_=M.format_),S.getAttributions()||S.setAttributions(M.getAttributions()),S.getTileLoadFunction()===ev&&S.setTileLoadFunction(M.getTileLoadFunction()),or(S.getProjection(),M.getProjection())&&(S.tileGrid=M.getTileGrid())):n.setSource(M),!isFinite(n.getMaxResolution())&&!isFinite(n.getMinZoom())){const F=n.getSource().getTileGrid();n.setMaxResolution(F.getResolution(F.getMinZoom()))}});var S,F,P;const x=d.sources[o];let w=n.getSource();(!w||w.get("mapbox-source")!==x)&&(w=function(S,F,P){const A=P.projection?new Jf({dataProjection:P.projection}):new Jf,T=S.data,$={};if("string"==typeof T){const D=kc(T,P.accessToken,P.accessTokenParam||"access_token",F||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(D)){const z=(lt,ut,N)=>{const G=`{bbox-${((mt=N)?mt.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`;var mt;return D.replace(G,`${lt.join(",")}`)},K=new no({attributions:S.attribution,format:A,loader:(lt,ut,N,G,Et)=>{Ea("GeoJSON","function"==typeof z?z(lt,ut,N):z,P).then(mt=>{const Ut=K.getFormat().readFeatures(mt,{featureProjection:N});K.addFeatures(Ut),G(Ut)}).catch(mt=>{K.removeLoadedExtent(lt),Et()})},strategy:NS});return K.set("mapbox-source",S),K}const V=new no({attributions:S.attribution,format:A,url:D,loader:(z,K,lt,ut,N)=>{Ea("GeoJSON",D,P).then(G=>{const Et=V.getFormat().readFeatures(G,{featureProjection:lt});V.addFeatures(Et),ut(Et)}).catch(G=>{V.removeLoadedExtent(z),N()})}});return V}$.features=A.readFeatures(T,{featureProjection:pl()||"EPSG:3857"});const L=new no(Object.assign({attributions:S.attribution,format:A},$));return L.set("mapbox-source",S),L}(x,r,a));const C=n.getSource();return C?w!==C&&(C.getAttributions()||C.setAttributions(w.getAttributions()),C.format_||(C.format_=w.getFormat()),C.url_=w.getUrl()):n.setSource(w),Promise.resolve()}let g,m,y,_;function v(){if(_||d.sprite&&!m)_?(n.setStyle(_),f().then(u).catch(c)):c(new Error("Something went wrong trying to apply style."));else{if(a.projection&&!s){const x=Ee(a.projection).getUnits();"m"!==x&&(s=Ic.map(w=>w/rr[x]))}_=function WE(n,t,e,i=Ic,s,r,o,a){if("string"==typeof t&&(t=JSON.parse(t)),8!=t.version)throw new Error("glStyle version 8 required.");let l,h,u;if(ZE[(S=t,F=n,$g(S)+"."+$t(F))]=Array.from(arguments),r)if(typeof Image<"u"){const M=new Image;let S;tu(()=>r).then(F=>{F instanceof Request?fetch(F).then(P=>P.blob()).then(P=>{S=URL.createObjectURL(P),M.src=S}).catch(()=>{}):(M.crossOrigin="anonymous",M.src=F,S&&URL.revokeObjectURL(S))}),M.onload=function(){l=M,h=[M.width,M.height],n.changed(),M.onload=null}}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const M=self;M.postMessage({action:"loadImage",src:r}),M.addEventListener("message",function(S){"imageLoaded"===S.data.action&&S.data.src===r&&(l=S.data.image,h=[l.width,l.height])})}var S,F;const c=function(S){S=S.slice();const F=Object.create(null);for(let P=0;P<S.length;P++)F[S[P].id]=S[P];for(let P=0;P<S.length;P++)"ref"in S[P]&&(S[P]=IE(S[P],F[S[P].ref]));return S}(t.layers),d={},p=[],f={},g={},m=function(S){let F=cw[S.id];return F||(F={},cw[$g(S)]=F),F}(t),y=function(S){let F=dw[S.id];return F||(F={},dw[$g(S)]=F),F}(t);let _;for(let M=0,S=c.length;M<S;++M){const F=c[M],P=F.id;if("string"==typeof e&&F.source==e||-1!==e.indexOf(P)){const A=F["source-layer"];if(_){if(F.source!==_)throw new Error(`Layer "${P}" does not use source "${_}`)}else{_=F.source;const $=t.sources[_];if(!$)throw new Error(`Source "${_}" is not defined`);const L=$.type;if("vector"!==L&&"geojson"!==L)throw new Error(`Source "${_}" is not of type "vector" or "geojson", but "${L}"`)}let T=d[A];T||(T=[],d[A]=T),T.push({layer:F,index:M}),p.push(P)}}const v=new Tn,x=new En,w=[],C=function(M,S,F){const P=M.getProperties(),A=d[P.layer];if(!A)return;let T=i.indexOf(S);-1==T&&(T=function(lt,ut){let N=0;const G=ut.length;for(;N<G;++N)if(ut[N]<lt&&N+1<G){const Et=ut[N]/ut[N+1];return N+Math.log(ut[N]/lt)/Math.log(Et)}return G-1}(S,i));const $=NE[M.getGeometry().getType()],L={id:M.getId(),properties:P,type:$},D=n.get("mapbox-featurestate")[M.getId()];let V,z=-1;for(let K=0,lt=A.length;K<lt;++K){const ut=A[K],N=ut.layer,G=N.id;if(void 0!==F&&F!==G)continue;const Et=N.layout||im,mt=N.paint||im;if("none"===Et.visibility||"minzoom"in N&&T<N.minzoom||"maxzoom"in N&&T>=N.maxzoom)continue;const Ut=N.filter;if(!Ut||qE(G,Ut,L,T,y)){let ce,ye,we,De,ii,st;V=N;const pi=ut.index;if(3==$&&("fill"==N.type||"fill-extrusion"==N.type))if(ye=jt(N,"paint",N.type+"-opacity",T,L,m,D),N.type+"-pattern"in mt){const $e=jt(N,"paint",N.type+"-pattern",T,L,m,D);if($e){const Ue="string"==typeof $e?sm($e,P):$e.toString();if(l&&s&&s[Ue]){++z,st=w[z],(!st||!st.getFill()||st.getStroke()||st.getText())&&(st=new pn({fill:new En}),w[z]=st),we=st.getFill(),st.setZIndex(pi);const ke=Ue+"."+ye;let Pe=g[ke];if(!Pe){const be=s[Ue],Kt=pw(be.width,be.height),ci=Kt.getContext("2d");ci.globalAlpha=ye,ci.drawImage(l,be.x,be.y,be.width,be.height,0,0,be.width,be.height),Pe=ci.createPattern(Kt,"repeat"),g[ke]=Pe}we.setColor(Pe)}}}else ce=ao(jt(N,"paint",N.type+"-color",T,L,m,D),ye),N.type+"-outline-color"in mt&&(ii=ao(jt(N,"paint",N.type+"-outline-color",T,L,m,D),ye)),ii||(ii=ce),(ce||ii)&&(++z,st=w[z],(!st||ce&&!st.getFill()||!ce&&st.getFill()||ii&&!st.getStroke()||!ii&&st.getStroke()||st.getText())&&(st=new pn({fill:ce?new En:void 0,stroke:ii?new Tn:void 0}),w[z]=st),ce&&(we=st.getFill(),we.setColor(ce)),ii&&(De=st.getStroke(),De.setColor(ii),De.setWidth(.5)),st.setZIndex(pi));if(1!=$&&"line"==N.type){ce=!("line-pattern"in mt)&&"line-color"in mt?ao(jt(N,"paint","line-color",T,L,m,D),jt(N,"paint","line-opacity",T,L,m,D)):void 0;const $e=jt(N,"paint","line-width",T,L,m,D);ce&&$e>0&&(++z,st=w[z],(!st||!st.getStroke()||st.getFill()||st.getText())&&(st=new pn({stroke:new Tn}),w[z]=st),De=st.getStroke(),De.setLineCap(jt(N,"layout","line-cap",T,L,m,D)),De.setLineJoin(jt(N,"layout","line-join",T,L,m,D)),De.setMiterLimit(jt(N,"layout","line-miter-limit",T,L,m,D)),De.setColor(ce),De.setWidth($e),De.setLineDash(mt["line-dasharray"]?jt(N,"paint","line-dasharray",T,L,m,D).map(function(Ue){return Ue*$e}):null),st.setZIndex(pi))}let _i,Ne,se,de,vi,he,fi,Xi,qi,He=!1,oe=null,Ai=0;if((1==$||2==$)&&"icon-image"in Et){const $e=jt(N,"layout","icon-image",T,L,m,D);if($e){let Ue;_i="string"==typeof $e?sm($e,P):$e.toString();const ke=a?a(n,_i):void 0;if(l&&s&&s[_i]||ke){const Pe=jt(N,"layout","icon-rotation-alignment",T,L,m,D);if(2==$){const be=M.getGeometry();if(be.getFlatMidpoint||be.getFlatMidpoints){const Kt=be.getExtent();if(Math.sqrt(Math.max(Math.pow((Kt[2]-Kt[0])/S,2),Math.pow((Kt[3]-Kt[1])/S,2)))>150){const ci="MultiLineString"===be.getType()?be.getFlatMidpoints():be.getFlatMidpoint();if(nm||(Fc=[NaN,NaN],nm=new Bf("Point",Fc,[],{},null)),Ue=nm,Fc[0]=ci[0],Fc[1]=ci[1],"line"===jt(N,"layout","symbol-placement",T,L,m,D)&&"map"===Pe){const xi=be.getStride(),wi=be.getFlatCoordinates();for(let Bi=0,mn=wi.length-xi;Bi<mn;Bi+=xi){const Qi=wi[Bi],qe=wi[Bi+1],Ti=wi[Bi+xi],on=wi[Bi+xi+1],Li=Math.min(Qi,Ti),gi=Math.min(qe,on),ws=Math.max(Qi,Ti),an=Math.max(qe,on);if(ci[0]>=Li&&ci[0]<=ws&&ci[1]>=gi&&ci[1]<=an){Ai=Math.atan2(qe-on,Ti-Qi);break}}}}}}if(2!==$||Ue){const be=jt(N,"layout","icon-size",T,L,m,D),Kt=void 0!==mt["icon-color"]?jt(N,"paint","icon-color",T,L,m,D):null;if(!Kt||0!==Kt.a){const ci=jt(N,"paint","icon-halo-color",T,L,m,D),xi=jt(N,"paint","icon-halo-width",T,L,m,D);let wi=`${_i}.${be}.${xi}.${ci}`;if(null!==Kt&&(wi+=`.${Kt}`),Ne=f[wi],!Ne){const Bi=GE(N,T,L,m);let mn;"icon-offset"in Et&&(mn=jt(N,"layout","icon-offset",T,L,m,D).slice(0),mn[1]*=-1);let Qi=Kt?[255*Kt.r,255*Kt.g,255*Kt.b,Kt.a]:void 0;if(ke){const qe={color:Qi,rotateWithView:"map"===Pe,displacement:mn,declutterMode:Bi,scale:be};"string"==typeof ke?qe.src=ke:(qe.img=ke,qe.imgSize=[ke.width,ke.height]),Ne=new Vu(qe)}else{const qe=s[_i];let Ti,on,Li;xi?qe.sdf?(Ti=gw(mw(l,qe,Kt),{x:0,y:0,width:qe.width,height:qe.height,pixelRatio:qe.pixelRatio},xi,ci),Qi=void 0):Ti=gw(l,qe,xi,ci):(qe.sdf?(u||(u=mw(l,{x:0,y:0,width:h[0],height:h[1]},{r:1,g:1,b:1,a:1})),Ti=u):Ti=l,on=[qe.width,qe.height],Li=[qe.x,qe.y]),Ne=new Vu({color:Qi,img:Ti,imgSize:h,size:on,offset:Li,rotateWithView:"map"===Pe,scale:be/qe.pixelRatio,displacement:mn,declutterMode:Bi})}f[wi]=Ne}}Ne&&(++z,st=w[z],(!st||!st.getImage()||st.getFill()||st.getStroke())&&(st=new pn,w[z]=st),st.setGeometry(Ue),Ne.setRotation(Ai+Kg(jt(N,"layout","icon-rotate",T,L,m,D))),Ne.setOpacity(jt(N,"paint","icon-opacity",T,L,m,D)),Ne.setAnchor(zE[jt(N,"layout","icon-anchor",T,L,m,D)]),st.setImage(Ne),oe=st.getText(),st.setText(void 0),st.setZIndex(pi),He=!0,se=!1)}else se=!0}}}if(1==$&&"circle"===N.type){++z,st=w[z],(!st||!st.getImage()||st.getFill()||st.getStroke())&&(st=new pn,w[z]=st);const $e="circle-radius"in mt?jt(N,"paint","circle-radius",T,L,m,D):5,Ue=ao(jt(N,"paint","circle-stroke-color",T,L,m,D),jt(N,"paint","circle-stroke-opacity",T,L,m,D)),ke=ao(jt(N,"paint","circle-color",T,L,m,D),jt(N,"paint","circle-opacity",T,L,m,D)),Pe=jt(N,"paint","circle-stroke-width",T,L,m,D),be=$e+"."+Ue+"."+ke+"."+Pe;Ne=f[be],Ne||(Ne=new ua({radius:$e,stroke:Ue&&Pe>0?new Tn({width:Pe,color:Ue}):void 0,fill:ke?new En({color:ke}):void 0,declutterMode:"none"}),f[be]=Ne),st.setImage(Ne),oe=st.getText(),st.setText(void 0),st.setGeometry(void 0),st.setZIndex(pi),He=!0}if("text-field"in Et){fi=Math.round(jt(N,"layout","text-size",T,L,m,D));const $e=jt(N,"layout","text-font",T,L,m,D);he=jt(N,"layout","text-line-height",T,L,m,D),vi=Xg(o?o($e,t.metadata?t.metadata["ol:webfonts"]:void 0):$e,fi,he),vi.includes("sans-serif")||(vi+=",sans-serif"),Xi=jt(N,"layout","text-letter-spacing",T,L,m,D),qi=jt(N,"layout","text-max-width",T,L,m,D);const Ue=jt(N,"layout","text-field",T,L,m,D);de="object"==typeof Ue&&Ue.sections?1===Ue.sections.length?Ue.toString():Ue.sections.reduce((ke,Pe,be)=>{const Kt=Pe.fontStack?Pe.fontStack.split(","):$e,ci=Xg(o?o(Kt):Kt,fi*(Pe.scale||1),he);let xi=Pe.text;if("\n"===xi)return ke.push("\n",""),ke;if(2!=$){xi=tm(xi,ci,qi,Xi).split("\n");for(let wi=0,Bi=xi.length;wi<Bi;++wi)wi>0&&ke.push("\n",""),ke.push(xi[wi],ci);return ke}ke.push(Jg(xi,Xi),ci)},[]):sm(Ue,P).trim(),ye=jt(N,"paint","text-opacity",T,L,m,D)}if(de&&ye&&!se){He||(++z,st=w[z],(!st||!st.getText()||st.getFill()||st.getStroke())&&(st=new pn,w[z]=st),st.setImage(void 0),st.setGeometry(void 0)),st.getText()||st.setText(oe||new Wv({padding:[2,2,2,2]})),oe=st.getText();const $e=Et["text-transform"];"uppercase"==$e?de=Array.isArray(de)?de.map((Li,gi)=>gi%2?Li:Li.toUpperCase()):de.toUpperCase():"lowercase"==$e&&(de=Array.isArray(de)?de.map((Li,gi)=>gi%2?Li:Li.toLowerCase()):de.toLowerCase());const Ue=Array.isArray(de)?de:2==$?Jg(de,Xi):tm(de,vi,qi,Xi);oe.setText(Ue),oe.setFont(vi),oe.setRotation(Kg(jt(N,"layout","text-rotate",T,L,m,D)));const ke=jt(N,"layout","text-anchor",T,L,m,D),Pe=He||1==$?"point":jt(N,"layout","symbol-placement",T,L,m,D);let be;if("line-center"===Pe?(oe.setPlacement("line"),be="center"):oe.setPlacement(Pe),"line"===Pe&&"function"==typeof oe.setRepeat){const Li=jt(N,"layout","symbol-spacing",T,L,m,D);oe.setRepeat(2*Li)}oe.setOverflow("point"===Pe);let Kt=jt(N,"paint","text-halo-width",T,L,m,D);const ci=jt(N,"layout","text-offset",T,L,m,D),xi=jt(N,"paint","text-translate",T,L,m,D);let wi=0,Bi=0;if("point"==Pe){be="center",-1!==ke.indexOf("left")?(be="left",Bi=Kt):-1!==ke.indexOf("right")&&(be="right",Bi=-Kt);const Li=jt(N,"layout","text-rotation-alignment",T,L,m,D);oe.setRotateWithView("map"==Li)}else oe.setMaxAngle(Kg(jt(N,"layout","text-max-angle",T,L,m,D))*de.length/Ue.length),oe.setRotateWithView(!1);oe.setTextAlign(be);let mn="middle";0==ke.indexOf("bottom")?(mn="bottom",wi=-Kt-.5*(he-1)*fi):0==ke.indexOf("top")&&(mn="top",wi=Kt+.5*(he-1)*fi),oe.setTextBaseline(mn);const Qi=jt(N,"layout","text-justify",T,L,m,D);oe.setJustify("auto"===Qi?void 0:Qi),oe.setOffsetX(ci[0]*fi+Bi+xi[0]),oe.setOffsetY(ci[1]*fi+wi+xi[1]),x.setColor(ao(jt(N,"paint","text-color",T,L,m,D),ye)),oe.setFill(x);const qe=ao(jt(N,"paint","text-halo-color",T,L,m,D),ye);if(qe){v.setColor(qe),Kt*=2;const Li=.5*fi;v.setWidth(Kt<=Li?Kt:Li),oe.setStroke(v)}else oe.setStroke(void 0);const Ti=jt(N,"layout","text-padding",T,L,m,D),on=oe.getPadding();Ti!==on[0]&&(on[0]=Ti,on[1]=Ti,on[2]=Ti,on[3]=Ti),st.setZIndex(pi)}}}return z>-1?(w.length=z+1,vw&&("set"in M?M.set("mapbox-layer",V):M.getProperties()["mapbox-layer"]=V),w):void 0};return n.setStyle(C),n.set("mapbox-source",_),n.set("mapbox-layers",p),n.set("mapbox-featurestate",n.get("mapbox-featurestate")||{}),C}(n,d,l,s,m,y,DE,a.getImage),n.getStyle()?f().then(u).catch(c):c(new Error(`Nothing to show for source [${o}]`))}}if(d.sprite){const x=new URL(function(S,F,P){const A=Yg(S);if(!A)return decodeURI(new URL(S,P).href);if(0!==A.indexOf("sprites/"))throw new Error(`unexpected sprites url: ${S}`);const T=A.slice(8);return`${hw}/styles/v1/${T}/sprite?access_token=${F}`}(d.sprite,a.accessToken,r||location.href));g=window.devicePixelRatio>=1.5?.5:1;const w=.5==g?"@2x":"";let C=x.origin+x.pathname+w+".json"+x.search;new Promise(function(M,S){Ea("Sprite",C,a).then(M).catch(function(F){C=x.origin+x.pathname+".json"+x.search,Ea("Sprite",C,a).then(M).catch(S)})}).then(function(M){if(void 0===M&&c(new Error("No sprites found.")),m=M,y=x.origin+x.pathname+w+".png"+x.search,a.transformRequest){const S=a.transformRequest(y,"SpriteImage")||y;(S instanceof Request||S instanceof Promise)&&(y=S)}v()}).catch(function(M){c(new Error(`Sprites cannot be loaded: ${C}: ${M.message}`))})}else v()}).catch(c)});var c,d}const ww=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"];function bw(n){const t=n.body;return!!(t.webkitRequestFullscreen||t.requestFullscreen&&n.fullscreenEnabled)}function Cw(n){return!(!n.webkitIsFullScreen&&!n.fullscreenElement)}function Mw(n){n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen&&n.webkitRequestFullscreen()}const UE=class extends wl{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.keys_=void 0!==t.keys&&t.keys,this.source_=t.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=void 0!==t.className?t.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=void 0!==t.activeClassName?t.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=void 0!==t.inactiveClassName?t.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const e=void 0!==t.label?t.label:"\u2922";this.labelNode_="string"==typeof e?document.createTextNode(e):e;const i=void 0!==t.labelActive?t.labelActive:"\xd7";this.labelActiveNode_="string"==typeof i?document.createTextNode(i):i;const s=t.tipLabel?t.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=s,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener("click",this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${ml} ${Cu}`,this.element.appendChild(this.button_)}handleClick_(t){t.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const t=this.getMap();if(!t)return;const e=t.getOwnerDocument();if(bw(e))if(Cw(e))!function(s){s.exitFullscreen?s.exitFullscreen():s.webkitExitFullscreen&&s.webkitExitFullscreen()}(e);else{let i;i=this.source_?"string"==typeof this.source_?e.getElementById(this.source_):this.source_:t.getTargetElement(),this.keys_?function(r){r.webkitRequestFullscreen?r.webkitRequestFullscreen():Mw(r)}(i):Mw(i)}}handleFullScreenChange_(){const t=this.getMap();if(!t)return;const e=this.isInFullscreen_;this.isInFullscreen_=Cw(t.getOwnerDocument()),e!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(Mu(this.labelActiveNode_,this.labelNode_),this.dispatchEvent("enterfullscreen")):(Mu(this.labelNode_,this.labelActiveNode_),this.dispatchEvent("leavefullscreen")),t.updateSize())}setClassName_(t,e){e?(t.classList.remove(...this.inactiveClassName_),t.classList.add(...this.activeClassName_)):(t.classList.remove(...this.activeClassName_),t.classList.add(...this.inactiveClassName_))}setMap(t){const e=this.getMap();e&&e.removeChangeListener("target",this.boundHandleMapTargetChange_),super.setMap(t),this.handleMapTargetChange_(),t&&t.addChangeListener("target",this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const t=this.documentListeners_;for(let i=0,s=t.length;i<s;++i)ti(t[i]);t.length=0;const e=this.getMap();if(e){const i=e.getOwnerDocument();bw(i)?this.element.classList.remove(v1):this.element.classList.add(v1);for(let s=0,r=ww.length;s<r;++s)t.push(ve(i,ww[s],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}},XE=class extends wu{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.setPreload(void 0!==t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError)}getPreload(){return this.get("preload")}setPreload(t){this.set("preload",t)}getUseInterimTilesOnError(){return this.get("useInterimTilesOnError")}setUseInterimTilesOnError(t){this.set("useInterimTilesOnError",t)}getData(t){return super.getData(t)}},rm=class extends XE{constructor(t){super(t)}createRenderer(){return new bx(this)}};function Sw(n,t){return vt(t)?wt(n,t,1):wt(n,1)}function Oc(n,t){return en((e,i)=>{let s=0;e.subscribe(ln(i,r=>n.call(t,r,s++)&&i.next(r)))})}function Ew(n){return en((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}class om{}class Ac{}class xs{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?"string"==typeof t?this.lazyInit=()=>{this.headers=new Map,t.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const s=e.slice(0,i),r=s.toLowerCase(),o=e.slice(i+1).trim();this.maybeSetNormalizedName(s,r),this.headers.has(r)?this.headers.get(r).push(o):this.headers.set(r,[o])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof xs?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new xs;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof xs?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);const s=("a"===t.op?this.headers.get(e):void 0)||[];s.push(...i),this.headers.set(e,s);break;case"d":const r=t.value;if(r){let o=this.headers.get(e);if(!o)return;o=o.filter(a=>-1===r.indexOf(a)),0===o.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}setHeaderEntries(t,e){const i=(Array.isArray(e)?e:[e]).map(r=>r.toString()),s=t.toLowerCase();this.headers.set(s,i),this.maybeSetNormalizedName(t,s)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class YE{encodeKey(t){return Tw(t)}encodeValue(t){return Tw(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const $E=/%(\d[a-f0-9])/gi,KE={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Tw(n){return encodeURIComponent(n).replace($E,(t,e)=>KE[e]??t)}function Lc(n){return`${n}`}class Bs{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new YE,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(i,s){const r=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(o=>{const a=o.indexOf("="),[l,h]=-1==a?[s.decodeKey(o),""]:[s.decodeKey(o.slice(0,a)),s.decodeValue(o.slice(a+1))],u=r.get(l)||[];u.push(h),r.set(l,u)}),r}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const i=t.fromObject[e],s=Array.isArray(i)?i.map(Lc):[Lc(i)];this.map.set(e,s)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(i=>{const s=t[i];Array.isArray(s)?s.forEach(r=>{e.push({param:i,value:r,op:"a"})}):e.push({param:i,value:s,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Bs({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(Lc(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const s=i.indexOf(Lc(t.value));-1!==s&&i.splice(s,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class JE{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function kw(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Iw(n){return typeof Blob<"u"&&n instanceof Blob}function Pw(n){return typeof FormData<"u"&&n instanceof FormData}class lo{constructor(t,e,i,s){let r;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(a){switch(a){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==i?i:null,r=s):r=i,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.context&&(this.context=r.context),r.params&&(this.params=r.params),this.transferCache=r.transferCache),this.headers||(this.headers=new xs),this.context||(this.context=new JE),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+o}}else this.params=new Bs,this.urlWithParams=e}serializeBody(){return null===this.body?null:kw(this.body)||Iw(this.body)||Pw(this.body)||typeof URLSearchParams<"u"&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof Bs?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Pw(this.body)?null:Iw(this.body)?this.body.type||null:kw(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Bs?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,i=t.url||this.url,s=t.responseType||this.responseType,r=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let l=t.headers||this.headers,h=t.params||this.params;const u=t.context??this.context;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((c,d)=>c.set(d,t.setHeaders[d]),l)),t.setParams&&(h=Object.keys(t.setParams).reduce((c,d)=>c.set(d,t.setParams[d]),h)),new lo(e,i,r,{params:h,headers:l,context:u,reportProgress:a,responseType:s,withCredentials:o})}}var Ta=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Ta||{});class am{constructor(t,e=200,i="OK"){this.headers=t.headers||new xs,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class lm extends am{constructor(t={}){super(t),this.type=Ta.ResponseHeader}clone(t={}){return new lm({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class ka extends am{constructor(t={}){super(t),this.type=Ta.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new ka({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Rw extends am{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function hm(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}let Dc=(()=>{class n{constructor(e){this.handler=e}request(e,i,s={}){let r;if(e instanceof lo)r=e;else{let l,h;l=s.headers instanceof xs?s.headers:new xs(s.headers),s.params&&(h=s.params instanceof Bs?s.params:new Bs({fromObject:s.params})),r=new lo(e,i,void 0!==s.body?s.body:null,{headers:l,context:s.context,params:h,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}const o=bt(r).pipe(Sw(l=>this.handler.handle(l)));if(e instanceof lo||"events"===s.observe)return o;const a=o.pipe(Oc(l=>l instanceof ka));switch(s.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return a.pipe(Rn(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Rn(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Rn(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Rn(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new Bs).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,s={}){return this.request("PATCH",e,hm(s,i))}post(e,i,s={}){return this.request("POST",e,hm(s,i))}put(e,i,s={}){return this.request("PUT",e,hm(s,i))}static#t=this.\u0275fac=function(e){return new(e||n)(Tt(om))};static#e=this.\u0275prov=B({token:n,factory:n.\u0275fac})}return n})();function Fw(n,t){return t(n)}function QE(n,t){return(e,i)=>t.intercept(e,{handle:s=>n(s,i)})}const tT=new Qt(""),um=new Qt(""),eT=new Qt(""),iT=new Qt("");function nT(){let n=null;return(t,e)=>{null===n&&(n=(Ri(tT,{optional:!0})??[]).reduceRight(QE,Fw));const i=Ri(Jd),s=i.add();return n(t,e).pipe(Ew(()=>i.remove(s)))}}let Ow=(()=>{class n extends om{constructor(e,i){super(),this.backend=e,this.injector=i,this.chain=null,this.pendingTasks=Ri(Jd);const s=Ri(iT,{optional:!0});this.backend=s??e}handle(e){if(null===this.chain){const s=Array.from(new Set([...this.injector.get(um),...this.injector.get(eT,[])]));this.chain=s.reduceRight((r,o)=>{return l=r,h=o,u=this.injector,(c,d)=>function(f,g){f instanceof yd&&f.assertNotDestroyed();const m=Pi(f),y=Yi(void 0);try{return h(c,p=>l(p,d))}finally{Pi(m),Yi(y)}}(u);var l,h,u},Fw)}const i=this.pendingTasks.add();return this.chain(e,s=>this.backend.handle(s)).pipe(Ew(()=>this.pendingTasks.remove(i)))}static#t=this.\u0275fac=function(e){return new(e||n)(Tt(Ac),Tt(Gr))};static#e=this.\u0275prov=B({token:n,factory:n.\u0275fac})}return n})();const sT=/^\)\]\}',?\n/;let Aw=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Gt(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?Je(i.\u0275loadImpl()):bt(null)).pipe(Be(()=>new ki(s=>{const r=i.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach((f,g)=>r.setRequestHeader(f,g.join(","))),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const f=e.detectContentTypeHeader();null!==f&&r.setRequestHeader("Content-Type",f)}if(e.responseType){const f=e.responseType.toLowerCase();r.responseType="json"!==f?f:"text"}const o=e.serializeBody();let a=null;const l=()=>{if(null!==a)return a;const f=r.statusText||"OK",g=new xs(r.getAllResponseHeaders()),m=("responseURL"in(_=r)&&_.responseURL?_.responseURL:/^X-Request-URL:/m.test(_.getAllResponseHeaders())?_.getResponseHeader("X-Request-URL"):null)||e.url;var _;return a=new lm({headers:g,status:r.status,statusText:f,url:m}),a},h=()=>{let{headers:f,status:g,statusText:m,url:y}=l(),_=null;204!==g&&(_=typeof r.response>"u"?r.responseText:r.response),0===g&&(g=_?200:0);let v=g>=200&&g<300;if("json"===e.responseType&&"string"==typeof _){const x=_;_=_.replace(sT,"");try{_=""!==_?JSON.parse(_):null}catch(w){_=x,v&&(v=!1,_={error:w,text:_})}}v?(s.next(new ka({body:_,headers:f,status:g,statusText:m,url:y||void 0})),s.complete()):s.error(new Rw({error:_,headers:f,status:g,statusText:m,url:y||void 0}))},u=f=>{const{url:g}=l(),m=new Rw({error:f,status:r.status||0,statusText:r.statusText||"Unknown Error",url:g||void 0});s.error(m)};let c=!1;const d=f=>{c||(s.next(l()),c=!0);let g={type:Ta.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(g.total=f.total),"text"===e.responseType&&r.responseText&&(g.partialText=r.responseText),s.next(g)},p=f=>{let g={type:Ta.UploadProgress,loaded:f.loaded};f.lengthComputable&&(g.total=f.total),s.next(g)};return r.addEventListener("load",h),r.addEventListener("error",u),r.addEventListener("timeout",u),r.addEventListener("abort",u),e.reportProgress&&(r.addEventListener("progress",d),null!==o&&r.upload&&r.upload.addEventListener("progress",p)),r.send(o),s.next({type:Ta.Sent}),()=>{r.removeEventListener("error",u),r.removeEventListener("abort",u),r.removeEventListener("load",h),r.removeEventListener("timeout",u),e.reportProgress&&(r.removeEventListener("progress",d),null!==o&&r.upload&&r.upload.removeEventListener("progress",p)),r.readyState!==r.DONE&&r.abort()}})))}static#t=this.\u0275fac=function(e){return new(e||n)(Tt(r_))};static#e=this.\u0275prov=B({token:n,factory:n.\u0275fac})}return n})();const Lw=new Qt("XSRF_ENABLED"),rT=new Qt("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),oT=new Qt("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Dw{}let aT=(()=>{class n{constructor(e,i,s){this.doc=e,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Qy(e,this.cookieName),this.lastCookieString=e),this.lastToken}static#t=this.\u0275fac=function(e){return new(e||n)(Tt(Qs),Tt(Co),Tt(rT))};static#e=this.\u0275prov=B({token:n,factory:n.\u0275fac})}return n})();function lT(n,t){const e=n.url.toLowerCase();if(!Ri(Lw)||"GET"===n.method||"HEAD"===n.method||e.startsWith("http://")||e.startsWith("https://"))return t(n);const i=Ri(Dw).getToken(),s=Ri(oT);return null!=i&&!n.headers.has(s)&&(n=n.clone({headers:n.headers.set(s,i)})),t(n)}var Nw=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Nw||{});function hT(...n){const t=[Dc,Aw,Ow,{provide:om,useExisting:Ow},{provide:Ac,useExisting:Aw},{provide:um,useValue:lT,multi:!0},{provide:Lw,useValue:!0},{provide:Dw,useClass:aT}];for(const e of n)t.push(...e.\u0275providers);return function(i){return{\u0275providers:i}}(t)}const zw=new Qt("LEGACY_INTERCEPTOR_FN");function uT(){return function(t,e){return{\u0275kind:t,\u0275providers:e}}(Nw.LegacyInterceptors,[{provide:zw,useFactory:nT},{provide:um,useExisting:zw,multi:!0}])}let cT=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#e=this.\u0275mod=po({type:n});static#i=this.\u0275inj=pt({providers:[hT(uT())]})}return n})();class dT extends Fe{constructor(t,e){super()}schedule(t,e=0){return this}}const Nc={setInterval(n,t,...e){const{delegate:i}=Nc;return i?.setInterval?i.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){const{delegate:t}=Nc;return(t?.clearInterval||clearInterval)(n)},delegate:void 0},cm={now:()=>(cm.delegate||Date).now(),delegate:void 0};class ih{constructor(t,e=ih.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,i){return new this.schedulerActionCtor(this,t).schedule(i,e)}}ih.now=cm.now;const pT=new class extends ih{constructor(t,e=ih.now){super(t,e),this.actions=[],this._active=!1}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let i;this._active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}}(class extends dT{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var i;if(this.closed)return this;this.state=t;const s=this.id,r=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(r,s,e)),this.pending=!0,this.delay=e,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,i=0){return Nc.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return e;null!=e&&Nc.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i,s=!1;try{this.work(t)}catch(r){s=!0,i=r||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,Re(i,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}});function jw(n=0,t,e=pT){let i=-1;return null!=t&&(Ot(t)?e=t:i=t),new ki(s=>{let r=(l=n)instanceof Date&&!isNaN(l)?+n-e.now():n;var l;r<0&&(r=0);let o=0;return e.schedule(function(){s.closed||(s.next(o++),0<=i?this.schedule(void 0,i):s.complete())},r)})}class Gw extends Hs{constructor(t=1/0,e=1/0,i=cm){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:s,_timestampProvider:r,_windowTime:o}=this;e||(i.push(t),!s&&i.push(r.now()+o)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:s}=this,r=s.slice();for(let o=0;o<r.length&&!t.closed;o+=i?1:2)t.next(r[o]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:s}=this,r=(s?1:2)*t;if(t<1/0&&r<i.length&&i.splice(0,i.length-r),!s){const o=e.now();let a=0;for(let l=1;l<i.length&&i[l]<=o;l+=2)a=l;a&&i.splice(0,a+1)}}}function qw(n,t,e){let i,s=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:s=!1,scheduler:e}=n):i=n??1/0,Ci({connector:()=>new Gw(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function dm(n){return en((t,e)=>{let i,s=null,r=!1;s=t.subscribe(ln(e,void 0,void 0,o=>{i=J(n(o,dm(n)(t))),s?(s.unsubscribe(),s=null,i.subscribe(e)):r=!0})),r&&(s.unsubscribe(),s=null,i.subscribe(e))})}function pm(n){return n<=0?()=>zt:en((t,e)=>{let i=0;t.subscribe(ln(e,s=>{++i<=n&&(e.next(s),n<=i&&e.complete())}))})}var Vw={},fT={};function gT(n){for(var t=[],e=0,i=0,s=0;s<n.length;s+=1){var r=Vw[n[s]];if(void 0===r)throw new Error("Invalid character ("+n[s]+")");var o=32&r;if(i+=(r&=31)<<e,o)e+=5;else{var a=1&i;i>>>=1,t.push(a?0===i?-2147483648:-i:i),i=e=0}}return t}"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split("").forEach(function(n,t){Vw[n]=t,fT[t]=n});const zc="TOKEN_LOGGER_CONFIG";class mT{constructor(t){this.config=this._clone(t)}get level(){return this.config.level}get serverLogLevel(){return this.config.serverLogLevel}updateConfig(t){this.config=this._clone(t)}partialUpdateConfig(t){t&&Object.keys(t).forEach(e=>{this.config[e]=t[e]})}getConfig(){return this._clone(this.config)}_clone(t){const e={level:null};return Object.keys(t).forEach(i=>{e[i]=t[i]}),e}}const nh="TOKEN_LOGGER_CONFIG_ENGINE_FACTORY";class yT{provideConfigEngine(t){return new mT(t)}}const sh="TOKEN_LOGGER_MAPPER_SERVICE";let _T=(()=>{class n{constructor(e){this.httpBackend=e,this.sourceMapCache=new Map,this.logPositionCache=new Map}getLogPosition(e,i){const s=this.getStackLine(e);if(!s)return bt({fileName:"",lineNumber:0,columnNumber:0});const r=this.getLocalPosition(s);if(!e.enableSourceMaps)return bt(r);const o=this.getSourceMapLocation(s);return this.getSourceMap(o,r)}getStackLine(e){const i=new Error;try{throw i}catch{try{let s=4;return i.stack.split("\n")[0].includes(".js:")||(s+=1),i.stack.split("\n")[s+(e.proxiedSteps||0)]}catch{return null}}}getLocalPosition(e){const i=e.lastIndexOf("/");let s=e.indexOf(")");s<0&&(s=void 0);const r=e.substring(i+1,s).split(":");return 3===r.length?{fileName:r[0],lineNumber:+r[1],columnNumber:+r[2]}:{fileName:"unknown",lineNumber:0,columnNumber:0}}getTranspileLocation(e){let i=e.indexOf("(");i<0&&(i=e.lastIndexOf("@"),i<0&&(i=e.lastIndexOf(" ")));let s=e.indexOf(")");return s<0&&(s=void 0),e.substring(i+1,s)}getSourceMapLocation(e){const i=this.getTranspileLocation(e),s=i.substring(0,i.lastIndexOf(":"));return s.substring(0,s.lastIndexOf(":"))+".map"}getMapping(e,i){let s=0,r=0,o=0;const a=e.mappings.split(";");for(let l=0;l<a.length;l++){let h=0;const u=a[l].split(",");for(let c=0;c<u.length;c++){const d=gT(u[c]);if(d.length>=4&&(h+=d[0],s+=d[1],r+=d[2],o+=d[3]),l===i.lineNumber){if(h===i.columnNumber)return{fileName:e.sources[s],lineNumber:r,columnNumber:o};if(c+1===u.length)return{fileName:e.sources[s],lineNumber:r,columnNumber:0}}}}return{fileName:"unknown",lineNumber:0,columnNumber:0}}getSourceMap(e,i){const s=new lo("GET",e),r=`${i.fileName}:${i.lineNumber}:${i.columnNumber}`;if(this.logPositionCache.has(r))return this.logPositionCache.get(r);this.sourceMapCache.has(e)||(this.httpBackend?this.sourceMapCache.set(e,this.httpBackend.handle(s).pipe(Oc(a=>a instanceof ka),Rn(a=>a.body),function(l=1/0){let h;h=l&&"object"==typeof l?l:{count:l};const{count:u=1/0,delay:c,resetOnSuccess:d=!1}=h;return u<=0?Vn:en((p,f)=>{let g,m=0;const y=()=>{let _=!1;g=p.subscribe(ln(f,v=>{d&&(m=0),f.next(v)},void 0,v=>{if(m++<u){const x=()=>{g?(g.unsubscribe(),g=null,y()):_=!0};if(null!=c){const w="number"==typeof c?jw(c):J(c(v,m)),C=ln(f,()=>{C.unsubscribe(),x()},()=>{f.complete()});w.subscribe(C)}else x()}else f.error(v)})),_&&(g.unsubscribe(),g=null,y())};y()})}(3),qw(1))):(console.error("NGXLogger : Can't get sourcemap because HttpBackend is not provided. You need to import HttpClientModule"),this.sourceMapCache.set(e,bt(null))));const o=this.sourceMapCache.get(e).pipe(Rn(a=>a?this.getMapping(a,i):i),dm(()=>bt(i)),qw(1));return this.logPositionCache.set(r,o),o}}return n.\u0275fac=function(t){return new(t||n)(Tt(Ac,8))},n.\u0275prov=B({token:n,factory:n.\u0275fac}),n})();const rh="TOKEN_LOGGER_METADATA_SERVICE";let vT=(()=>{class n{constructor(e){this.datePipe=e}computeTimestamp(e){const i=()=>(new Date).toISOString();return e.timestampFormat?this.datePipe?this.datePipe.transform(new Date,e.timestampFormat):(console.error("NGXLogger : Can't use timeStampFormat because DatePipe is not provided. You need to provide DatePipe"),i()):i()}getMetadata(e,i,s,r){const o={level:e,additional:r};return o.message=s&&"function"==typeof s?s():s,o.timestamp=this.computeTimestamp(i),o}}return n.\u0275fac=function(t){return new(t||n)(Tt(W2,8))},n.\u0275prov=B({token:n,factory:n.\u0275fac}),n})();const oh="TOKEN_LOGGER_RULES_SERVICE";let xT=(()=>{class n{shouldCallWriter(e,i,s,r){return!i.disableConsoleLogging&&e>=i.level}shouldCallServer(e,i,s,r){return!!i.serverLoggingUrl&&e>=i.serverLogLevel}shouldCallMonitor(e,i,s,r){return this.shouldCallWriter(e,i,s,r)||this.shouldCallServer(e,i,s,r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=B({token:n,factory:n.\u0275fac}),n})();const ah="TOKEN_LOGGER_SERVER_SERVICE";let wT=(()=>{class n{constructor(e,i){this.httpBackend=e,this.ngZone=i,this.serverCallsQueue=[],this.flushingQueue=new ne(!1)}ngOnDestroy(){this.flushingQueue&&(this.flushingQueue.complete(),this.flushingQueue=null),this.addToQueueTimer&&(this.addToQueueTimer.unsubscribe(),this.addToQueueTimer=null)}secureErrorObject(e){return e?.stack}secureAdditionalParameters(e){return null==e?null:e.map((i,s)=>{try{return i instanceof Error?this.secureErrorObject(i):("object"==typeof i&&JSON.stringify(i),i)}catch{return`The additional[${s}] value could not be parsed using JSON.stringify().`}})}secureMessage(e){try{if(e instanceof Error)return this.secureErrorObject(e);"string"!=typeof e&&(e=JSON.stringify(e,null,2))}catch{e='The provided "message" value could not be parsed with JSON.stringify().'}return e}alterHttpRequest(e){return e}logOnServer(e,i,s){if(!this.httpBackend)return console.error("NGXLogger : Can't log on server because HttpBackend is not provided. You need to import HttpClientModule"),bt(null);let r=new lo("POST",e,i,s||{}),o=bt(r);const a=this.alterHttpRequest(r);return(h=a)&&(h instanceof ki||vt(h.lift)&&vt(h.subscribe))?o=a:a?o=bt(a):console.warn("NGXLogger : alterHttpRequest returned an invalid request. Using default one instead"),o.pipe(Sw(l=>l?this.httpBackend.handle(l):(console.warn("NGXLogger : alterHttpRequest returned an invalid request (observable). Using default one instead"),this.httpBackend.handle(r))),Oc(l=>l instanceof ka),Rn(l=>l.body));var h}customiseRequestBody(e){return e}flushQueue(e){this.flushingQueue.next(!0),this.addToQueueTimer&&(this.addToQueueTimer.unsubscribe(),this.addToQueueTimer=null),this.serverCallsQueue&&this.serverCallsQueue.length>0&&this.sendToServerAction(this.serverCallsQueue,e),this.serverCallsQueue=[],this.flushingQueue.next(!1)}sendToServerAction(e,i){let s;const r=l=>{const h={...l};return h.additional=this.secureAdditionalParameters(h.additional),h.message=this.secureMessage(h.message),h};Array.isArray(e)?(s=[],e.forEach(l=>{s.push(r(l))})):s=r(e),s=this.customiseRequestBody(s);const o=i.customHttpHeaders||new xs;o.has("Content-Type")||o.set("Content-Type","application/json");const a=()=>{this.logOnServer(i.serverLoggingUrl,s,{headers:o,params:i.customHttpParams||new Bs,responseType:i.httpResponseType||"json",withCredentials:i.withCredentials||!1}).pipe(dm(l=>(console.error("NGXLogger: Failed to log on server",l),function(u,c){const d=vt(u)?u:()=>u;return new ki(f=>f.error(d()))}(l)))).subscribe()};if(!0===i.serverCallsOutsideNgZone){if(!this.ngZone)return void console.error("NGXLogger: NgZone is not provided and serverCallsOutsideNgZone is set to true");this.ngZone.runOutsideAngular(a)}else a()}sendToServer(e,i){if((!i.serverCallsBatchSize||i.serverCallsBatchSize<=0)&&(!i.serverCallsTimer||i.serverCallsTimer<=0))return void this.sendToServerAction(e,i);const s=()=>{this.serverCallsQueue.push({...e}),i.serverCallsBatchSize&&this.serverCallsQueue.length>i.serverCallsBatchSize&&this.flushQueue(i),i.serverCallsTimer>0&&!this.addToQueueTimer&&(this.addToQueueTimer=jw(i.serverCallsTimer).subscribe(r=>{this.flushQueue(i)}))};!0===this.flushingQueue.value?this.flushingQueue.pipe(Oc(r=>!1===r),pm(1)).subscribe(r=>{s()}):s()}}return n.\u0275fac=function(t){return new(t||n)(Tt(Ac,8),Tt(zi,8))},n.\u0275prov=B({token:n,factory:n.\u0275fac}),n})();const lh="TOKEN_LOGGER_WRITER_SERVICE";var Ei=function(n){return n[n.TRACE=0]="TRACE",n[n.DEBUG=1]="DEBUG",n[n.INFO=2]="INFO",n[n.LOG=3]="LOG",n[n.WARN=4]="WARN",n[n.ERROR=5]="ERROR",n[n.FATAL=6]="FATAL",n[n.OFF=7]="OFF",n}(Ei||{});const bT=["purple","teal","gray","gray","red","red","red"];let CT=(()=>{class n{constructor(e){this.platformId=e,this.prepareMetaStringFuncs=[this.getTimestampToWrite,this.getLevelToWrite,this.getFileDetailsToWrite,this.getContextToWrite],this.isIE=function(s){return s===n_}(e)&&navigator&&navigator.userAgent&&!(-1===navigator.userAgent.indexOf("MSIE")&&!navigator.userAgent.match(/Trident\//)&&!navigator.userAgent.match(/Edge\//)),this.logFunc=this.isIE?this.logIE.bind(this):this.logModern.bind(this)}getTimestampToWrite(e,i){return e.timestamp}getLevelToWrite(e,i){return Ei[e.level]}getFileDetailsToWrite(e,i){return!0===i.disableFileDetails?"":`[${e.fileName}:${e.lineNumber}:${e.columnNumber}]`}getContextToWrite(e,i){return i.context?`{${i.context}}`:""}prepareMetaString(e,i){let s="";return this.prepareMetaStringFuncs.forEach(r=>{const o=r(e,i);o&&(s=s+" "+o)}),s.trim()}getColor(e,i){if(e.level!==Ei.OFF)return(i.colorScheme??bT)[e.level]}logIE(e,i,s){const r=e.additional||[];switch(e.level){case Ei.WARN:console.warn(`${s} `,e.message,...r);break;case Ei.ERROR:case Ei.FATAL:console.error(`${s} `,e.message,...r);break;case Ei.INFO:console.info(`${s} `,e.message,...r);break;default:console.log(`${s} `,e.message,...r)}}logModern(e,i,s){const r=this.getColor(e,i),o=e.additional||[];switch(e.level){case Ei.WARN:console.warn(`%c${s}`,`color:${r}`,e.message,...o);break;case Ei.ERROR:case Ei.FATAL:console.error(`%c${s}`,`color:${r}`,e.message,...o);break;case Ei.INFO:console.info(`%c${s}`,`color:${r}`,e.message,...o);break;case Ei.DEBUG:console.debug(`%c${s}`,`color:${r}`,e.message,...o);break;default:console.log(`%c${s}`,`color:${r}`,e.message,...o)}}writeMessage(e,i){const s=this.prepareMetaString(e,i);this.logFunc(e,i,s)}}return n.\u0275fac=function(t){return new(t||n)(Tt(Co))},n.\u0275prov=B({token:n,factory:n.\u0275fac}),n})(),ho=(()=>{class n{constructor(e,i,s,r,o,a,l){this.metadataService=s,this.ruleService=r,this.mapperService=o,this.writerService=a,this.serverService=l,this.configEngine=i.provideConfigEngine(e)}get level(){return this.configEngine.level}get serverLogLevel(){return this.configEngine.serverLogLevel}trace(e,...i){this._log(Ei.TRACE,e,i)}debug(e,...i){this._log(Ei.DEBUG,e,i)}info(e,...i){this._log(Ei.INFO,e,i)}log(e,...i){this._log(Ei.LOG,e,i)}warn(e,...i){this._log(Ei.WARN,e,i)}error(e,...i){this._log(Ei.ERROR,e,i)}fatal(e,...i){this._log(Ei.FATAL,e,i)}setCustomHttpHeaders(e){const i=this.getConfigSnapshot();i.customHttpHeaders=e,this.updateConfig(i)}setCustomParams(e){const i=this.getConfigSnapshot();i.customHttpParams=e,this.updateConfig(i)}setWithCredentialsOptionValue(e){const i=this.getConfigSnapshot();i.withCredentials=e,this.updateConfig(i)}registerMonitor(e){this._loggerMonitor=e}updateConfig(e){this.configEngine.updateConfig(e)}partialUpdateConfig(e){this.configEngine.partialUpdateConfig(e)}getConfigSnapshot(){return this.configEngine.getConfig()}flushServerQueue(){this.serverService.flushQueue(this.getConfigSnapshot())}_log(e,i,s=[]){const r=this.configEngine.getConfig(),o=this.ruleService.shouldCallWriter(e,r,i,s),a=this.ruleService.shouldCallServer(e,r,i,s),l=this.ruleService.shouldCallMonitor(e,r,i,s);if(!o&&!a&&!l)return;const h=this.metadataService.getMetadata(e,r,i,s);this.mapperService.getLogPosition(r,h).pipe(pm(1)).subscribe(u=>{u&&(h.fileName=u.fileName,h.lineNumber=u.lineNumber,h.columnNumber=u.columnNumber),l&&this._loggerMonitor&&this._loggerMonitor.onLog(h,r),o&&this.writerService.writeMessage(h,r),a&&this.serverService.sendToServer(h,r)})}}return n.\u0275fac=function(t){return new(t||n)(Tt(zc),Tt(nh),Tt(rh),Tt(oh),Tt(sh),Tt(lh),Tt(ah))},n.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),MT=(()=>{class n{constructor(e,i,s,r,o,a,l){this.logger=e,this.configEngineFactory=i,this.metadataService=s,this.ruleService=r,this.mapperService=o,this.writerService=a,this.serverService=l}create(e,i,s,r){return this.getNewInstance({config:e,serverService:i,logMonitor:s,mapperService:r})}getNewInstance(e){const i=new ho(e?.config??this.logger.getConfigSnapshot(),e?.configEngineFactory??this.configEngineFactory,e?.metadataService??this.metadataService,e?.ruleService??this.ruleService,e?.mapperService??this.mapperService,e?.writerService??this.writerService,e?.serverService??this.serverService);return e?.partialConfig&&i.partialUpdateConfig(e.partialConfig),e?.logMonitor&&i.registerMonitor(e.logMonitor),i}}return n.\u0275fac=function(t){return new(t||n)(Tt(ho),Tt(nh),Tt(rh),Tt(oh),Tt(sh),Tt(lh),Tt(ah))},n.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ST=(()=>{class n{static forRoot(e,i){if(i||(i={}),i.configProvider){if(i.configProvider.provide!==zc)throw new Error(`Wrong injection token for configProvider, it should be ${zc} and you used ${i.configProvider.provide}`)}else i.configProvider={provide:zc,useValue:e||{}};if(i.configEngineFactoryProvider){if(i.configEngineFactoryProvider.provide!==nh)throw new Error(`Wrong injection token for configEngineFactoryProvider, it should be '${nh}' and you used '${i.configEngineFactoryProvider.provide}'`)}else i.configEngineFactoryProvider={provide:nh,useClass:yT};if(i.metadataProvider){if(i.metadataProvider.provide!==rh)throw new Error(`Wrong injection token for metadataProvider, it should be '${rh}' and you used '${i.metadataProvider.provide}'`)}else i.metadataProvider={provide:rh,useClass:vT};if(i.ruleProvider){if(i.ruleProvider.provide!==oh)throw new Error(`Wrong injection token for ruleProvider, it should be '${oh}' and you used '${i.ruleProvider.provide}'`)}else i.ruleProvider={provide:oh,useClass:xT};if(i.mapperProvider){if(i.mapperProvider.provide!==sh)throw new Error(`Wrong injection token for mapperProvider, it should be '${sh}' and you used '${i.mapperProvider.provide}'`)}else i.mapperProvider={provide:sh,useClass:_T};if(i.writerProvider){if(i.writerProvider.provide!==lh)throw new Error(`Wrong injection token for writerProvider, it should be '${lh}' and you used '${i.writerProvider.provide}'`)}else i.writerProvider={provide:lh,useClass:CT};if(i.serverProvider){if(i.serverProvider.provide!==ah)throw new Error(`Wrong injection token for serverProvider, it should be '${ah}' and you used '${i.writerProvider.provide}'`)}else i.serverProvider={provide:ah,useClass:wT};return{ngModule:n,providers:[ho,i.configProvider,i.configEngineFactoryProvider,i.metadataProvider,i.ruleProvider,i.mapperProvider,i.writerProvider,i.serverProvider,MT]}}static forChild(){return{ngModule:n}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=po({type:n}),n.\u0275inj=pt({imports:[[il]]}),n})(),ET=(()=>{class n{constructor(e){this.http=e}getMatrixSet(e){return this.http.get(e)}getMatrix(e){return this.http.get(e)}static#t=this.\u0275fac=function(e){return new(e||n)(Tt(Dc))};static#e=this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function TT(n,t){1&n&&Po(0,"app-objectinfo-view",3),2&n&&Js("feature",Gh().curFeature)}let Bw=(()=>{class n{set showGrid(e){this._showGrid=gp(e)}get showGrid(){return this._showGrid}set showObjectInfo(e){this._showObjectInfo=gp(e)}get showObjectInfo(){return this._showObjectInfo}set zoom(e){this._zoom=e,-1!=e&&(this.map.getView().setZoom(e),this.currentZoomLevel.next(e))}get zoom(){return this._zoom}constructor(e,i,s,r){this.logger=e,this.elementRef=i,this.matrixsetService=s,this.cdf=r,this.title="view-component",this.map=new Yo({}),this.xyzselector="/{z}/{y}/{x}?f=mvt",this._showGrid=!1,this._showObjectInfo=!1,this._zoom=-1,this.tileUrl=Df,this.currentZoomLevel=new xn,this.activeFeature=new xn,this.activeTileUrl=new xn,this.mapHeight=600,this.mapWidth=800}ngOnChanges(e){e.styleUrl?.previousValue!==e.styleUrl?.currentValue&&(e.styleUrl.isFirstChange()||this.vectorTileLayer&&this.setStyle(this.vectorTileLayer)),e.tileUrl?.previousValue!==e.tileUrl?.currentValue&&(this.maxZoom=void 0,this.minZoom=void 0,this.zoom=-1,this.checkParams(),this.initialize())}initialize(){this.vectorTileLayer=void 0;let e=this.tileUrl.replace("tiles","tileMatrixSets")+"?f=json";this.matrixsetService.getMatrix(this.tileUrl).subscribe({next:i=>{const s=this.FindMatrixUrl(i.links);s?e=s:this.logger.log("tileurl :"+this.tileUrl+"not found"),this.drawFromMatrixUrl(i,e),this.SetZoomLevel(i),this.cdf.detectChanges()},error:i=>{this.logger.log(this.id+"error: "+JSON.stringify(i))}})}SetZoomLevel(e){e.tileMatrixSetLimits.forEach(i=>{this.minZoom||(this.minZoom=parseFloat(i.tileMatrix)+.01,this.zoom=this.minZoom),this.maxZoom=parseFloat(i.tileMatrix)+1})}FindMatrixUrl(e){let i;return e.forEach(s=>{if("http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme"==s.rel){const r=new URL(this.tileUrl);i=this.isFullURL(s.href)?s.href:new URL(r.origin+s.href).href}}),i}drawFromMatrixUrl(e,i){this.matrixsetService.getMatrixSet(i).subscribe({next:s=>{const r=[],o=[],a=[];s.tileMatrices.forEach(l=>{r[l.id]=l.cellSize,o[l.id]=this.tileUrl.includes(Dv)?[l.pointOfOrigin[1],l.pointOfOrigin[0]]:l.pointOfOrigin,a[l.id]=[l.tileWidth,l.tileHeight]}),this.tileGrid=new dr({resolutions:r,tileSizes:a,origins:o}),this.drawMap(e)},error:s=>{this.logger.log(this.id+"tilematrixset not found: "+i,s),this.projection=new zv(this.tileUrl).Projection,this.tileGrid=new dr({extent:this.projection.getExtent(),resolutions:this.calcResolutions(this.projection),tileSize:[256,256],origin:Dn(this.projection.getExtent())}),this.drawMap(e)}})}drawMap(e){this.map.setTarget(void 0),this.map=new Yo({});const i=this.getMap();i.on("pointermove",r=>{i.forEachFeatureAtPixel(r.pixel,o=>{o&&(this._showObjectInfo&&(this.curFeature=o,this.cdf.detectChanges()),this.activeFeature.emit(o))},{hitTolerance:3})}),i.getView().on("change:resolution",()=>{const r=this.map.getView().getZoom();this.logger.log("zoom"+r),r&&(this._zoom=r,this.currentZoomLevel.next(r))}),this.SetZoomLevel(e);const s=this.elementRef.nativeElement.querySelector("[id='map']");this.mapWidth=this.elementRef.nativeElement.offsetWidth,this.mapHeight=.75*this.elementRef.nativeElement.offsetWidth,i.setTarget(s),this.cdf.detectChanges()}checkParams(){this.logger.log(this.id),this.tileUrl||this.logger.error("No TilteUrl was provided for the app-vectortile-view"),this.styleUrl||this.logger.log("No StyleUrl was provided for the app-vectortile-view"),this.centerX?this.logger.log("center-x="+this.centerX):this.logger.error("No zoom center-x was provided for the app-vectortile-view"),this.centerY?this.logger.log("center-y="+this.centerY):this.logger.error("No center-y was provided for the app-vectortile-view")}getMap(){Nn=Ee("EPSG:4326");const e=this.generateLayers(),i=e.layers,s=[this.centerX,this.centerY];this.vectorTileLayer=e.vectorTileLayer;const r=k1({zoom:this.maxZoom-this.minZoom>1}).extend([new UE]);return this.map=new Yo({controls:r,layers:i,view:new Mn({center:s,zoom:this.zoom,maxZoom:this.maxZoom,minZoom:this.minZoom,enableRotation:!1,projection:this.projection})}),this.map}generateLayers(){this.projection=new zv(this.tileUrl).Projection;const e=this.getVectortileLayer(this.projection);this.setStyle(e);let i=[e];if(this.showGrid){const s=e.getSource();if(s){const r=s.getTileGrid();r&&(i=[e,new rm({source:new uM({template:"z:{z} y:{y} x:{x}",projection:this.projection,tileGrid:r,wrapX:s.getWrapX(),zDirection:1})})])}}return{vectorTileLayer:e,layers:i}}setStyle(e){if(this.styleUrl){const i=e.getSource()?.getProjection();xw(e,this.styleUrl).then(()=>{this.tileUrl!==Df&&e.setSource(this.getVectorTileSource(i,this.tileUrl))}).catch(s=>this.logger.error("error loading: "+this.id+" "+this.styleUrl+" "+s))}else{const i=new pn({fill:new En({color:"rgba(255,255,255,0.4)"}),stroke:new Tn({color:"#3399CC",width:1.25})});e.setStyle(i)}}getVectortileLayer(e){return new Yl({source:this.getVectorTileSource(e,this.tileUrl),renderMode:"hybrid",declutter:!0,useInterimTilesOnError:!1})}calcResolutions(e){const i=We(e.getExtent())/256,s=[];for(let r=0;r<=21;r++)s[r]=i/Math.pow(2,r);return s}getVectorTileSource(e,i){const s=new Cf({format:new Qf,projection:e,tileGrid:this.tileGrid,url:i+this.xyzselector,cacheSize:0});return s.on(["tileloadend"],r=>{this.activeTileUrl.next(r.tile.key)}),s}isFullURL(e){return e.toLowerCase().startsWith("http://")||e.toLowerCase().startsWith("https://")}static#t=this.\u0275fac=function(e){return new(e||n)(Mi(ho),Mi(Ya),Mi(ET),Mi(xy))};static#e=this.\u0275cmp=Da({type:n,selectors:[["app-vectortile-view"]],inputs:{showGrid:"showGrid",showObjectInfo:"showObjectInfo",tileUrl:"tileUrl",styleUrl:"styleUrl",id:"id",zoom:"zoom",centerX:"centerX",centerY:"centerY"},outputs:{currentZoomLevel:"currentZoomLevel",activeFeature:"activeFeature",activeTileUrl:"activeTileUrl"},standalone:!0,features:[vh,Qa],decls:3,vars:5,consts:[["id","map",1,"maparea"],[1,"toprightpanel"],["class","objectinfopanel","id","objectinfo",3,"feature",4,"ngIf"],["id","objectinfo",1,"objectinfopanel",3,"feature"]],template:function(e,i){1&e&&(un(0,"div",0)(1,"div",1),Io(2,TT,1,1,"app-objectinfo-view",2),wn()()),2&e&&(Nh("width",i.mapWidth,"px")("height",i.mapHeight,"px"),Ks(2),Js("ngIf",i.showObjectInfo))},dependencies:[il,ap],styles:[".maparea[_ngcontent-%COMP%]{z-index:1;position:relative;display:flex;background:white}.toprightpanel[_ngcontent-%COMP%]{position:absolute;flex:1;top:6%;right:1%;z-index:2;max-height:90%;max-width:40%;height:100%}"],changeDetection:0})}return n})();const jc={schedule(n,t){const e=setTimeout(n,t);return()=>clearTimeout(e)},scheduleBeforeRender(n){if(typeof window>"u")return jc.schedule(n,0);if(typeof window.requestAnimationFrame>"u")return jc.schedule(n,16);const t=window.requestAnimationFrame(n);return()=>window.cancelAnimationFrame(t)}};let fm;function kT(n,t,e){let i=e;return function(r){return!!r&&r.nodeType===Node.ELEMENT_NODE}(n)&&t.some((s,r)=>!("*"===s||!function(a,l){if(!fm){const h=Element.prototype;fm=h.matches||h.matchesSelector||h.mozMatchesSelector||h.msMatchesSelector||h.oMatchesSelector||h.webkitMatchesSelector}return a.nodeType===Node.ELEMENT_NODE&&fm.call(a,l)}(n,s)||(i=r,0))),i}class IT{constructor(t,e){this.componentFactory=e.get(So).resolveComponentFactory(t)}create(t){return new PT(this.componentFactory,t)}}class PT{constructor(t,e){this.componentFactory=t,this.injector=e,this.eventEmitters=new Gw(1),this.events=this.eventEmitters.pipe(Be(i=>bi(...i))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:i})=>i)),this.ngZone=this.injector.get(zi),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(t){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(t)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=jc.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(t){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(t):this.componentRef.instance[t])}setInputValue(t,e,i){this.runInZone(()=>{i&&(e=i.call(this.componentRef?.instance,e)),null!==this.componentRef?function(r,o){return r===o||r!=r&&o!=o}(e,this.getInputValue(t))&&(void 0!==e||!this.unchangedInputs.has(t))||(this.recordInputChange(t,e),this.unchangedInputs.delete(t),this.hasInputChanges=!0,this.componentRef.instance[t]=e,this.scheduleDetectChanges()):this.initialInputValues.set(t,e)})}initializeComponent(t){const e=Ua.create({providers:[],parent:this.injector}),i=function(r,o){const a=r.childNodes,l=o.map(()=>[]);let h=-1;o.some((u,c)=>"*"===u&&(h=c,!0));for(let u=0,c=a.length;u<c;++u){const d=a[u],p=kT(d,o,h);-1!==p&&l[p].push(d)}return l}(t,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(e,i,t),this.viewChangeDetectorRef=this.componentRef.injector.get(xy),this.implementsOnChanges=function(r){return"function"==typeof r}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(Bh).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:t,transform:e})=>{this.initialInputValues.has(t)&&this.setInputValue(t,this.initialInputValues.get(t),e)}),this.initialInputValues.clear()}initializeOutputs(t){const e=this.componentFactory.outputs.map(({propName:i,templateName:s})=>t.instance[i].pipe(Rn(r=>({name:s,value:r}))));this.eventEmitters.next(e)}callNgOnChanges(t){if(!this.implementsOnChanges||null===this.inputChanges)return;const e=this.inputChanges;this.inputChanges=null,t.instance.ngOnChanges(e)}markViewForCheck(t){this.hasInputChanges&&(this.hasInputChanges=!1,t.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=jc.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(t,e){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const i=this.inputChanges[t];if(i)return void(i.currentValue=e);const s=this.unchangedInputs.has(t),r=s?void 0:this.getInputValue(t);this.inputChanges[t]=new Nm(r,e,s)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(t){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(t):t()}}class RT extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}function Gc(n,t){const e=(a=n,t.injector.get(So).resolveComponentFactory(a).inputs),i=t.strategyFactory||new IT(n,t.injector),s=function(a){const l={};return a.forEach(({propName:h,templateName:u,transform:c})=>{var p;l[(p=u,p.replace(/[A-Z]/g,f=>`-${f.toLowerCase()}`))]=[h,c]}),l}(e);var a;class r extends RT{static#t=this.observedAttributes=Object.keys(s);get ngElementStrategy(){if(!this._ngElementStrategy){const a=this._ngElementStrategy=i.create(this.injector||t.injector);e.forEach(({propName:l,transform:h})=>{if(!this.hasOwnProperty(l))return;const u=this[l];delete this[l],a.setInputValue(l,u,h)})}return this._ngElementStrategy}constructor(a){super(),this.injector=a}attributeChangedCallback(a,l,h,u){const[c,d]=s[a];this.ngElementStrategy.setInputValue(c,h,d)}connectedCallback(){let a=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),a=!0),this.ngElementStrategy.connect(this),a||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(a=>{const l=new CustomEvent(a.name,{detail:a.value});this.dispatchEvent(l)})}}return e.forEach(({propName:o,transform:a})=>{Object.defineProperty(r.prototype,o,{get(){return this.ngElementStrategy.getInputValue(o)},set(l){this.ngElementStrategy.setInputValue(o,l,a)},configurable:!0,enumerable:!0})}),r}function FT(n,t){if(1&n&&(un(0,"tr")(1,"td"),Ro(2),wn(),un(3,"td"),Ro(4),wn()()),2&n){const e=t.$implicit;Ks(2),qh(e.title),Ks(2),qh(e.value)}}function OT(n,t){if(1&n&&(un(0,"table",2)(1,"caption",3),Ro(2," Object Informatie: "),wn(),un(3,"thead")(4,"th",4),Ro(5,"Veld"),wn(),un(6,"th",5),Ro(7,"Waarde"),wn()(),un(8,"tbody"),Io(9,FT,5,2,"tr",6),wn()()),2&n){const e=Gh();Ks(9),Js("ngForOf",e.getFeatureProperties())}}let AT=(()=>{class n{getFeatureProperties(){const e=[];if(this.feature){const i=this.feature.getProperties();for(const s in i)"mapbox-layer"!==s&&e.push({title:s,value:i[s]});return e}return[]}static#t=this.\u0275fac=function(e){return new(e||n)};static#e=this.\u0275cmp=Da({type:n,selectors:[["app-object-info"]],inputs:{feature:"feature"},standalone:!0,features:[Qa],decls:2,vars:1,consts:[[1,"objectinfo"],["class","featuretable",4,"ngIf"],[1,"featuretable"],[1,"featuretablecaption"],["id","Veld"],["id","Waarde"],[4,"ngFor","ngForOf"]],template:function(e,i){1&e&&(un(0,"div",0),Io(1,OT,10,1,"table",1),wn()),2&e&&(Ks(1),Js("ngIf",i.getFeatureProperties().length>0))},dependencies:[il,t_,ap],styles:[".objectinfo{margin-top:0;margin-bottom:0;margin-right:0;background-color:#fff;overflow-y:auto;overflow-x:auto;max-height:98%}.featuretable{text-align:left}.featuretablecaption{text-align:left;font-weight:700}\n"],encapsulation:3})}return n})();var Ir=function(n){return n.Circle="circle",n.Fill="fill",n.Line="line",n.Raster="raster",n.Symbol="symbol",n}(Ir||{});let Zw=(()=>{class n{constructor(e){this.http=e}getMapboxStyle(e){return this.http.get(e)}getMapboxSpriteData(e){return this.http.get(e)}getLayersids(e){const i=[];return e.layers.forEach(s=>{i.push(s.id)}),i}removefilters(e){return e.layers.forEach(i=>{i.filterCopy=i.filter,i.filter=[]}),e}removeRasterLayers(e){return e.layers=e.layers.filter(i=>i.type!==Ir.Raster),e}isFillPatternWithStops(e){return void 0!==e.stops}getItems(e,i,s){const r=[];return e.layers.forEach(o=>{const a=(c={},function p(f){if(Array.isArray(f)){const g=f[0],m=f.slice(1);"all"===g||"any"===g?m.forEach(y=>p(y)):("string"==typeof f[1]&&"string"==typeof f[2]&&(c[f[1]]=f[2]),"string"==typeof f[1]&&"number"==typeof f[2]&&(c[f[1]]=f[2]))}}(o.filter),c);var c;if(o.layout?.["text-field"]){const u=o.layout?.["text-field"].replace("{","").replace("}","");a[""+u]=u.substring(0,6)}let l=i(o["source-layer"],a,s);this.pushItem(l,o,r,a);let h=o.paint["circle-color"];o.type==Ir.Fill&&(h=o.paint["fill-color"],h||(h=o.paint["fill-pattern"])),h&&this.isFillPatternWithStops(h)&&h.stops.forEach(u=>{const c={};c[""+h.property]=u[0],l=u[0],this.pushItem(l,o,r,c)})}),r.sort((o,a)=>o.title.localeCompare(a.title))}capitalizeFirstLetter(e){return[...e][0].toUpperCase()+e.slice(1)}customTitle(e,i,s){let r="";return s.forEach(o=>{var l,h;l=r,r=i[h=o]?l+" "+i[h]:l}),""===r&&(r=e+" "),r=r.trimStart(),r=r.replace("_"," "),[...r][0].toUpperCase()+r.slice(1)}pushItem(e,i,s,r={}){s.find(o=>o.title===e)||s.push({name:i.id,title:e,geoType:i.type,style:[],sourceLayer:i["source-layer"],feature:void 0,properties:r})}defaultStyle(){const e=new En({color:"rgba(255,255,255,0.4)"}),i=new Tn({color:"#3399CC",width:1.25});return[new pn({image:new ua({fill:e,stroke:i,radius:5}),fill:e,stroke:i})]}static#t=this.\u0275fac=function(e){return new(e||n)(Tt(Dc))};static#e=this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),LT=(()=>{class n{constructor(e,i,s){this.logger=e,this.mapboxStyleService=i,this.elementRef=s,this.itemHeight=40,this.itemWidth=60,this.itemLeft=10,this.itemRight=50,this.extent=[0,0,this.itemWidth,this.itemHeight],this.projection=new Fs({code:"pixel-map",units:"pixels",extent:this.extent}),this.map=new Yo({}),this.cvectorSource=new Cf({format:new Qf,projection:this.projection}),this.cvectorLayer=new Yl({source:this.cvectorSource})}ngOnInit(){const e=this.NewFeature(this.item);this.map=new Yo({controls:[],interactions:[],layers:[this.cvectorLayer],view:new Mn({projection:this.projection,center:Jn(this.extent),zoom:2,minZoom:2,maxZoom:2})}),this.cvectorLayer.getSource()?.setTileLoadFunction(o=>{const a=o;a.setLoader(()=>{const l=[];l.push(e),a.setFeatures(l)})});const i=[];i.push(1);const s=this.mapboxStyleService.getLayersids(this.mapboxStyle);xw(this.cvectorLayer,this.mapboxStyle,s,void 0,i).then(()=>{this.logger.log(" loading legend style")}).catch(o=>{this.logger.error("error loading legend style:  "+o)}),this.cvectorLayer.getSource()?.refresh();const r=this.elementRef.nativeElement.querySelector("[id='itemmap']");this.map.setTarget(r)}NewFeature(e){const i=this.itemHeight/2;switch(e.geoType){case Ir.Fill:{const s=vu(this.extent);s.scale(.05,.05);const r=new Ns({geometry:s,layer:e.sourceLayer});return r.setProperties(e.properties),r}case Ir.Circle:case Ir.Raster:case Ir.Symbol:{const s=new Ns({geometry:new Os(Jn(this.extent)),layer:e.sourceLayer});return s.setProperties(e.properties),s}case Ir.Line:{const s=new Ns({geometry:new zs([[this.itemLeft,i],[this.itemRight,i]]),layer:e.sourceLayer});return s.setProperties(e.properties),s}default:!function(r){throw new Error(`ERROR! Reached forbidden guard function with unexpected value: ${JSON.stringify(r)}`)}(e.geoType)}}static#t=this.\u0275fac=function(e){return new(e||n)(Mi(ho),Mi(Zw),Mi(Ya))};static#e=this.\u0275cmp=Da({type:n,selectors:[["app-legend-item"]],inputs:{item:"item",mapboxStyle:"mapboxStyle"},standalone:!0,features:[Qa],decls:1,vars:4,consts:[["id","itemmap",1,"legenditem"]],template:function(e,i){1&e&&Po(0,"div",0),2&e&&Nh("width",i.itemWidth,"px")("height",i.itemHeight,"px")},changeDetection:0})}return n})();function DT(n,t){if(1&n&&(un(0,"div",3),Po(1,"app-legend-item",4),un(2,"div",5),Ro(3),wn()()),2&n){const e=t.$implicit,i=Gh(2);Ks(1),Js("item",e)("mapboxStyle",i.mapboxStyle),Ks(2),qh(e.title)}}function NT(n,t){if(1&n&&(un(0,"div",1),Io(1,DT,4,3,"div",2),wn()),2&n){const e=Gh();Ks(1),Js("ngForOf",e.LegendItems)}}let zT=(()=>{class n{constructor(e,i,s){this.logger=e,this.mapboxStyleService=i,this.elementRef=s,this.LegendItems=[],function(o=!1){vw=o}(!0)}ngOnChanges(e){e.styleUrl?.previousValue!==e.styleUrl?.currentValue&&(e.styleUrl.isFirstChange()||this.generateLegend()),this.titleItems&&e.titleItems.previousValue!==e.titleItems.currentValue&&(e.titleItems.isFirstChange()||this.generateLegend())}ngOnInit(){this.generateLegend()}generateLegend(){this.styleUrl?this.mapboxStyleService.getMapboxStyle(this.styleUrl).subscribe(e=>{if(this.mapboxStyle=this.mapboxStyleService.removeRasterLayers(e),this.titleItems){const i=this.titleItems.split(",");this.LegendItems=this.mapboxStyleService.getItems(this.mapboxStyle,this.mapboxStyleService.customTitle,i)}else this.LegendItems=this.mapboxStyleService.getItems(this.mapboxStyle,this.mapboxStyleService.capitalizeFirstLetter,[])}):this.logger.error("no style url supplied")}static#t=this.\u0275fac=function(e){return new(e||n)(Mi(ho),Mi(Zw),Mi(Ya))};static#e=this.\u0275cmp=Da({type:n,selectors:[["app-legend-view"]],inputs:{styleUrl:"styleUrl",titleItems:"titleItems"},standalone:!0,features:[vh,Qa],decls:1,vars:1,consts:[["class","legendContainer",4,"ngIf"],[1,"legendContainer"],["class","legendItem",4,"ngFor","ngForOf"],[1,"legendItem"],[3,"item","mapboxStyle"],[1,"legendText"]],template:function(e,i){1&e&&Io(0,NT,2,1,"div",0),2&e&&Js("ngIf",i.LegendItems.length>0)},dependencies:[il,t_,ap,LT],styles:[".legendContainer[_ngcontent-%COMP%]{display:flex;flex:0 1 auto;flex-wrap:wrap;flex-direction:column;justify-content:flex-start;align-items:flex-start;max-height:100%;padding:5px;margin:5px;min-height:0}.legendItem[_ngcontent-%COMP%]{max-width:23vw;display:flex;flex-wrap:nowrap;flex-direction:row;align-items:center;flex:0 1 auto}.legendText[_ngcontent-%COMP%]{font-size:calc((var(--h) / 3));margin-left:1em}"]})}return n})();const jT=class extends Kn{constructor(t){super(),this.options=t,this.id=t.id,this.insertFirst=void 0===t.insertFirst||t.insertFirst,this.stopEvent=void 0===t.stopEvent||t.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==t.className?t.className:"ol-overlay-container ol-selectable",this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===t.autoPan?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener("element",this.handleElementChanged),this.addChangeListener("map",this.handleMapChanged),this.addChangeListener("offset",this.handleOffsetChanged),this.addChangeListener("position",this.handlePositionChanged),this.addChangeListener("positioning",this.handlePositioningChanged),void 0!==t.element&&this.setElement(t.element),this.setOffset(void 0!==t.offset?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),void 0!==t.position&&this.setPosition(t.position)}getElement(){return this.get("element")}getId(){return this.id}getMap(){return this.get("map")||null}getOffset(){return this.get("offset")}getPosition(){return this.get("position")}getPositioning(){return this.get("positioning")}handleElementChanged(){C1(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&(Su(this.element),ti(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=ve(t,"postrender",this.render,this),this.updatePixelPosition();const e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set("element",t)}setMap(t){this.set("map",t)}setOffset(t){this.set("offset",t)}setPosition(t){this.set("position",t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const e=this.getMap();if(!e||!e.getTargetElement()||!this.get("position"))return;const i=this.getRect(e.getTargetElement(),e.getSize()),s=this.getElement(),r=this.getRect(s,[OC(s),AC(s)]),o=void 0===(t=t||{}).margin?20:t.margin;if(!sr(i,r)){const a=r[0]-i[0],l=i[2]-r[2],h=r[1]-i[1],u=i[3]-r[3],c=[0,0];if(a<0?c[0]=a-o:l<0&&(c[0]=Math.abs(l)+o),h<0?c[1]=h-o:u<0&&(c[1]=Math.abs(u)+o),0!==c[0]||0!==c[1]){const d=e.getView().getCenterInternal(),p=e.getPixelFromCoordinateInternal(d);if(!p)return;const f=[p[0]+c[0],p[1]+c[1]],g=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(f),duration:g.duration,easing:g.easing})}}}getRect(t,e){const i=t.getBoundingClientRect(),s=i.left+window.pageXOffset,r=i.top+window.pageYOffset;return[s,r,s+e[0],r+e[1]]}setPositioning(t){this.set("positioning",t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e)return void this.setVisible(!1);const i=t.getPixelFromCoordinate(e),s=t.getSize();this.updateRenderedPosition(i,s)}updateRenderedPosition(t,e){const i=this.element.style,s=this.getOffset(),r=this.getPositioning();this.setVisible(!0);let o="0%",a="0%";"bottom-right"==r||"center-right"==r||"top-right"==r?o="-100%":("bottom-center"==r||"center-center"==r||"top-center"==r)&&(o="-50%"),"bottom-left"==r||"bottom-center"==r||"bottom-right"==r?a="-100%":("center-left"==r||"center-center"==r||"center-right"==r)&&(a="-50%");const l=`translate(${o}, ${a}) translate(${Math.round(t[0]+s[0])+"px"}, ${Math.round(t[1]+s[1])+"px"})`;this.rendered.transform_!=l&&(this.rendered.transform_=l,i.transform=l)}getOptions(){return this.options}},GT=class extends $1{constructor(t){let e;e=void 0!==(t=t||{}).attributions?t.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'],super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:void 0!==t.crossOrigin?t.crossOrigin:"anonymous",interpolate:t.interpolate,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,opaque:void 0===t.opaque||t.opaque,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:void 0!==t.url?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:t.wrapX,zDirection:t.zDirection})}};function Ww(n,t){const e=[];Object.keys(t).forEach(function(s){null!=t[s]&&e.push(s+"="+encodeURIComponent(t[s]))});const i=e.join("&");return n=n.replace(/[?&]$/,""),(n+=n.includes("?")?"&":"?")+i}const qT=class extends bf{constructor(t){const e=void 0!==t.requestEncoding?t.requestEncoding:"KVP",i=t.tileGrid;let s=t.urls;void 0===s&&void 0!==t.url&&(s=xf(t.url)),super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,urls:s,wrapX:void 0!==t.wrapX&&t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.version_=void 0!==t.version?t.version:"1.0.0",this.format_=void 0!==t.format?t.format:"image/jpeg",this.dimensions_=void 0!==t.dimensions?t.dimensions:{},this.layer_=t.layer,this.matrixSet_=t.matrixSet,this.style_=t.style,this.requestEncoding_=e,this.setKey(this.getKeyForDimensions_()),s&&s.length>0&&(this.tileUrlFunction=vf(s.map(this.createFromWMTSTemplate.bind(this))))}setUrls(t){this.urls=t;const e=t.join("\n");this.setTileUrlFunction(vf(t.map(this.createFromWMTSTemplate.bind(this))),e)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const t=this.urls?this.urls.slice(0):[];for(const e in this.dimensions_)t.push(e+"-"+this.dimensions_[e]);return t.join("/")}updateDimensions(t){Object.assign(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(t){const e=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};"KVP"==e&&Object.assign(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t="KVP"==e?Ww(t,i):t.replace(/\{(\w+?)\}/g,function(o,a){return a.toLowerCase()in i?i[a.toLowerCase()]:o});const s=this.tileGrid,r=this.dimensions_;return function(o,a,l){if(!o)return;const h={TileMatrix:s.getMatrixId(o[0]),TileCol:o[1],TileRow:o[2]};Object.assign(h,r);let u=t;return u="KVP"==e?Ww(u,h):u.replace(/\{(\w+?)\}/g,function(c,d){return h[d]}),u}}},VT=class extends dr{constructor(t){super({extent:t.extent,origin:t.origin,origins:t.origins,resolutions:t.resolutions,tileSize:t.tileSize,tileSizes:t.tileSizes,sizes:t.sizes}),this.matrixIds_=t.matrixIds}getMatrixId(t){return this.matrixIds_[t]}getMatrixIds(){return this.matrixIds_}},Hw={bgtBackgroundUrl:"https://service.pdok.nl/brt/achtergrondkaart/wmts/v2_0?",loglevel:Ei.OFF},Uw={dataProjection:"EPSG:4326",visualProjection:"EPSG:3857"};let BT=(()=>{class n{constructor(e,i){this.logger=e,this.http=i}getFeatures(e){return this.logger.log(JSON.stringify(e)),this.http.get(e.url).pipe(Rn(i=>(new Jf).readFeatures(i,{dataProjection:e.dataMapping.dataProjection,featureProjection:e.dataMapping.visualProjection})))}getProjectionMapping(e="http://www.opengis.net/def/crs/OGC/1.3/CRS84"){return Nv(),e?"string"==typeof e?"CRS84"===e.substring(e.lastIndexOf("/")+1).toLocaleUpperCase()?Uw:e.toUpperCase().startsWith("HTTP://WWW.OPENGIS.NET/DEF/CRS/EPSG/")?{dataProjection:"EPSG:"+e.substring(e.lastIndexOf("/")+1),visualProjection:"EPSG:3857"}:{dataProjection:e,visualProjection:e}:(this.logger.error("wrong value:"),this.logger.error(e),e):{dataProjection:e,visualProjection:e}}static#t=this.\u0275fac=function(e){return new(e||n)(Tt(ho),Tt(Dc))};static#e=this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class gm extends lr{constructor(t,e,i){super(),void 0!==i&&void 0===e?this.setFlatCoordinates(i,t):this.setCenterAndRadius(t,e=e||0,i)}clone(){const t=new gm(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,s){const r=this.flatCoordinates,o=t-r[0],a=e-r[1],l=o*o+a*a;if(l<s){if(0===l)for(let h=0;h<this.stride;++h)i[h]=r[h];else{const h=this.getRadius()/Math.sqrt(l);i[0]=r[0]+h*o,i[1]=r[1]+h*a;for(let u=2;u<this.stride;++u)i[u]=r[u]}return i.length=this.stride,l}return s}containsXY(t,e){const i=this.flatCoordinates,s=t-i[0],r=e-i[1];return s*s+r*r<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(t){const e=this.flatCoordinates,i=e[this.stride]-e[0];return cs(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e}getType(){return"Circle"}intersectsExtent(t){if(yi(t,this.getExtent())){const e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||t[1]<=e[1]&&t[3]>=e[1]||Sp(t,this.intersectsCoordinate.bind(this))}return!1}setCenter(t){const e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],s=t.slice();s[e]=s[0]+i;for(let r=1;r<e;++r)s[e+r]=t[r];this.setFlatCoordinates(this.layout,s),this.changed()}setCenterAndRadius(t,e,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);const s=this.flatCoordinates;let r=a1(s,0,t);s[r++]=s[0]+e;for(let o=1,a=this.stride;o<a;++o)s[r++]=s[o];s.length=r,this.changed()}getCoordinates(){return null}setCoordinates(t,e){}setRadius(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()}rotate(t,e){const i=this.getCenter(),s=this.getStride();this.setCenter(Vp(i,0,i.length,s,t,e,i)),this.changed()}}const ZT=gm;class qc extends ls{constructor(t,e){super(t),this.feature=e}}function Vc(n,t){return Rs(n[0],n[1],t[0],t[1])}function Ia(n,t){const e=n.length;return t<0?n[t+e]:t>=e?n[t-e]:n[t]}function Bc(n,t,e){let i,s;t<e?(i=t,s=e):(i=e,s=t);const r=Math.ceil(i),o=Math.floor(s);if(r>o)return Vc(Pa(n,i),Pa(n,s));let a=0;i<r&&(a+=Vc(Pa(n,i),Ia(n,r))),o<s&&(a+=Vc(Ia(n,o),Pa(n,s)));for(let l=r;l<o-1;++l)a+=Vc(Ia(n,l),Ia(n,l+1));return a}function Xw(n,t,e){if(t instanceof zs)Zc(n,t.getCoordinates(),!1,e);else if(t instanceof Xu){const i=t.getCoordinates();for(let s=0,r=i.length;s<r;++s)Zc(n,i[s],!1,e)}else if(t instanceof ur){const i=t.getCoordinates();for(let s=0,r=i.length;s<r;++s)Zc(n,i[s],!0,e)}else if(t instanceof Ku){const i=t.getCoordinates();for(let s=0,r=i.length;s<r;++s){const o=i[s];for(let a=0,l=o.length;a<l;++a)Zc(n,o[a],!0,e)}}else if(t instanceof Uv){const i=t.getGeometries();for(let s=0;s<i.length;++s)Xw(n,i[s],e)}}const mm={index:-1,endIndex:NaN};function Zc(n,t,e,i){const s=n[0],r=n[1];for(let o=0,a=t.length-1;o<a;++o){const l=Yw(s,r,t[o],t[o+1]);if(0===l.squaredDistance){const h=o+l.along;return void i.push({coordinates:t,ring:e,startIndex:h,endIndex:h})}}}const ym={along:0,squaredDistance:0};function Yw(n,t,e,i){const s=e[0],r=e[1],o=i[0]-s,a=i[1]-r;let l=0,h=s,u=r;return(0!==o||0!==a)&&(l=di(((n-s)*o+(t-r)*a)/(o*o+a*a),0,1),h+=o*l,u+=a*l),ym.along=l,ym.squaredDistance=au(Rs(n,t,h,u),10),ym}function Pa(n,t){const e=n.length;let i=Math.floor(t);const s=t-i;i>=e?i-=e:i<0&&(i+=e);let r=i+1;r>=e&&(r-=e);const o=n[i],a=o[0],l=o[1],h=n[r];return[a+(h[0]-a)*s,l+(h[1]-l)*s]}function WT(){const n=function(){const e={},i=[255,255,255,1],s=[0,153,255,1];return e.Polygon=[new vr({fill:new En({color:[255,255,255,.5]})})],e.MultiPolygon=e.Polygon,e.LineString=[new vr({stroke:new Tn({color:i,width:5})}),new vr({stroke:new Tn({color:s,width:3})})],e.MultiLineString=e.LineString,e.Circle=e.Polygon.concat(e.LineString),e.Point=[new vr({image:new ua({radius:6,fill:new En({color:s}),stroke:new Tn({color:i,width:1.5})}),zIndex:1/0})],e.MultiPoint=e.Point,e.GeometryCollection=e.Polygon.concat(e.LineString,e.Point),e}();return function(t,e){return n[t.getGeometry().getType()]}}const HT=class extends Xo{constructor(t){const e=t;e.stopDown||(e.stopDown=Oo),super(e),this.shouldHandle_=!1,this.downPx_=null,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=function(r){switch(r){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+r)}}(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:"Polygon"===this.mode_?3:2,this.maxPoints_="Circle"===this.mode_?2:t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:Fo,this.geometryLayout_=t.geometryLayout?t.geometryLayout:"XY";let i=t.geometryFunction;if(!i){const s=this.mode_;if("Circle"===s)i=function(r,o,a){const l=o||new ZT([NaN,NaN]),h=zn(r[0],a),u=G_(h,zn(r[r.length-1],a));l.setCenterAndRadius(h,Math.sqrt(u),this.geometryLayout_);const c=pl();return c&&l.transform(a,c),l};else{let r;"Point"===s?r=Os:"LineString"===s?r=zs:"Polygon"===s&&(r=ur),i=function(o,a,l){return a?a.setCoordinates("Polygon"===s?o[0].length?[o[0].concat([o[0][0]])]:[]:o,this.geometryLayout_):a=new r(o,this.geometryLayout_),a}}}this.geometryFunction_=i,this.dragVertexDelay_=void 0!==t.dragVertexDelay?t.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new ac({source:new no({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:WT(),updateWhileInteracting:!0}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:df,this.freehandCondition_=t.freehand?cf:t.freehandCondition?t.freehandCondition:R1,this.setTrace(t.trace||!1),this.traceState_={active:!1},this.traceSource_=t.traceSource||t.source||null,this.addChangeListener("active",this.updateState_)}setTrace(t){let e;e=t?!0===t?cf:t:WC,this.traceCondition_=e}setMap(t){super.setMap(t),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(t){"contextmenu"===t.originalEvent.type&&t.originalEvent.preventDefault(),this.freehand_="Point"!==this.mode_&&this.freehandCondition_(t);let e=t.type===ze.POINTERMOVE,i=!0;return!this.freehand_&&this.lastDragTime_&&t.type===ze.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,e=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&t.type===ze.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t.coordinate),i=!1):this.freehand_&&t.type===ze.POINTERDOWN?i=!1:e&&this.getPointerCount()<2?(i=t.type===ze.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):("mouse"===t.originalEvent.pointerType||t.type===ze.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(t)):t.type===ze.DBLCLICK&&(i=!1),super.handleEvent(t)&&i}handleDownEvent(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new Ls(ze.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))},this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(t){if(!this.traceSource_||!this.traceCondition_(t))return;if(this.traceState_.active)return void this.deactivateTrace_();const e=this.getMap(),i=rl([e.getCoordinateFromPixel([t.pixel[0]-this.snapTolerance_,t.pixel[1]+this.snapTolerance_]),e.getCoordinateFromPixel([t.pixel[0]+this.snapTolerance_,t.pixel[1]-this.snapTolerance_])]),s=this.traceSource_.getFeaturesInExtent(i);if(0===s.length)return;const r=function(a,l){const h=[];for(let u=0;u<l.length;++u)Xw(a,l[u].getGeometry(),h);return h}(t.coordinate,s);r.length&&(this.traceState_={active:!0,startPx:t.pixel.slice(),targets:r,targetIndex:-1})}addOrRemoveTracedCoordinates_(t,e){const i=t.startIndex<=t.endIndex;i===t.startIndex<=e?i&&e>t.endIndex||!i&&e<t.endIndex?this.addTracedCoordinates_(t,t.endIndex,e):(i&&e<t.endIndex||!i&&e>t.endIndex)&&this.removeTracedCoordinates_(e,t.endIndex):(this.removeTracedCoordinates_(t.startIndex,t.endIndex),this.addTracedCoordinates_(t,t.startIndex,e))}removeTracedCoordinates_(t,e){if(t===e)return;let i=0;if(t<e){const s=Math.ceil(t);let r=Math.floor(e);r===e&&(r-=1),i=r-s+1}else{const s=Math.floor(t);let r=Math.ceil(e);r===e&&(r+=1),i=s-r+1}i>0&&this.removeLastPoints_(i)}addTracedCoordinates_(t,e,i){if(e===i)return;const s=[];if(e<i){const r=Math.ceil(e);let o=Math.floor(i);o===i&&(o-=1);for(let a=r;a<=o;++a)s.push(Ia(t.coordinates,a))}else{const r=Math.floor(e);let o=Math.ceil(i);o===i&&(o+=1);for(let a=r;a>=o;--a)s.push(Ia(t.coordinates,a))}s.length&&this.appendCoordinates(s)}updateTrace_(t){const e=this.traceState_;if(!e.active||-1===e.targetIndex&&q_(e.startPx,t.pixel)<this.snapTolerance_)return;const i=function(l,h,u,c){const d=l[0],p=l[1];let f=1/0,g=-1,m=NaN;for(let v=0;v<h.targets.length;++v){const x=h.targets[v],w=x.coordinates;let C,M=1/0;for(let S=0;S<w.length-1;++S){const F=Yw(d,p,w[S],w[S+1]);F.squaredDistance<M&&(M=F.squaredDistance,C=S+F.along)}M<f&&(f=M,x.ring&&h.targetIndex===v&&(x.endIndex>x.startIndex?C<x.startIndex&&(C+=w.length):x.endIndex<x.startIndex&&C>x.startIndex&&(C-=w.length)),m=C,g=v)}const y=h.targets[g];let _=y.ring;if(h.targetIndex===g&&_){const v=Pa(y.coordinates,m);q_(u.getPixelFromCoordinate(v),h.startPx)>c&&(_=!1)}if(_){const v=y.coordinates,x=v.length,w=y.startIndex,C=m;if(w<C){const M=Bc(v,w,C);Bc(v,w,C-x)<M&&(m-=x)}else{const M=Bc(v,w,C);Bc(v,w,C+x)<M&&(m+=x)}}return mm.index=g,mm.endIndex=m,mm}(t.coordinate,e,this.getMap(),this.snapTolerance_);if(e.targetIndex!==i.index){if(-1!==e.targetIndex){const l=e.targets[e.targetIndex];this.removeTracedCoordinates_(l.startIndex,l.endIndex)}const a=e.targets[i.index];this.addTracedCoordinates_(a,a.startIndex,i.endIndex)}else this.addOrRemoveTracedCoordinates_(e.targets[e.targetIndex],i.endIndex);e.targetIndex=i.index;const s=e.targets[e.targetIndex];s.endIndex=i.endIndex;const r=Pa(s.coordinates,s.endIndex),o=this.getMap().getPixelFromCoordinate(r);t.coordinate=r,t.pixel=[Math.round(o[0]),Math.round(o[1])]}handleUpEvent(t){let e=!0;if(0===this.getPointerCount()){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);const i=this.traceState_.active;if(this.toggleTraceState_(t),this.shouldHandle_){const s=!this.finishCoordinate_;s&&this.startDrawing_(t.coordinate),!s&&this.freehand_?this.finishDrawing():!this.freehand_&&(!s||"Point"===this.mode_)&&(this.atFinish_(t.pixel,i)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),e=!1}else this.freehand_&&this.abortDrawing()}return!e&&this.stopClick_&&t.preventDefault(),e}handlePointerMove_(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const e=this.downPx_,i=t.pixel,s=e[0]-i[0],r=e[1]-i[1],o=s*s+r*r;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?(this.updateTrace_(t),this.modifyDrawing_(t.coordinate)):this.createOrUpdateSketchPoint_(t.coordinate.slice())}atFinish_(t,e){let i=!1;if(this.sketchFeature_){let s=!1,r=[this.finishCoordinate_];const o=this.mode_;if("Point"===o)i=!0;else if("Circle"===o)i=2===this.sketchCoords_.length;else if("LineString"===o)s=!e&&this.sketchCoords_.length>this.minPoints_;else if("Polygon"===o){const a=this.sketchCoords_;s=a[0].length>this.minPoints_,r=[a[0][0],a[0][a[0].length-2]],r=e?[a[0][0]]:[a[0][0],a[0][a[0].length-2]]}if(s){const a=this.getMap();for(let l=0,h=r.length;l<h;l++){const u=r[l],c=a.getPixelFromCoordinate(u),d=t[0]-c[0],p=t[1]-c[1],f=this.freehand_?1:this.snapTolerance_;if(i=Math.sqrt(d*d+p*p)<=f,i){this.finishCoordinate_=u;break}}}}return i}createOrUpdateSketchPoint_(t){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(t):(this.sketchPoint_=new Ns(new Os(t)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(t){this.sketchLine_||(this.sketchLine_=new Ns);const e=t.getLinearRing(0);let i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),i.changed()):(i=new zs(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(i))}startDrawing_(t){const e=this.getMap().getView().getProjection(),i=gu(this.geometryLayout_);for(;t.length<i;)t.push(0);this.finishCoordinate_=t,"Point"===this.mode_?this.sketchCoords_=t.slice():"Polygon"===this.mode_?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Ns(new zs(this.sketchLineCoords_)));const s=this.geometryFunction_(this.sketchCoords_,void 0,e);this.sketchFeature_=new Ns,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(s),this.updateSketchFeatures_(),this.dispatchEvent(new qc("drawstart",this.sketchFeature_))}modifyDrawing_(t){const e=this.getMap(),i=this.sketchFeature_.getGeometry(),s=e.getView().getProjection(),r=gu(this.geometryLayout_);let o,a;for(;t.length<r;)t.push(0);"Point"===this.mode_?a=this.sketchCoords_:"Polygon"===this.mode_?(o=this.sketchCoords_[0],a=o[o.length-1],this.atFinish_(e.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):(o=this.sketchCoords_,a=o[o.length-1]),a[0]=t[0],a[1]=t[1],this.geometryFunction_(this.sketchCoords_,i,s),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(t),"Polygon"===i.getType()&&"Polygon"!==this.mode_?this.createOrUpdateCustomSketchLine_(i):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(t){const e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();let s,r;const o=this.mode_;"LineString"===o||"Circle"===o?(this.finishCoordinate_=t.slice(),r=this.sketchCoords_,r.length>=this.maxPoints_&&(this.freehand_?r.pop():s=!0),r.push(t.slice()),this.geometryFunction_(r,e,i)):"Polygon"===o&&(r=this.sketchCoords_[0],r.length>=this.maxPoints_&&(this.freehand_?r.pop():s=!0),r.push(t.slice()),s&&(this.finishCoordinate_=r[0]),this.geometryFunction_(this.sketchCoords_,e,i)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),s&&this.finishDrawing()}removeLastPoints_(t){if(!this.sketchFeature_)return;const e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),s=this.mode_;for(let r=0;r<t;++r){let o;if("LineString"===s||"Circle"===s){if(o=this.sketchCoords_,o.splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();const a=this.finishCoordinate_.slice();o[o.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(o,e,i),"Polygon"===e.getType()&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(e)}else if("Polygon"===s){o=this.sketchCoords_[0],o.splice(-2,1);const a=this.sketchLine_.getGeometry();if(o.length>=2){const l=o[o.length-2].slice();o[o.length-1]=l,this.createOrUpdateSketchPoint_(l)}a.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,e,i)}if(1===o.length){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const t=this.abortDrawing_();if(!t)return;let e=this.sketchCoords_;const i=t.getGeometry(),s=this.getMap().getView().getProjection();"LineString"===this.mode_?(e.pop(),this.geometryFunction_(e,i,s)):"Polygon"===this.mode_&&(e[0].pop(),this.geometryFunction_(e,i,s),e=i.getCoordinates()),"MultiPoint"===this.type_?t.setGeometry(new Yu([e])):"MultiLineString"===this.type_?t.setGeometry(new Xu([e])):"MultiPolygon"===this.type_&&t.setGeometry(new Ku([e])),this.dispatchEvent(new qc("drawend",t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}abortDrawing_(){this.finishCoordinate_=null;const t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),t}abortDrawing(){const t=this.abortDrawing_();t&&this.dispatchEvent(new qc("drawabort",t))}appendCoordinates(t){const e=this.mode_,i=!this.sketchFeature_;let s;if(i&&this.startDrawing_(t[0]),"LineString"===e||"Circle"===e)s=this.sketchCoords_;else{if("Polygon"!==e)return;s=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}i&&s.shift(),s.pop();for(let o=0;o<t.length;o++)this.addToDrawing_(t[o]);const r=t[t.length-1];this.addToDrawing_(r),this.modifyDrawing_(r)}extend(t){const e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();const i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.sketchPoint_=new Ns(new Os(i)),this.updateSketchFeatures_(),this.dispatchEvent(new qc("drawstart",this.sketchFeature_))}updateSketchFeatures_(){const t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);const e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)}updateState_(){const t=this.getMap(),e=this.getActive();(!t||!e)&&this.abortDrawing(),this.overlay_.setMap(e?t:null)}};class UT extends wl{constructor(t,e){const i=e||{},s=document.createElement("button"),r=document.createElement("div");r.className="boundingboxcontrol ol-unselectable ol-control",s.title="Draw boundingbox",r.appendChild(s),super({element:r,target:i.target}),this.boxEmitter=t,s.innerHTML='\n      <svg xmlns="http://www.w3.org/2000/svg" class = "innersvg" viewBox="0 0 448 512">\x3c!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M368 80h32v32H368V80zM352 32c-17.7 0-32 14.3-32 32H128c0-17.7-14.3-32-32-32H32C14.3 32 0 46.3 0 64v64c0 17.7 14.3 32 32 32V352c-17.7 0-32 14.3-32 32v64c0 17.7 14.3 32 32 32H96c17.7 0 32-14.3 32-32H320c0 17.7 14.3 32 32 32h64c17.7 0 32-14.3 32-32V384c0-17.7-14.3-32-32-32V160c17.7 0 32-14.3 32-32V64c0-17.7-14.3-32-32-32H352zM96 160c17.7 0 32-14.3 32-32H320c0 17.7 14.3 32 32 32V352c-17.7 0-32 14.3-32 32H128c0-17.7-14.3-32-32-32V160zM48 400H80v32H48V400zm320 32V400h32v32H368zM48 112V80H80v32H48z"/></svg>\n      ',s.addEventListener("click",this.addBox.bind(this),!1)}addBox(){const t=new HT({source:new no({}),type:"Circle",geometryFunction:function(e,i,s){const r=rl([e[0],e[e.length-1]].map(function(l){return zn(l,s)})),o=[[No(r),al(r),ll(r),Dn(r),No(r)]];i?i.setCoordinates(o):i=new ur(o);const a=pl();return a&&i.transform(s,a),i}});t.on("drawend",e=>{const i=this.getMap(),s=e.feature,r=s.getGeometry();if(r){if("EPSG:3857"===i.getView().getProjection().getCode()){const h=r.transform(i.getView().getProjection(),"EPSG:4326").getExtent().join(",");this.boxEmitter.emit(h)}else{const h=r.getExtent().join(",");this.boxEmitter.emit(h)}const o=new pn({stroke:new Tn({color:"blue",width:3}),fill:new En({color:"rgba(0, 0, 255, 0.06)"})}),a=new no({});a.addFeature(s);const l=new ac({source:a,style:o});i.addLayer(l),i.removeInteraction(t)}}),this.getMap().addInteraction(t)}}let XT=(()=>{class n{set projection(e){this._projection=this.featureService.getProjectionMapping(e)}set showBoundingBoxButton(e){this._showBoundingBoxButton=gp(e)}get showBoundingBoxButton(){return this._showBoundingBoxButton}constructor(e,i){this.el=e,this.featureService=i,this._projection=Uw,this.backgroundMap="OSM",this._showBoundingBoxButton=!0,this.box=new xn,this.activeFeature=new xn,this.mapHeight=400,this.mapWidth=600,this.map=this.getMap(),this.features=[]}getMap(){return new Yo({view:new Mn({projection:this._projection.visualProjection})})}init(){this.mapWidth=.99*this.el.nativeElement.offsetWidth,this.mapHeight=.75*this.mapWidth;const e=this.el.nativeElement.querySelector("#featuremap");this.map.setTarget(e),this.featureService.getFeatures({url:this.itemsUrl,dataMapping:this._projection}).pipe(pm(1)).subscribe(i=>{this.features=i,this.map.setLayerGroup(new xl),this.loadFeatures(this.features),this.loadBackground()})}ngAfterViewInit(){this._showBoundingBoxButton&&this.map.addControl(new UT(this.box,{})),this.addFeatureEmit()}ngOnChanges(e){(e.itemsUrl?.previousValue!==e.itemsUrl?.currentValue||e.projection?.previousValue!==e.projection?.currentValue)&&e.itemsUrl?.currentValue&&this.init()}loadBackground(){switch(this.backgroundMap){case"OSM":{const e=new rm({source:new GT});return void this.map.addLayer(e)}case"BRT":return void this.map.addLayer(this.brtLayer(function(){const i=new Fs({code:"EPSG:3857",units:"m",extent:[-20037508.342789244,-20037508.342789244,20037508.342789244,20037508.342789244],worldExtent:[-180,-85,180,85],axisOrientation:"enu",global:!0}),s=We(i.getExtent())/256,r=new Array(20),o=new Array(20);for(let a=0;a<20;++a)r[a]=s/Math.pow(2,a),o[a]=("0"+a).slice(-2);return{projection:i,resolutions:r,matrixIds:o}}()));default:return void function(i){throw new Error(`ERROR! Reached forbidden guard function with unexpected value: ${JSON.stringify(i)}`)}(this.backgroundMap)}}loadFeatures(e){const i=new no({features:e});this.map.addLayer(new ac({source:i,style:this.getStyle(),zIndex:10}));const s=i.getExtent();return e.length>0&&this.setViewExtent(s,e.length<3?10:1.05),s}getStyle(){const e=new En({color:"rgba(0,0,255)"}),i=new Tn({color:"#3399CC",width:1.25});return[new pn({image:new ua({fill:e,stroke:i,radius:5}),fill:e,stroke:i})]}setViewExtent(e,i){const s=new Mn({}),r={size:this.map.getSize()},o=vu(e);o.scale(i),s.fit(o,r),this.map.setView(s)}brtLayer(e){return new rm({source:new qT({attributions:'Kaartgegevens: &copy; <a href="https://www.kadaster.nl">Kadaster</a>',url:Hw.bgtBackgroundUrl,layer:"grijs",matrixSet:e.projection.getCode(),format:"image/png",projection:e.projection,tileGrid:new VT({origin:Dn(e.projection.getExtent()),resolutions:e.resolutions,matrixIds:e.matrixIds}),style:"default",wrapX:!1})})}addFeatureEmit(){const e=this.el.nativeElement.querySelector("[id='tooltip']");e.style.visibility="hidden";const i=this.el.nativeElement.querySelector("[id='tooltip-content']"),s=new jT({element:e,autoPan:{duration:250}});this.map.addOverlay(s),this.map.on("pointermove",r=>{this.map.forEachFeatureAtPixel(r.pixel,o=>{if(o){const a=o.getId();if(a){const l="items",h=this.itemsUrl.toLowerCase(),u=new URL(h.substring(0,h.indexOf(l)+l.length));i.innerHTML='<a href="'+u.protocol+"//"+u.host+u.pathname+"/"+a+'">'+a+"</a>";const c=o.getGeometry();c&&(s.setPosition(Jn(c.getExtent())),e.style.visibility="visible"),this.activeFeature.emit(o)}}},{hitTolerance:3})})}static#t=this.\u0275fac=function(e){return new(e||n)(Mi(Ya),Mi(BT))};static#e=this.\u0275cmp=Da({type:n,selectors:[["app-feature-view"]],inputs:{itemsUrl:"itemsUrl",backgroundMap:"backgroundMap",projection:"projection",showBoundingBoxButton:"showBoundingBoxButton"},outputs:{box:"box",activeFeature:"activeFeature"},standalone:!0,features:[vh,Qa],decls:3,vars:4,consts:[["id","featuremap",1,"featuremaparea"],["id","tooltip",1,"maptooltip"],["id","tooltip-content"]],template:function(e,i){1&e&&(Po(0,"div",0),un(1,"div",1),Po(2,"div",2),wn()),2&e&&Nh("width",i.mapWidth,"px")("height",i.mapHeight,"px")},styles:[".featuremaparea[_ngcontent-%COMP%]{height:100vh}.maptooltip[_ngcontent-%COMP%]{visibility:hidden;font-weight:700;margin:1px;text-decoration:none;text-align:center;border-radius:2px;font-size:16px;background-color:#fff;border:1px solid rgb(26,30,79);padding:5px 10px}"],changeDetection:0})}return n})(),YT=(()=>{class n{constructor(e){this.injector=e;const i=Gc(Bw,{injector:e});customElements.define("app-vectortile-view",i);const s=Gc(AT,{injector:e});customElements.define("app-objectinfo-view",s);const r=Gc(zT,{injector:e});customElements.define("app-legend-view",r);const o=Gc(XT,{injector:e});customElements.define("app-feature-view",o)}ngDoBootstrap(){}static#t=this.\u0275fac=function(e){return new(e||n)(Tt(Ua))};static#e=this.\u0275mod=po({type:n});static#i=this.\u0275inj=pt({imports:[sC,cT,Bw,ST.forRoot({serverLoggingUrl:"/api/logs",level:Hw.loglevel,serverLogLevel:Ei.OFF})]})}return n})();tC().bootstrapModule(YT).catch(n=>console.error(n))},601:(Ke,_n)=>{_n.read=function(oi,Jt,rt,Ht,ie){var Xt,At,pe=8*ie-Ht-1,ue=(1<<pe)-1,Xe=ue>>1,vt=-7,Ve=rt?ie-1:0,Nt=rt?-1:1,Re=oi[Jt+Ve];for(Ve+=Nt,Xt=Re&(1<<-vt)-1,Re>>=-vt,vt+=pe;vt>0;Xt=256*Xt+oi[Jt+Ve],Ve+=Nt,vt-=8);for(At=Xt&(1<<-vt)-1,Xt>>=-vt,vt+=Ht;vt>0;At=256*At+oi[Jt+Ve],Ve+=Nt,vt-=8);if(0===Xt)Xt=1-Xe;else{if(Xt===ue)return At?NaN:1/0*(Re?-1:1);At+=Math.pow(2,Ht),Xt-=Xe}return(Re?-1:1)*At*Math.pow(2,Xt-Ht)},_n.write=function(oi,Jt,rt,Ht,ie,Xt){var At,pe,ue,Xe=8*Xt-ie-1,vt=(1<<Xe)-1,Ve=vt>>1,Nt=23===ie?Math.pow(2,-24)-Math.pow(2,-77):0,Re=Ht?0:Xt-1,Fe=Ht?1:-1,O=Jt<0||0===Jt&&1/Jt<0?1:0;for(Jt=Math.abs(Jt),isNaN(Jt)||Jt===1/0?(pe=isNaN(Jt)?1:0,At=vt):(At=Math.floor(Math.log(Jt)/Math.LN2),Jt*(ue=Math.pow(2,-At))<1&&(At--,ue*=2),(Jt+=At+Ve>=1?Nt/ue:Nt*Math.pow(2,1-Ve))*ue>=2&&(At++,ue/=2),At+Ve>=vt?(pe=0,At=vt):At+Ve>=1?(pe=(Jt*ue-1)*Math.pow(2,ie),At+=Ve):(pe=Jt*Math.pow(2,Ve-1)*Math.pow(2,ie),At=0));ie>=8;oi[rt+Re]=255&pe,Re+=Fe,pe/=256,ie-=8);for(At=At<<ie|pe,Xe+=ie;Xe>0;oi[rt+Re]=255&At,Re+=Fe,At/=256,Xe-=8);oi[rt+Re-Fe]|=128*O}},463:(Ke,_n,oi)=>{"use strict";Ke.exports=rt;var Jt=oi(601);function rt(b){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(b)?b:new Uint8Array(b||0),this.pos=0,this.type=0,this.length=this.buf.length}rt.Varint=0,rt.Fixed64=1,rt.Bytes=2,rt.Fixed32=5;var Ht=4294967296,ie=1/Ht,Xt=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function At(b){return b.type===rt.Bytes?b.readVarint()+b.pos:b.pos+1}function pe(b,k,Z){var ft=k<=16383?1:k<=2097151?2:k<=268435455?3:Math.floor(Math.log(k)/(7*Math.LN2));Z.realloc(ft);for(var ht=Z.pos-1;ht>=b;ht--)Z.buf[ht+ft]=Z.buf[ht]}function ue(b,k){for(var Z=0;Z<b.length;Z++)k.writeVarint(b[Z])}function Xe(b,k){for(var Z=0;Z<b.length;Z++)k.writeSVarint(b[Z])}function vt(b,k){for(var Z=0;Z<b.length;Z++)k.writeFloat(b[Z])}function Ve(b,k){for(var Z=0;Z<b.length;Z++)k.writeDouble(b[Z])}function Nt(b,k){for(var Z=0;Z<b.length;Z++)k.writeBoolean(b[Z])}function Re(b,k){for(var Z=0;Z<b.length;Z++)k.writeFixed32(b[Z])}function Fe(b,k){for(var Z=0;Z<b.length;Z++)k.writeSFixed32(b[Z])}function O(b,k){for(var Z=0;Z<b.length;Z++)k.writeFixed64(b[Z])}function W(b,k){for(var Z=0;Z<b.length;Z++)k.writeSFixed64(b[Z])}function it(b,k){return(b[k]|b[k+1]<<8|b[k+2]<<16)+16777216*b[k+3]}function dt(b,k,Z){b[Z]=k,b[Z+1]=k>>>8,b[Z+2]=k>>>16,b[Z+3]=k>>>24}function yt(b,k){return(b[k]|b[k+1]<<8|b[k+2]<<16)+(b[k+3]<<24)}rt.prototype={destroy:function(){this.buf=null},readFields:function(b,k,Z){for(Z=Z||this.length;this.pos<Z;){var ft=this.readVarint(),ht=ft>>3,Vt=this.pos;this.type=7&ft,b(ht,k,this),this.pos===Vt&&this.skip(ft)}return k},readMessage:function(b,k){return this.readFields(b,k,this.readVarint()+this.pos)},readFixed32:function(){var b=it(this.buf,this.pos);return this.pos+=4,b},readSFixed32:function(){var b=yt(this.buf,this.pos);return this.pos+=4,b},readFixed64:function(){var b=it(this.buf,this.pos)+it(this.buf,this.pos+4)*Ht;return this.pos+=8,b},readSFixed64:function(){var b=it(this.buf,this.pos)+yt(this.buf,this.pos+4)*Ht;return this.pos+=8,b},readFloat:function(){var b=Jt.read(this.buf,this.pos,!0,23,4);return this.pos+=4,b},readDouble:function(){var b=Jt.read(this.buf,this.pos,!0,52,8);return this.pos+=8,b},readVarint:function(b){var k,Z,ft=this.buf;return k=127&(Z=ft[this.pos++]),Z<128||(k|=(127&(Z=ft[this.pos++]))<<7,Z<128)||(k|=(127&(Z=ft[this.pos++]))<<14,Z<128)||(k|=(127&(Z=ft[this.pos++]))<<21,Z<128)?k:function(Vt,kt,tt){var Dt,Pt,Me,Ye,ai=tt.buf;if(Dt=(112&(Pt=ai[tt.pos++]))>>4,Pt<128||(Dt|=(127&(Pt=ai[tt.pos++]))<<3,Pt<128)||(Dt|=(127&(Pt=ai[tt.pos++]))<<10,Pt<128)||(Dt|=(127&(Pt=ai[tt.pos++]))<<17,Pt<128)||(Dt|=(127&(Pt=ai[tt.pos++]))<<24,Pt<128)||(Dt|=(1&(Pt=ai[tt.pos++]))<<31,Pt<128))return Me=Vt,Ye=Dt,kt?4294967296*Ye+(Me>>>0):4294967296*(Ye>>>0)+(Me>>>0);throw new Error("Expected varint not more than 10 bytes")}(k|=(15&(Z=ft[this.pos]))<<28,b,this)},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var b=this.readVarint();return b%2==1?(b+1)/-2:b/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var b=this.readVarint()+this.pos,k=this.pos;return this.pos=b,b-k>=12&&Xt?Xt.decode(this.buf.subarray(k,b)):function(ft,ht,Vt){for(var kt="",tt=ht;tt<Vt;){var Dt,Pt,ai,Ce=ft[tt],Me=null,Ye=Ce>239?4:Ce>223?3:Ce>191?2:1;if(tt+Ye>Vt)break;1===Ye?Ce<128&&(Me=Ce):2===Ye?128==(192&(Dt=ft[tt+1]))&&(Me=(31&Ce)<<6|63&Dt)<=127&&(Me=null):3===Ye?(Pt=ft[tt+2],128==(192&(Dt=ft[tt+1]))&&128==(192&Pt)&&((Me=(15&Ce)<<12|(63&Dt)<<6|63&Pt)<=2047||Me>=55296&&Me<=57343)&&(Me=null)):4===Ye&&(Pt=ft[tt+2],ai=ft[tt+3],128==(192&(Dt=ft[tt+1]))&&128==(192&Pt)&&128==(192&ai)&&((Me=(15&Ce)<<18|(63&Dt)<<12|(63&Pt)<<6|63&ai)<=65535||Me>=1114112)&&(Me=null)),null===Me?(Me=65533,Ye=1):Me>65535&&(Me-=65536,kt+=String.fromCharCode(Me>>>10&1023|55296),Me=56320|1023&Me),kt+=String.fromCharCode(Me),tt+=Ye}return kt}(this.buf,k,b)},readBytes:function(){var b=this.readVarint()+this.pos,k=this.buf.subarray(this.pos,b);return this.pos=b,k},readPackedVarint:function(b,k){if(this.type!==rt.Bytes)return b.push(this.readVarint(k));var Z=At(this);for(b=b||[];this.pos<Z;)b.push(this.readVarint(k));return b},readPackedSVarint:function(b){if(this.type!==rt.Bytes)return b.push(this.readSVarint());var k=At(this);for(b=b||[];this.pos<k;)b.push(this.readSVarint());return b},readPackedBoolean:function(b){if(this.type!==rt.Bytes)return b.push(this.readBoolean());var k=At(this);for(b=b||[];this.pos<k;)b.push(this.readBoolean());return b},readPackedFloat:function(b){if(this.type!==rt.Bytes)return b.push(this.readFloat());var k=At(this);for(b=b||[];this.pos<k;)b.push(this.readFloat());return b},readPackedDouble:function(b){if(this.type!==rt.Bytes)return b.push(this.readDouble());var k=At(this);for(b=b||[];this.pos<k;)b.push(this.readDouble());return b},readPackedFixed32:function(b){if(this.type!==rt.Bytes)return b.push(this.readFixed32());var k=At(this);for(b=b||[];this.pos<k;)b.push(this.readFixed32());return b},readPackedSFixed32:function(b){if(this.type!==rt.Bytes)return b.push(this.readSFixed32());var k=At(this);for(b=b||[];this.pos<k;)b.push(this.readSFixed32());return b},readPackedFixed64:function(b){if(this.type!==rt.Bytes)return b.push(this.readFixed64());var k=At(this);for(b=b||[];this.pos<k;)b.push(this.readFixed64());return b},readPackedSFixed64:function(b){if(this.type!==rt.Bytes)return b.push(this.readSFixed64());var k=At(this);for(b=b||[];this.pos<k;)b.push(this.readSFixed64());return b},skip:function(b){var k=7&b;if(k===rt.Varint)for(;this.buf[this.pos++]>127;);else if(k===rt.Bytes)this.pos=this.readVarint()+this.pos;else if(k===rt.Fixed32)this.pos+=4;else{if(k!==rt.Fixed64)throw new Error("Unimplemented type: "+k);this.pos+=8}},writeTag:function(b,k){this.writeVarint(b<<3|k)},realloc:function(b){for(var k=this.length||16;k<this.pos+b;)k*=2;if(k!==this.length){var Z=new Uint8Array(k);Z.set(this.buf),this.buf=Z,this.length=k}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(b){this.realloc(4),dt(this.buf,b,this.pos),this.pos+=4},writeSFixed32:function(b){this.realloc(4),dt(this.buf,b,this.pos),this.pos+=4},writeFixed64:function(b){this.realloc(8),dt(this.buf,-1&b,this.pos),dt(this.buf,Math.floor(b*ie),this.pos+4),this.pos+=8},writeSFixed64:function(b){this.realloc(8),dt(this.buf,-1&b,this.pos),dt(this.buf,Math.floor(b*ie),this.pos+4),this.pos+=8},writeVarint:function(b){(b=+b||0)>268435455||b<0?function(Z,ft){var ht,Vt,tt,Pt;if(Z>=0?(ht=Z%4294967296|0,Vt=Z/4294967296|0):(Vt=~(-Z/4294967296),4294967295^(ht=~(-Z%4294967296))?ht=ht+1|0:(ht=0,Vt=Vt+1|0)),Z>=0x10000000000000000||Z<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");ft.realloc(10),tt=ht,(Pt=ft).buf[Pt.pos++]=127&tt|128,tt>>>=7,Pt.buf[Pt.pos++]=127&tt|128,tt>>>=7,Pt.buf[Pt.pos++]=127&tt|128,tt>>>=7,Pt.buf[Pt.pos++]=127&tt|128,Pt.buf[Pt.pos]=127&(tt>>>=7),function(tt,Dt){var Pt=(7&tt)<<4;Dt.buf[Dt.pos++]|=Pt|((tt>>>=3)?128:0),tt&&(Dt.buf[Dt.pos++]=127&tt|((tt>>>=7)?128:0),tt&&(Dt.buf[Dt.pos++]=127&tt|((tt>>>=7)?128:0),tt&&(Dt.buf[Dt.pos++]=127&tt|((tt>>>=7)?128:0),tt&&(Dt.buf[Dt.pos++]=127&tt|((tt>>>=7)?128:0),tt&&(Dt.buf[Dt.pos++]=127&tt)))))}(Vt,ft)}(b,this):(this.realloc(4),this.buf[this.pos++]=127&b|(b>127?128:0),!(b<=127)&&(this.buf[this.pos++]=127&(b>>>=7)|(b>127?128:0),!(b<=127)&&(this.buf[this.pos++]=127&(b>>>=7)|(b>127?128:0),!(b<=127)&&(this.buf[this.pos++]=b>>>7&127))))},writeSVarint:function(b){this.writeVarint(b<0?2*-b-1:2*b)},writeBoolean:function(b){this.writeVarint(!!b)},writeString:function(b){b=String(b),this.realloc(4*b.length),this.pos++;var k=this.pos;this.pos=function(ht,Vt,kt){for(var tt,Dt,Pt=0;Pt<Vt.length;Pt++){if((tt=Vt.charCodeAt(Pt))>55295&&tt<57344){if(!Dt){tt>56319||Pt+1===Vt.length?(ht[kt++]=239,ht[kt++]=191,ht[kt++]=189):Dt=tt;continue}if(tt<56320){ht[kt++]=239,ht[kt++]=191,ht[kt++]=189,Dt=tt;continue}tt=Dt-55296<<10|tt-56320|65536,Dt=null}else Dt&&(ht[kt++]=239,ht[kt++]=191,ht[kt++]=189,Dt=null);tt<128?ht[kt++]=tt:(tt<2048?ht[kt++]=tt>>6|192:(tt<65536?ht[kt++]=tt>>12|224:(ht[kt++]=tt>>18|240,ht[kt++]=tt>>12&63|128),ht[kt++]=tt>>6&63|128),ht[kt++]=63&tt|128)}return kt}(this.buf,b,this.pos);var Z=this.pos-k;Z>=128&&pe(k,Z,this),this.pos=k-1,this.writeVarint(Z),this.pos+=Z},writeFloat:function(b){this.realloc(4),Jt.write(this.buf,b,this.pos,!0,23,4),this.pos+=4},writeDouble:function(b){this.realloc(8),Jt.write(this.buf,b,this.pos,!0,52,8),this.pos+=8},writeBytes:function(b){var k=b.length;this.writeVarint(k),this.realloc(k);for(var Z=0;Z<k;Z++)this.buf[this.pos++]=b[Z]},writeRawMessage:function(b,k){this.pos++;var Z=this.pos;b(k,this);var ft=this.pos-Z;ft>=128&&pe(Z,ft,this),this.pos=Z-1,this.writeVarint(ft),this.pos+=ft},writeMessage:function(b,k,Z){this.writeTag(b,rt.Bytes),this.writeRawMessage(k,Z)},writePackedVarint:function(b,k){k.length&&this.writeMessage(b,ue,k)},writePackedSVarint:function(b,k){k.length&&this.writeMessage(b,Xe,k)},writePackedBoolean:function(b,k){k.length&&this.writeMessage(b,Nt,k)},writePackedFloat:function(b,k){k.length&&this.writeMessage(b,vt,k)},writePackedDouble:function(b,k){k.length&&this.writeMessage(b,Ve,k)},writePackedFixed32:function(b,k){k.length&&this.writeMessage(b,Re,k)},writePackedSFixed32:function(b,k){k.length&&this.writeMessage(b,Fe,k)},writePackedFixed64:function(b,k){k.length&&this.writeMessage(b,O,k)},writePackedSFixed64:function(b,k){k.length&&this.writeMessage(b,W,k)},writeBytesField:function(b,k){this.writeTag(b,rt.Bytes),this.writeBytes(k)},writeFixed32Field:function(b,k){this.writeTag(b,rt.Fixed32),this.writeFixed32(k)},writeSFixed32Field:function(b,k){this.writeTag(b,rt.Fixed32),this.writeSFixed32(k)},writeFixed64Field:function(b,k){this.writeTag(b,rt.Fixed64),this.writeFixed64(k)},writeSFixed64Field:function(b,k){this.writeTag(b,rt.Fixed64),this.writeSFixed64(k)},writeVarintField:function(b,k){this.writeTag(b,rt.Varint),this.writeVarint(k)},writeSVarintField:function(b,k){this.writeTag(b,rt.Varint),this.writeSVarint(k)},writeStringField:function(b,k){this.writeTag(b,rt.Bytes),this.writeString(k)},writeFloatField:function(b,k){this.writeTag(b,rt.Fixed32),this.writeFloat(k)},writeDoubleField:function(b,k){this.writeTag(b,rt.Fixed64),this.writeDouble(k)},writeBooleanField:function(b,k){this.writeVarintField(b,!!k)}}},414:function(Ke){Ke.exports=function(){"use strict";function _n(O,W,it,dt,yt){!function b(k,Z,ft,ht,Vt){for(;ht>ft;){if(ht-ft>600){var kt=ht-ft+1,tt=Z-ft+1,Dt=Math.log(kt),Pt=.5*Math.exp(2*Dt/3),ai=.5*Math.sqrt(Dt*Pt*(kt-Pt)/kt)*(tt-kt/2<0?-1:1);b(k,Z,Math.max(ft,Math.floor(Z-tt*Pt/kt+ai)),Math.min(ht,Math.floor(Z+(kt-tt)*Pt/kt+ai)),Vt)}var Ce=k[Z],Me=ft,Ye=ht;for(oi(k,ft,Z),Vt(k[ht],Ce)>0&&oi(k,ft,ht);Me<Ye;){for(oi(k,Me,Ye),Me++,Ye--;Vt(k[Me],Ce)<0;)Me++;for(;Vt(k[Ye],Ce)>0;)Ye--}0===Vt(k[ft],Ce)?oi(k,ft,Ye):oi(k,++Ye,ht),Ye<=Z&&(ft=Ye+1),Z<=Ye&&(ht=Ye-1)}}(O,W,it||0,dt||O.length-1,yt||Jt)}function oi(O,W,it){var dt=O[W];O[W]=O[it],O[it]=dt}function Jt(O,W){return O<W?-1:O>W?1:0}var rt=function(O){void 0===O&&(O=9),this._maxEntries=Math.max(4,O),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function Ht(O,W,it){if(!it)return W.indexOf(O);for(var dt=0;dt<W.length;dt++)if(it(O,W[dt]))return dt;return-1}function ie(O,W){Xt(O,0,O.children.length,W,O)}function Xt(O,W,it,dt,yt){yt||(yt=Re(null)),yt.minX=1/0,yt.minY=1/0,yt.maxX=-1/0,yt.maxY=-1/0;for(var b=W;b<it;b++){var k=O.children[b];At(yt,O.leaf?dt(k):k)}return yt}function At(O,W){return O.minX=Math.min(O.minX,W.minX),O.minY=Math.min(O.minY,W.minY),O.maxX=Math.max(O.maxX,W.maxX),O.maxY=Math.max(O.maxY,W.maxY),O}function pe(O,W){return O.minX-W.minX}function ue(O,W){return O.minY-W.minY}function Xe(O){return(O.maxX-O.minX)*(O.maxY-O.minY)}function vt(O){return O.maxX-O.minX+(O.maxY-O.minY)}function Ve(O,W){return O.minX<=W.minX&&O.minY<=W.minY&&W.maxX<=O.maxX&&W.maxY<=O.maxY}function Nt(O,W){return W.minX<=O.maxX&&W.minY<=O.maxY&&W.maxX>=O.minX&&W.maxY>=O.minY}function Re(O){return{children:O,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Fe(O,W,it,dt,yt){for(var b=[W,it];b.length;)if(!((it=b.pop())-(W=b.pop())<=dt)){var k=W+Math.ceil((it-W)/dt/2)*dt;_n(O,k,W,it,yt),b.push(W,k,k,it)}}return rt.prototype.all=function(){return this._all(this.data,[])},rt.prototype.search=function(O){var W=this.data,it=[];if(!Nt(O,W))return it;for(var dt=this.toBBox,yt=[];W;){for(var b=0;b<W.children.length;b++){var k=W.children[b],Z=W.leaf?dt(k):k;Nt(O,Z)&&(W.leaf?it.push(k):Ve(O,Z)?this._all(k,it):yt.push(k))}W=yt.pop()}return it},rt.prototype.collides=function(O){var W=this.data;if(!Nt(O,W))return!1;for(var it=[];W;){for(var dt=0;dt<W.children.length;dt++){var yt=W.children[dt],b=W.leaf?this.toBBox(yt):yt;if(Nt(O,b)){if(W.leaf||Ve(O,b))return!0;it.push(yt)}}W=it.pop()}return!1},rt.prototype.load=function(O){if(!O||!O.length)return this;if(O.length<this._minEntries){for(var W=0;W<O.length;W++)this.insert(O[W]);return this}var it=this._build(O.slice(),0,O.length-1,0);if(this.data.children.length)if(this.data.height===it.height)this._splitRoot(this.data,it);else{if(this.data.height<it.height){var dt=this.data;this.data=it,it=dt}this._insert(it,this.data.height-it.height-1,!0)}else this.data=it;return this},rt.prototype.insert=function(O){return O&&this._insert(O,this.data.height-1),this},rt.prototype.clear=function(){return this.data=Re([]),this},rt.prototype.remove=function(O,W){if(!O)return this;for(var it,dt,yt,b=this.data,k=this.toBBox(O),Z=[],ft=[];b||Z.length;){if(b||(b=Z.pop(),dt=Z[Z.length-1],it=ft.pop(),yt=!0),b.leaf){var ht=Ht(O,b.children,W);if(-1!==ht)return b.children.splice(ht,1),Z.push(b),this._condense(Z),this}yt||b.leaf||!Ve(b,k)?dt?(it++,b=dt.children[it],yt=!1):b=null:(Z.push(b),ft.push(it),it=0,dt=b,b=b.children[0])}return this},rt.prototype.toBBox=function(O){return O},rt.prototype.compareMinX=function(O,W){return O.minX-W.minX},rt.prototype.compareMinY=function(O,W){return O.minY-W.minY},rt.prototype.toJSON=function(){return this.data},rt.prototype.fromJSON=function(O){return this.data=O,this},rt.prototype._all=function(O,W){for(var it=[];O;)O.leaf?W.push.apply(W,O.children):it.push.apply(it,O.children),O=it.pop();return W},rt.prototype._build=function(O,W,it,dt){var yt,b=it-W+1,k=this._maxEntries;if(b<=k)return ie(yt=Re(O.slice(W,it+1)),this.toBBox),yt;dt||(dt=Math.ceil(Math.log(b)/Math.log(k)),k=Math.ceil(b/Math.pow(k,dt-1))),(yt=Re([])).leaf=!1,yt.height=dt;var Z=Math.ceil(b/k),ft=Z*Math.ceil(Math.sqrt(k));Fe(O,W,it,ft,this.compareMinX);for(var ht=W;ht<=it;ht+=ft){var Vt=Math.min(ht+ft-1,it);Fe(O,ht,Vt,Z,this.compareMinY);for(var kt=ht;kt<=Vt;kt+=Z){var tt=Math.min(kt+Z-1,Vt);yt.children.push(this._build(O,kt,tt,dt-1))}}return ie(yt,this.toBBox),yt},rt.prototype._chooseSubtree=function(O,W,it,dt){for(;dt.push(W),!W.leaf&&dt.length-1!==it;){for(var yt=1/0,b=1/0,k=void 0,Z=0;Z<W.children.length;Z++){var ft=W.children[Z],ht=Xe(ft),Vt=(kt=O,tt=ft,(Math.max(tt.maxX,kt.maxX)-Math.min(tt.minX,kt.minX))*(Math.max(tt.maxY,kt.maxY)-Math.min(tt.minY,kt.minY))-ht);Vt<b?(b=Vt,yt=ht<yt?ht:yt,k=ft):Vt===b&&ht<yt&&(yt=ht,k=ft)}W=k||W.children[0]}var kt,tt;return W},rt.prototype._insert=function(O,W,it){var dt=it?O:this.toBBox(O),yt=[],b=this._chooseSubtree(dt,this.data,W,yt);for(b.children.push(O),At(b,dt);W>=0&&yt[W].children.length>this._maxEntries;)this._split(yt,W),W--;this._adjustParentBBoxes(dt,yt,W)},rt.prototype._split=function(O,W){var it=O[W],dt=it.children.length,yt=this._minEntries;this._chooseSplitAxis(it,yt,dt);var b=this._chooseSplitIndex(it,yt,dt),k=Re(it.children.splice(b,it.children.length-b));k.height=it.height,k.leaf=it.leaf,ie(it,this.toBBox),ie(k,this.toBBox),W?O[W-1].children.push(k):this._splitRoot(it,k)},rt.prototype._splitRoot=function(O,W){this.data=Re([O,W]),this.data.height=O.height+1,this.data.leaf=!1,ie(this.data,this.toBBox)},rt.prototype._chooseSplitIndex=function(O,W,it){for(var dt,yt,b,k,Z,ft,ht,Vt=1/0,kt=1/0,tt=W;tt<=it-W;tt++){var Dt=Xt(O,0,tt,this.toBBox),Pt=Xt(O,tt,it,this.toBBox),ai=(yt=Dt,b=Pt,k=Math.max(yt.minX,b.minX),Z=Math.max(yt.minY,b.minY),ft=Math.min(yt.maxX,b.maxX),ht=Math.min(yt.maxY,b.maxY),Math.max(0,ft-k)*Math.max(0,ht-Z)),Ce=Xe(Dt)+Xe(Pt);ai<Vt?(Vt=ai,dt=tt,kt=Ce<kt?Ce:kt):ai===Vt&&Ce<kt&&(kt=Ce,dt=tt)}return dt||it-W},rt.prototype._chooseSplitAxis=function(O,W,it){var dt=O.leaf?this.compareMinX:pe,yt=O.leaf?this.compareMinY:ue;this._allDistMargin(O,W,it,dt)<this._allDistMargin(O,W,it,yt)&&O.children.sort(dt)},rt.prototype._allDistMargin=function(O,W,it,dt){O.children.sort(dt);for(var yt=this.toBBox,b=Xt(O,0,W,yt),k=Xt(O,it-W,it,yt),Z=vt(b)+vt(k),ft=W;ft<it-W;ft++){var ht=O.children[ft];At(b,O.leaf?yt(ht):ht),Z+=vt(b)}for(var Vt=it-W-1;Vt>=W;Vt--){var kt=O.children[Vt];At(k,O.leaf?yt(kt):kt),Z+=vt(k)}return Z},rt.prototype._adjustParentBBoxes=function(O,W,it){for(var dt=it;dt>=0;dt--)At(W[dt],O)},rt.prototype._condense=function(O){for(var W=O.length-1,it=void 0;W>=0;W--)0===O[W].children.length?W>0?(it=O[W-1].children).splice(it.indexOf(O[W]),1):this.clear():ie(O[W],this.toBBox)},rt}()}},Ke=>{Ke(Ke.s=646)}]),(()=>{"use strict";var Ke,_n={},oi={};function Jt(rt){var Ht=oi[rt];if(void 0!==Ht)return Ht.exports;var ie=oi[rt]={exports:{}};return _n[rt].call(ie.exports,ie,ie.exports,Jt),ie.exports}Jt.m=_n,Ke=[],Jt.O=(rt,Ht,ie,Xt)=>{if(!Ht){var At=1/0;for(vt=0;vt<Ke.length;vt++){for(var[Ht,ie,Xt]=Ke[vt],pe=!0,ue=0;ue<Ht.length;ue++)(!1&Xt||At>=Xt)&&Object.keys(Jt.O).every(Fe=>Jt.O[Fe](Ht[ue]))?Ht.splice(ue--,1):(pe=!1,Xt<At&&(At=Xt));if(pe){Ke.splice(vt--,1);var Xe=ie();void 0!==Xe&&(rt=Xe)}}return rt}Xt=Xt||0;for(var vt=Ke.length;vt>0&&Ke[vt-1][2]>Xt;vt--)Ke[vt]=Ke[vt-1];Ke[vt]=[Ht,ie,Xt]},Jt.o=(rt,Ht)=>Object.prototype.hasOwnProperty.call(rt,Ht),(()=>{var rt={666:0};Jt.O.j=Xt=>0===rt[Xt];var Ht=(Xt,At)=>{var pe,ue,[Xe,vt,Ve]=At,Nt=0;if(Xe.some(Fe=>0!==rt[Fe])){for(pe in vt)Jt.o(vt,pe)&&(Jt.m[pe]=vt[pe]);if(Ve)var Re=Ve(Jt)}for(Xt&&Xt(At);Nt<Xe.length;Nt++)Jt.o(rt,ue=Xe[Nt])&&rt[ue]&&rt[ue][0](),rt[ue]=0;return Jt.O(Re)},ie=self.webpackChunkview_component=self.webpackChunkview_component||[];ie.forEach(Ht.bind(null,0)),ie.push=Ht.bind(null,ie.push.bind(ie))})()})(),(self.webpackChunkview_component=self.webpackChunkview_component||[]).push([[429],{332:()=>{!function(I){const j=I.performance;function X(It){j&&j.mark&&j.mark(It)}function U(It,St){j&&j.measure&&j.measure(It,St)}X("Zone");const Q=I.__Zone_symbol_prefix||"__zone_symbol__";function J(It){return Q+It}const gt=!0===I[J("forceDuplicateZoneCheck")];if(I.Zone){if(gt||"function"!=typeof I.Zone.__symbol__)throw new Error("Zone already loaded.");return I.Zone}let _t=(()=>{class It{static#t=this.__symbol__=J;static assertZonePatched(){if(I.Promise!==mi.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let E=It.current;for(;E.parent;)E=E.parent;return E}static get current(){return ni.zone}static get currentTask(){return vn}static __load_patch(E,R,q=!1){if(mi.hasOwnProperty(E)){if(!q&&gt)throw Error("Already loaded patch: "+E)}else if(!I["__Zone_disable_"+E]){const H="Zone:"+E;X(H),mi[E]=R(I,It,Gt),U(H,H)}}get parent(){return this._parent}get name(){return this._name}constructor(E,R){this._parent=E,this._name=R?R.name||"unnamed":"<root>",this._properties=R&&R.properties||{},this._zoneDelegate=new zt(this,this._parent&&this._parent._zoneDelegate,R)}get(E){const R=this.getZoneWith(E);if(R)return R._properties[E]}getZoneWith(E){let R=this;for(;R;){if(R._properties.hasOwnProperty(E))return R;R=R._parent}return null}fork(E){if(!E)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,E)}wrap(E,R){if("function"!=typeof E)throw new Error("Expecting function got: "+E);const q=this._zoneDelegate.intercept(this,E,R),H=this;return function(){return H.runGuarded(q,this,arguments,R)}}run(E,R,q,H){ni={parent:ni,zone:this};try{return this._zoneDelegate.invoke(this,E,R,q,H)}finally{ni=ni.parent}}runGuarded(E,R=null,q,H){ni={parent:ni,zone:this};try{try{return this._zoneDelegate.invoke(this,E,R,q,H)}catch(B){if(this._zoneDelegate.handleError(this,B))throw B}}finally{ni=ni.parent}}runTask(E,R,q){if(E.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(E.zone||Ci).name+"; Execution: "+this.name+")");if(E.state===Oe&&(E.type===li||E.type===Ni))return;const H=E.state!=Y;H&&E._transitionTo(Y,Ie),E.runCount++;const B=vn;vn=E,ni={parent:ni,zone:this};try{E.type==Ni&&E.data&&!E.data.isPeriodic&&(E.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,E,R,q)}catch(pt){if(this._zoneDelegate.handleError(this,pt))throw pt}}finally{E.state!==Oe&&E.state!==xt&&(E.type==li||E.data&&E.data.isPeriodic?H&&E._transitionTo(Ie,Y):(E.runCount=0,this._updateTaskCount(E,-1),H&&E._transitionTo(Oe,Y,Oe))),ni=ni.parent,vn=B}}scheduleTask(E){if(E.zone&&E.zone!==this){let q=this;for(;q;){if(q===E.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${E.zone.name}`);q=q.parent}}E._transitionTo(Be,Oe);const R=[];E._zoneDelegates=R,E._zone=this;try{E=this._zoneDelegate.scheduleTask(this,E)}catch(q){throw E._transitionTo(xt,Be,Oe),this._zoneDelegate.handleError(this,q),q}return E._zoneDelegates===R&&this._updateTaskCount(E,1),E.state==Be&&E._transitionTo(Ie,Be),E}scheduleMicroTask(E,R,q,H){return this.scheduleTask(new Ot(Di,E,R,q,H,void 0))}scheduleMacroTask(E,R,q,H,B){return this.scheduleTask(new Ot(Ni,E,R,q,H,B))}scheduleEventTask(E,R,q,H,B){return this.scheduleTask(new Ot(li,E,R,q,H,B))}cancelTask(E){if(E.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(E.zone||Ci).name+"; Execution: "+this.name+")");if(E.state===Ie||E.state===Y){E._transitionTo(Rt,Ie,Y);try{this._zoneDelegate.cancelTask(this,E)}catch(R){throw E._transitionTo(xt,Rt),this._zoneDelegate.handleError(this,R),R}return this._updateTaskCount(E,-1),E._transitionTo(Oe,Rt),E.runCount=0,E}}_updateTaskCount(E,R){const q=E._zoneDelegates;-1==R&&(E._zoneDelegates=null);for(let H=0;H<q.length;H++)q[H]._updateTaskCount(E.type,R)}}return It})();const wt={name:"",onHasTask:(It,St,E,R)=>It.hasTask(E,R),onScheduleTask:(It,St,E,R)=>It.scheduleTask(E,R),onInvokeTask:(It,St,E,R,q,H)=>It.invokeTask(E,R,q,H),onCancelTask:(It,St,E,R)=>It.cancelTask(E,R)};class zt{constructor(St,E,R){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=St,this._parentDelegate=E,this._forkZS=R&&(R&&R.onFork?R:E._forkZS),this._forkDlgt=R&&(R.onFork?E:E._forkDlgt),this._forkCurrZone=R&&(R.onFork?this.zone:E._forkCurrZone),this._interceptZS=R&&(R.onIntercept?R:E._interceptZS),this._interceptDlgt=R&&(R.onIntercept?E:E._interceptDlgt),this._interceptCurrZone=R&&(R.onIntercept?this.zone:E._interceptCurrZone),this._invokeZS=R&&(R.onInvoke?R:E._invokeZS),this._invokeDlgt=R&&(R.onInvoke?E:E._invokeDlgt),this._invokeCurrZone=R&&(R.onInvoke?this.zone:E._invokeCurrZone),this._handleErrorZS=R&&(R.onHandleError?R:E._handleErrorZS),this._handleErrorDlgt=R&&(R.onHandleError?E:E._handleErrorDlgt),this._handleErrorCurrZone=R&&(R.onHandleError?this.zone:E._handleErrorCurrZone),this._scheduleTaskZS=R&&(R.onScheduleTask?R:E._scheduleTaskZS),this._scheduleTaskDlgt=R&&(R.onScheduleTask?E:E._scheduleTaskDlgt),this._scheduleTaskCurrZone=R&&(R.onScheduleTask?this.zone:E._scheduleTaskCurrZone),this._invokeTaskZS=R&&(R.onInvokeTask?R:E._invokeTaskZS),this._invokeTaskDlgt=R&&(R.onInvokeTask?E:E._invokeTaskDlgt),this._invokeTaskCurrZone=R&&(R.onInvokeTask?this.zone:E._invokeTaskCurrZone),this._cancelTaskZS=R&&(R.onCancelTask?R:E._cancelTaskZS),this._cancelTaskDlgt=R&&(R.onCancelTask?E:E._cancelTaskDlgt),this._cancelTaskCurrZone=R&&(R.onCancelTask?this.zone:E._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const q=R&&R.onHasTask;(q||E&&E._hasTaskZS)&&(this._hasTaskZS=q?R:wt,this._hasTaskDlgt=E,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=St,R.onScheduleTask||(this._scheduleTaskZS=wt,this._scheduleTaskDlgt=E,this._scheduleTaskCurrZone=this.zone),R.onInvokeTask||(this._invokeTaskZS=wt,this._invokeTaskDlgt=E,this._invokeTaskCurrZone=this.zone),R.onCancelTask||(this._cancelTaskZS=wt,this._cancelTaskDlgt=E,this._cancelTaskCurrZone=this.zone))}fork(St,E){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,St,E):new _t(St,E)}intercept(St,E,R){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,St,E,R):E}invoke(St,E,R,q,H){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,St,E,R,q,H):E.apply(R,q)}handleError(St,E){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,St,E)}scheduleTask(St,E){let R=E;if(this._scheduleTaskZS)this._hasTaskZS&&R._zoneDelegates.push(this._hasTaskDlgtOwner),R=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,St,E),R||(R=E);else if(E.scheduleFn)E.scheduleFn(E);else{if(E.type!=Di)throw new Error("Task is missing scheduleFn.");ne(E)}return R}invokeTask(St,E,R,q){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,St,E,R,q):E.callback.apply(R,q)}cancelTask(St,E){let R;if(this._cancelTaskZS)R=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,St,E);else{if(!E.cancelFn)throw Error("Task is not cancelable");R=E.cancelFn(E)}return R}hasTask(St,E){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,St,E)}catch(R){this.handleError(St,R)}}_updateTaskCount(St,E){const R=this._taskCounts,q=R[St],H=R[St]=q+E;if(H<0)throw new Error("More tasks executed then were scheduled.");0!=q&&0!=H||this.hasTask(this.zone,{microTask:R.microTask>0,macroTask:R.macroTask>0,eventTask:R.eventTask>0,change:St})}}class Ot{constructor(St,E,R,q,H,B){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=St,this.source=E,this.data=q,this.scheduleFn=H,this.cancelFn=B,!R)throw new Error("callback is not defined");this.callback=R;const pt=this;this.invoke=St===li&&q&&q.useG?Ot.invokeTask:function(){return Ot.invokeTask.call(I,pt,this,arguments)}}static invokeTask(St,E,R){St||(St=this),Fn++;try{return St.runCount++,St.zone.runTask(St,E,R)}finally{1==Fn&&bt(),Fn--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(Oe,Be)}_transitionTo(St,E,R){if(this._state!==E&&this._state!==R)throw new Error(`${this.type} '${this.source}': can not transition to '${St}', expecting state '${E}'${R?" or '"+R+"'":""}, was '${this._state}'.`);this._state=St,St==Oe&&(this._zoneDelegates=null)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const ae=J("setTimeout"),Bt=J("Promise"),le=J("then");let Te,fe=[],Je=!1;function bi(It){if(Te||I[Bt]&&(Te=I[Bt].resolve(0)),Te){let St=Te[le];St||(St=Te.then),St.call(Te,It)}else I[ae](It,0)}function ne(It){0===Fn&&0===fe.length&&bi(bt),It&&fe.push(It)}function bt(){if(!Je){for(Je=!0;fe.length;){const It=fe;fe=[];for(let St=0;St<It.length;St++){const E=It[St];try{E.zone.runTask(E,null,null)}catch(R){Gt.onUnhandledError(R)}}}Gt.microtaskDrainDone(),Je=!1}}const Ci={name:"NO ZONE"},Oe="notScheduled",Be="scheduling",Ie="scheduled",Y="running",Rt="canceling",xt="unknown",Di="microTask",Ni="macroTask",li="eventTask",mi={},Gt={symbol:J,currentZoneFrame:()=>ni,onUnhandledError:hi,microtaskDrainDone:hi,scheduleMicroTask:ne,showUncaughtError:()=>!_t[J("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:hi,patchMethod:()=>hi,bindArguments:()=>[],patchThen:()=>hi,patchMacroTask:()=>hi,patchEventPrototype:()=>hi,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>hi,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>hi,wrapWithCurrentZone:()=>hi,filterProperties:()=>[],attachOriginToPatched:()=>hi,_redefineProperty:()=>hi,patchCallbacks:()=>hi,nativeScheduleMicroTask:bi};let ni={parent:null,zone:new _t(null,null)},vn=null,Fn=0;function hi(){}U("Zone","Zone"),I.Zone=_t}(globalThis);const Ke=Object.getOwnPropertyDescriptor,_n=Object.defineProperty,oi=Object.getPrototypeOf,Jt=Object.create,rt=Array.prototype.slice,Ht="addEventListener",ie="removeEventListener",Xt=Zone.__symbol__(Ht),At=Zone.__symbol__(ie),pe="true",ue="false",Xe=Zone.__symbol__("");function vt(I,j){return Zone.current.wrap(I,j)}function Ve(I,j,X,U,Q){return Zone.current.scheduleMacroTask(I,j,X,U,Q)}const Nt=Zone.__symbol__,Re=typeof window<"u",Fe=Re?window:void 0,O=Re&&Fe||globalThis,W="removeAttribute";function it(I,j){for(let X=I.length-1;X>=0;X--)"function"==typeof I[X]&&(I[X]=vt(I[X],j+"_"+X));return I}function dt(I){return!I||!1!==I.writable&&!("function"==typeof I.get&&typeof I.set>"u")}const yt=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,b=!("nw"in O)&&typeof O.process<"u"&&"[object process]"==={}.toString.call(O.process),k=!b&&!yt&&!(!Re||!Fe.HTMLElement),Z=typeof O.process<"u"&&"[object process]"==={}.toString.call(O.process)&&!yt&&!(!Re||!Fe.HTMLElement),ft={},ht=function(I){if(!(I=I||O.event))return;let j=ft[I.type];j||(j=ft[I.type]=Nt("ON_PROPERTY"+I.type));const X=this||I.target||O,U=X[j];let Q;return k&&X===Fe&&"error"===I.type?(Q=U&&U.call(this,I.message,I.filename,I.lineno,I.colno,I.error),!0===Q&&I.preventDefault()):(Q=U&&U.apply(this,arguments),null!=Q&&!Q&&I.preventDefault()),Q};function Vt(I,j,X){let U=Ke(I,j);if(!U&&X&&Ke(X,j)&&(U={enumerable:!0,configurable:!0}),!U||!U.configurable)return;const Q=Nt("on"+j+"patched");if(I.hasOwnProperty(Q)&&I[Q])return;delete U.writable,delete U.value;const J=U.get,gt=U.set,_t=j.slice(2);let wt=ft[_t];wt||(wt=ft[_t]=Nt("ON_PROPERTY"+_t)),U.set=function(zt){let Ot=this;!Ot&&I===O&&(Ot=O),Ot&&("function"==typeof Ot[wt]&&Ot.removeEventListener(_t,ht),gt&&gt.call(Ot,null),Ot[wt]=zt,"function"==typeof zt&&Ot.addEventListener(_t,ht,!1))},U.get=function(){let zt=this;if(!zt&&I===O&&(zt=O),!zt)return null;const Ot=zt[wt];if(Ot)return Ot;if(J){let ae=J.call(this);if(ae)return U.set.call(this,ae),"function"==typeof zt[W]&&zt.removeAttribute(j),ae}return null},_n(I,j,U),I[Q]=!0}function kt(I,j,X){if(j)for(let U=0;U<j.length;U++)Vt(I,"on"+j[U],X);else{const U=[];for(const Q in I)"on"==Q.slice(0,2)&&U.push(Q);for(let Q=0;Q<U.length;Q++)Vt(I,U[Q],X)}}const tt=Nt("originalInstance");function Dt(I){const j=O[I];if(!j)return;O[Nt(I)]=j,O[I]=function(){const Q=it(arguments,I);switch(Q.length){case 0:this[tt]=new j;break;case 1:this[tt]=new j(Q[0]);break;case 2:this[tt]=new j(Q[0],Q[1]);break;case 3:this[tt]=new j(Q[0],Q[1],Q[2]);break;case 4:this[tt]=new j(Q[0],Q[1],Q[2],Q[3]);break;default:throw new Error("Arg list too long.")}},Ce(O[I],j);const X=new j(function(){});let U;for(U in X)"XMLHttpRequest"===I&&"responseBlob"===U||function(Q){"function"==typeof X[Q]?O[I].prototype[Q]=function(){return this[tt][Q].apply(this[tt],arguments)}:_n(O[I].prototype,Q,{set:function(J){"function"==typeof J?(this[tt][Q]=vt(J,I+"."+Q),Ce(this[tt][Q],J)):this[tt][Q]=J},get:function(){return this[tt][Q]}})}(U);for(U in j)"prototype"!==U&&j.hasOwnProperty(U)&&(O[I][U]=j[U])}function Pt(I,j,X){let U=I;for(;U&&!U.hasOwnProperty(j);)U=oi(U);!U&&I[j]&&(U=I);const Q=Nt(j);let J=null;if(U&&(!(J=U[Q])||!U.hasOwnProperty(Q))&&(J=U[Q]=U[j],dt(U&&Ke(U,j)))){const gt=X(J,Q,j);U[j]=function(){return gt(this,arguments)},Ce(U[j],J)}return J}function ai(I,j,X){let U=null;function Q(J){const gt=J.data;return gt.args[gt.cbIdx]=function(){J.invoke.apply(this,arguments)},U.apply(gt.target,gt.args),J}U=Pt(I,j,J=>function(gt,_t){const wt=X(gt,_t);return wt.cbIdx>=0&&"function"==typeof _t[wt.cbIdx]?Ve(wt.name,_t[wt.cbIdx],wt,Q):J.apply(gt,_t)})}function Ce(I,j){I[Nt("OriginalDelegate")]=j}let Me=!1,Ye=!1;function Rr(){if(Me)return Ye;Me=!0;try{const I=Fe.navigator.userAgent;(-1!==I.indexOf("MSIE ")||-1!==I.indexOf("Trident/")||-1!==I.indexOf("Edge/"))&&(Ye=!0)}catch{}return Ye}Zone.__load_patch("ZoneAwarePromise",(I,j,X)=>{const U=Object.getOwnPropertyDescriptor,Q=Object.defineProperty,J=X.symbol,gt=[],_t=!1!==I[J("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],wt=J("Promise"),zt=J("then"),Ot="__creationTrace__";X.onUnhandledError=q=>{if(X.showUncaughtError()){const H=q&&q.rejection;H?console.error("Unhandled Promise rejection:",H instanceof Error?H.message:H,"; Zone:",q.zone.name,"; Task:",q.task&&q.task.source,"; Value:",H,H instanceof Error?H.stack:void 0):console.error(q)}},X.microtaskDrainDone=()=>{for(;gt.length;){const q=gt.shift();try{q.zone.runGuarded(()=>{throw q.throwOriginal?q.rejection:q})}catch(H){Bt(H)}}};const ae=J("unhandledPromiseRejectionHandler");function Bt(q){X.onUnhandledError(q);try{const H=j[ae];"function"==typeof H&&H.call(this,q)}catch{}}function le(q){return q&&q.then}function Te(q){return q}function fe(q){return It.reject(q)}const Je=J("state"),bi=J("value"),ne=J("finally"),bt=J("parentPromiseValue"),Ci=J("parentPromiseState"),Oe="Promise.then",Be=null,Ie=!0,Y=!1,Rt=0;function xt(q,H){return B=>{try{mi(q,H,B)}catch(pt){mi(q,!1,pt)}}}const Di=function(){let q=!1;return function(H){return function(){q||(q=!0,H.apply(null,arguments))}}},Ni="Promise resolved with itself",li=J("currentTaskTrace");function mi(q,H,B){const pt=Di();if(q===B)throw new TypeError(Ni);if(q[Je]===Be){let Lt=null;try{("object"==typeof B||"function"==typeof B)&&(Lt=B&&B.then)}catch(Ct){return pt(()=>{mi(q,!1,Ct)})(),q}if(H!==Y&&B instanceof It&&B.hasOwnProperty(Je)&&B.hasOwnProperty(bi)&&B[Je]!==Be)ni(B),mi(q,B[Je],B[bi]);else if(H!==Y&&"function"==typeof Lt)try{Lt.call(B,pt(xt(q,H)),pt(xt(q,!1)))}catch(Ct){pt(()=>{mi(q,!1,Ct)})()}else{q[Je]=H;const Ct=q[bi];if(q[bi]=B,q[ne]===ne&&H===Ie&&(q[Je]=q[Ci],q[bi]=q[bt]),H===Y&&B instanceof Error){const Ft=j.currentTask&&j.currentTask.data&&j.currentTask.data[Ot];Ft&&Q(B,li,{configurable:!0,enumerable:!1,writable:!0,value:Ft})}for(let Ft=0;Ft<Ct.length;)vn(q,Ct[Ft++],Ct[Ft++],Ct[Ft++],Ct[Ft++]);if(0==Ct.length&&H==Y){q[Je]=Rt;let Ft=B;try{throw new Error("Uncaught (in promise): "+((Ze=B)&&Ze.toString===Object.prototype.toString?(Ze.constructor&&Ze.constructor.name||"")+": "+JSON.stringify(Ze):Ze?Ze.toString():Object.prototype.toString.call(Ze))+(B&&B.stack?"\n"+B.stack:""))}catch(ge){Ft=ge}_t&&(Ft.throwOriginal=!0),Ft.rejection=B,Ft.promise=q,Ft.zone=j.current,Ft.task=j.currentTask,gt.push(Ft),X.scheduleMicroTask()}}}var Ze;return q}const Gt=J("rejectionHandledHandler");function ni(q){if(q[Je]===Rt){try{const H=j[Gt];H&&"function"==typeof H&&H.call(this,{rejection:q[bi],promise:q})}catch{}q[Je]=Y;for(let H=0;H<gt.length;H++)q===gt[H].promise&&gt.splice(H,1)}}function vn(q,H,B,pt,Lt){ni(q);const Ct=q[Je],Ft=Ct?"function"==typeof pt?pt:Te:"function"==typeof Lt?Lt:fe;H.scheduleMicroTask(Oe,()=>{try{const ge=q[bi],Ze=!!B&&ne===B[ne];Ze&&(B[bt]=ge,B[Ci]=Ct);const si=H.run(Ft,void 0,Ze&&Ft!==fe&&Ft!==Te?[]:[ge]);mi(B,!0,si)}catch(ge){mi(B,!1,ge)}},B)}const Fn=function(){},hi=I.AggregateError;class It{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(H){return mi(new this(null),Ie,H)}static reject(H){return mi(new this(null),Y,H)}static any(H){if(!H||"function"!=typeof H[Symbol.iterator])return Promise.reject(new hi([],"All promises were rejected"));const B=[];let pt=0;try{for(let Ft of H)pt++,B.push(It.resolve(Ft))}catch{return Promise.reject(new hi([],"All promises were rejected"))}if(0===pt)return Promise.reject(new hi([],"All promises were rejected"));let Lt=!1;const Ct=[];return new It((Ft,ge)=>{for(let Ze=0;Ze<B.length;Ze++)B[Ze].then(si=>{Lt||(Lt=!0,Ft(si))},si=>{Ct.push(si),pt--,0===pt&&(Lt=!0,ge(new hi(Ct,"All promises were rejected")))})})}static race(H){let B,pt,Lt=new this((ge,Ze)=>{B=ge,pt=Ze});function Ct(ge){B(ge)}function Ft(ge){pt(ge)}for(let ge of H)le(ge)||(ge=this.resolve(ge)),ge.then(Ct,Ft);return Lt}static all(H){return It.allWithCallback(H)}static allSettled(H){return(this&&this.prototype instanceof It?this:It).allWithCallback(H,{thenCallback:B=>({status:"fulfilled",value:B}),errorCallback:B=>({status:"rejected",reason:B})})}static allWithCallback(H,B){let pt,Lt,Ct=new this((si,ns)=>{pt=si,Lt=ns}),Ft=2,ge=0;const Ze=[];for(let si of H){le(si)||(si=this.resolve(si));const ns=ge;try{si.then(Wt=>{Ze[ns]=B?B.thenCallback(Wt):Wt,Ft--,0===Ft&&pt(Ze)},Wt=>{B?(Ze[ns]=B.errorCallback(Wt),Ft--,0===Ft&&pt(Ze)):Lt(Wt)})}catch(Wt){Lt(Wt)}Ft++,ge++}return Ft-=2,0===Ft&&pt(Ze),Ct}constructor(H){const B=this;if(!(B instanceof It))throw new Error("Must be an instanceof Promise.");B[Je]=Be,B[bi]=[];try{const pt=Di();H&&H(pt(xt(B,Ie)),pt(xt(B,Y)))}catch(pt){mi(B,!1,pt)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return It}then(H,B){let pt=this.constructor?.[Symbol.species];(!pt||"function"!=typeof pt)&&(pt=this.constructor||It);const Lt=new pt(Fn),Ct=j.current;return this[Je]==Be?this[bi].push(Ct,Lt,H,B):vn(this,Ct,Lt,H,B),Lt}catch(H){return this.then(null,H)}finally(H){let B=this.constructor?.[Symbol.species];(!B||"function"!=typeof B)&&(B=It);const pt=new B(Fn);pt[ne]=ne;const Lt=j.current;return this[Je]==Be?this[bi].push(Lt,pt,H,H):vn(this,Lt,pt,H,H),pt}}It.resolve=It.resolve,It.reject=It.reject,It.race=It.race,It.all=It.all;const St=I[wt]=I.Promise;I.Promise=It;const E=J("thenPatched");function R(q){const H=q.prototype,B=U(H,"then");if(B&&(!1===B.writable||!B.configurable))return;const pt=H.then;H[zt]=pt,q.prototype.then=function(Lt,Ct){return new It((Ft,ge)=>{pt.call(this,Ft,ge)}).then(Lt,Ct)},q[E]=!0}return X.patchThen=R,St&&(R(St),Pt(I,"fetch",q=>{return B=q,function(pt,Lt){let Ct=B.apply(pt,Lt);if(Ct instanceof It)return Ct;let Ft=Ct.constructor;return Ft[E]||R(Ft),Ct};var B})),Promise[j.__symbol__("uncaughtPromiseErrors")]=gt,It}),Zone.__load_patch("toString",I=>{const j=Function.prototype.toString,X=Nt("OriginalDelegate"),U=Nt("Promise"),Q=Nt("Error"),J=function(){if("function"==typeof this){const _t=this[X];if(_t)return"function"==typeof _t?j.call(_t):Object.prototype.toString.call(_t);if(this===Promise){const wt=I[U];if(wt)return j.call(wt)}if(this===Error){const wt=I[Q];if(wt)return j.call(wt)}}return j.call(this)};J[X]=j,Function.prototype.toString=J;const gt=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":gt.call(this)}});let Vn=!1;if(typeof window<"u")try{const I=Object.defineProperty({},"passive",{get:function(){Vn=!0}});window.addEventListener("test",I,I),window.removeEventListener("test",I,I)}catch{Vn=!1}const ki={useG:!0},tn={},hh={},Hs=new RegExp("^"+Xe+"(\\w+)(true|false)$"),Ra=Nt("propagationStopped");function en(I,j){const X=(j?j(I):I)+ue,U=(j?j(I):I)+pe,Q=Xe+X,J=Xe+U;tn[I]={},tn[I][ue]=Q,tn[I][pe]=J}function ln(I,j,X,U){const Q=U&&U.add||Ht,J=U&&U.rm||ie,gt=U&&U.listeners||"eventListeners",_t=U&&U.rmAll||"removeAllListeners",wt=Nt(Q),zt="."+Q+":",Ot="prependListener",ae="."+Ot+":",Bt=function(ne,bt,Ci){if(ne.isRemoved)return;const Oe=ne.callback;let Be;"object"==typeof Oe&&Oe.handleEvent&&(ne.callback=Y=>Oe.handleEvent(Y),ne.originalDelegate=Oe);try{ne.invoke(ne,bt,[Ci])}catch(Y){Be=Y}const Ie=ne.options;return Ie&&"object"==typeof Ie&&Ie.once&&bt[J].call(bt,Ci.type,ne.originalDelegate?ne.originalDelegate:ne.callback,Ie),Be};function le(ne,bt,Ci){if(!(bt=bt||I.event))return;const Oe=ne||bt.target||I,Be=Oe[tn[bt.type][Ci?pe:ue]];if(Be){const Ie=[];if(1===Be.length){const Y=Bt(Be[0],Oe,bt);Y&&Ie.push(Y)}else{const Y=Be.slice();for(let Rt=0;Rt<Y.length&&(!bt||!0!==bt[Ra]);Rt++){const xt=Bt(Y[Rt],Oe,bt);xt&&Ie.push(xt)}}if(1===Ie.length)throw Ie[0];for(let Y=0;Y<Ie.length;Y++){const Rt=Ie[Y];j.nativeScheduleMicroTask(()=>{throw Rt})}}}const Te=function(ne){return le(this,ne,!1)},fe=function(ne){return le(this,ne,!0)};function Je(ne,bt){if(!ne)return!1;let Ci=!0;bt&&void 0!==bt.useG&&(Ci=bt.useG);const Oe=bt&&bt.vh;let Be=!0;bt&&void 0!==bt.chkDup&&(Be=bt.chkDup);let Ie=!1;bt&&void 0!==bt.rt&&(Ie=bt.rt);let Y=ne;for(;Y&&!Y.hasOwnProperty(Q);)Y=oi(Y);if(!Y&&ne[Q]&&(Y=ne),!Y||Y[wt])return!1;const Rt=bt&&bt.eventNameToString,xt={},Di=Y[wt]=Y[Q],Ni=Y[Nt(J)]=Y[J],li=Y[Nt(gt)]=Y[gt],mi=Y[Nt(_t)]=Y[_t];let Gt;bt&&bt.prepend&&(Gt=Y[Nt(bt.prepend)]=Y[bt.prepend]);const ni=Ci?function(E){if(!xt.isExisting)return Di.call(xt.target,xt.eventName,xt.capture?fe:Te,xt.options)}:function(E){return Di.call(xt.target,xt.eventName,E.invoke,xt.options)},vn=Ci?function(E){if(!E.isRemoved){const R=tn[E.eventName];let q;R&&(q=R[E.capture?pe:ue]);const H=q&&E.target[q];if(H)for(let B=0;B<H.length;B++)if(H[B]===E){H.splice(B,1),E.isRemoved=!0,0===H.length&&(E.allRemoved=!0,E.target[q]=null);break}}if(E.allRemoved)return Ni.call(E.target,E.eventName,E.capture?fe:Te,E.options)}:function(E){return Ni.call(E.target,E.eventName,E.invoke,E.options)},Fn=bt&&bt.diff?bt.diff:function(E,R){const q=typeof R;return"function"===q&&E.callback===R||"object"===q&&E.originalDelegate===R},hi=Zone[Nt("UNPATCHED_EVENTS")],It=I[Nt("PASSIVE_EVENTS")],St=function(E,R,q,H,B=!1,pt=!1){return function(){const Lt=this||I;let Ct=arguments[0];bt&&bt.transferEventName&&(Ct=bt.transferEventName(Ct));let Ft=arguments[1];if(!Ft)return E.apply(this,arguments);if(b&&"uncaughtException"===Ct)return E.apply(this,arguments);let ge=!1;if("function"!=typeof Ft){if(!Ft.handleEvent)return E.apply(this,arguments);ge=!0}if(Oe&&!Oe(E,Ft,Lt,arguments))return;const Ze=Vn&&!!It&&-1!==It.indexOf(Ct),si=(Pi=arguments[2],!Vn&&"object"==typeof Pi&&Pi?!!Pi.capture:Vn&&Ze?"boolean"==typeof Pi?{capture:Pi,passive:!0}:Pi?"object"==typeof Pi&&!1!==Pi.passive?{...Pi,passive:!0}:Pi:{passive:!0}:Pi);var Pi;if(hi)for(let hn=0;hn<hi.length;hn++)if(Ct===hi[hn])return Ze?E.call(Lt,Ct,Ft,si):E.apply(this,arguments);const ns=!!si&&("boolean"==typeof si||si.capture),Wt=!(!si||"object"!=typeof si)&&si.once,Oa=Zone.current;let Yi=tn[Ct];Yi||(en(Ct,Rt),Yi=tn[Ct]);const Aa=Yi[ns?pe:ue];let Ii,Qt=Lt[Aa],Xs=!1;if(Qt){if(Xs=!0,Be)for(let hn=0;hn<Qt.length;hn++)if(Fn(Qt[hn],Ft))return}else Qt=Lt[Aa]=[];const co=Lt.constructor.name,Or=hh[co];Or&&(Ii=Or[Ct]),Ii||(Ii=co+R+(Rt?Rt(Ct):Ct)),xt.options=si,Wt&&(xt.options.once=!1),xt.target=Lt,xt.capture=ns,xt.eventName=Ct,xt.isExisting=Xs;const Ar=Ci?ki:void 0;Ar&&(Ar.taskData=xt);const Bn=Oa.scheduleEventTask(Ii,Ft,Ar,q,H);return xt.target=null,Ar&&(Ar.taskData=null),Wt&&(si.once=!0),!Vn&&"boolean"==typeof Bn.options||(Bn.options=si),Bn.target=Lt,Bn.capture=ns,Bn.eventName=Ct,ge&&(Bn.originalDelegate=Ft),pt?Qt.unshift(Bn):Qt.push(Bn),B?Lt:void 0}};return Y[Q]=St(Di,zt,ni,vn,Ie),Gt&&(Y[Ot]=St(Gt,ae,function(E){return Gt.call(xt.target,xt.eventName,E.invoke,xt.options)},vn,Ie,!0)),Y[J]=function(){const E=this||I;let R=arguments[0];bt&&bt.transferEventName&&(R=bt.transferEventName(R));const q=arguments[2],H=!!q&&("boolean"==typeof q||q.capture),B=arguments[1];if(!B)return Ni.apply(this,arguments);if(Oe&&!Oe(Ni,B,E,arguments))return;const pt=tn[R];let Lt;pt&&(Lt=pt[H?pe:ue]);const Ct=Lt&&E[Lt];if(Ct)for(let Ft=0;Ft<Ct.length;Ft++){const ge=Ct[Ft];if(Fn(ge,B))return Ct.splice(Ft,1),ge.isRemoved=!0,0===Ct.length&&(ge.allRemoved=!0,E[Lt]=null,"string"==typeof R)&&(E[Xe+"ON_PROPERTY"+R]=null),ge.zone.cancelTask(ge),Ie?E:void 0}return Ni.apply(this,arguments)},Y[gt]=function(){const E=this||I;let R=arguments[0];bt&&bt.transferEventName&&(R=bt.transferEventName(R));const q=[],H=uh(E,Rt?Rt(R):R);for(let B=0;B<H.length;B++){const pt=H[B];q.push(pt.originalDelegate?pt.originalDelegate:pt.callback)}return q},Y[_t]=function(){const E=this||I;let R=arguments[0];if(R){bt&&bt.transferEventName&&(R=bt.transferEventName(R));const q=tn[R];if(q){const H=E[q[ue]],B=E[q[pe]];if(H){const pt=H.slice();for(let Lt=0;Lt<pt.length;Lt++){const Ct=pt[Lt];this[J].call(this,R,Ct.originalDelegate?Ct.originalDelegate:Ct.callback,Ct.options)}}if(B){const pt=B.slice();for(let Lt=0;Lt<pt.length;Lt++){const Ct=pt[Lt];this[J].call(this,R,Ct.originalDelegate?Ct.originalDelegate:Ct.callback,Ct.options)}}}}else{const q=Object.keys(E);for(let H=0;H<q.length;H++){const B=Hs.exec(q[H]);let pt=B&&B[1];pt&&"removeListener"!==pt&&this[_t].call(this,pt)}this[_t].call(this,"removeListener")}if(Ie)return this},Ce(Y[Q],Di),Ce(Y[J],Ni),mi&&Ce(Y[_t],mi),li&&Ce(Y[gt],li),!0}let bi=[];for(let ne=0;ne<X.length;ne++)bi[ne]=Je(X[ne],U);return bi}function uh(I,j){if(!j){const J=[];for(let gt in I){const _t=Hs.exec(gt);let wt=_t&&_t[1];if(wt&&(!j||wt===j)){const zt=I[gt];if(zt)for(let Ot=0;Ot<zt.length;Ot++)J.push(zt[Ot])}}return J}let X=tn[j];X||(en(j),X=tn[j]);const U=I[X[ue]],Q=I[X[pe]];return U?Q?U.concat(Q):U.slice():Q?Q.slice():[]}function Rn(I,j){const X=I.Event;X&&X.prototype&&j.patchMethod(X.prototype,"stopImmediatePropagation",U=>function(Q,J){Q[Ra]=!0,U&&U.apply(Q,J)})}function Us(I,j,X,U,Q){const J=Zone.__symbol__(U);if(j[J])return;const gt=j[J]=j[U];j[U]=function(_t,wt,zt){return wt&&wt.prototype&&Q.forEach(function(Ot){const ae=`${X}.${U}::`+Ot,Bt=wt.prototype;try{if(Bt.hasOwnProperty(Ot)){const le=I.ObjectGetOwnPropertyDescriptor(Bt,Ot);le&&le.value?(le.value=I.wrapWithCurrentZone(le.value,ae),I._redefineProperty(wt.prototype,Ot,le)):Bt[Ot]&&(Bt[Ot]=I.wrapWithCurrentZone(Bt[Ot],ae))}else Bt[Ot]&&(Bt[Ot]=I.wrapWithCurrentZone(Bt[Ot],ae))}catch{}}),gt.call(j,_t,wt,zt)},I.attachOriginToPatched(j[U],gt)}function ch(I,j,X){if(!X||0===X.length)return j;const U=X.filter(J=>J.target===I);if(!U||0===U.length)return j;const Q=U[0].ignoreProperties;return j.filter(J=>-1===Q.indexOf(J))}function Fa(I,j,X,U){I&&kt(I,ch(I,j,X),U)}function uo(I){return Object.getOwnPropertyNames(I).filter(j=>j.startsWith("on")&&j.length>2).map(j=>j.substring(2))}Zone.__load_patch("util",(I,j,X)=>{const U=uo(I);X.patchOnProperties=kt,X.patchMethod=Pt,X.bindArguments=it,X.patchMacroTask=ai;const Q=j.__symbol__("BLACK_LISTED_EVENTS"),J=j.__symbol__("UNPATCHED_EVENTS");I[J]&&(I[Q]=I[J]),I[Q]&&(j[Q]=j[J]=I[Q]),X.patchEventPrototype=Rn,X.patchEventTarget=ln,X.isIEOrEdge=Rr,X.ObjectDefineProperty=_n,X.ObjectGetOwnPropertyDescriptor=Ke,X.ObjectCreate=Jt,X.ArraySlice=rt,X.patchClass=Dt,X.wrapWithCurrentZone=vt,X.filterProperties=ch,X.attachOriginToPatched=Ce,X._redefineProperty=Object.defineProperty,X.patchCallbacks=Us,X.getGlobalObjects=()=>({globalSources:hh,zoneSymbolEventNames:tn,eventNames:U,isBrowser:k,isMix:Z,isNode:b,TRUE_STR:pe,FALSE_STR:ue,ZONE_SYMBOL_PREFIX:Xe,ADD_EVENT_LISTENER_STR:Ht,REMOVE_EVENT_LISTENER_STR:ie})});const Fr=Nt("zoneTask");function bs(I,j,X,U){let Q=null,J=null;X+=U;const gt={};function _t(zt){const Ot=zt.data;return Ot.args[0]=function(){return zt.invoke.apply(this,arguments)},Ot.handleId=Q.apply(I,Ot.args),zt}function wt(zt){return J.call(I,zt.data.handleId)}Q=Pt(I,j+=U,zt=>function(Ot,ae){if("function"==typeof ae[0]){const Bt={isPeriodic:"Interval"===U,delay:"Timeout"===U||"Interval"===U?ae[1]||0:void 0,args:ae},le=ae[0];ae[0]=function(){try{return le.apply(this,arguments)}finally{Bt.isPeriodic||("number"==typeof Bt.handleId?delete gt[Bt.handleId]:Bt.handleId&&(Bt.handleId[Fr]=null))}};const Te=Ve(j,ae[0],Bt,_t,wt);if(!Te)return Te;const fe=Te.data.handleId;return"number"==typeof fe?gt[fe]=Te:fe&&(fe[Fr]=Te),fe&&fe.ref&&fe.unref&&"function"==typeof fe.ref&&"function"==typeof fe.unref&&(Te.ref=fe.ref.bind(fe),Te.unref=fe.unref.bind(fe)),"number"==typeof fe||fe?fe:Te}return zt.apply(I,ae)}),J=Pt(I,X,zt=>function(Ot,ae){const Bt=ae[0];let le;"number"==typeof Bt?le=gt[Bt]:(le=Bt&&Bt[Fr],le||(le=Bt)),le&&"string"==typeof le.type?"notScheduled"!==le.state&&(le.cancelFn&&le.data.isPeriodic||0===le.runCount)&&("number"==typeof Bt?delete gt[Bt]:Bt&&(Bt[Fr]=null),le.zone.cancelTask(le)):zt.apply(I,ae)})}Zone.__load_patch("legacy",I=>{const j=I[Zone.__symbol__("legacyPatch")];j&&j()}),Zone.__load_patch("timers",I=>{const j="set",X="clear";bs(I,j,X,"Timeout"),bs(I,j,X,"Interval"),bs(I,j,X,"Immediate")}),Zone.__load_patch("requestAnimationFrame",I=>{bs(I,"request","cancel","AnimationFrame"),bs(I,"mozRequest","mozCancel","AnimationFrame"),bs(I,"webkitRequest","webkitCancel","AnimationFrame")}),Zone.__load_patch("blocking",(I,j)=>{const X=["alert","prompt","confirm"];for(let U=0;U<X.length;U++)Pt(I,X[U],(Q,J,gt)=>function(_t,wt){return j.current.run(Q,I,wt,gt)})}),Zone.__load_patch("EventTarget",(I,j,X)=>{var gt;(gt=X).patchEventPrototype(I,gt),function(J,gt){if(Zone[gt.symbol("patchEventTarget")])return;const{eventNames:_t,zoneSymbolEventNames:wt,TRUE_STR:zt,FALSE_STR:Ot,ZONE_SYMBOL_PREFIX:ae}=gt.getGlobalObjects();for(let le=0;le<_t.length;le++){const Te=_t[le],fe=ae+(Te+Ot),Je=ae+(Te+zt);wt[Te]={},wt[Te][Ot]=fe,wt[Te][zt]=Je}const Bt=J.EventTarget;Bt&&Bt.prototype&&gt.patchEventTarget(J,gt,[Bt&&Bt.prototype])}(I,X);const U=I.XMLHttpRequestEventTarget;U&&U.prototype&&X.patchEventTarget(I,X,[U.prototype])}),Zone.__load_patch("MutationObserver",(I,j,X)=>{Dt("MutationObserver"),Dt("WebKitMutationObserver")}),Zone.__load_patch("IntersectionObserver",(I,j,X)=>{Dt("IntersectionObserver")}),Zone.__load_patch("FileReader",(I,j,X)=>{Dt("FileReader")}),Zone.__load_patch("on_property",(I,j,X)=>{!function(Q,J){if(b&&!Z||Zone[Q.symbol("patchEvents")])return;const gt=J.__Zone_ignore_on_properties;let _t=[];if(k){const wt=window;_t=_t.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);const zt=function(){try{const ae=Fe.navigator.userAgent;if(-1!==ae.indexOf("MSIE ")||-1!==ae.indexOf("Trident/"))return!0}catch{}return!1}()?[{target:wt,ignoreProperties:["error"]}]:[];Fa(wt,uo(wt),gt&&gt.concat(zt),oi(wt))}_t=_t.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let wt=0;wt<_t.length;wt++){const zt=J[_t[wt]];zt&&zt.prototype&&Fa(zt.prototype,uo(zt.prototype),gt)}}(X,I)}),Zone.__load_patch("customElements",(I,j,X)=>{!function(Q,J){const{isBrowser:gt,isMix:_t}=J.getGlobalObjects();(gt||_t)&&Q.customElements&&"customElements"in Q&&J.patchCallbacks(J,Q.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(I,X)}),Zone.__load_patch("XHR",(I,j)=>{!function(zt){const Ot=zt.XMLHttpRequest;if(!Ot)return;const ae=Ot.prototype;let Bt=ae[Xt],le=ae[At];if(!Bt){const Y=zt.XMLHttpRequestEventTarget;if(Y){const Rt=Y.prototype;Bt=Rt[Xt],le=Rt[At]}}const Te="readystatechange",fe="scheduled";function Je(Y){const Rt=Y.data,xt=Rt.target;xt[J]=!1,xt[_t]=!1;const Di=xt[Q];Bt||(Bt=xt[Xt],le=xt[At]),Di&&le.call(xt,Te,Di);const Ni=xt[Q]=()=>{if(xt.readyState===xt.DONE)if(!Rt.aborted&&xt[J]&&Y.state===fe){const li=xt[j.__symbol__("loadfalse")];if(0!==xt.status&&li&&li.length>0){const mi=Y.invoke;Y.invoke=function(){const Gt=xt[j.__symbol__("loadfalse")];for(let ni=0;ni<Gt.length;ni++)Gt[ni]===Y&&Gt.splice(ni,1);!Rt.aborted&&Y.state===fe&&mi.call(Y)},li.push(Y)}else Y.invoke()}else!Rt.aborted&&!1===xt[J]&&(xt[_t]=!0)};return Bt.call(xt,Te,Ni),xt[X]||(xt[X]=Y),Be.apply(xt,Rt.args),xt[J]=!0,Y}function bi(){}function ne(Y){const Rt=Y.data;return Rt.aborted=!0,Ie.apply(Rt.target,Rt.args)}const bt=Pt(ae,"open",()=>function(Y,Rt){return Y[U]=0==Rt[2],Y[gt]=Rt[1],bt.apply(Y,Rt)}),Ci=Nt("fetchTaskAborting"),Oe=Nt("fetchTaskScheduling"),Be=Pt(ae,"send",()=>function(Y,Rt){if(!0===j.current[Oe]||Y[U])return Be.apply(Y,Rt);{const xt={target:Y,url:Y[gt],isPeriodic:!1,args:Rt,aborted:!1},Di=Ve("XMLHttpRequest.send",bi,xt,Je,ne);Y&&!0===Y[_t]&&!xt.aborted&&Di.state===fe&&Di.invoke()}}),Ie=Pt(ae,"abort",()=>function(Y,Rt){const xt=Y[X];if(xt&&"string"==typeof xt.type){if(null==xt.cancelFn||xt.data&&xt.data.aborted)return;xt.zone.cancelTask(xt)}else if(!0===j.current[Ci])return Ie.apply(Y,Rt)})}(I);const X=Nt("xhrTask"),U=Nt("xhrSync"),Q=Nt("xhrListener"),J=Nt("xhrScheduled"),gt=Nt("xhrURL"),_t=Nt("xhrErrorBeforeScheduled")}),Zone.__load_patch("geolocation",I=>{I.navigator&&I.navigator.geolocation&&function(X,U){const Q=X.constructor.name;for(let J=0;J<U.length;J++){const gt=U[J],_t=X[gt];if(_t){if(!dt(Ke(X,gt)))continue;X[gt]=(wt=>{const zt=function(){return wt.apply(this,it(arguments,Q+"."+gt))};return Ce(zt,wt),zt})(_t)}}}(I.navigator.geolocation,["getCurrentPosition","watchPosition"])}),Zone.__load_patch("PromiseRejectionEvent",(I,j)=>{function X(U){return function(Q){uh(I,U).forEach(J=>{const gt=I.PromiseRejectionEvent;if(gt){const _t=new gt(U,{promise:Q.promise,reason:Q.rejection});J.invoke(_t)}})}}I.PromiseRejectionEvent&&(j[Nt("unhandledPromiseRejectionHandler")]=X("unhandledrejection"),j[Nt("rejectionHandledHandler")]=X("rejectionhandled"))}),Zone.__load_patch("queueMicrotask",(I,j,X)=>{X.patchMethod(I,"queueMicrotask",gt=>function(_t,wt){Zone.current.scheduleMicroTask("queueMicrotask",wt[0])})})}},Ke=>{Ke(Ke.s=332)}]);